"use strict";(()=>{var PI=Object.create;var Cx=Object.defineProperty;var _I=Object.getOwnPropertyDescriptor;var DI=Object.getOwnPropertyNames;var FI=Object.getPrototypeOf,BI=Object.prototype.hasOwnProperty;var Hr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var zI=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of DI(e))!BI.call(t,i)&&i!==n&&Cx(t,i,{get:()=>e[i],enumerable:!(r=_I(e,i))||r.enumerable});return t};var hr=(t,e,n)=>(n=t!=null?PI(FI(t)):{},zI(e||!t||!t.__esModule?Cx(n,"default",{value:t,enumerable:!0}):n,t));var _x=Hr(q=>{"use strict";var Wl=Symbol.for("react.element"),UI=Symbol.for("react.portal"),VI=Symbol.for("react.fragment"),HI=Symbol.for("react.strict_mode"),WI=Symbol.for("react.profiler"),jI=Symbol.for("react.provider"),GI=Symbol.for("react.context"),$I=Symbol.for("react.forward_ref"),KI=Symbol.for("react.suspense"),qI=Symbol.for("react.memo"),YI=Symbol.for("react.lazy"),Ex=Symbol.iterator;function XI(t){return t===null||typeof t!="object"?null:(t=Ex&&t[Ex]||t["@@iterator"],typeof t=="function"?t:null)}var Ax={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rx=Object.assign,Ox={};function us(t,e,n){this.props=t,this.context=e,this.refs=Ox,this.updater=n||Ax}us.prototype.isReactComponent={};us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ix(){}Ix.prototype=us.prototype;function bp(t,e,n){this.props=t,this.context=e,this.refs=Ox,this.updater=n||Ax}var Tp=bp.prototype=new Ix;Tp.constructor=bp;Rx(Tp,us.prototype);Tp.isPureReactComponent=!0;var bx=Array.isArray,Mx=Object.prototype.hasOwnProperty,Ap={current:null},Lx={key:!0,ref:!0,__self:!0,__source:!0};function Nx(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Mx.call(e,r)&&!Lx.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Wl,type:t,key:o,ref:s,props:i,_owner:Ap.current}}function ZI(t,e){return{$$typeof:Wl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wl}function QI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tx=/\/+/g;function Ep(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QI(""+t.key):e.toString(36)}function ic(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Wl:case UI:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ep(s,0):r,bx(i)?(n="",t!=null&&(n=t.replace(Tx,"$&/")+"/"),ic(i,e,n,"",function(u){return u})):i!=null&&(Rp(i)&&(i=ZI(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Tx,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",bx(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Ep(o,l);s+=ic(o,e,n,a,i)}else if(a=XI(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Ep(o,l++),s+=ic(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function rc(t,e,n){if(t==null)return t;var r=[],i=0;return ic(t,r,"","",function(o){return e.call(n,o,i++)}),r}function JI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},oc={transition:null},eM={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:oc,ReactCurrentOwner:Ap};function Px(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:rc,forEach:function(t,e,n){rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rc(t,function(){e++}),e},toArray:function(t){return rc(t,function(e){return e})||[]},only:function(t){if(!Rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=us;q.Fragment=VI;q.Profiler=WI;q.PureComponent=bp;q.StrictMode=HI;q.Suspense=KI;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eM;q.act=Px;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rx({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ap.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Mx.call(e,a)&&!Lx.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Wl,type:t.type,key:i,ref:o,props:r,_owner:s}};q.createContext=function(t){return t={$$typeof:GI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jI,_context:t},t.Consumer=t};q.createElement=Nx;q.createFactory=function(t){var e=Nx.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:$I,render:t}};q.isValidElement=Rp;q.lazy=function(t){return{$$typeof:YI,_payload:{_status:-1,_result:t},_init:JI}};q.memo=function(t,e){return{$$typeof:qI,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=oc.transition;oc.transition={};try{t()}finally{oc.transition=e}};q.unstable_act=Px;q.useCallback=function(t,e){return Ht.current.useCallback(t,e)};q.useContext=function(t){return Ht.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};q.useEffect=function(t,e){return Ht.current.useEffect(t,e)};q.useId=function(){return Ht.current.useId()};q.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Ht.current.useMemo(t,e)};q.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};q.useRef=function(t){return Ht.current.useRef(t)};q.useState=function(t){return Ht.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return Ht.current.useTransition()};q.version="18.3.1"});var mo=Hr((vV,Dx)=>{"use strict";Dx.exports=_x()});var $x=Hr(pe=>{"use strict";function Lp(t,e){var n=t.length;t.push(e);e:for(;0<n;){var r=n-1>>>1,i=t[r];if(0<sc(i,e))t[r]=e,t[n]=i,n=r;else break e}}function Kn(t){return t.length===0?null:t[0]}function ac(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=t[s],a=s+1,u=t[a];if(0>sc(l,n))a<i&&0>sc(u,l)?(t[r]=u,t[a]=n,r=a):(t[r]=l,t[s]=n,r=s);else if(a<i&&0>sc(u,n))t[r]=u,t[a]=n,r=a;else break e}}return e}function sc(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(Fx=performance,pe.unstable_now=function(){return Fx.now()}):(Op=Date,Bx=Op.now(),pe.unstable_now=function(){return Op.now()-Bx});var Fx,Op,Bx,dr=[],di=[],tM=1,Mn=null,Ot=3,uc=!1,go=!1,Gl=!1,Vx=typeof setTimeout=="function"?setTimeout:null,Hx=typeof clearTimeout=="function"?clearTimeout:null,zx=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Np(t){for(var e=Kn(di);e!==null;){if(e.callback===null)ac(di);else if(e.startTime<=t)ac(di),e.sortIndex=e.expirationTime,Lp(dr,e);else break;e=Kn(di)}}function Pp(t){if(Gl=!1,Np(t),!go)if(Kn(dr)!==null)go=!0,Dp(_p);else{var e=Kn(di);e!==null&&Fp(Pp,e.startTime-t)}}function _p(t,e){go=!1,Gl&&(Gl=!1,Hx($l),$l=-1),uc=!0;var n=Ot;try{for(Np(e),Mn=Kn(dr);Mn!==null&&(!(Mn.expirationTime>e)||t&&!Gx());){var r=Mn.callback;if(typeof r=="function"){Mn.callback=null,Ot=Mn.priorityLevel;var i=r(Mn.expirationTime<=e);e=pe.unstable_now(),typeof i=="function"?Mn.callback=i:Mn===Kn(dr)&&ac(dr),Np(e)}else ac(dr);Mn=Kn(dr)}if(Mn!==null)var o=!0;else{var s=Kn(di);s!==null&&Fp(Pp,s.startTime-e),o=!1}return o}finally{Mn=null,Ot=n,uc=!1}}var cc=!1,lc=null,$l=-1,Wx=5,jx=-1;function Gx(){return!(pe.unstable_now()-jx<Wx)}function Ip(){if(lc!==null){var t=pe.unstable_now();jx=t;var e=!0;try{e=lc(!0,t)}finally{e?jl():(cc=!1,lc=null)}}else cc=!1}var jl;typeof zx=="function"?jl=function(){zx(Ip)}:typeof MessageChannel<"u"?(Mp=new MessageChannel,Ux=Mp.port2,Mp.port1.onmessage=Ip,jl=function(){Ux.postMessage(null)}):jl=function(){Vx(Ip,0)};var Mp,Ux;function Dp(t){lc=t,cc||(cc=!0,jl())}function Fp(t,e){$l=Vx(function(){t(pe.unstable_now())},e)}pe.unstable_IdlePriority=5;pe.unstable_ImmediatePriority=1;pe.unstable_LowPriority=4;pe.unstable_NormalPriority=3;pe.unstable_Profiling=null;pe.unstable_UserBlockingPriority=2;pe.unstable_cancelCallback=function(t){t.callback=null};pe.unstable_continueExecution=function(){go||uc||(go=!0,Dp(_p))};pe.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Wx=0<t?Math.floor(1e3/t):5};pe.unstable_getCurrentPriorityLevel=function(){return Ot};pe.unstable_getFirstCallbackNode=function(){return Kn(dr)};pe.unstable_next=function(t){switch(Ot){case 1:case 2:case 3:var e=3;break;default:e=Ot}var n=Ot;Ot=e;try{return t()}finally{Ot=n}};pe.unstable_pauseExecution=function(){};pe.unstable_requestPaint=function(){};pe.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=Ot;Ot=t;try{return e()}finally{Ot=n}};pe.unstable_scheduleCallback=function(t,e,n){var r=pe.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=n+i,t={id:tM++,callback:e,priorityLevel:t,startTime:n,expirationTime:i,sortIndex:-1},n>r?(t.sortIndex=n,Lp(di,t),Kn(dr)===null&&t===Kn(di)&&(Gl?(Hx($l),$l=-1):Gl=!0,Fp(Pp,n-r))):(t.sortIndex=i,Lp(dr,t),go||uc||(go=!0,Dp(_p))),t};pe.unstable_shouldYield=Gx;pe.unstable_wrapCallback=function(t){var e=Ot;return function(){var n=Ot;Ot=e;try{return t.apply(this,arguments)}finally{Ot=n}}}});var qx=Hr((kV,Kx)=>{"use strict";Kx.exports=$x()});var Qk=Hr(Sn=>{"use strict";var nM=mo(),xn=qx();function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tS=new Set,pa={};function Oo(t,e){Is(t,e),Is(t+"Capture",e)}function Is(t,e){for(pa[t]=e,t=0;t<e.length;t++)tS.add(e[t])}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sm=Object.prototype.hasOwnProperty,rM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yx={},Xx={};function iM(t){return sm.call(Xx,t)?!0:sm.call(Yx,t)?!1:rM.test(t)?Xx[t]=!0:(Yx[t]=!0,!1)}function oM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sM(t,e,n,r){if(e===null||typeof e>"u"||oM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qm=/[\-:]([a-z])/g;function Jm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qm,Jm);kt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qm,Jm);kt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qm,Jm);kt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function eg(t,e,n,r){var i=kt.hasOwnProperty(e)?kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sM(e,n,i,r)&&(n=null),r||i===null?iM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=nM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fc=Symbol.for("react.element"),hs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),tg=Symbol.for("react.strict_mode"),lm=Symbol.for("react.profiler"),nS=Symbol.for("react.provider"),rS=Symbol.for("react.context"),ng=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),um=Symbol.for("react.suspense_list"),rg=Symbol.for("react.memo"),mi=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var iS=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var Zx=Symbol.iterator;function Kl(t){return t===null||typeof t!="object"?null:(t=Zx&&t[Zx]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Bp;function ta(t){if(Bp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bp=e&&e[1]||""}return`
`+Bp+t}var zp=!1;function Up(t,e){if(!t||zp)return"";zp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{zp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ta(t):""}function lM(t){switch(t.tag){case 5:return ta(t.type);case 16:return ta("Lazy");case 13:return ta("Suspense");case 19:return ta("SuspenseList");case 0:case 2:case 15:return t=Up(t.type,!1),t;case 11:return t=Up(t.type.render,!1),t;case 1:return t=Up(t.type,!0),t;default:return""}}function cm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case hs:return"Portal";case lm:return"Profiler";case tg:return"StrictMode";case am:return"Suspense";case um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rS:return(t.displayName||"Context")+".Consumer";case nS:return(t._context.displayName||"Context")+".Provider";case ng:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rg:return e=t.displayName||null,e!==null?e:cm(t.type)||"Memo";case mi:e=t._payload,t=t._init;try{return cm(t(e))}catch{}}return null}function aM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cm(e);case 8:return e===tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uM(t){var e=oS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hc(t){t._valueTracker||(t._valueTracker=uM(t))}function sS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fm(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lS(t,e){e=e.checked,e!=null&&eg(t,"checked",e,!1)}function hm(t,e){lS(t,e);var n=Oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dm(t,e.type,n):e.hasOwnProperty("defaultValue")&&dm(t,e.type,Oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dm(t,e,n){(e!=="number"||Uc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var na=Array.isArray;function Es(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Oi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ev(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(na(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Oi(n)}}function aS(t,e){var n=Oi(e.value),r=Oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dc,cS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dc=dc||document.createElement("div"),dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cM=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){cM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oa[e]=oa[t]})});function fS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oa.hasOwnProperty(t)&&oa[t]?(""+e).trim():e+"px"}function hS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fM=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gm(t,e){if(e){if(fM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function ym(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=null;function ig(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vm=null,bs=null,Ts=null;function nv(t){if(t=Na(t)){if(typeof vm!="function")throw Error(A(280));var e=t.stateNode;e&&(e=mf(e),vm(t.stateNode,t.type,e))}}function dS(t){bs?Ts?Ts.push(t):Ts=[t]:bs=t}function pS(){if(bs){var t=bs,e=Ts;if(Ts=bs=null,nv(t),e)for(t=0;t<e.length;t++)nv(e[t])}}function mS(t,e){return t(e)}function gS(){}var Vp=!1;function yS(t,e,n){if(Vp)return t(e,n);Vp=!0;try{return mS(t,e,n)}finally{Vp=!1,(bs!==null||Ts!==null)&&(gS(),pS())}}function ga(t,e){var n=t.stateNode;if(n===null)return null;var r=mf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var Sm=!1;if(qr)try{cs={},Object.defineProperty(cs,"passive",{get:function(){Sm=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{Sm=!1}var cs;function hM(t,e,n,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var sa=!1,Vc=null,Hc=!1,km=null,dM={onError:function(t){sa=!0,Vc=t}};function pM(t,e,n,r,i,o,s,l,a){sa=!1,Vc=null,hM.apply(dM,arguments)}function mM(t,e,n,r,i,o,s,l,a){if(pM.apply(this,arguments),sa){if(sa){var u=Vc;sa=!1,Vc=null}else throw Error(A(198));Hc||(Hc=!0,km=u)}}function Io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rv(t){if(Io(t)!==t)throw Error(A(188))}function gM(t){var e=t.alternate;if(!e){if(e=Io(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return rv(i),t;if(o===r)return rv(i),e;o=o.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function vS(t){return t=gM(t),t!==null?SS(t):null}function SS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=SS(t);if(e!==null)return e;t=t.sibling}return null}var kS=xn.unstable_scheduleCallback,iv=xn.unstable_cancelCallback,yM=xn.unstable_shouldYield,xM=xn.unstable_requestPaint,Ve=xn.unstable_now,vM=xn.unstable_getCurrentPriorityLevel,og=xn.unstable_ImmediatePriority,wS=xn.unstable_UserBlockingPriority,Wc=xn.unstable_NormalPriority,SM=xn.unstable_LowPriority,CS=xn.unstable_IdlePriority,ff=null,yr=null;function kM(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(ff,t,void 0,(t.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:EM,wM=Math.log,CM=Math.LN2;function EM(t){return t>>>=0,t===0?32:31-(wM(t)/CM|0)|0}var pc=64,mc=4194304;function ra(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=ra(l):(o&=s,o!==0&&(r=ra(o)))}else s=n&~i,s!==0?r=ra(s):o!==0&&(r=ra(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qn(e),i=1<<n,r|=t[n],e&=~i;return r}function bM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Qn(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=bM(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function wm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ES(){var t=pc;return pc<<=1,!(pc&4194240)&&(pc=64),t}function Hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qn(e),t[e]=n}function AM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function sg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var se=0;function bS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TS,lg,AS,RS,OS,Cm=!1,gc=[],ki=null,wi=null,Ci=null,ya=new Map,xa=new Map,yi=[],RM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ov(t,e){switch(t){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xa.delete(e.pointerId)}}function ql(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Na(e),e!==null&&lg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function OM(t,e,n,r,i){switch(e){case"focusin":return ki=ql(ki,t,e,n,r,i),!0;case"dragenter":return wi=ql(wi,t,e,n,r,i),!0;case"mouseover":return Ci=ql(Ci,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ya.set(o,ql(ya.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xa.set(o,ql(xa.get(o)||null,t,e,n,r,i)),!0}return!1}function IS(t){var e=vo(t.target);if(e!==null){var n=Io(e);if(n!==null){if(e=n.tag,e===13){if(e=xS(n),e!==null){t.blockedOn=e,OS(t.priority,function(){AS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Em(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xm=r,n.target.dispatchEvent(r),xm=null}else return e=Na(n),e!==null&&lg(e),t.blockedOn=n,!1;e.shift()}return!0}function sv(t,e,n){Ic(t)&&n.delete(e)}function IM(){Cm=!1,ki!==null&&Ic(ki)&&(ki=null),wi!==null&&Ic(wi)&&(wi=null),Ci!==null&&Ic(Ci)&&(Ci=null),ya.forEach(sv),xa.forEach(sv)}function Yl(t,e){t.blockedOn===e&&(t.blockedOn=null,Cm||(Cm=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,IM)))}function va(t){function e(i){return Yl(i,t)}if(0<gc.length){Yl(gc[0],t);for(var n=1;n<gc.length;n++){var r=gc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ki!==null&&Yl(ki,t),wi!==null&&Yl(wi,t),Ci!==null&&Yl(Ci,t),ya.forEach(e),xa.forEach(e),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)IS(n),n.blockedOn===null&&yi.shift()}var As=Qr.ReactCurrentBatchConfig,Gc=!0;function MM(t,e,n,r){var i=se,o=As.transition;As.transition=null;try{se=1,ag(t,e,n,r)}finally{se=i,As.transition=o}}function LM(t,e,n,r){var i=se,o=As.transition;As.transition=null;try{se=4,ag(t,e,n,r)}finally{se=i,As.transition=o}}function ag(t,e,n,r){if(Gc){var i=Em(t,e,n,r);if(i===null)Yp(t,e,r,$c,n),ov(t,r);else if(OM(i,t,e,n,r))r.stopPropagation();else if(ov(t,r),e&4&&-1<RM.indexOf(t)){for(;i!==null;){var o=Na(i);if(o!==null&&TS(o),o=Em(t,e,n,r),o===null&&Yp(t,e,r,$c,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Yp(t,e,r,null,n)}}var $c=null;function Em(t,e,n,r){if($c=null,t=ig(r),t=vo(t),t!==null)if(e=Io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $c=t,null}function MS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vM()){case og:return 1;case wS:return 4;case Wc:case SM:return 16;case CS:return 536870912;default:return 16}default:return 16}}var vi=null,ug=null,Mc=null;function LS(){if(Mc)return Mc;var t,e=ug,n=e.length,r,i="value"in vi?vi.value:vi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Mc=i.slice(t,1<r?1-r:void 0)}function Lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function lv(){return!1}function vn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yc:lv,this.isPropagationStopped=lv,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),e}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cg=vn(Fs),La=Ne({},Fs,{view:0,detail:0}),NM=vn(La),Wp,jp,Xl,hf=Ne({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xl&&(Xl&&t.type==="mousemove"?(Wp=t.screenX-Xl.screenX,jp=t.screenY-Xl.screenY):jp=Wp=0,Xl=t),Wp)},movementY:function(t){return"movementY"in t?t.movementY:jp}}),av=vn(hf),PM=Ne({},hf,{dataTransfer:0}),_M=vn(PM),DM=Ne({},La,{relatedTarget:0}),Gp=vn(DM),FM=Ne({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),BM=vn(FM),zM=Ne({},Fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UM=vn(zM),VM=Ne({},Fs,{data:0}),uv=vn(VM),HM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jM[t])?!!e[t]:!1}function fg(){return GM}var $M=Ne({},La,{key:function(t){if(t.key){var e=HM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fg,charCode:function(t){return t.type==="keypress"?Lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KM=vn($M),qM=Ne({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cv=vn(qM),YM=Ne({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fg}),XM=vn(YM),ZM=Ne({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),QM=vn(ZM),JM=Ne({},hf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eL=vn(JM),tL=[9,13,27,32],hg=qr&&"CompositionEvent"in window,la=null;qr&&"documentMode"in document&&(la=document.documentMode);var nL=qr&&"TextEvent"in window&&!la,NS=qr&&(!hg||la&&8<la&&11>=la),fv=" ",hv=!1;function PS(t,e){switch(t){case"keyup":return tL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _S(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function rL(t,e){switch(t){case"compositionend":return _S(e);case"keypress":return e.which!==32?null:(hv=!0,fv);case"textInput":return t=e.data,t===fv&&hv?null:t;default:return null}}function iL(t,e){if(ps)return t==="compositionend"||!hg&&PS(t,e)?(t=LS(),Mc=ug=vi=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NS&&e.locale!=="ko"?null:e.data;default:return null}}var oL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oL[t.type]:e==="textarea"}function DS(t,e,n,r){dS(r),e=Kc(e,"onChange"),0<e.length&&(n=new cg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var aa=null,Sa=null;function sL(t){KS(t,0)}function df(t){var e=ys(t);if(sS(e))return t}function lL(t,e){if(t==="change")return e}var FS=!1;qr&&(qr?(vc="oninput"in document,vc||($p=document.createElement("div"),$p.setAttribute("oninput","return;"),vc=typeof $p.oninput=="function"),xc=vc):xc=!1,FS=xc&&(!document.documentMode||9<document.documentMode));var xc,vc,$p;function pv(){aa&&(aa.detachEvent("onpropertychange",BS),Sa=aa=null)}function BS(t){if(t.propertyName==="value"&&df(Sa)){var e=[];DS(e,Sa,t,ig(t)),yS(sL,e)}}function aL(t,e,n){t==="focusin"?(pv(),aa=e,Sa=n,aa.attachEvent("onpropertychange",BS)):t==="focusout"&&pv()}function uL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return df(Sa)}function cL(t,e){if(t==="click")return df(e)}function fL(t,e){if(t==="input"||t==="change")return df(e)}function hL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:hL;function ka(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sm.call(e,i)||!er(t[i],e[i]))return!1}return!0}function mv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gv(t,e){var n=mv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mv(n)}}function zS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function US(){for(var t=window,e=Uc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uc(t.document)}return e}function dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dL(t){var e=US(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zS(n.ownerDocument.documentElement,n)){if(r!==null&&dg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=gv(n,o);var s=gv(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pL=qr&&"documentMode"in document&&11>=document.documentMode,ms=null,bm=null,ua=null,Tm=!1;function yv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tm||ms==null||ms!==Uc(r)||(r=ms,"selectionStart"in r&&dg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ua&&ka(ua,r)||(ua=r,r=Kc(bm,"onSelect"),0<r.length&&(e=new cg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ms)))}function Sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:Sc("Animation","AnimationEnd"),animationiteration:Sc("Animation","AnimationIteration"),animationstart:Sc("Animation","AnimationStart"),transitionend:Sc("Transition","TransitionEnd")},Kp={},VS={};qr&&(VS=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function pf(t){if(Kp[t])return Kp[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in VS)return Kp[t]=e[n];return t}var HS=pf("animationend"),WS=pf("animationiteration"),jS=pf("animationstart"),GS=pf("transitionend"),$S=new Map,xv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){$S.set(t,e),Oo(e,[t])}for(kc=0;kc<xv.length;kc++)wc=xv[kc],vv=wc.toLowerCase(),Sv=wc[0].toUpperCase()+wc.slice(1),Mi(vv,"on"+Sv);var wc,vv,Sv,kc;Mi(HS,"onAnimationEnd");Mi(WS,"onAnimationIteration");Mi(jS,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(GS,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);Oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mL=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function kv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mM(r,e,void 0,t),t.currentTarget=null}function KS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;kv(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;kv(i,l,u),o=a}}}if(Hc)throw t=km,Hc=!1,km=null,t}function Se(t,e){var n=e[Mm];n===void 0&&(n=e[Mm]=new Set);var r=t+"__bubble";n.has(r)||(qS(e,t,2,!1),n.add(r))}function qp(t,e,n){var r=0;e&&(r|=4),qS(n,t,r,e)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function wa(t){if(!t[Cc]){t[Cc]=!0,tS.forEach(function(n){n!=="selectionchange"&&(mL.has(n)||qp(n,!1,t),qp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cc]||(e[Cc]=!0,qp("selectionchange",!1,e))}}function qS(t,e,n,r){switch(MS(e)){case 1:var i=MM;break;case 4:i=LM;break;default:i=ag}n=i.bind(null,e,n,t),i=void 0,!Sm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Yp(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=vo(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}yS(function(){var u=o,c=ig(n),f=[];e:{var h=$S.get(t);if(h!==void 0){var d=cg,m=t;switch(t){case"keypress":if(Lc(n)===0)break e;case"keydown":case"keyup":d=KM;break;case"focusin":m="focus",d=Gp;break;case"focusout":m="blur",d=Gp;break;case"beforeblur":case"afterblur":d=Gp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=av;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=_M;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=XM;break;case HS:case WS:case jS:d=BM;break;case GS:d=QM;break;case"scroll":d=NM;break;case"wheel":d=eL;break;case"copy":case"cut":case"paste":d=UM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=cv}var x=(e&4)!==0,v=!x&&t==="scroll",p=x?h!==null?h+"Capture":null:h;x=[];for(var g=u,y;g!==null;){y=g;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,p!==null&&(S=ga(g,p),S!=null&&x.push(Ca(g,S,y)))),v)break;g=g.return}0<x.length&&(h=new d(h,m,null,n,c),f.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==xm&&(m=n.relatedTarget||n.fromElement)&&(vo(m)||m[Yr]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=u,m=m?vo(m):null,m!==null&&(v=Io(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(x=av,S="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=cv,S="onPointerLeave",p="onPointerEnter",g="pointer"),v=d==null?h:ys(d),y=m==null?h:ys(m),h=new x(S,g+"leave",d,n,c),h.target=v,h.relatedTarget=y,S=null,vo(c)===u&&(x=new x(p,g+"enter",m,n,c),x.target=y,x.relatedTarget=v,S=x),v=S,d&&m)t:{for(x=d,p=m,g=0,y=x;y;y=fs(y))g++;for(y=0,S=p;S;S=fs(S))y++;for(;0<g-y;)x=fs(x),g--;for(;0<y-g;)p=fs(p),y--;for(;g--;){if(x===p||p!==null&&x===p.alternate)break t;x=fs(x),p=fs(p)}x=null}else x=null;d!==null&&wv(f,h,d,x,!1),m!==null&&v!==null&&wv(f,v,m,x,!0)}}e:{if(h=u?ys(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var k=lL;else if(dv(h))if(FS)k=fL;else{k=uL;var w=aL}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=cL);if(k&&(k=k(t,u))){DS(f,k,n,c);break e}w&&w(t,h,u),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&dm(h,"number",h.value)}switch(w=u?ys(u):window,t){case"focusin":(dv(w)||w.contentEditable==="true")&&(ms=w,bm=u,ua=null);break;case"focusout":ua=bm=ms=null;break;case"mousedown":Tm=!0;break;case"contextmenu":case"mouseup":case"dragend":Tm=!1,yv(f,n,c);break;case"selectionchange":if(pL)break;case"keydown":case"keyup":yv(f,n,c)}var C;if(hg)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ps?PS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(NS&&n.locale!=="ko"&&(ps||T!=="onCompositionStart"?T==="onCompositionEnd"&&ps&&(C=LS()):(vi=c,ug="value"in vi?vi.value:vi.textContent,ps=!0)),w=Kc(u,T),0<w.length&&(T=new uv(T,t,null,n,c),f.push({event:T,listeners:w}),C?T.data=C:(C=_S(n),C!==null&&(T.data=C)))),(C=nL?rL(t,n):iL(t,n))&&(u=Kc(u,"onBeforeInput"),0<u.length&&(c=new uv("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=C))}KS(f,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ga(t,n),o!=null&&r.unshift(Ca(t,o,i)),o=ga(t,e),o!=null&&r.push(Ca(t,o,i))),t=t.return}return r}function fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wv(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ga(n,o),a!=null&&s.unshift(Ca(n,a,l))):i||(a=ga(n,o),a!=null&&s.push(Ca(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var gL=/\r\n?/g,yL=/\u0000|\uFFFD/g;function Cv(t){return(typeof t=="string"?t:""+t).replace(gL,`
`).replace(yL,"")}function Ec(t,e,n){if(e=Cv(e),Cv(t)!==e&&n)throw Error(A(425))}function qc(){}var Am=null,Rm=null;function Om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Im=typeof setTimeout=="function"?setTimeout:void 0,xL=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,vL=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(t){return Ev.resolve(null).then(t).catch(SL)}:Im;function SL(t){setTimeout(function(){throw t})}function Xp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),va(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);va(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),gr="__reactFiber$"+Bs,Ea="__reactProps$"+Bs,Yr="__reactContainer$"+Bs,Mm="__reactEvents$"+Bs,kL="__reactListeners$"+Bs,wL="__reactHandles$"+Bs;function vo(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yr]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bv(t);t!==null;){if(n=t[gr])return n;t=bv(t)}return e}t=n,n=t.parentNode}return null}function Na(t){return t=t[gr]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function mf(t){return t[Ea]||null}var Lm=[],xs=-1;function Li(t){return{current:t}}function ke(t){0>xs||(t.current=Lm[xs],Lm[xs]=null,xs--)}function me(t,e){xs++,Lm[xs]=t.current,t.current=e}var Ii={},Nt=Li(Ii),rn=Li(!1),Eo=Ii;function Ms(t,e){var n=t.type.contextTypes;if(!n)return Ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function on(t){return t=t.childContextTypes,t!=null}function Yc(){ke(rn),ke(Nt)}function Tv(t,e,n){if(Nt.current!==Ii)throw Error(A(168));me(Nt,e),me(rn,n)}function YS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(A(108,aM(t)||"Unknown",i));return Ne({},n,r)}function Xc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ii,Eo=Nt.current,me(Nt,t),me(rn,rn.current),!0}function Av(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=YS(t,e,Eo),r.__reactInternalMemoizedMergedChildContext=t,ke(rn),ke(Nt),me(Nt,t)):ke(rn),me(rn,n)}var jr=null,gf=!1,Zp=!1;function XS(t){jr===null?jr=[t]:jr.push(t)}function CL(t){gf=!0,XS(t)}function Ni(){if(!Zp&&jr!==null){Zp=!0;var t=0,e=se;try{var n=jr;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jr=null,gf=!1}catch(i){throw jr!==null&&(jr=jr.slice(t+1)),kS(og,Ni),i}finally{se=e,Zp=!1}}return null}var vs=[],Ss=0,Zc=null,Qc=0,Ln=[],Nn=0,bo=null,Gr=1,$r="";function yo(t,e){vs[Ss++]=Qc,vs[Ss++]=Zc,Zc=t,Qc=e}function ZS(t,e,n){Ln[Nn++]=Gr,Ln[Nn++]=$r,Ln[Nn++]=bo,bo=t;var r=Gr;t=$r;var i=32-Qn(r)-1;r&=~(1<<i),n+=1;var o=32-Qn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Gr=1<<32-Qn(e)+i|n<<i|r,$r=o+t}else Gr=1<<o|n<<i|r,$r=t}function pg(t){t.return!==null&&(yo(t,1),ZS(t,1,0))}function mg(t){for(;t===Zc;)Zc=vs[--Ss],vs[Ss]=null,Qc=vs[--Ss],vs[Ss]=null;for(;t===bo;)bo=Ln[--Nn],Ln[Nn]=null,$r=Ln[--Nn],Ln[Nn]=null,Gr=Ln[--Nn],Ln[Nn]=null}var yn=null,gn=null,Ae=!1,Zn=null;function QS(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,gn=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bo!==null?{id:Gr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,gn=null,!0):!1;default:return!1}}function Nm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pm(t){if(Ae){var e=gn;if(e){var n=e;if(!Rv(t,e)){if(Nm(t))throw Error(A(418));e=Ei(n.nextSibling);var r=yn;e&&Rv(t,e)?QS(r,n):(t.flags=t.flags&-4097|2,Ae=!1,yn=t)}}else{if(Nm(t))throw Error(A(418));t.flags=t.flags&-4097|2,Ae=!1,yn=t}}}function Ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function bc(t){if(t!==yn)return!1;if(!Ae)return Ov(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Om(t.type,t.memoizedProps)),e&&(e=gn)){if(Nm(t))throw JS(),Error(A(418));for(;e;)QS(t,e),e=Ei(e.nextSibling)}if(Ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=yn?Ei(t.stateNode.nextSibling):null;return!0}function JS(){for(var t=gn;t;)t=Ei(t.nextSibling)}function Ls(){gn=yn=null,Ae=!1}function gg(t){Zn===null?Zn=[t]:Zn.push(t)}var EL=Qr.ReactCurrentBatchConfig;function Zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function Tc(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Iv(t){var e=t._init;return e(t._payload)}function ek(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Ri(p,g),p.index=0,p.sibling=null,p}function o(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function s(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,g,y,S){return g===null||g.tag!==6?(g=im(y,p.mode,S),g.return=p,g):(g=i(g,y),g.return=p,g)}function a(p,g,y,S){var k=y.type;return k===ds?c(p,g,y.props.children,S,y.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===mi&&Iv(k)===g.type)?(S=i(g,y.props),S.ref=Zl(p,g,y),S.return=p,S):(S=zc(y.type,y.key,y.props,null,p.mode,S),S.ref=Zl(p,g,y),S.return=p,S)}function u(p,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=om(y,p.mode,S),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function c(p,g,y,S,k){return g===null||g.tag!==7?(g=Co(y,p.mode,S,k),g.return=p,g):(g=i(g,y),g.return=p,g)}function f(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=im(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case fc:return y=zc(g.type,g.key,g.props,null,p.mode,y),y.ref=Zl(p,null,g),y.return=p,y;case hs:return g=om(g,p.mode,y),g.return=p,g;case mi:var S=g._init;return f(p,S(g._payload),y)}if(na(g)||Kl(g))return g=Co(g,p.mode,y,null),g.return=p,g;Tc(p,g)}return null}function h(p,g,y,S){var k=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:l(p,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fc:return y.key===k?a(p,g,y,S):null;case hs:return y.key===k?u(p,g,y,S):null;case mi:return k=y._init,h(p,g,k(y._payload),S)}if(na(y)||Kl(y))return k!==null?null:c(p,g,y,S,null);Tc(p,y)}return null}function d(p,g,y,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(y)||null,l(g,p,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fc:return p=p.get(S.key===null?y:S.key)||null,a(g,p,S,k);case hs:return p=p.get(S.key===null?y:S.key)||null,u(g,p,S,k);case mi:var w=S._init;return d(p,g,y,w(S._payload),k)}if(na(S)||Kl(S))return p=p.get(y)||null,c(g,p,S,k,null);Tc(g,S)}return null}function m(p,g,y,S){for(var k=null,w=null,C=g,T=g=0,O=null;C!==null&&T<y.length;T++){C.index>T?(O=C,C=null):O=C.sibling;var L=h(p,C,y[T],S);if(L===null){C===null&&(C=O);break}t&&C&&L.alternate===null&&e(p,C),g=o(L,g,T),w===null?k=L:w.sibling=L,w=L,C=O}if(T===y.length)return n(p,C),Ae&&yo(p,T),k;if(C===null){for(;T<y.length;T++)C=f(p,y[T],S),C!==null&&(g=o(C,g,T),w===null?k=C:w.sibling=C,w=C);return Ae&&yo(p,T),k}for(C=r(p,C);T<y.length;T++)O=d(C,p,T,y[T],S),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?T:O.key),g=o(O,g,T),w===null?k=O:w.sibling=O,w=O);return t&&C.forEach(function(U){return e(p,U)}),Ae&&yo(p,T),k}function x(p,g,y,S){var k=Kl(y);if(typeof k!="function")throw Error(A(150));if(y=k.call(y),y==null)throw Error(A(151));for(var w=k=null,C=g,T=g=0,O=null,L=y.next();C!==null&&!L.done;T++,L=y.next()){C.index>T?(O=C,C=null):O=C.sibling;var U=h(p,C,L.value,S);if(U===null){C===null&&(C=O);break}t&&C&&U.alternate===null&&e(p,C),g=o(U,g,T),w===null?k=U:w.sibling=U,w=U,C=O}if(L.done)return n(p,C),Ae&&yo(p,T),k;if(C===null){for(;!L.done;T++,L=y.next())L=f(p,L.value,S),L!==null&&(g=o(L,g,T),w===null?k=L:w.sibling=L,w=L);return Ae&&yo(p,T),k}for(C=r(p,C);!L.done;T++,L=y.next())L=d(C,p,T,L.value,S),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?T:L.key),g=o(L,g,T),w===null?k=L:w.sibling=L,w=L);return t&&C.forEach(function(B){return e(p,B)}),Ae&&yo(p,T),k}function v(p,g,y,S){if(typeof y=="object"&&y!==null&&y.type===ds&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case fc:e:{for(var k=y.key,w=g;w!==null;){if(w.key===k){if(k=y.type,k===ds){if(w.tag===7){n(p,w.sibling),g=i(w,y.props.children),g.return=p,p=g;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===mi&&Iv(k)===w.type){n(p,w.sibling),g=i(w,y.props),g.ref=Zl(p,w,y),g.return=p,p=g;break e}n(p,w);break}else e(p,w);w=w.sibling}y.type===ds?(g=Co(y.props.children,p.mode,S,y.key),g.return=p,p=g):(S=zc(y.type,y.key,y.props,null,p.mode,S),S.ref=Zl(p,g,y),S.return=p,p=S)}return s(p);case hs:e:{for(w=y.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=i(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=om(y,p.mode,S),g.return=p,p=g}return s(p);case mi:return w=y._init,v(p,g,w(y._payload),S)}if(na(y))return m(p,g,y,S);if(Kl(y))return x(p,g,y,S);Tc(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,y),g.return=p,p=g):(n(p,g),g=im(y,p.mode,S),g.return=p,p=g),s(p)):n(p,g)}return v}var Ns=ek(!0),tk=ek(!1),Jc=Li(null),ef=null,ks=null,yg=null;function xg(){yg=ks=ef=null}function vg(t){var e=Jc.current;ke(Jc),t._currentValue=e}function _m(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){ef=t,yg=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(yg!==t)if(t={context:t,memoizedValue:e,next:null},ks===null){if(ef===null)throw Error(A(308));ks=t,ef.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var So=null;function Sg(t){So===null?So=[t]:So.push(t)}function nk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xr(t,r)}function Xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gi=!1;function kg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xr(t,n)}return i=r.interleaved,i===null?(e.next=e,Sg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xr(t,n)}function Nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}function Mv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tf(t,e,n,r){var i=t.updateQueue;gi=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,c=u=a=null,l=o;do{var h=l.lane,d=l.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,x=l;switch(h=e,d=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){f=m.call(d,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,h=typeof m=="function"?m.call(d,f,h):m,h==null)break e;f=Ne({},f,h);break e;case 2:gi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else d={eventTime:d,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=d,a=f):c=c.next=d,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ao|=s,t.lanes=s,t.memoizedState=f}}function Lv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var Pa={},xr=Li(Pa),ba=Li(Pa),Ta=Li(Pa);function ko(t){if(t===Pa)throw Error(A(174));return t}function wg(t,e){switch(me(Ta,e),me(ba,t),me(xr,Pa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mm(e,t)}ke(xr),me(xr,e)}function Ps(){ke(xr),ke(ba),ke(Ta)}function ik(t){ko(Ta.current);var e=ko(xr.current),n=mm(e,t.type);e!==n&&(me(ba,t),me(xr,n))}function Cg(t){ba.current===t&&(ke(xr),ke(ba))}var Me=Li(0);function nf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qp=[];function Eg(){for(var t=0;t<Qp.length;t++)Qp[t]._workInProgressVersionPrimary=null;Qp.length=0}var Pc=Qr.ReactCurrentDispatcher,Jp=Qr.ReactCurrentBatchConfig,To=0,Le=null,it=null,ht=null,rf=!1,ca=!1,Aa=0,bL=0;function It(){throw Error(A(321))}function bg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function Tg(t,e,n,r,i,o){if(To=o,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pc.current=t===null||t.memoizedState===null?OL:IL,t=n(r,i),ca){o=0;do{if(ca=!1,Aa=0,25<=o)throw Error(A(301));o+=1,ht=it=null,e.updateQueue=null,Pc.current=ML,t=n(r,i)}while(ca)}if(Pc.current=of,e=it!==null&&it.next!==null,To=0,ht=it=Le=null,rf=!1,e)throw Error(A(300));return t}function Ag(){var t=Aa!==0;return Aa=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Le.memoizedState=ht=t:ht=ht.next=t,ht}function Fn(){if(it===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ht===null?Le.memoizedState:ht.next;if(e!==null)ht=e,it=t;else{if(t===null)throw Error(A(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ht===null?Le.memoizedState=ht=t:ht=ht.next=t}return ht}function Ra(t,e){return typeof e=="function"?e(t):e}function em(t){var e=Fn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=it,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((To&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,Le.lanes|=c,Ao|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,er(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Le.lanes|=o,Ao|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tm(t){var e=Fn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);er(o,e.memoizedState)||(nn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ok(){}function sk(t,e){var n=Le,r=Fn(),i=e(),o=!er(r.memoizedState,i);if(o&&(r.memoizedState=i,nn=!0),r=r.queue,Rg(uk.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Oa(9,ak.bind(null,n,r,i,e),void 0,null),dt===null)throw Error(A(349));To&30||lk(n,e,i)}return i}function lk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ak(t,e,n,r){e.value=n,e.getSnapshot=r,ck(e)&&fk(t)}function uk(t,e,n){return n(function(){ck(e)&&fk(t)})}function ck(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function fk(t){var e=Xr(t,1);e!==null&&Jn(e,t,1,-1)}function Nv(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=RL.bind(null,Le,t),[e.memoizedState,t]}function Oa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hk(){return Fn().memoizedState}function _c(t,e,n,r){var i=mr();Le.flags|=t,i.memoizedState=Oa(1|e,n,void 0,r===void 0?null:r)}function yf(t,e,n,r){var i=Fn();r=r===void 0?null:r;var o=void 0;if(it!==null){var s=it.memoizedState;if(o=s.destroy,r!==null&&bg(r,s.deps)){i.memoizedState=Oa(e,n,o,r);return}}Le.flags|=t,i.memoizedState=Oa(1|e,n,o,r)}function Pv(t,e){return _c(8390656,8,t,e)}function Rg(t,e){return yf(2048,8,t,e)}function dk(t,e){return yf(4,2,t,e)}function pk(t,e){return yf(4,4,t,e)}function mk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gk(t,e,n){return n=n!=null?n.concat([t]):null,yf(4,4,mk.bind(null,e,t),n)}function Og(){}function yk(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xk(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vk(t,e,n){return To&21?(er(n,e)||(n=ES(),Le.lanes|=n,Ao|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function TL(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=Jp.transition;Jp.transition={};try{t(!1),e()}finally{se=n,Jp.transition=r}}function Sk(){return Fn().memoizedState}function AL(t,e,n){var r=Ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kk(t))wk(e,n);else if(n=nk(t,e,n,r),n!==null){var i=jt();Jn(n,t,r,i),Ck(n,e,r)}}function RL(t,e,n){var r=Ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kk(t))wk(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,er(l,s)){var a=e.interleaved;a===null?(i.next=i,Sg(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=nk(t,e,i,r),n!==null&&(i=jt(),Jn(n,t,r,i),Ck(n,e,r))}}function kk(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function wk(t,e){ca=rf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ck(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}var of={readContext:Dn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},OL={readContext:Dn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:Pv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_c(4194308,4,mk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _c(4194308,4,t,e)},useInsertionEffect:function(t,e){return _c(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AL.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:Nv,useDebugValue:Og,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=Nv(!1),e=t[0];return t=TL.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=mr();if(Ae){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),dt===null)throw Error(A(349));To&30||lk(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Pv(uk.bind(null,r,o,t),[t]),r.flags|=2048,Oa(9,ak.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=mr(),e=dt.identifierPrefix;if(Ae){var n=$r,r=Gr;n=(r&~(1<<32-Qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IL={readContext:Dn,useCallback:yk,useContext:Dn,useEffect:Rg,useImperativeHandle:gk,useInsertionEffect:dk,useLayoutEffect:pk,useMemo:xk,useReducer:em,useRef:hk,useState:function(){return em(Ra)},useDebugValue:Og,useDeferredValue:function(t){var e=Fn();return vk(e,it.memoizedState,t)},useTransition:function(){var t=em(Ra)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:ok,useSyncExternalStore:sk,useId:Sk,unstable_isNewReconciler:!1},ML={readContext:Dn,useCallback:yk,useContext:Dn,useEffect:Rg,useImperativeHandle:gk,useInsertionEffect:dk,useLayoutEffect:pk,useMemo:xk,useReducer:tm,useRef:hk,useState:function(){return tm(Ra)},useDebugValue:Og,useDeferredValue:function(t){var e=Fn();return it===null?e.memoizedState=t:vk(e,it.memoizedState,t)},useTransition:function(){var t=tm(Ra)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:ok,useSyncExternalStore:sk,useId:Sk,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xf={isMounted:function(t){return(t=t._reactInternals)?Io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Ai(t),o=Kr(r,i);o.payload=e,n!=null&&(o.callback=n),e=bi(t,o,i),e!==null&&(Jn(e,t,i,r),Nc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Ai(t),o=Kr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=bi(t,o,i),e!==null&&(Jn(e,t,i,r),Nc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=Ai(t),i=Kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=bi(t,i,r),e!==null&&(Jn(e,t,r,n),Nc(e,t,r))}};function _v(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ka(n,r)||!ka(i,o):!0}function Ek(t,e,n){var r=!1,i=Ii,o=e.contextType;return typeof o=="object"&&o!==null?o=Dn(o):(i=on(e)?Eo:Nt.current,r=e.contextTypes,o=(r=r!=null)?Ms(t,i):Ii),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Dv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xf.enqueueReplaceState(e,e.state,null)}function Fm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},kg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Dn(o):(o=on(e)?Eo:Nt.current,i.context=Ms(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Dm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xf.enqueueReplaceState(i,i.state,null),tf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _s(t,e){try{var n="",r=e;do n+=lM(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function nm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var LL=typeof WeakMap=="function"?WeakMap:Map;function bk(t,e,n){n=Kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lf||(lf=!0,qm=r),Bm(t,e)},n}function Tk(t,e,n){n=Kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bm(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Fv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new LL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$L.bind(null,t,e,n),e.then(t,t))}function Bv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kr(-1,1),e.tag=2,bi(n,e,1))),n.lanes|=1),t)}var NL=Qr.ReactCurrentOwner,nn=!1;function Wt(t,e,n,r){e.child=t===null?tk(e,null,n,r):Ns(e,t.child,n,r)}function Uv(t,e,n,r,i){n=n.render;var o=e.ref;return Rs(e,i),r=Tg(t,e,n,r,o,i),n=Ag(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ae&&n&&pg(e),e.flags|=1,Wt(t,e,r,i),e.child)}function Vv(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Fg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Ak(t,e,o,r,i)):(t=zc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ka,n(s,r)&&t.ref===e.ref)return Zr(t,e,i)}return e.flags|=1,t=Ri(o,r),t.ref=e.ref,t.return=e,e.child=t}function Ak(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ka(o,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Zr(t,e,i)}return zm(t,e,n,r,i)}function Rk(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Cs,mn),mn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(Cs,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,me(Cs,mn),mn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,me(Cs,mn),mn|=r;return Wt(t,e,i,n),e.child}function Ok(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zm(t,e,n,r,i){var o=on(n)?Eo:Nt.current;return o=Ms(e,o),Rs(e,i),n=Tg(t,e,n,r,o,i),r=Ag(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ae&&r&&pg(e),e.flags|=1,Wt(t,e,n,i),e.child)}function Hv(t,e,n,r,i){if(on(n)){var o=!0;Xc(e)}else o=!1;if(Rs(e,i),e.stateNode===null)Dc(t,e),Ek(e,n,r),Fm(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dn(u):(u=on(n)?Eo:Nt.current,u=Ms(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Dv(e,s,r,u),gi=!1;var h=e.memoizedState;s.state=h,tf(e,r,s,i),a=e.memoizedState,l!==r||h!==a||rn.current||gi?(typeof c=="function"&&(Dm(e,n,c,r),a=e.memoizedState),(l=gi||_v(e,n,l,r,h,a,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,rk(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Yn(e.type,l),s.props=u,f=e.pendingProps,h=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Dn(a):(a=on(n)?Eo:Nt.current,a=Ms(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==a)&&Dv(e,s,r,a),gi=!1,h=e.memoizedState,s.state=h,tf(e,r,s,i);var m=e.memoizedState;l!==f||h!==m||rn.current||gi?(typeof d=="function"&&(Dm(e,n,d,r),m=e.memoizedState),(u=gi||_v(e,n,u,r,h,m,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Um(t,e,n,r,o,i)}function Um(t,e,n,r,i,o){Ok(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Av(e,n,!1),Zr(t,e,o);r=e.stateNode,NL.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ns(e,t.child,null,o),e.child=Ns(e,null,l,o)):Wt(t,e,l,o),e.memoizedState=r.state,i&&Av(e,n,!0),e.child}function Ik(t){var e=t.stateNode;e.pendingContext?Tv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tv(t,e.context,!1),wg(t,e.containerInfo)}function Wv(t,e,n,r,i){return Ls(),gg(i),e.flags|=256,Wt(t,e,n,r),e.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function Hm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mk(t,e,n){var r=e.pendingProps,i=Me.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),me(Me,i&1),t===null)return Pm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=kf(s,r,0,null),t=Co(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Hm(n),e.memoizedState=Vm,t):Ig(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return PL(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Ri(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Ri(l,o):(o=Co(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Hm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Vm,r}return o=t.child,t=o.sibling,r=Ri(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ig(t,e){return e=kf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ac(t,e,n,r){return r!==null&&gg(r),Ns(e,t.child,null,n),t=Ig(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PL(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=nm(Error(A(422))),Ac(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=kf({mode:"visible",children:r.children},i,0,null),o=Co(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ns(e,t.child,null,s),e.child.memoizedState=Hm(s),e.memoizedState=Vm,o);if(!(e.mode&1))return Ac(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(A(419)),r=nm(o,r,void 0),Ac(t,e,s,r)}if(l=(s&t.childLanes)!==0,nn||l){if(r=dt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Xr(t,i),Jn(r,t,i,-1))}return Dg(),r=nm(Error(A(421))),Ac(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=KL.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,gn=Ei(i.nextSibling),yn=e,Ae=!0,Zn=null,t!==null&&(Ln[Nn++]=Gr,Ln[Nn++]=$r,Ln[Nn++]=bo,Gr=t.id,$r=t.overflow,bo=e),e=Ig(e,r.children),e.flags|=4096,e)}function jv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_m(t.return,e,n)}function rm(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Lk(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Wt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jv(t,n,e);else if(t.tag===19)jv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&nf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),rm(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}rm(e,!0,n,null,o);break;case"together":rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ao|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _L(t,e,n){switch(e.tag){case 3:Ik(e),Ls();break;case 5:ik(e);break;case 1:on(e.type)&&Xc(e);break;case 4:wg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;me(Jc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Mk(t,e,n):(me(Me,Me.current&1),t=Zr(t,e,n),t!==null?t.sibling:null);me(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Lk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,Rk(t,e,n)}return Zr(t,e,n)}var Nk,Wm,Pk,_k;Nk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wm=function(){};Pk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ko(xr.current);var o=null;switch(n){case"input":i=fm(t,i),r=fm(t,r),o=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),o=[];break;case"textarea":i=pm(t,i),r=pm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qc)}gm(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pa.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i?.[u],r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(pa.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Se("scroll",t),o||l===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};_k=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ql(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DL(t,e,n){var r=e.pendingProps;switch(mg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return on(e.type)&&Yc(),Mt(e),null;case 3:return r=e.stateNode,Ps(),ke(rn),ke(Nt),Eg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zn!==null&&(Zm(Zn),Zn=null))),Wm(t,e),Mt(e),null;case 5:Cg(e);var i=ko(Ta.current);if(n=e.type,t!==null&&e.stateNode!=null)Pk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return Mt(e),null}if(t=ko(xr.current),bc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[gr]=e,r[Ea]=o,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<ia.length;i++)Se(ia[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Qx(r,o),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Se("invalid",r);break;case"textarea":ev(r,o),Se("invalid",r)}gm(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ec(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ec(r.textContent,l,t),i=["children",""+l]):pa.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Se("scroll",r)}switch(n){case"input":hc(r),Jx(r,o,!0);break;case"textarea":hc(r),tv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=qc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[gr]=e,t[Ea]=r,Nk(t,e,!1,!1),e.stateNode=t;e:{switch(s=ym(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<ia.length;i++)Se(ia[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":Qx(t,r),i=fm(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Se("invalid",t);break;case"textarea":ev(t,r),i=pm(t,r),Se("invalid",t);break;default:i=r}gm(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?hS(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&cS(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ma(t,a):typeof a=="number"&&ma(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(pa.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Se("scroll",t):a!=null&&eg(t,o,a,s))}switch(n){case"input":hc(t),Jx(t,r,!1);break;case"textarea":hc(t),tv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Oi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Es(t,!!r.multiple,o,!1):r.defaultValue!=null&&Es(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)_k(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=ko(Ta.current),ko(xr.current),bc(e)){if(r=e.stateNode,n=e.memoizedProps,r[gr]=e,(o=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:Ec(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ec(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gr]=e,e.stateNode=r}return Mt(e),null;case 13:if(ke(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&gn!==null&&e.mode&1&&!(e.flags&128))JS(),Ls(),e.flags|=98560,o=!1;else if(o=bc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(A(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(A(317));o[gr]=e}else Ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),o=!1}else Zn!==null&&(Zm(Zn),Zn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?ot===0&&(ot=3):Dg())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Ps(),Wm(t,e),t===null&&wa(e.stateNode.containerInfo),Mt(e),null;case 10:return vg(e.type._context),Mt(e),null;case 17:return on(e.type)&&Yc(),Mt(e),null;case 19:if(ke(Me),o=e.memoizedState,o===null)return Mt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ql(o,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=nf(t),s!==null){for(e.flags|=128,Ql(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Me,Me.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ve()>Ds&&(e.flags|=128,r=!0,Ql(o,!1),e.lanes=4194304)}else{if(!r)if(t=nf(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ql(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ae)return Mt(e),null}else 2*Ve()-o.renderingStartTime>Ds&&n!==1073741824&&(e.flags|=128,r=!0,Ql(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ve(),e.sibling=null,n=Me.current,me(Me,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return _g(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function FL(t,e){switch(mg(e),e.tag){case 1:return on(e.type)&&Yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ps(),ke(rn),ke(Nt),Eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cg(e),null;case 13:if(ke(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Me),null;case 4:return Ps(),null;case 10:return vg(e.type._context),null;case 22:case 23:return _g(),null;case 24:return null;default:return null}}var Rc=!1,Lt=!1,BL=typeof WeakSet=="function"?WeakSet:Set,D=null;function ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function jm(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Gv=!1;function zL(t,e){if(Am=Gc,t=US(),dg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++u===i&&(l=s),h===o&&++c===r&&(a=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rm={focusedElem:t,selectionRange:n},Gc=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,v=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?x:Yn(e.type,x),v);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(S){Fe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return m=Gv,Gv=!1,m}function fa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&jm(e,n,o)}i=i.next}while(i!==r)}}function vf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Dk(t){var e=t.alternate;e!==null&&(t.alternate=null,Dk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[Ea],delete e[Mm],delete e[kL],delete e[wL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fk(t){return t.tag===5||t.tag===3||t.tag===4}function $v(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $m(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qc));else if(r!==4&&(t=t.child,t!==null))for($m(t,e,n),t=t.sibling;t!==null;)$m(t,e,n),t=t.sibling}function Km(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Km(t,e,n),t=t.sibling;t!==null;)Km(t,e,n),t=t.sibling}var vt=null,Xn=!1;function pi(t,e,n){for(n=n.child;n!==null;)Bk(t,e,n),n=n.sibling}function Bk(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(ff,n)}catch{}switch(n.tag){case 5:Lt||ws(n,e);case 6:var r=vt,i=Xn;vt=null,pi(t,e,n),vt=r,Xn=i,vt!==null&&(Xn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Xn?(t=vt,n=n.stateNode,t.nodeType===8?Xp(t.parentNode,n):t.nodeType===1&&Xp(t,n),va(t)):Xp(vt,n.stateNode));break;case 4:r=vt,i=Xn,vt=n.stateNode.containerInfo,Xn=!0,pi(t,e,n),vt=r,Xn=i;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&jm(n,e,s),i=i.next}while(i!==r)}pi(t,e,n);break;case 1:if(!Lt&&(ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}pi(t,e,n);break;case 21:pi(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,pi(t,e,n),Lt=r):pi(t,e,n);break;default:pi(t,e,n)}}function Kv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BL),e.forEach(function(r){var i=qL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:vt=l.stateNode,Xn=!1;break e;case 3:vt=l.stateNode.containerInfo,Xn=!0;break e;case 4:vt=l.stateNode.containerInfo,Xn=!0;break e}l=l.return}if(vt===null)throw Error(A(160));Bk(o,s,i),vt=null,Xn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Fe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zk(e,t),e=e.sibling}function zk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),pr(t),r&4){try{fa(3,t,t.return),vf(3,t)}catch(x){Fe(t,t.return,x)}try{fa(5,t,t.return)}catch(x){Fe(t,t.return,x)}}break;case 1:qn(e,t),pr(t),r&512&&n!==null&&ws(n,n.return);break;case 5:if(qn(e,t),pr(t),r&512&&n!==null&&ws(n,n.return),t.flags&32){var i=t.stateNode;try{ma(i,"")}catch(x){Fe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&lS(i,o),ym(l,s);var u=ym(l,o);for(s=0;s<a.length;s+=2){var c=a[s],f=a[s+1];c==="style"?hS(i,f):c==="dangerouslySetInnerHTML"?cS(i,f):c==="children"?ma(i,f):eg(i,c,f,u)}switch(l){case"input":hm(i,o);break;case"textarea":aS(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?Es(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?Es(i,!!o.multiple,o.defaultValue,!0):Es(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ea]=o}catch(x){Fe(t,t.return,x)}}break;case 6:if(qn(e,t),pr(t),r&4){if(t.stateNode===null)throw Error(A(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){Fe(t,t.return,x)}}break;case 3:if(qn(e,t),pr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{va(e.containerInfo)}catch(x){Fe(t,t.return,x)}break;case 4:qn(e,t),pr(t);break;case 13:qn(e,t),pr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ng=Ve())),r&4&&Kv(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(u=Lt)||c,qn(e,t),Lt=u):qn(e,t),pr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(D=t,c=t.child;c!==null;){for(f=D=c;D!==null;){switch(h=D,d=h.child,h.tag){case 0:case 11:case 14:case 15:fa(4,h,h.return);break;case 1:ws(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){Fe(r,n,x)}}break;case 5:ws(h,h.return);break;case 22:if(h.memoizedState!==null){Yv(f);continue}}d!==null?(d.return=h,D=d):Yv(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=fS("display",s))}catch(x){Fe(t,t.return,x)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Fe(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),pr(t),r&4&&Kv(t);break;case 21:break;default:qn(e,t),pr(t)}}function pr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fk(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ma(i,""),r.flags&=-33);var o=$v(t);Km(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=$v(t);$m(t,l,s);break;default:throw Error(A(161))}}catch(a){Fe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UL(t,e,n){D=t,Uk(t,e,n)}function Uk(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var i=D,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Rc;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Lt;l=Rc;var u=Lt;if(Rc=s,(Lt=a)&&!u)for(D=i;D!==null;)s=D,a=s.child,s.tag===22&&s.memoizedState!==null?Xv(i):a!==null?(a.return=s,D=a):Xv(i);for(;o!==null;)D=o,Uk(o,e,n),o=o.sibling;D=i,Rc=l,Lt=u}qv(t,e,n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,D=o):qv(t,e,n)}}function qv(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||vf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Lv(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lv(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&va(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Lt||e.flags&512&&Gm(e)}catch(h){Fe(e,e.return,h)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function Yv(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Xv(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vf(4,e)}catch(a){Fe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Fe(e,i,a)}}var o=e.return;try{Gm(e)}catch(a){Fe(e,o,a)}break;case 5:var s=e.return;try{Gm(e)}catch(a){Fe(e,s,a)}}}catch(a){Fe(e,e.return,a)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var VL=Math.ceil,sf=Qr.ReactCurrentDispatcher,Mg=Qr.ReactCurrentOwner,_n=Qr.ReactCurrentBatchConfig,J=0,dt=null,Ye=null,St=0,mn=0,Cs=Li(0),ot=0,Ia=null,Ao=0,Sf=0,Lg=0,ha=null,tn=null,Ng=0,Ds=1/0,Wr=null,lf=!1,qm=null,Ti=null,Oc=!1,Si=null,af=0,da=0,Ym=null,Fc=-1,Bc=0;function jt(){return J&6?Ve():Fc!==-1?Fc:Fc=Ve()}function Ai(t){return t.mode&1?J&2&&St!==0?St&-St:EL.transition!==null?(Bc===0&&(Bc=ES()),Bc):(t=se,t!==0||(t=window.event,t=t===void 0?16:MS(t.type)),t):1}function Jn(t,e,n,r){if(50<da)throw da=0,Ym=null,Error(A(185));Ma(t,n,r),(!(J&2)||t!==dt)&&(t===dt&&(!(J&2)&&(Sf|=n),ot===4&&xi(t,St)),sn(t,r),n===1&&J===0&&!(e.mode&1)&&(Ds=Ve()+500,gf&&Ni()))}function sn(t,e){var n=t.callbackNode;TM(t,e);var r=jc(t,t===dt?St:0);if(r===0)n!==null&&iv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iv(n),e===1)t.tag===0?CL(Zv.bind(null,t)):XS(Zv.bind(null,t)),vL(function(){!(J&6)&&Ni()}),n=null;else{switch(bS(r)){case 1:n=og;break;case 4:n=wS;break;case 16:n=Wc;break;case 536870912:n=CS;break;default:n=Wc}n=qk(n,Vk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Vk(t,e){if(Fc=-1,Bc=0,J&6)throw Error(A(327));var n=t.callbackNode;if(Os()&&t.callbackNode!==n)return null;var r=jc(t,t===dt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uf(t,r);else{e=r;var i=J;J|=2;var o=Wk();(dt!==t||St!==e)&&(Wr=null,Ds=Ve()+500,wo(t,e));do try{jL();break}catch(l){Hk(t,l)}while(!0);xg(),sf.current=o,J=i,Ye!==null?e=0:(dt=null,St=0,e=ot)}if(e!==0){if(e===2&&(i=wm(t),i!==0&&(r=i,e=Xm(t,i))),e===1)throw n=Ia,wo(t,0),xi(t,r),sn(t,Ve()),n;if(e===6)xi(t,r);else{if(i=t.current.alternate,!(r&30)&&!HL(i)&&(e=uf(t,r),e===2&&(o=wm(t),o!==0&&(r=o,e=Xm(t,o))),e===1))throw n=Ia,wo(t,0),xi(t,r),sn(t,Ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:xo(t,tn,Wr);break;case 3:if(xi(t,r),(r&130023424)===r&&(e=Ng+500-Ve(),10<e)){if(jc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Im(xo.bind(null,t,tn,Wr),e);break}xo(t,tn,Wr);break;case 4:if(xi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Qn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VL(r/1960))-r,10<r){t.timeoutHandle=Im(xo.bind(null,t,tn,Wr),r);break}xo(t,tn,Wr);break;case 5:xo(t,tn,Wr);break;default:throw Error(A(329))}}}return sn(t,Ve()),t.callbackNode===n?Vk.bind(null,t):null}function Xm(t,e){var n=ha;return t.current.memoizedState.isDehydrated&&(wo(t,e).flags|=256),t=uf(t,e),t!==2&&(e=tn,tn=n,e!==null&&Zm(e)),t}function Zm(t){tn===null?tn=t:tn.push.apply(tn,t)}function HL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!er(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xi(t,e){for(e&=~Lg,e&=~Sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qn(e),r=1<<n;t[n]=-1,e&=~r}}function Zv(t){if(J&6)throw Error(A(327));Os();var e=jc(t,0);if(!(e&1))return sn(t,Ve()),null;var n=uf(t,e);if(t.tag!==0&&n===2){var r=wm(t);r!==0&&(e=r,n=Xm(t,r))}if(n===1)throw n=Ia,wo(t,0),xi(t,e),sn(t,Ve()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xo(t,tn,Wr),sn(t,Ve()),null}function Pg(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Ds=Ve()+500,gf&&Ni())}}function Ro(t){Si!==null&&Si.tag===0&&!(J&6)&&Os();var e=J;J|=1;var n=_n.transition,r=se;try{if(_n.transition=null,se=1,t)return t()}finally{se=r,_n.transition=n,J=e,!(J&6)&&Ni()}}function _g(){mn=Cs.current,ke(Cs)}function wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xL(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(mg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yc();break;case 3:Ps(),ke(rn),ke(Nt),Eg();break;case 5:Cg(r);break;case 4:Ps();break;case 13:ke(Me);break;case 19:ke(Me);break;case 10:vg(r.type._context);break;case 22:case 23:_g()}n=n.return}if(dt=t,Ye=t=Ri(t.current,null),St=mn=e,ot=0,Ia=null,Lg=Sf=Ao=0,tn=ha=null,So!==null){for(e=0;e<So.length;e++)if(n=So[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}So=null}return t}function Hk(t,e){do{var n=Ye;try{if(xg(),Pc.current=of,rf){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rf=!1}if(To=0,ht=it=Le=null,ca=!1,Aa=0,Mg.current=null,n===null||n.return===null){ot=1,Ia=e,Ye=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=St,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Bv(s);if(d!==null){d.flags&=-257,zv(d,s,l,o,e),d.mode&1&&Fv(o,u,e),e=d,a=u;var m=e.updateQueue;if(m===null){var x=new Set;x.add(a),e.updateQueue=x}else m.add(a);break e}else{if(!(e&1)){Fv(o,u,e),Dg();break e}a=Error(A(426))}}else if(Ae&&l.mode&1){var v=Bv(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),zv(v,s,l,o,e),gg(_s(a,l));break e}}o=a=_s(a,l),ot!==4&&(ot=2),ha===null?ha=[o]:ha.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=bk(o,a,e);Mv(o,p);break e;case 1:l=a;var g=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ti===null||!Ti.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=Tk(o,l,e);Mv(o,S);break e}}o=o.return}while(o!==null)}Gk(n)}catch(k){e=k,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function Wk(){var t=sf.current;return sf.current=of,t===null?of:t}function Dg(){(ot===0||ot===3||ot===2)&&(ot=4),dt===null||!(Ao&268435455)&&!(Sf&268435455)||xi(dt,St)}function uf(t,e){var n=J;J|=2;var r=Wk();(dt!==t||St!==e)&&(Wr=null,wo(t,e));do try{WL();break}catch(i){Hk(t,i)}while(!0);if(xg(),J=n,sf.current=r,Ye!==null)throw Error(A(261));return dt=null,St=0,ot}function WL(){for(;Ye!==null;)jk(Ye)}function jL(){for(;Ye!==null&&!yM();)jk(Ye)}function jk(t){var e=Kk(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?Gk(t):Ye=e,Mg.current=null}function Gk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FL(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,Ye=null;return}}else if(n=DL(n,e,mn),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);ot===0&&(ot=5)}function xo(t,e,n){var r=se,i=_n.transition;try{_n.transition=null,se=1,GL(t,e,n,r)}finally{_n.transition=i,se=r}return null}function GL(t,e,n,r){do Os();while(Si!==null);if(J&6)throw Error(A(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(AM(t,o),t===dt&&(Ye=dt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oc||(Oc=!0,qk(Wc,function(){return Os(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=_n.transition,_n.transition=null;var s=se;se=1;var l=J;J|=4,Mg.current=null,zL(t,n),zk(n,t),dL(Rm),Gc=!!Am,Rm=Am=null,t.current=n,UL(n,t,i),xM(),J=l,se=s,_n.transition=o}else t.current=n;if(Oc&&(Oc=!1,Si=t,af=i),o=t.pendingLanes,o===0&&(Ti=null),kM(n.stateNode,r),sn(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lf)throw lf=!1,t=qm,qm=null,t;return af&1&&t.tag!==0&&Os(),o=t.pendingLanes,o&1?t===Ym?da++:(da=0,Ym=t):da=0,Ni(),null}function Os(){if(Si!==null){var t=bS(af),e=_n.transition,n=se;try{if(_n.transition=null,se=16>t?16:t,Si===null)var r=!1;else{if(t=Si,Si=null,af=0,J&6)throw Error(A(331));var i=J;for(J|=4,D=t.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(D=u;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:fa(8,c,o)}var f=c.child;if(f!==null)f.return=c,D=f;else for(;D!==null;){c=D;var h=c.sibling,d=c.return;if(Dk(c),c===u){D=null;break}if(h!==null){h.return=d,D=h;break}D=d}}}var m=o.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fa(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,D=p;break e}D=o.return}}var g=t.current;for(D=g;D!==null;){s=D;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,D=y;else e:for(s=g;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vf(9,l)}}catch(k){Fe(l,l.return,k)}if(l===s){D=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,D=S;break e}D=l.return}}if(J=i,Ni(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(ff,t)}catch{}r=!0}return r}finally{se=n,_n.transition=e}}return!1}function Qv(t,e,n){e=_s(n,e),e=bk(t,e,1),t=bi(t,e,1),e=jt(),t!==null&&(Ma(t,1,e),sn(t,e))}function Fe(t,e,n){if(t.tag===3)Qv(t,t,n);else for(;e!==null;){if(e.tag===3){Qv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=_s(n,t),t=Tk(e,t,1),e=bi(e,t,1),t=jt(),e!==null&&(Ma(e,1,t),sn(e,t));break}}e=e.return}}function $L(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(St&n)===n&&(ot===4||ot===3&&(St&130023424)===St&&500>Ve()-Ng?wo(t,0):Lg|=n),sn(t,e)}function $k(t,e){e===0&&(t.mode&1?(e=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):e=1);var n=jt();t=Xr(t,e),t!==null&&(Ma(t,e,n),sn(t,n))}function KL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$k(t,n)}function qL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),$k(t,n)}var Kk;Kk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,_L(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Ae&&e.flags&1048576&&ZS(e,Qc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dc(t,e),t=e.pendingProps;var i=Ms(e,Nt.current);Rs(e,n),i=Tg(null,e,r,t,i,n);var o=Ag();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(r)?(o=!0,Xc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kg(e),i.updater=xf,e.stateNode=i,i._reactInternals=e,Fm(e,r,t,n),e=Um(null,e,r,!0,o,n)):(e.tag=0,Ae&&o&&pg(e),Wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=XL(r),t=Yn(r,t),i){case 0:e=zm(null,e,r,t,n);break e;case 1:e=Hv(null,e,r,t,n);break e;case 11:e=Uv(null,e,r,t,n);break e;case 14:e=Vv(null,e,r,Yn(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),zm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Hv(t,e,r,i,n);case 3:e:{if(Ik(e),t===null)throw Error(A(387));r=e.pendingProps,o=e.memoizedState,i=o.element,rk(t,e),tf(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=_s(Error(A(423)),e),e=Wv(t,e,r,n,i);break e}else if(r!==i){i=_s(Error(A(424)),e),e=Wv(t,e,r,n,i);break e}else for(gn=Ei(e.stateNode.containerInfo.firstChild),yn=e,Ae=!0,Zn=null,n=tk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ls(),r===i){e=Zr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return ik(e),t===null&&Pm(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Om(r,i)?s=null:o!==null&&Om(r,o)&&(e.flags|=32),Ok(t,e),Wt(t,e,s,n),e.child;case 6:return t===null&&Pm(e),null;case 13:return Mk(t,e,n);case 4:return wg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ns(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Uv(t,e,r,i,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,me(Jc,r._currentValue),r._currentValue=s,o!==null)if(er(o.value,s)){if(o.children===i.children&&!rn.current){e=Zr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Kr(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_m(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(A(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),_m(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rs(e,n),i=Dn(i),r=r(i),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,i=Yn(r,e.pendingProps),i=Yn(r.type,i),Vv(t,e,r,i,n);case 15:return Ak(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Dc(t,e),e.tag=1,on(r)?(t=!0,Xc(e)):t=!1,Rs(e,n),Ek(e,r,i),Fm(e,r,i,n),Um(null,e,r,!0,t,n);case 19:return Lk(t,e,n);case 22:return Rk(t,e,n)}throw Error(A(156,e.tag))};function qk(t,e){return kS(t,e)}function YL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new YL(t,e,n,r)}function Fg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XL(t){if(typeof t=="function")return Fg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ng)return 11;if(t===rg)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zc(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Fg(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ds:return Co(n.children,i,o,e);case tg:s=8,i|=8;break;case lm:return t=Pn(12,n,e,i|2),t.elementType=lm,t.lanes=o,t;case am:return t=Pn(13,n,e,i),t.elementType=am,t.lanes=o,t;case um:return t=Pn(19,n,e,i),t.elementType=um,t.lanes=o,t;case iS:return kf(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nS:s=10;break e;case rS:s=9;break e;case ng:s=11;break e;case rg:s=14;break e;case mi:s=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=Pn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Co(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function kf(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=iS,t.lanes=n,t.stateNode={isHidden:!1},t}function im(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function om(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hp(0),this.expirationTimes=Hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bg(t,e,n,r,i,o,s,l,a){return t=new ZL(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kg(o),t}function QL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yk(t){if(!t)return Ii;t=t._reactInternals;e:{if(Io(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(on(n))return YS(t,n,e)}return e}function Xk(t,e,n,r,i,o,s,l,a){return t=Bg(n,r,!0,t,i,o,s,l,a),t.context=Yk(null),n=t.current,r=jt(),i=Ai(n),o=Kr(r,i),o.callback=e??null,bi(n,o,i),t.current.lanes=i,Ma(t,i,r),sn(t,r),t}function wf(t,e,n,r){var i=e.current,o=jt(),s=Ai(i);return n=Yk(n),e.context===null?e.context=n:e.pendingContext=n,e=Kr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bi(i,e,s),t!==null&&(Jn(t,i,s,o),Nc(t,i,s)),s}function cf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zg(t,e){Jv(t,e),(t=t.alternate)&&Jv(t,e)}function JL(){return null}var Zk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ug(t){this._internalRoot=t}Cf.prototype.render=Ug.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));wf(t,e,null,null)};Cf.prototype.unmount=Ug.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ro(function(){wf(null,t,null,null)}),e[Yr]=null}};function Cf(t){this._internalRoot=t}Cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=RS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yi.length&&e!==0&&e<yi[n].priority;n++);yi.splice(n,0,t),n===0&&IS(t)}};function Vg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eS(){}function eN(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=cf(s);o.call(u)}}var s=Xk(e,r,t,0,null,!1,!1,"",eS);return t._reactRootContainer=s,t[Yr]=s.current,wa(t.nodeType===8?t.parentNode:t),Ro(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=cf(a);l.call(u)}}var a=Bg(t,0,!1,null,null,!1,!1,"",eS);return t._reactRootContainer=a,t[Yr]=a.current,wa(t.nodeType===8?t.parentNode:t),Ro(function(){wf(e,a,n,r)}),a}function bf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=cf(s);l.call(a)}}wf(e,s,t,i)}else s=eN(n,e,t,i,r);return cf(s)}TS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ra(e.pendingLanes);n!==0&&(sg(e,n|1),sn(e,Ve()),!(J&6)&&(Ds=Ve()+500,Ni()))}break;case 13:Ro(function(){var r=Xr(t,1);if(r!==null){var i=jt();Jn(r,t,1,i)}}),zg(t,1)}};lg=function(t){if(t.tag===13){var e=Xr(t,134217728);if(e!==null){var n=jt();Jn(e,t,134217728,n)}zg(t,134217728)}};AS=function(t){if(t.tag===13){var e=Ai(t),n=Xr(t,e);if(n!==null){var r=jt();Jn(n,t,e,r)}zg(t,e)}};RS=function(){return se};OS=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};vm=function(t,e,n){switch(e){case"input":if(hm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=mf(r);if(!i)throw Error(A(90));sS(r),hm(r,i)}}}break;case"textarea":aS(t,n);break;case"select":e=n.value,e!=null&&Es(t,!!n.multiple,e,!1)}};mS=Pg;gS=Ro;var tN={usingClientEntryPoint:!1,Events:[Na,ys,mf,dS,pS,Pg]},Jl={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nN={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vS(t),t===null?null:t.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||JL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(ea=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ea.isDisabled&&ea.supportsFiber))try{ff=ea.inject(nN),yr=ea}catch{}var ea;Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vg(e))throw Error(A(200));return QL(t,e,null,n)};Sn.createRoot=function(t,e){if(!Vg(t))throw Error(A(299));var n=!1,r="",i=Zk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bg(t,1,!1,null,null,n,!1,r,i),t[Yr]=e.current,wa(t.nodeType===8?t.parentNode:t),new Ug(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=vS(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Ro(t)};Sn.hydrate=function(t,e,n){if(!Ef(e))throw Error(A(200));return bf(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!Vg(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Zk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Xk(e,null,t,1,n??null,i,!1,o,s),t[Yr]=e.current,wa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cf(e)};Sn.render=function(t,e,n){if(!Ef(e))throw Error(A(200));return bf(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Ef(t))throw Error(A(40));return t._reactRootContainer?(Ro(function(){bf(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1};Sn.unstable_batchedUpdates=Pg;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ef(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return bf(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426"});var tw=Hr((CV,ew)=>{"use strict";function Jk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jk)}catch(t){console.error(t)}}Jk(),ew.exports=Qk()});var rw=Hr(Hg=>{"use strict";var nw=tw();Hg.createRoot=nw.createRoot,Hg.hydrateRoot=nw.hydrateRoot;var EV});var nA=Hr(ld=>{"use strict";var $4=mo(),K4=Symbol.for("react.element"),q4=Symbol.for("react.fragment"),Y4=Object.prototype.hasOwnProperty,X4=$4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z4={key:!0,ref:!0,__self:!0,__source:!0};function tA(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Y4.call(e,r)&&!Z4.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:K4,type:t,key:o,ref:s,props:i,_owner:X4.current}}ld.Fragment=q4;ld.jsx=tA;ld.jsxs=tA});var al=Hr((hW,rA)=>{"use strict";rA.exports=nA()});var LI=hr(mo()),NI=hr(rw());var Rt=hr(mo());function Tf(){return Tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tf.apply(null,arguments)}function iw(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ki=hr(mo(),1);var an=hr(mo(),1);var jg=[],aw=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?aw:jg).push(n=n+t[e])})();function rN(t){if(t<768)return!1;for(let e=0,n=jg.length;;){let r=e+n>>1;if(t<jg[r])n=r;else if(t>=aw[r])e=r+1;else return!0;if(e==n)return!1}}function ow(t){return t>=127462&&t<=127487}var sw=8205;function uw(t,e,n=!0,r=!0){return(n?cw:iN)(t,e,r)}function cw(t,e,n){if(e==t.length)return e;e&&fw(t.charCodeAt(e))&&hw(t.charCodeAt(e-1))&&e--;let r=Wg(t,e);for(e+=lw(r);e<t.length;){let i=Wg(t,e);if(r==sw||i==sw||n&&rN(i))e+=lw(i),r=i;else if(ow(i)){let o=0,s=e-2;for(;s>=0&&ow(Wg(t,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function iN(t,e,n){for(;e>0;){let r=cw(t,e-2,n);if(r<e)return r;e--}return 0}function Wg(t,e){let n=t.charCodeAt(e);if(!hw(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return fw(r)?(n-55296<<10)+(r-56320)+65536:n}function fw(t){return t>=56320&&t<57344}function hw(t){return t>=55296&&t<56320}function lw(t){return t<65536?1:2}var Y=class t{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Ws(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Us.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Ws(this,e,n);let r=[];return this.decompose(e,n,r,0),Us.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new No(this),o=new No(e);for(let s=n,l=n;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new No(this,e)}iterRange(e,n=this.length){return new Mf(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Lf(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?t.empty:e.length<=32?new kn(e):Us.from(kn.split(e,[]))}},kn=class t extends Y{constructor(e,n=oN(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.text[o],l=i+s.length;if((n?r:l)>=e)return new $g(i,l,r,s);i=l+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new t(dw(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),l=If(o.text,s.text.slice(),0,o.length);if(l.length<=32)r.push(new t(l,s.length+o.length));else{let a=l.length>>1;r.push(new t(l.slice(0,a)),new t(l.slice(a)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof t))return super.replace(e,n,r);[e,n]=Ws(this,e,n);let i=If(this.text,If(r.text,dw(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new t(i,o):Us.from(t.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){[e,n]=Ws(this,e,n);let i="";for(let o=0,s=0;o<=n&&s<this.text.length;s++){let l=this.text[s],a=o+l.length;o>e&&s&&(i+=r),e<a&&n>o&&(i+=l.slice(Math.max(0,e-o),n-o)),o=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new t(r,i)),r=[],i=-1);return i>-1&&n.push(new t(r,i)),n}},Us=class t extends Y{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.children[o],l=i+s.length,a=r+s.lines-1;if((n?a:l)>=e)return s.lineInner(e,n,r,i);i=l+1,r=a+1}}decompose(e,n,r,i){for(let o=0,s=0;s<=n&&o<this.children.length;o++){let l=this.children[o],a=s+l.length;if(e<=a&&n>=s){let u=i&((s<=e?1:0)|(a>=n?2:0));s>=e&&a<=n&&!u?r.push(l):l.decompose(e-s,n-s,r,u)}s=a+1}}replace(e,n,r){if([e,n]=Ws(this,e,n),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],l=o+s.length;if(e>=o&&n<=l){let a=s.replace(e-o,n-o,r),u=this.lines-s.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new t(c,this.length-(n-e)+r.length)}return super.replace(o,l,a)}o=l+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Ws(this,e,n);let i="";for(let o=0,s=0;o<this.children.length&&s<=n;o++){let l=this.children[o],a=s+l.length;s>e&&o&&(i+=r),e<a&&n>s&&(i+=l.sliceString(e-s,n-s,r)),s=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof t))return 0;let r=0,[i,o,s,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==s||o==l)return r;let a=this.children[i],u=e.children[o];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let m of e)m.flatten(d);return new kn(d,n)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,l=[],a=0,u=-1,c=[];function f(d){let m;if(d.lines>o&&d instanceof t)for(let x of d.children)f(x);else d.lines>s&&(a>s||!a)?(h(),l.push(d)):d instanceof kn&&a&&(m=c[c.length-1])instanceof kn&&d.lines+m.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new kn(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>i&&h(),a+=d.lines,u+=d.length+1,c.push(d))}function h(){a!=0&&(l.push(c.length==1?c[0]:t.from(c,u)),u=-1,a=c.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new t(l,n)}};Y.empty=new kn([""],0);function oN(t){let e=-1;for(let n of t)e+=n.length+1;return e}function If(t,e,n=0,r=1e9){for(let i=0,o=0,s=!0;o<t.length&&i<=r;o++){let l=t[o],a=i+l.length;a>=n&&(a>r&&(l=l.slice(0,r-i)),i<n&&(l=l.slice(n-i)),s?(e[e.length-1]+=l,s=!1):e.push(l)),i=a+1}return e}function dw(t,e,n){return If(t,[""],e,n)}var No=class{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof kn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,l=i instanceof kn?i.text.length:i.children.length;if(s==(n>0?l:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof kn){let a=i.text[s+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[s+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof kn?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Mf=class{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new No(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Lf=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(Y.prototype[Symbol.iterator]=function(){return this.iter()},No.prototype[Symbol.iterator]=Mf.prototype[Symbol.iterator]=Lf.prototype[Symbol.iterator]=function(){return this});var $g=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}};function Ws(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Xe(t,e,n=!0,r=!0){return uw(t,e,n,r)}function sN(t){return t>=56320&&t<57344}function lN(t){return t>=55296&&t<56320}function Ct(t,e){let n=t.charCodeAt(e);if(!lN(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return sN(r)?(n-55296<<10)+(r-56320)+65536:n}function Ua(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function wn(t){return t<65536?1:2}var Kg=/\r\n?|\n/,wt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(wt||(wt={})),Jr=class t{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],s=this.sections[n++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,n=!1){qg(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new t(e)}composeDesc(e){return this.empty?e:e.empty?this:xw(this,e)}mapDesc(e,n=!1){return e.empty?this:Yg(this,e,n)}mapPos(e,n=-1,r=wt.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],a=this.sections[s++],u=i+l;if(a<0){if(u>e)return o+(e-i);o+=l}else{if(r!=wt.Simple&&u>=e&&(r==wt.TrackDel&&i<e&&u>e||r==wt.TrackBefore&&i<e||r==wt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==i||n<0?o:o+a;o+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],s=this.sections[r++],l=i+o;if(s>=0&&i<=n&&l>=e)return i<e&&l>n?"cover":!0;i=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t(e)}static create(e){return new t(e)}},$t=class t extends Jr{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return qg(this,(n,r,i,o,s)=>e=e.replace(i,i+(r-n),s),!1),e}mapDesc(e,n=!1){return Yg(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let s=n[i],l=n[i+1];if(l>=0){n[i]=l,n[i+1]=s;let a=i>>1;for(;r.length<a;)r.push(Y.empty);r.push(s?e.slice(o,o+s):Y.empty)}o+=s}return new t(n,r)}compose(e){return this.empty?e:e.empty?this:xw(this,e,!0)}map(e,n=!1){return e.empty?this:Yg(this,e,n,!0)}iterChanges(e,n=!1){qg(this,e,n)}get desc(){return Jr.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new Po(this);e:for(let s=0,l=0;;){let a=s==e.length?1e9:e[s++];for(;l<a||l==a&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,a-l);Pt(i,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;Pt(n,c,f),f>0&&Pi(r,n,o.text),o.forward(c),l+=c}let u=e[s++];for(;l<u;){if(o.done)break e;let c=Math.min(o.len,u-l);Pt(n,c,-1),Pt(i,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),l+=c}}return{changes:new t(n,r),filtered:Jr.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],s=0,l=null;function a(c=!1){if(!c&&!i.length)return;s<n&&Pt(i,n-s,-1);let f=new t(i,o);l=l?l.compose(f.map(l)):f,i=[],o=[],s=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof t){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>n)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);let m=d?typeof d=="string"?Y.of(d.split(r||Kg)):d:Y.empty,x=m.length;if(f==h&&x==0)return;f<s&&a(),f>s&&Pt(i,f-s,-1),Pt(i,h-f,x),Pi(o,i,m),s=h}}return u(e),a(!l),l}static empty(e){return new t(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(Y.empty);r[i]=Y.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new t(n,r)}static createSet(e,n){return new t(e,n)}};function Pt(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Pi(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Y.empty);t.push(n)}}function qg(t,e,n){let r=t.inserted;for(let i=0,o=0,s=0;s<t.sections.length;){let l=t.sections[s++],a=t.sections[s++];if(a<0)i+=l,o+=l;else{let u=i,c=o,f=Y.empty;for(;u+=l,c+=a,a&&r&&(f=f.append(r[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)l=t.sections[s++],a=t.sections[s++];e(i,u,o,c,f),i=u,o=c}}}function Yg(t,e,n,r=!1){let i=[],o=r?[]:null,s=new Po(t),l=new Po(e);for(let a=-1;;){if(s.done&&l.len||l.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&l.ins==-1){let u=Math.min(s.len,l.len);Pt(i,u,-1),s.forward(u),l.forward(u)}else if(l.ins>=0&&(s.ins<0||a==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!n))){let u=l.len;for(Pt(i,l.ins,-1);u;){let c=Math.min(s.len,u);s.ins>=0&&a<s.i&&s.len<=c&&(Pt(i,0,s.ins),o&&Pi(o,i,s.text),a=s.i),s.forward(c),u-=c}l.next()}else if(s.ins>=0){let u=0,c=s.len;for(;c;)if(l.ins==-1){let f=Math.min(c,l.len);u+=f,c-=f,l.forward(f)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;Pt(i,u,a<s.i?s.ins:0),o&&a<s.i&&Pi(o,i,s.text),a=s.i,s.forward(s.len-c)}else{if(s.done&&l.done)return o?$t.createSet(i,o):Jr.create(i);throw new Error("Mismatched change set lengths")}}}function xw(t,e,n=!1){let r=[],i=n?[]:null,o=new Po(t),s=new Po(e);for(let l=!1;;){if(o.done&&s.done)return i?$t.createSet(r,i):Jr.create(r);if(o.ins==0)Pt(r,o.len,0,l),o.next();else if(s.len==0&&!s.done)Pt(r,0,s.ins,l),i&&Pi(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let a=Math.min(o.len2,s.len),u=r.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;Pt(r,a,c,l),i&&c&&Pi(i,r,s.text)}else s.ins==-1?(Pt(r,o.off?0:o.len,a,l),i&&Pi(i,r,o.textBit(a))):(Pt(r,o.off?0:o.len,s.off?0:s.ins,l),i&&!s.off&&Pi(i,r,s.text));l=(o.ins>a||s.ins>=0&&s.len>a)&&(l||r.length>u),o.forward2(a),s.forward(a)}}}}var Po=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Y.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Y.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},zs=class t{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new t(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return b.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return b.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return b.range(e.anchor,e.head)}static create(e,n,r){return new t(e,n,r)}},b=class t{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:t.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new t([this.main],0)}addRange(e,n=!0){return t.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,t.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new t(e.ranges.map(n=>zs.fromJSON(n)),e.main)}static single(e,n=e){return new t([t.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return t.normalized(e.slice(),n);r=o.to}return new t(e,n)}static cursor(e,n=0,r,i){return zs.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let o=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?zs.create(n,e,48|o):zs.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let l=s.from,a=Math.max(o.to,s.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?t.range(a,l):t.range(l,a))}}return new t(e,n)}};function vw(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}var o0=0,N=class t{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=o0++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new t(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:s0),!!e.static,e.enables)}of(e){return new Vs([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vs(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vs(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}};function s0(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}var Vs=class{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=o0++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?u=!0:((n=e[f.id])!==null&&n!==void 0?n:1)&1||c.push(e[f.id]);return{create(f){return f.values[s]=r(f),1},update(f,h){if(a&&h.docChanged||u&&(h.docChanged||h.selection)||Xg(f,c)){let d=r(f);if(l?!pw(d,f.values[s],i):!i(d,f.values[s]))return f.values[s]=d,1}return 0},reconfigure:(f,h)=>{let d,m=h.config.address[o];if(m!=null){let x=Df(h,m);if(this.dependencies.every(v=>v instanceof N?h.facet(v)===f.facet(v):v instanceof re?h.field(v,!1)==f.field(v,!1):!0)||(l?pw(d=r(f),x,i):i(d=r(f),x)))return f.values[s]=x,0}else d=r(f);return f.values[s]=d,1}}}};function pw(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Xg(t,e){let n=!1;for(let r of e)Da(t,r)&1&&(n=!0);return n}function aN(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),o=r.filter(a=>!(a&1)),s=t[e.id]>>1;function l(a){let u=[];for(let c=0;c<r.length;c++){let f=Df(a,r[c]);if(i[c]==2)for(let h of f)u.push(h);else u.push(f)}return e.combine(u)}return{create(a){for(let u of r)Da(a,u);return a.values[s]=l(a),1},update(a,u){if(!Xg(a,o))return 0;let c=l(a);return e.compare(c,a.values[s])?0:(a.values[s]=c,1)},reconfigure(a,u){let c=Xg(a,r),f=u.config.facets[e.id],h=u.facet(e);if(f&&!c&&s0(n,f))return a.values[s]=h,0;let d=l(a);return e.compare(d,h)?(a.values[s]=h,0):(a.values[s]=d,1)}}}var Af=N.define({static:!0}),re=class t{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new t(o0++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Af).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[n]=s,1)},reconfigure:(r,i)=>{let o=r.facet(Af),s=i.facet(Af),l;return(l=o.find(a=>a.field==this))&&l!=s.find(a=>a.field==this)?(r.values[n]=l.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Af.of({field:this,create:e})]}get extension(){return this}},Mo={lowest:4,low:3,default:2,high:1,highest:0};function _a(t){return e=>new Nf(e,t)}var Cn={highest:_a(Mo.highest),high:_a(Mo.high),default:_a(Mo.default),low:_a(Mo.low),lowest:_a(Mo.lowest)},Nf=class{constructor(e,n){this.inner=e,this.prec=n}},Pf=class t{of(e){return new Fa(this,e)}reconfigure(e){return t.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Fa=class{constructor(e,n){this.compartment=e,this.inner=n}},_f=class t{constructor(e,n,r,i,o,s){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),s=new Map;for(let h of uN(e,n,s))h instanceof re?i.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],u=[];for(let h of i)l[h.id]=u.length<<1,u.push(d=>h.slot(d));let c=r?.config.facets;for(let h in o){let d=o[h],m=d[0].facet,x=c&&c[h]||[];if(d.every(v=>v.type==0))if(l[m.id]=a.length<<1|1,s0(x,d))a.push(r.facet(m));else{let v=m.combine(d.map(p=>p.value));a.push(r&&m.compare(v,r.facet(m))?r.facet(m):v)}else{for(let v of d)v.type==0?(l[v.id]=a.length<<1|1,a.push(v.value)):(l[v.id]=u.length<<1,u.push(p=>v.dynamicSlot(p)));l[m.id]=u.length<<1,u.push(v=>aN(v,m,d))}}let f=u.map(h=>h(l));return new t(e,s,f,l,a,o)}};function uN(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(s,l){let a=i.get(s);if(a!=null){if(a<=l)return;let u=r[a].indexOf(s);u>-1&&r[a].splice(u,1),s instanceof Fa&&n.delete(s.compartment)}if(i.set(s,l),Array.isArray(s))for(let u of s)o(u,l);else if(s instanceof Fa){if(n.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(s.compartment)||s.inner;n.set(s.compartment,u),o(u,l)}else if(s instanceof Nf)o(s.inner,s.prec);else if(s instanceof re)r[l].push(s),s.provides&&o(s.provides,l);else if(s instanceof Vs)r[l].push(s),s.facet.extensions&&o(s.facet.extensions,Mo.default);else{let u=s.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,l)}}return o(t,Mo.default),r.reduce((s,l)=>s.concat(l))}function Da(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Df(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}var Sw=N.define(),Zg=N.define({combine:t=>t.some(e=>e),static:!0}),kw=N.define({combine:t=>t.length?t[0]:void 0,static:!0}),ww=N.define(),Cw=N.define(),Ew=N.define(),bw=N.define({combine:t=>t.length?t[0]:!1}),_t=class{constructor(e,n){this.type=e,this.value=n}static define(){return new Qg}},Qg=class{of(e){return new _t(this,e)}},Jg=class{constructor(e){this.map=e}of(e){return new H(this,e)}},H=class t{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new t(this.type,n)}is(e){return this.type==e}static define(e={}){return new Jg(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}};H.reconfigure=H.define();H.appendConfig=H.define();var st=class t{constructor(e,n,r,i,o,s){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&vw(r,n.newLength),o.some(l=>l.type==t.time)||(this.annotations=o.concat(t.time.of(Date.now())))}static create(e,n,r,i,o,s){return new t(e,n,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(t.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}};st.time=_t.define();st.userEvent=_t.define();st.addToHistory=_t.define();st.remote=_t.define();function cN(t,e){let n=[];for(let r=0,i=0;;){let o,s;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],s=t[r++];else if(i<e.length)o=e[i++],s=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Tw(t,e,n){var r;let i,o,s;return n?(i=e.changes,o=$t.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:H.mapEffects(t.effects,i).concat(H.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function e0(t,e,n){let r=e.selection,i=Hs(e.annotations);return e.userEvent&&(i=i.concat(st.userEvent.of(e.userEvent))),{changes:e.changes instanceof $t?e.changes:$t.of(e.changes||[],n,t.facet(kw)),selection:r&&(r instanceof b?r:b.single(r.anchor,r.head)),effects:Hs(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Aw(t,e,n){let r=e0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let s=!!e[o].sequential;r=Tw(r,e0(t,e[o],s?r.changes.newLength:t.doc.length),s)}let i=st.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return hN(n?fN(i):i)}function fN(t){let e=t.startState,n=!0;for(let i of e.facet(ww)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:cN(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=$t.empty(e.doc.length);else{let s=t.changes.filter(n);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}t=st.create(e,i,t.selection&&t.selection.map(o),H.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(Cw);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof st?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof st?t=o[0]:t=Aw(e,Hs(o),!1)}return t}function hN(t){let e=t.startState,n=e.facet(Ew),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=Tw(r,e0(e,o,t.changes.newLength),!0))}return r==t?t:st.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}var dN=[];function Hs(t){return t==null?dN:Array.isArray(t)?t:[t]}var ae=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ae||(ae={})),pN=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,t0;try{t0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function mN(t){if(t0)return t0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||pN.test(n)))return!0}return!1}function gN(t){return e=>{if(!/\S/.test(e))return ae.Space;if(mN(e))return ae.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ae.Word;return ae.Other}}var ee=class t{constructor(e,n,r,i,o,s){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Da(this,l<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Da(this,r),Df(this,r)}update(...e){return Aw(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let l of e.effects)l.is(Pf.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(l.value.compartment,l.value.extension)):l.is(H.reconfigure)?(n=null,r=l.value):l.is(H.appendConfig)&&(n=null,r=Hs(r).concat(l.value));let o;n?o=e.startState.values.slice():(n=_f.resolve(r,i,this),o=new t(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let s=e.startState.facet(Zg)?e.newSelection:e.newSelection.asSingle();new t(n,e.newDoc,s,o,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:b.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],s=Hs(r.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),u=this.changes(a.changes),c=u.map(i);for(let h=0;h<l;h++)o[h]=o[h].map(c);let f=i.mapDesc(u,!0);o.push(a.range.map(f)),i=i.compose(c),s=H.mapEffects(s,c).concat(H.mapEffects(Hs(a.effects),f))}return{changes:i,selection:b.create(o,n.mainIndex),effects:s}}changes(e=[]){return e instanceof $t?e:$t.of(e,this.doc.length,this.facet(t.lineSeparator))}toText(e){return Y.of(e.split(this.facet(t.lineSeparator)||Kg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Da(this,n),Df(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof re&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],l=e[o];i.push(s.init(a=>s.spec.fromJSON(l,a)))}}return t.create({doc:e.doc,selection:b.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=_f.resolve(e.extensions||[],new Map),r=e.doc instanceof Y?e.doc:Y.of((e.doc||"").split(n.staticFacet(t.lineSeparator)||Kg)),i=e.selection?e.selection instanceof b?e.selection:b.single(e.selection.anchor,e.selection.head):b.single(0);return vw(i,r.length),n.staticFacet(Zg)||(i=i.asSingle()),new t(n,r,i,n.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(t.tabSize)}get lineBreak(){return this.facet(t.lineSeparator)||`
`}get readOnly(){return this.facet(bw)}phrase(e,...n){for(let r of this.facet(t.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(Sw))for(let s of o(this,n,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return gN(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,l=e-r;for(;s>0;){let a=Xe(n,s,!1);if(o(n.slice(a,s))!=ae.Word)break;s=a}for(;l<i;){let a=Xe(n,l);if(o(n.slice(l,a))!=ae.Word)break;l=a}return s==l?null:b.range(s+r,l+r)}};ee.allowMultipleSelections=Zg;ee.tabSize=N.define({combine:t=>t.length?t[0]:4});ee.lineSeparator=kw;ee.readOnly=bw;ee.phrases=N.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ee.languageData=Sw;ee.changeFilter=ww;ee.transactionFilter=Cw;ee.transactionExtender=Ew;Pf.reconfigure=H.define();function Dt(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let s=i[o],l=r[o];if(l===void 0)r[o]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](l,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}var tr=class{eq(e){return this==e}range(e,n=e){return Ba.create(e,n,this)}};tr.prototype.startSide=tr.prototype.endSide=0;tr.prototype.point=!1;tr.prototype.mapMode=wt.TrackDel;var Ba=class t{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new t(e,n,r)}};function n0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}var r0=class t{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let s=i,l=o.length;;){if(s==l)return s;let a=s+l>>1,u=o[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==s)return u>=0?s:l;u>=0?l=a:s=a+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],s=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,f=this.to[a]+e,h,d;if(c==f){let m=n.mapPos(c,u.startSide,u.mapMode);if(m==null||(h=d=m,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<h)))continue}else if(h=n.mapPos(c,u.startSide),d=n.mapPos(f,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(s<0&&(s=h),u.point&&(l=Math.max(l,d-h)),r.push(u),i.push(h-s),o.push(d-s))}return{mapped:r.length?new t(i,o,r,l):null,pos:s}}},te=class t{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new t(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(n.length==0&&!s)return this;if(r&&(n=n.slice().sort(n0)),this.isEmpty)return n.length?t.of(n):this;let l=new Ff(this,null,-1).goto(0),a=0,u=[],c=new Re;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let f=n[a++];c.addInner(f.from,f.to,f.value)||u.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!s||i>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||i>l.to||o<l.from||s(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(Ba.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?t.empty:this.nextLayer.update({add:u,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s],u=e.touchesRange(l,l+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:f}=a.map(l,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(f))}}let o=this.nextLayer.map(e);return n.length==0?o:new t(r,n,o||t.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(n>=o&&e<=o+s.length&&s.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return za.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return za.from(e).goto(n)}static compare(e,n,r,i,o=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=mw(s,l,r),u=new Lo(s,a,o),c=new Lo(l,a,o);r.iterGaps((f,h,d)=>gw(u,f,c,h,d,i)),r.empty&&r.length==0&&gw(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let o=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),s=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let l=mw(o,s),a=new Lo(o,l,0).goto(r),u=new Lo(s,l,0).goto(r);for(;;){if(a.to!=u.to||!i0(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,o=-1){let s=new Lo(e,null,o).goto(n),l=n,a=s.openStart;for(;;){let u=Math.min(s.to,r);if(s.point){let c=s.activeForPoint(s.to),f=s.pointFrom<n?c.length+1:s.point.startSide<0?c.length:Math.min(c.length,a);i.point(l,u,s.point,c,f,s.pointRank),a=Math.min(s.openEnd(u),c.length)}else u>l&&(i.span(l,u,s.active,a),a=s.openEnd(u));if(s.to>r)return a+(s.point&&s.to>r?1:0);l=s.to,s.next()}}static of(e,n=!1){let r=new Re;for(let i of e instanceof Ba?[e]:n?yN(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return t.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=t.empty;i=i.nextLayer)n=new t(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}};te.empty=new te([],[],null,-1);function yN(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(n0(e,r)>0)return t.slice().sort(n0);e=r}return t}te.empty.nextLayer=te.empty;var Re=class t{finishChunk(e){this.chunks.push(new r0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new t)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(te.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=te.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}};function mw(t,e,n){let r=new Map;for(let o of t)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let l=r.get(o.chunk[s]);l!=null&&(n?n.mapPos(l):l)==o.chunkPos[s]&&!n?.touchesRange(l,l+o.chunk[s].length)&&i.add(o.chunk[s])}return i}var Ff=class{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},za=class t{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new Ff(s,n,r,o));return i.length==1?i[0]:new t(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Gg(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Gg(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Gg(this.heap,0)}}};function Gg(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}var Lo=class{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=za.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Rf(this.active,e),Rf(this.activeTo,e),Rf(this.activeRank,e),this.minActive=yw(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Of(this.active,n,r),Of(this.activeTo,n,i),Of(this.activeRank,n,o),e&&Of(e,n,this.cursor.from),this.minActive=yw(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Rf(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}};function gw(t,e,n,r,i,o){t.goto(e),n.goto(r);let s=r+i,l=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,f=c<0?t.to+a:n.to,h=Math.min(f,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&i0(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(l,h,t.point,n.point):h>l&&!i0(t.active,n.active)&&o.compareRange(l,h,t.active,n.active),f>s)break;(u||t.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(f),l=f,c<=0&&t.next(),c>=0&&n.next()}}function i0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Rf(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Of(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function yw(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function ei(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Xe(t,i));return r}function Bf(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=Xe(t,i)}return r===!0?-1:t.length}var l0="\u037C",Rw=typeof Symbol>"u"?"__"+l0:Symbol.for(l0),a0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},Bn=class{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,l,a,u){let c=[],f=/^@(\w+)\b/.exec(s[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(s[0]+";");for(let d in l){let m=l[d];if(/&/.test(d))o(d.split(/,\s*/).map(x=>s.map(v=>x.replace(/&/,v))).reduce((x,v)=>x.concat(v)),m,a);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");o(i(d),m,c,h)}else m!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+m+";")}(c.length||h)&&a.push((r&&!f&&!u?s.map(r):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Ow[Rw]||1;return Ow[Rw]=e+1,l0+e.toString(36)}static mount(e,n,r){let i=e[a0],o=r&&r.nonce;i?o&&i.setNonce(o):i=new u0(e,o),i.mount(Array.isArray(n)?n:[n],e)}},Iw=new Map,u0=class{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=Iw.get(r);if(o)return e[a0]=o;this.sheet=new i.CSSStyleSheet,Iw.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[a0]=this}mount(e,n){let r=this.sheet,i=0,o=0;for(let s=0;s<e.length;s++){let l=e[s],a=this.modules.indexOf(l);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),a==-1){if(this.modules.splice(o++,0,l),r)for(let u=0;u<l.rules.length;u++)r.insertRule(l.rules[u],i++)}else{for(;o<a;)i+=this.modules[o++].rules.length;i+=l.rules.length,o++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+`
`;this.styleTag.textContent=s;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var ti={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},js={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xN=typeof navigator<"u"&&/Mac/.test(navigator.platform),vN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Ze=0;Ze<10;Ze++)ti[48+Ze]=ti[96+Ze]=String(Ze);var Ze;for(Ze=1;Ze<=24;Ze++)ti[Ze+111]="F"+Ze;var Ze;for(Ze=65;Ze<=90;Ze++)ti[Ze]=String.fromCharCode(Ze+32),js[Ze]=String.fromCharCode(Ze);var Ze;for(zf in ti)js.hasOwnProperty(zf)||(js[zf]=ti[zf]);var zf;function Mw(t){var e=xN&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vN&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?js:ti)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function ie(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Lw(t,arguments[e]);return t}function Lw(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Lw(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}var Kt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},y0=typeof document<"u"?document:{documentElement:{style:{}}},x0=/Edge\/(\d+)/.exec(Kt.userAgent),kC=/MSIE \d/.test(Kt.userAgent),v0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Kt.userAgent),yh=!!(kC||v0||x0),Nw=!yh&&/gecko\/(\d+)/i.test(Kt.userAgent),c0=!yh&&/Chrome\/(\d+)/.exec(Kt.userAgent),Pw="webkitFontSmoothing"in y0.documentElement.style,S0=!yh&&/Apple Computer/.test(Kt.vendor),_w=S0&&(/Mobile\/\w+/.test(Kt.userAgent)||Kt.maxTouchPoints>2),P={mac:_w||/Mac/.test(Kt.platform),windows:/Win/.test(Kt.platform),linux:/Linux|X11/.test(Kt.platform),ie:yh,ie_version:kC?y0.documentMode||6:v0?+v0[1]:x0?+x0[1]:0,gecko:Nw,gecko_version:Nw?+(/Firefox\/(\d+)/.exec(Kt.userAgent)||[0,0])[1]:0,chrome:!!c0,chrome_version:c0?+c0[1]:0,ios:_w,android:/Android\b/.test(Kt.userAgent),webkit:Pw,webkit_version:Pw?+(/\bAppleWebKit\/(\d+)/.exec(Kt.userAgent)||[0,0])[1]:0,safari:S0,safari_version:S0?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Kt.userAgent)||[0,0])[1]:0,tabSize:y0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Ja(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function k0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Xf(t,e){if(!e.anchorNode)return!1;try{return k0(t,e.anchorNode)}catch{return!1}}function Xs(t){return t.nodeType==3?Bo(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Ga(t,e,n,r){return n?Dw(t,e,n,r,-1)||Dw(t,e,n,r,1):!1}function Fo(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function nh(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Dw(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Cr(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=Fo(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Cr(t):0}else return!1}}function Cr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lu(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function SN(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function wC(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function kN(t,e,n,r,i,o,s,l){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==a.body,m=1,x=1;if(d)h=SN(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let g=c.getBoundingClientRect();({scaleX:m,scaleY:x}=wC(c,g)),h={left:g.left,right:g.left+c.clientWidth*m,top:g.top,bottom:g.top+c.clientHeight*x}}let v=0,p=0;if(i=="nearest")e.top<h.top?(p=e.top-(h.top+s),n>0&&e.bottom>h.bottom+p&&(p=e.bottom-h.bottom+s)):e.bottom>h.bottom&&(p=e.bottom-h.bottom+s,n<0&&e.top-p<h.top&&(p=e.top-(h.top+s)));else{let g=e.bottom-e.top,y=h.bottom-h.top;p=(i=="center"&&g<=y?e.top+g/2-y/2:i=="start"||i=="center"&&n<0?e.top-s:e.bottom-y+s)-h.top}if(r=="nearest"?e.left<h.left?(v=e.left-(h.left+o),n>0&&e.right>h.right+v&&(v=e.right-h.right+o)):e.right>h.right&&(v=e.right-h.right+o,n<0&&e.left<h.left+v&&(v=e.left-(h.left+o))):v=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==l?e.left-o:e.right-(h.right-h.left)+o)-h.left,v||p)if(d)u.scrollBy(v,p);else{let g=0,y=0;if(p){let S=c.scrollTop;c.scrollTop+=p/x,y=(c.scrollTop-S)*x}if(v){let S=c.scrollLeft;c.scrollLeft+=v/m,g=(c.scrollLeft-S)*m}e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y},g&&Math.abs(g-v)<1&&(r="nearest"),y&&Math.abs(y-p)<1&&(i="nearest")}if(d)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function wN(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}var w0=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Cr(n):0),r,Math.min(e.focusOffset,r?Cr(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}},_o=null;P.safari&&P.safari_version>=26&&(_o=!1);function CC(t){if(t.setActive)return t.setActive();if(_o)return t.focus(_o);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(_o==null?{get preventScroll(){return _o={preventScroll:!0},!0}}:void 0),!_o){_o=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}var Fw;function Bo(t,e,n=e){let r=Fw||(Fw=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Ys(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function CN(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function EC(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function EN(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Cr(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Cr(n))}else{if(n==t)return!0;r=Fo(n),n=n.parentNode}}function bC(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function TC(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Cr(n)}else if(n.parentNode&&!nh(n))r=Fo(n),n=n.parentNode;else return null}}function AC(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!nh(n))r=Fo(n)+1,n=n.parentNode;else return null}}var qt=class t{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new t(e.parentNode,Fo(e),n)}static after(e,n){return new t(e.parentNode,Fo(e)+1,n)}},sy=[],he=class t{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=i?i.nextSibling:r.firstChild)){let l=t.get(o);(!l||!l.parent&&l.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,n),s.flags&=-8}if(o=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&o!=s.dom&&(n.written=!0),s.dom.parentNode==r)for(;o&&o!=s.dom;)o=Bw(o);else r.insertBefore(s.dom,o);i=s.dom}for(o=i?i.nextSibling:r.firstChild,o&&n&&n.node==r&&(n.written=!0);o;)o=Bw(o)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=Cr(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!t.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,o=-1,s=-1,l=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let f=this.children[a],h=u+f.length;if(u<e&&h>n)return f.domBoundsAround(e,n,u);if(h>=e&&i==-1&&(i=a,o=u),u>n&&f.dom.parentNode==this.dom){s=a,l=c;break}c=h,u=h+f.breakAfter}return{from:o,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=sy){this.markDirty();for(let i=e;i<n;i++){let o=this.children[i];o.parent==this&&r.indexOf(o)<0&&o.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new rh(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}};he.prototype.breakAfter=0;function Bw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}var rh=class{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}};function RC(t,e,n,r,i,o,s,l,a){let{children:u}=t,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,h=f?f.breakAfter:s;if(!(e==r&&c&&!s&&!h&&o.length<2&&c.merge(n,i,o.length?f:null,n==0,l,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&f?.breakAfter)?(e==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,a)?o[o.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),o.push(d))):d?.breakAfter&&(f?f.breakAfter=1:s=1),r++}for(c&&(c.breakAfter=s,n>0&&(!s&&o.length&&c.merge(n,c.length,o[0],!1,l,0)?c.breakAfter=o.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,l,0),e++));e<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),a=o.length?0:l;else if(u[e].become(o[0]))e++,o.shift(),l=o.length?0:a;else break;!o.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,l,a)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function OC(t,e,n,r,i,o){let s=t.childCursor(),{i:l,off:a}=s.findPos(n,1),{i:u,off:c}=s.findPos(e,-1),f=e-n;for(let h of r)f+=h.length;t.length+=f,RC(t,u,c,l,a,r,0,i,o)}var bN=256,Er=class t extends he{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof t)||this.length-(n-e)+r.length>bN||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new qt(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return TN(this.dom,e,n)}},Fi=class t extends he{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(EC(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,o,s){return r&&(!(r instanceof t&&r.mark.eq(this.mark))||e&&o<=0||n<this.length&&s<=0)?!1:(OC(this,e,n,r?r.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,o=0;for(let l of this.children){let a=r+l.length;a>e&&n.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=o),r=a,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new t(this.mark,n,s)}domAtPos(e){return IC(this,e)}coordsAt(e,n){return LC(this,e,n)}};function TN(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&n<0||e==r&&n>=0?P.chrome||P.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let l=Bo(t,i,o).getClientRects();if(!l.length)return null;let a=l[(s?s<0:n>=0)?0:l.length-1];return P.safari&&!s&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),s?lu(a,s<0):a||null}var Zs=class t extends he{static create(e,n,r){return new t(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=t.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,o,s){return r&&(!(r instanceof t)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof t&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Y.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Y.empty}domAtPos(e){return(this.length?e==0:this.side>0)?qt.before(this.dom):qt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let l=s?i.length-1:0;o=i[l],!(e>0?l==0:l==i.length-1||o.top<o.bottom);l+=s?-1:1);return lu(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},eu=class t extends he{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof t&&e.side==this.side}split(){return new t(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?qt.before(this.dom):qt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Y.empty}get isHidden(){return!0}};Er.prototype.children=Zs.prototype.children=eu.prototype.children=sy;function IC(t,e){let n=t.dom,{children:r}=t,i=0;for(let o=0;i<r.length;i++){let s=r[i],l=o+s.length;if(!(l==o&&s.getSide()<=0)){if(e>o&&e<l&&s.dom.parentNode==n)return s.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=i;o>0;o--){let s=r[o-1];if(s.dom.parentNode==n)return s.domAtPos(s.length)}for(let o=i;o<r.length;o++){let s=r[o];if(s.dom.parentNode==n)return s.domAtPos(0)}return new qt(n,0)}function MC(t,e,n){let r,{children:i}=t;n>0&&e instanceof Fi&&i.length&&(r=i[i.length-1])instanceof Fi&&r.mark.eq(e.mark)?MC(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function LC(t,e,n){let r=null,i=-1,o=null,s=-1;function l(u,c){for(let f=0,h=0;f<u.children.length&&h<=c;f++){let d=u.children[f],m=h+d.length;m>=c&&(d.children.length?l(d,c-h):(!o||o.isHidden&&(n>0||RN(o,d)))&&(m>c||h==m&&d.getSide()>0)?(o=d,s=c-h):(h<c||h==m&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-h)),h=m}}l(t,e);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):AN(t)}function AN(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Xs(e);return n[n.length-1]||null}function RN(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function C0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}var zw=Object.create(null);function ih(t,e,n){if(t==e)return!0;t||(t=zw),e||(e=zw);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(i.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function E0(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function ON(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}var He=class{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},Yt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Yt||(Yt={})),I=class extends tr{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new tu(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Bi(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=NC(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(s?n?2e8:1:-6e8)+1}return new Bi(e,r,i,n,e.widget||null,!0)}static line(e){return new nu(e)}static set(e,n=!1){return te.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};I.none=te.empty;var tu=class t extends I{constructor(e){let{start:n,end:r}=NC(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof t&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&ih(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}};tu.prototype.point=!1;var nu=class t extends I{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof t&&this.spec.class==e.spec.class&&ih(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}};nu.prototype.mapMode=wt.TrackBefore;nu.prototype.point=!0;var Bi=class t extends I{constructor(e,n,r,i,o,s){super(n,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?n<=0?wt.TrackBefore:wt.TrackAfter:wt.TrackDel}get type(){return this.startSide!=this.endSide?Yt.WidgetRange:this.startSide<=0?Yt.WidgetBefore:Yt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof t&&IN(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}};Bi.prototype.point=!0;function NC(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function IN(t,e){return t==e||!!(t&&e&&t.compare(e))}function Zf(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}var Et=class t extends he{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,o,s){if(r){if(!(r instanceof t))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),OC(this,e,n,r?r.children.slice():[],o,s),!0}split(e){let n=new t;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)n.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ih(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){MC(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=C0(n,this.attrs||{})),r&&(this.attrs=C0({class:r},this.attrs||{}))}domAtPos(e){return IC(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(EC(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(E0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&he.get(i)instanceof Fi;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=he.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!P.ios||!this.children.some(o=>o instanceof Er))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Er)||/[^ -~]/.test(r.text))return null;let i=Xs(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=LC(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let s=(o-i.textHeight)/2;return{top:r.top+s,bottom:r.bottom-s,left:r.left,right:r.left}}}return r}become(e){return e instanceof t&&this.children.length==0&&e.children.length==0&&ih(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=n){if(o instanceof t)return o;if(s>n)break}i=s+o.breakAfter}return null}},Do=class t extends he{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,o,s){return r&&(!(r instanceof t)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?qt.before(this.dom):qt.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new t(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return sy}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Y.empty}domBoundsAround(){return null}become(e){return e instanceof t&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof ru?null:lu(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}},ru=class extends He{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},$a=class t{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Do&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Et),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Uf(new eu(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Do)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),o=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Uf(new Er(this.text.slice(this.textOff,this.textOff+o)),n),r),this.atCursorPos=!0,this.textOff+=o,e-=o,r=i<=o?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof Bi){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(r instanceof Bi)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Do(r.widget||zi.block,l,r));else{let a=Zs.create(r.widget||zi.inline,l,l?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&o<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||o>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(Uf(new eu(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(Uf(a,i),o),this.atCursorPos=c,this.pendingBuffer=c?e<n||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(e,n,r,i,o){let s=new t(e,n,r,o);return s.openEnd=te.spans(i,n,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}};function Uf(t,e){for(let n of e)t=new Fi(n,[t],t.length);return t}var zi=class extends He{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};zi.inline=new zi("span");zi.block=new zi("div");var ue=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ue||(ue={})),zo=ue.LTR,ly=ue.RTL;function PC(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}var MN=PC("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),LN=PC("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),b0=Object.create(null),vr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);b0[e]=n,b0[n]=-e}function _C(t){return t<=247?MN[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?LN[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}var NN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,kr=class{get dir(){return this.level%2?ly:zo}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let o=-1;for(let s=0;s<e.length;s++){let l=e[s];if(l.from<=n&&l.to>=n){if(l.level==r)return s;(o<0||(i!=0?i<0?l.from<n:l.to>n:e[o].level>l.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}};function DC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!DC(r.inner,i.inner))return!1}return!0}var fe=[];function PN(t,e,n,r,i){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:e,l=o<r.length?r[o].from:n,a=o?256:i;for(let u=s,c=a,f=a;u<l;u++){let h=_C(t.charCodeAt(u));h==512?h=c:h==8&&f==4&&(h=16),fe[u]=h==4?2:h,h&7&&(f=h),c=h}for(let u=s,c=a,f=a;u<l;u++){let h=fe[u];if(h==128)u<l-1&&c==fe[u+1]&&c&24?h=fe[u]=c:fe[u]=256;else if(h==64){let d=u+1;for(;d<l&&fe[d]==64;)d++;let m=u&&c==8||d<n&&fe[d]==8?f==1?1:8:256;for(let x=u;x<d;x++)fe[x]=m;u=d-1}else h==8&&f==1&&(fe[u]=1);c=h,h&7&&(f=h)}}}function _N(t,e,n,r,i){let o=i==1?2:1;for(let s=0,l=0,a=0;s<=r.length;s++){let u=s?r[s-1].to:e,c=s<r.length?r[s].from:n;for(let f=u,h,d,m;f<c;f++)if(d=b0[h=t.charCodeAt(f)])if(d<0){for(let x=l-3;x>=0;x-=3)if(vr[x+1]==-d){let v=vr[x+2],p=v&2?i:v&4?v&1?o:i:0;p&&(fe[f]=fe[vr[x]]=p),l=x;break}}else{if(vr.length==189)break;vr[l++]=f,vr[l++]=h,vr[l++]=a}else if((m=fe[f])==2||m==1){let x=m==i;a=x?0:1;for(let v=l-3;v>=0;v-=3){let p=vr[v+2];if(p&2)break;if(x)vr[v+2]|=2;else{if(p&4)break;vr[v+2]|=4}}}}}function DN(t,e,n,r){for(let i=0,o=r;i<=n.length;i++){let s=i?n[i-1].to:t,l=i<n.length?n[i].from:e;for(let a=s;a<l;){let u=fe[a];if(u==256){let c=a+1;for(;;)if(c==l){if(i==n.length)break;c=n[i++].to,l=i<n.length?n[i].from:e}else if(fe[c]==256)c++;else break;let f=o==1,h=(c<e?fe[c]:r)==1,d=f==h?f?1:2:r;for(let m=c,x=i,v=x?n[x-1].to:t;m>a;)m==v&&(m=n[--x].from,v=x?n[x-1].to:t),fe[--m]=d;a=c}else o=u,a++}}}function T0(t,e,n,r,i,o,s){let l=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,f=!1;if(u==o.length||a<o[u].from){let x=fe[a];x!=l&&(c=!1,f=x==16)}let h=!c&&l==1?[]:null,d=c?r:r+1,m=a;e:for(;;)if(u<o.length&&m==o[u].from){if(f)break e;let x=o[u];if(!c)for(let v=x.to,p=u+1;;){if(v==n)break e;if(p<o.length&&o[p].from==v)v=o[p++].to;else{if(fe[v]==l)break e;break}}if(u++,h)h.push(x);else{x.from>a&&s.push(new kr(a,x.from,d));let v=x.direction==zo!=!(d%2);A0(t,v?r+1:r,i,x.inner,x.from,x.to,s),a=x.to}m=x.to}else{if(m==n||(c?fe[m]!=l:fe[m]==l))break;m++}h?T0(t,a,m,r+1,i,h,s):a<m&&s.push(new kr(a,m,d)),a=m}else for(let a=n,u=o.length;a>e;){let c=!0,f=!1;if(!u||a>o[u-1].to){let x=fe[a-1];x!=l&&(c=!1,f=x==16)}let h=!c&&l==1?[]:null,d=c?r:r+1,m=a;e:for(;;)if(u&&m==o[u-1].to){if(f)break e;let x=o[--u];if(!c)for(let v=x.from,p=u;;){if(v==e)break e;if(p&&o[p-1].to==v)v=o[--p].from;else{if(fe[v-1]==l)break e;break}}if(h)h.push(x);else{x.to<a&&s.push(new kr(x.to,a,d));let v=x.direction==zo!=!(d%2);A0(t,v?r+1:r,i,x.inner,x.from,x.to,s),a=x.from}m=x.from}else{if(m==e||(c?fe[m-1]!=l:fe[m-1]==l))break;m--}h?T0(t,m,a,r+1,i,h,s):m<a&&s.push(new kr(m,a,d)),a=m}}function A0(t,e,n,r,i,o,s){let l=e%2?2:1;PN(t,i,o,r,l),_N(t,i,o,r,l),DN(i,o,r,l),T0(t,i,o,e,n,r,s)}function FN(t,e,n){if(!t)return[new kr(0,0,e==ly?1:0)];if(e==zo&&!n.length&&!NN.test(t))return FC(t.length);if(n.length)for(;t.length>fe.length;)fe[fe.length]=256;let r=[],i=e==zo?0:1;return A0(t,i,i,n,0,t.length,r),r}function FC(t){return[new kr(0,t,0)]}var BC="";function BN(t,e,n,r,i){var o;let s=r.head-t.from,l=kr.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc),a=e[l],u=a.side(i,n);if(s==u){let h=l+=i?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],s=a.side(!i,n),u=a.side(i,n)}let c=Xe(t.text,s,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),BC=t.text.slice(Math.min(s,c),Math.max(s,c));let f=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<a.level?b.cursor(f.side(!i,n)+t.from,f.forward(i,n)?1:-1,f.level):b.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function zN(t,e,n){for(let r=e;r<n;r++){let i=_C(t.charCodeAt(r));if(i==1)return zo;if(i==2||i==4)return ly}return zo}var zC=N.define(),UC=N.define(),VC=N.define(),HC=N.define(),R0=N.define(),WC=N.define(),jC=N.define(),ay=N.define(),uy=N.define(),GC=N.define({combine:t=>t.some(e=>e)}),$C=N.define({combine:t=>t.some(e=>e)}),KC=N.define(),Ka=class t{constructor(e,n="nearest",r="nearest",i=5,o=5,s=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new t(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new t(b.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},Vf=H.define({map:(t,e)=>t.map(e)}),qC=H.define();function bt(t,e,n){let r=t.facet(HC);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}var ni=N.define({combine:t=>t.length?t[0]:!0}),UN=0,Gs=N.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}}),X=class t{constructor(e,n,r,i,o){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(Gs.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Gs.of({plugin:this,arg:e}))}static define(e,n){let{eventHandlers:r,eventObservers:i,provide:o,decorations:s}=n||{};return new t(UN++,e,r,i,l=>{let a=[];return s&&a.push(iu.of(u=>{let c=u.plugin(l);return c?s(c):I.none})),o&&a.push(o(l)),a})}static fromClass(e,n){return t.define((r,i)=>new e(r,i),n)}},qa=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(bt(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){bt(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){bt(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},YC=N.define(),cy=N.define(),iu=N.define(),XC=N.define(),au=N.define(),ZC=N.define();function Uw(t,e){let n=t.state.facet(ZC);if(!n.length)return n;let r=n.map(o=>o instanceof Function?o(t):o),i=[];return te.spans(r,e.from,e.to,{point(){},span(o,s,l,a){let u=o-e.from,c=s-e.from,f=i;for(let h=l.length-1;h>=0;h--,a--){let d=l[h].spec.bidiIsolate,m;if(d==null&&(d=zN(e.text,u,c)),a>0&&f.length&&(m=f[f.length-1]).to==u&&m.direction==d)m.to=c,f=m.inner;else{let x={from:u,to:c,direction:d,inner:[]};f.push(x),f=x.inner}}}}),i}var QC=N.define();function fy(t){let e=0,n=0,r=0,i=0;for(let o of t.state.facet(QC)){let s=o(t);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(n=Math.max(n,s.right)),s.top!=null&&(r=Math.max(r,s.top)),s.bottom!=null&&(i=Math.max(i,s.bottom)))}return{left:e,right:n,top:r,bottom:i}}var Va=N.define(),wr=class t{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,s=0,l=0;;i++){let a=i==e.length?null:e[i],u=s-l,c=a?a.fromB:1e9;for(;o<n.length&&n[o]<c;){let f=n[o],h=n[o+1],d=Math.max(l,f),m=Math.min(c,h);if(d<=m&&new t(d+u,m+u,d,m).addToSet(r),h>c)break;o+=2}if(!a)return r;new t(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),s=a.toA,l=a.toB}}},oh=class t{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=$t.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,s,l,a)=>i.push(new wr(o,s,l,a))),this.changedRanges=i}static create(e,n,r){return new t(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},sh=class extends he{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=I.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Et],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!KN(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?HN(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new wr(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(P.ie||P.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,l=this.updateDeco(),a=GN(s,l,e.changes);return r=wr.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=P.chrome||P.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Do&&s.widget instanceof ru&&o.push(s.dom);i.updateGaps(o)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,o=this.childCursor(n);for(let s=i.length-1;;s--){let l=s>=0?i[s]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:f}=l,h,d,m,x;if(r&&r.range.fromB<f&&r.range.toB>c){let S=$a.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),k=$a.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,m=S.openStart,x=k.openEnd;let w=this.compositionView(r);k.breakAtStart?w.breakAfter=1:k.content.length&&w.merge(w.length,w.length,k.content[0],!1,k.openStart,0)&&(w.breakAfter=k.content[0].breakAfter,k.content.shift()),S.content.length&&w.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),h=S.content.concat(w).concat(k.content)}else({content:h,breakAtStart:d,openStart:m,openEnd:x}=$a.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:v,off:p}=o.findPos(u,1),{i:g,off:y}=o.findPos(a,-1);RC(this,g,y,v,p,h,d,m,x)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(qC)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Er(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Fi(i,[n],n.length);let r=new Et;return r.append(n,0),r}fixCompositionDOM(e){let n=(o,s)=>{s.flags|=8|(s.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(s);let l=he.get(o);l&&l!=s&&(l.dom=null),s.setDOM(o)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)r=i.childPos(r.off,1),i=i.children[r.i],n(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&!(this.view.state.facet(ni)||this.dom.tabIndex>-1)&&Xf(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||o))return;let s=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(P.gecko&&l.empty&&!this.hasComposition&&VN(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=u=new qt(f,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||(!Ga(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Ga(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{P.android&&P.chrome&&this.dom.contains(c.focusNode)&&$N(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Ja(this.view.root);if(f)if(l.empty){if(P.gecko){let h=WN(a.node,a.offset);if(h&&h!=3){let d=(h==1?TC:AC)(a.node,a.offset);d&&(a=new qt(d.node,d.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),h.setEnd(u.node,u.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new qt(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new qt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Ga(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Ja(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let s=Et.find(this,n.head);if(!s)return;let l=s.posAtStart;if(n.head==l||n.head==l+s.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&r.collapse(i,o)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let o=he.get(n.childNodes[i]);o instanceof Et&&(r=o.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let o=he.get(n.childNodes[i]);o instanceof Et&&(r=o.domAtPos(o.length))}return r?new qt(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=he.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Et)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let l=this.children[s],a=o-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!r||l instanceof Et&&!(r instanceof Et&&n>=0)))r=l,i=u;else if(r&&u==e&&a==e&&l instanceof Do&&Math.abs(n)<2){if(l.deco.startSide<0)break;s&&(r=null)}o=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Et))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(r,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}r=a}if(!(i instanceof Er))return null;let o=Xe(i.text,r);if(o==r)return null;let s=Bo(i.dom,r,o).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(l==s.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==ue.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(h>i)break;if(u>=r){let d=f.dom.getBoundingClientRect();if(n.push(d.height),s){let m=f.dom.lastChild,x=m?Xs(m):[];if(x.length){let v=x[x.length-1],p=a?v.right-d.left:d.right-v.left;p>l&&(l=p,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?ue.RTL:ue.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Et){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Xs(e.firstChild)[0];n=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new rh(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],s=o?o.from-1:this.length;if(s>r){let l=(n.lineBlockAt(s).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(I.replace({widget:new ru(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return I.set(e)}updateDeco(){let e=1,n=this.view.state.facet(iu).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),r=!1,i=this.view.state.facet(XC).map((o,s)=>{let l=typeof o=="function";return l&&(r=!0),l?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(te.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(KC))try{if(u(this.view,e.range,e))return!0}catch(c){bt(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=fy(this.view),s={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;kN(this.view.scrollDOM,s,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==ue.LTR)}lineHasWidget(e){let{i:n}=this.childCursor().findPos(e);if(n==this.children.length)return!1;let r=i=>i instanceof Zs||i.children.some(r);return r(this.children[n])}};function VN(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function JC(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=TC(n.focusNode,n.focusOffset),i=AC(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let l=he.get(i.node);if(!l||l instanceof Er&&l.text!=i.node.nodeValue)o=i;else if(t.docView.lastCompositionAfterCursor){let a=he.get(r.node);!a||a instanceof Er&&a.text!=r.node.nodeValue||(o=i)}}if(t.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function HN(t,e,n){let r=JC(t,n);if(!r)return null;let{node:i,from:o,to:s}=r,l=i.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(r.from,r.to)!=l)return null;let a=e.invertedDesc,u=new wr(a.mapPos(o),a.mapPos(s),o,s),c=[];for(let f=i.parentNode;;f=f.parentNode){let h=he.get(f);if(h instanceof Fi)c.push({node:f,deco:h.mark});else{if(h instanceof Et||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=t.contentDOM)c.push({node:f,deco:new tu({inclusive:!0,attributes:ON(f),tagName:f.tagName.toLowerCase()})});else return null}}}function WN(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}var jN=class{constructor(){this.changes=[]}compareRange(e,n){Zf(e,n,this.changes)}comparePoint(e,n){Zf(e,n,this.changes)}boundChange(e){Zf(e,e,this.changes)}};function GN(t,e,n){let r=new jN;return te.compare(t,e,n,r),r.changes}function $N(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function KN(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function qN(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return b.cursor(e);o==0?n=1:o==i.length&&(n=-1);let s=o,l=o;n<0?s=Xe(i.text,o,!1):l=Xe(i.text,o);let a=r(i.text.slice(s,l));for(;s>0;){let u=Xe(i.text,s,!1);if(r(i.text.slice(u,s))!=a)break;s=u}for(;l<i.length;){let u=Xe(i.text,l);if(r(i.text.slice(l,u))!=a)break;l=u}return b.range(s+i.from,l+i.from)}function YN(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function XN(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function f0(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Vw(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Hw(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function O0(t,e,n){let r,i,o,s,l=!1,a,u,c,f;for(let m=t.firstChild;m;m=m.nextSibling){let x=Xs(m);for(let v=0;v<x.length;v++){let p=x[v];i&&f0(i,p)&&(p=Vw(Hw(p,i.bottom),i.top));let g=YN(e,p),y=XN(n,p);if(g==0&&y==0)return m.nodeType==3?Ww(m,e,n):O0(m,e,n);(!r||s>y||s==y&&o>g)&&(r=m,i=p,o=g,s=y,l=g?e<p.left?v>0:v<x.length-1:!0),g==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=m,c=p):n<p.top&&(!f||f.top>p.top)&&(u=m,f=p):c&&f0(c,p)?c=Hw(c,p.bottom):f&&f0(f,p)&&(f=Vw(f,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):f&&f.top<=n&&(r=u,i=f),!r)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Ww(r,h,n);if(l&&r.contentEditable!="false")return O0(r,h,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function Ww(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,s=0;for(let l=0;l<r;l++){let a=Bo(t,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;s||(s=e-c.left);let f=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let h=e>=(c.left+c.right)/2,d=h;if(P.chrome||P.gecko){let m=Bo(t,l).getBoundingClientRect();Math.abs(m.left-c.right)<.1&&(d=!h)}if(f<=0)return{node:t,offset:l+(d?1:0)};i=l+(d?1:0),o=f}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function eE(t,e,n,r=-1){var i,o;let s=t.contentDOM.getBoundingClientRect(),l=s.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:f}=e,h=f-l;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,k=!1;a=t.elementAtHeight(h),a.type!=Yt.Text;)for(;h=r>0?a.bottom+S:a.top-S,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,r=-r}f=l+h;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:jw(t,s,a,c,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:jw(t,s,a,c,f);let m=t.dom.ownerDocument,x=t.root.elementFromPoint?t.root:m,v=x.elementFromPoint(c,f);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(s.left+1,Math.min(s.right-1,c)),v=x.elementFromPoint(c,f),v&&!t.contentDOM.contains(v)&&(v=null));let p,g=-1;if(v&&((i=t.docView.nearest(v))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let S=m.caretPositionFromPoint(c,f);S&&({offsetNode:p,offset:g}=S)}else if(m.caretRangeFromPoint){let S=m.caretRangeFromPoint(c,f);S&&({startContainer:p,startOffset:g}=S)}p&&(!t.contentDOM.contains(p)||P.safari&&ZN(p,g,c)||P.chrome&&QN(p,g,c))&&(p=void 0),p&&(g=Math.min(Cr(p),g))}if(!p||!t.docView.dom.contains(p)){let S=Et.find(t.docView,d);if(!S)return h>a.top+a.height/2?a.to:a.from;({node:p,offset:g}=O0(S.dom,c,f))}let y=t.docView.nearest(p);if(!y)return null;if(y.isWidget&&((o=y.dom)===null||o===void 0?void 0:o.nodeType)==1){let S=y.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(p,g)+y.posAtStart}function jw(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-l)*.5)/l);o+=a*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+Bf(s,o,t.state.tabSize)}function tE(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let o=i.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=i.parentNode;if(!s||s.nodeName=="DIV")break;i=s}}return Bo(t,r-1,r).getBoundingClientRect().right>n}function ZN(t,e,n){return tE(t,e,n)}function QN(t,e,n){if(e!=0)return tE(t,e,n);for(let i=t;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=t.nodeType==1?t.getBoundingClientRect():Bo(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function I0(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let o of r.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==Yt.Text&&(i.type!=o.type||(n<0?o.from<e:o.to>e)))&&(i=o)}}return i||r}return r}function JN(t,e,n,r){let i=I0(t,e.head,e.assoc||-1),o=!r||i.type!=Yt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let s=t.dom.getBoundingClientRect(),l=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(l==ue.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(a!=null)return b.cursor(a,n?-1:1)}return b.cursor(n?i.to:i.from,n?-1:1)}function Gw(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let l=e,a=null;;){let u=BN(i,o,s,l,n),c=BC;if(!u){if(i.number==(n?t.state.doc.lines:1))return l;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return l}else{if(!r)return u;a=r(c)}l=u}}function eP(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let s=r(o);return i==ae.Space&&(i=s),i==s}}function tP(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return b.cursor(i,e.assoc);let s=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)s==null&&(s=u.left-a.left),l=o<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);s==null&&(s=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),l=(o<0?d.top:d.bottom)+c}let f=a.left+s,h=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=l+(h+d)*o,x=eE(t,{x:f,y:m},!1,o);if(m<a.top||m>a.bottom||(o<0?x<i:x>i)){let v=t.docView.coordsForChar(x),p=!v||m<v.top?-1:1;return b.cursor(x,p,void 0,s)}}}function Ya(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(o,s,l)=>{if(e>o&&e<s){let a=r||n||(e-o<s-e?-1:1);e=a<0?o:s,r=a}});if(!r)return e}}function nE(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let s=Ya(t,i.from,0);s!=i.from&&(o=b.cursor(s,-1))}else{let s=Ya(t,i.from,-1),l=Ya(t,i.to,1);(s!=i.from||l!=i.to)&&(o=b.range(i.from==i.anchor?s:l,i.from==i.head?s:l))}o&&(n||(n=e.ranges.slice()),n[r]=o)}return n?b.create(n,e.mainIndex):e}function h0(t,e,n){let r=Ya(t.state.facet(au).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:b.cursor(r,r<n.from?1:-1)}var Ha="\uFFFF",M0=class{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ee.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ha}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==n)break;let l=he.get(i),a=he.get(s);(l&&a?l.breakAfter:(l?l.breakAfter:nh(i))||nh(s)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&!rP(s,n)&&this.lineBreak(),i=s}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,l;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(l=i.exec(n))&&(o=l.index,s=l[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let n=he.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(nP(e,r.node,r.offset)?n:0))}};function nP(t,e,n){for(;;){if(!e||n<Cr(e))return!1;if(e==t)return!0;n=Fo(e)+1,e=e.parentNode}}function rP(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=he.get(t);if(!(r?.isWidget||t.cmIgnore))return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}var lh=class{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}},L0=class{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let l=o||s?[]:oP(e),a=new M0(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=sP(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!k0(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=s&&s.node==l.anchorNode&&s.offset==l.anchorOffset||!k0(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((P.ios||P.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(a,u),h=Math.max(a,u),d=c.from-f,m=c.to-h;(d==0||d==1||f==0)&&(m==0||m==-1||h==e.state.doc.length)&&(a=0,u=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(b.range(u,a)):this.newSel=b.single(u,a)}}};function rE(t,e){let n,{newSel:r}=e,i=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:l}=e.bounds,a=i.from,u=null;(o===8||P.android&&e.text.length<l-s)&&(a=i.to,u="end");let c=iE(t.state.doc.sliceString(s,l,Ha),e.text,a-s,u);c&&(P.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Ha+Ha&&c.toB--,n={from:s+c.from,to:s+c.toA,insert:Y.of(e.text.slice(c.from,c.toB).split(Ha))})}else r&&(!t.hasFocus&&t.state.facet(ni)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(P.mac||P.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=b.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Y.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:P.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=b.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Y.of([" "])}),n)return hy(t,n,r,o);if(r&&!r.main.eq(i)){let s=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(s=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(r=nE(t.state.facet(au).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:s,userEvent:l}),!0}else return!1}function hy(t,e,n,r=-1){if(P.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(P.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ys(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Ys(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Ys(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let s,l=()=>s||(s=iP(t,e,n));return t.state.facet(WC).some(a=>a(t,e.from,e.to,o,l))||t.dispatch(l()),!0}function iP(t,e,n){let r,i=t.state,o=i.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let a=e.from<o.from?-1:1,u=a<0?o.from:o.to,c=Ya(i.facet(au).map(f=>f(t)),u,a);e.from==c&&(s=c)}if(s>-1)r={changes:e,selection:b.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=o.from<e.from?i.sliceDoc(o.from,e.from):"",u=o.to>e.to?i.sliceDoc(e.to,o.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let c=t.state.sliceDoc(e.from,e.to),f,h=n&&JC(t,n.main.head);if(h){let m=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-m}}else f=t.state.doc.lineAt(o.head);let d=o.to-e.to;r=i.changeByRange(m=>{if(m.from==o.from&&m.to==o.to)return{changes:a,range:u||m.map(a)};let x=m.to-d,v=x-c.length;if(t.state.sliceDoc(v,x)!=c||x>=f.from&&v<=f.to)return{range:m};let p=i.changes({from:v,to:x,insert:e.insert}),g=m.to-o.to;return{changes:p,range:u?b.range(Math.max(0,u.anchor+g),Math.max(0,u.head+g)):m.map(p)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:l,scrollIntoView:!0})}function iE(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let s=t.length,l=e.length;for(;s>0&&l>0&&t.charCodeAt(s-1)==e.charCodeAt(l-1);)s--,l--;if(r=="end"){let a=Math.max(0,o-Math.min(s,l));n-=s+a-o}if(s<o&&t.length<e.length){let a=n<=o&&n>=s?o-n:0;o-=a,l=o+(l-s),s=o}else if(l<o){let a=n<=o&&n>=l?o-n:0;o-=a,s=o+(s-l),l=o}return{from:o,toA:s,toB:l}}function oP(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new lh(n,r)),(i!=n||o!=r)&&e.push(new lh(i,o))),e}function sP(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?b.single(n+e,r+e):null}var N0=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,P.safari&&e.contentDOM.addEventListener("input",()=>null),P.gecko&&kP(e.contentDOM.ownerDocument)}handleEvent(e){!dP(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=lP(e),r=this.handlers,i=this.view.contentDOM;for(let o in n)if(o!="scroll"){let s=!n[o].handlers.length,l=r[o];l&&s!=!l.handlers.length&&(i.removeEventListener(o,this.handleEvent),l=null),l||i.addEventListener(o,this.handleEvent,{passive:s})}for(let o in r)o!="scroll"&&!n[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&sE.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),P.android&&P.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return P.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=oE.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||aP.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ys(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:P.safari&&!P.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function $w(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){bt(n.state,i)}}}function lP(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,o=i&&i.plugin.domEventHandlers,s=i&&i.plugin.domEventObservers;if(o)for(let l in o){let a=o[l];a&&n(l).handlers.push($w(r.value,a))}if(s)for(let l in s){let a=s[l];a&&n(l).observers.push($w(r.value,a))}}for(let r in nr)n(r).handlers.push(nr[r]);for(let r in Un)n(r).observers.push(Un[r]);return e}var oE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],aP="dthko",sE=[16,17,18,20,91,92,224,225],Hf=6;function Wf(t){return Math.max(0,t)*.7+8}function uP(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}var P0=class{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=wN(e.contentDOM),this.atoms=e.state.facet(au).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ee.allowMultipleSelections)&&cP(e,n),this.dragging=hP(e,n)&&uE(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&uP(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,o=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=fy(this.view);e.clientX-a.left<=i+Hf?n=-Wf(i-e.clientX):e.clientX+a.right>=s-Hf&&(n=Wf(e.clientX-s)),e.clientY-a.top<=o+Hf?r=-Wf(o-e.clientY):e.clientY+a.bottom>=l-Hf&&(r=Wf(e.clientY-l)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=nE(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function cP(t,e){let n=t.state.facet(zC);return n.length?n[0](e):P.mac?e.metaKey:e.ctrlKey}function fP(t,e){let n=t.state.facet(UC);return n.length?n[0](e):P.mac?!e.altKey:!e.ctrlKey}function hP(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Ja(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function dP(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=he.get(n))&&r.ignoreEvent(e))return!1;return!0}var nr=Object.create(null),Un=Object.create(null),lE=P.ie&&P.ie_version<15||P.ios&&P.webkit_version<604;function pP(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),aE(t,n.value)},50)}function xh(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function aE(t,e){e=xh(t.state,ay,e);let{state:n}=t,r,i=1,o=n.toText(e),s=o.lines==n.selection.ranges.length;if(_0!=null&&n.selection.ranges.every(a=>a.empty)&&_0==o.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let f=n.toText((s?o.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:f},range:b.cursor(u.from+f.length)}})}else s?r=n.changeByRange(a=>{let u=o.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:b.cursor(a.from+u.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Un.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};nr.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Un.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Un.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};nr.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(VC))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=yP(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new P0(t,e,n,r)),r&&t.observer.ignore(()=>{CC(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Kw(t,e,n,r){if(r==1)return b.cursor(e,n);if(r==2)return qN(t.state,e,n);{let i=Et.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,l=i?i.posAtEnd:o.to;return l<t.state.doc.length&&l==o.to&&l++,b.range(s,l)}}var qw=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function mP(t,e,n,r){let i=Et.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&qw(n,r,s))return-1;let l=i.coordsAt(o,1);return l&&qw(n,r,l)?1:s&&s.bottom>=r?-1:1}function Yw(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:mP(t,n,e.clientX,e.clientY)}}var gP=P.ie&&P.ie_version<=11,Xw=null,Zw=0,Qw=0;function uE(t){if(!gP)return t.detail;let e=Xw,n=Qw;return Xw=t,Qw=Date.now(),Zw=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Zw+1)%3:1}function yP(t,e){let n=Yw(t,e),r=uE(e),i=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),i=i.map(o.changes))},get(o,s,l){let a=Yw(t,o),u,c=Kw(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!s){let f=Kw(t,n.pos,n.bias,r),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?b.range(h,d):b.range(d,h)}return s?i.replaceRange(i.main.extend(c.from,c.to)):l&&r==1&&i.ranges.length>1&&(u=xP(i,a.pos))?u:l?i.addRange(c):b.create([c])}}}function xP(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return b.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}nr.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let o=i.posAtStart,s=o+i.length;(o>=n.to||s<=n.from)&&(n=b.range(o,s))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",xh(t.state,uy,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};nr.dragend=t=>(t.inputState.draggedContent=null,!1);function Jw(t,e,n,r){if(n=xh(t.state,ay,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=r&&o&&fP(t,e)?{from:o.from,to:o.to}:null,l={from:i,insert:n},a=t.state.changes(s?[s,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}nr.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&Jw(t,e,r.filter(s=>s!=null).join(t.state.lineBreak),!1)};for(let s=0;s<n.length;s++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[s]=l.result),o()},l.readAsText(n[s])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Jw(t,e,r,!0),!0}return!1};nr.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=lE?null:e.clipboardData;return n?(aE(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(pP(t),!1)};function vP(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function SP(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let s=t.doc.lineAt(o);s.number>i&&(e.push(s.text),n.push({from:s.from,to:Math.min(t.doc.length,s.to+1)})),i=s.number}r=!0}return{text:xh(t,uy,e.join(t.lineBreak)),ranges:n,linewise:r}}var _0=null;nr.copy=nr.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=SP(t.state);if(!n&&!i)return!1;_0=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=lE?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(vP(t,n),!1)};var cE=_t.define();function fE(t,e){let n=[];for(let r of t.facet(jC)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:cE.of(!0)}):null}function hE(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=fE(t.state,e);n?t.dispatch(n):t.update([])}},10)}Un.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),hE(t)};Un.blur=t=>{t.observer.clearSelectionRange(),hE(t)};Un.compositionstart=Un.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Un.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,P.chrome&&P.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Un.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};nr.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let l=s[0],a=t.posAtDOM(l.startContainer,l.startOffset),u=t.posAtDOM(l.endContainer,l.endOffset);return hy(t,{from:a,to:u,insert:t.state.toText(o)},null),!0}}let i;if(P.chrome&&P.android&&(i=oE.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return P.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),P.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Un.compositionend(t,e),20),!1};var eC=new Set;function kP(t){eC.has(t)||(eC.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}var tC=["pre-wrap","normal","pre-line","break-spaces"],Qs=!1;function nC(){Qs=!1}var D0=class{constructor(e){this.lineWrapping=e,this.doc=Y.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return tC.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o,s){let l=tC.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=o,a){this.heightSamples={};for(let u=0;u<s.length;u++){let c=s[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}},F0=class{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}},Sr=class t{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?Yt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Bi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new t(this.from,this.length+e.length,this.top,this.height+e.height,n)}},we=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(we||(we={})),Qf=.001,En=class t{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Qf&&(Qs=!0),this.height=e)}replace(e,n,r){return t.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this,s=r.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:f}=i[l],h=o.lineAt(a,we.ByPosNoHeight,r.setDoc(n),0,0),d=h.to>=u?h:o.lineAt(u,we.ByPosNoHeight,r,0,0);for(f+=d.to-u,u=d.to;l>0&&h.from<=i[l-1].toA;)a=i[l-1].fromA,c=i[l-1].fromB,l--,a<h.from&&(h=o.lineAt(a,we.ByPosNoHeight,r,0,0));c+=h.from-a,a=h.from;let m=z0.build(r.setDoc(s),e,c,f);o=ah(o,o.replace(a,u,m))}return o.updateHeight(r,0)}static empty(){return new zn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(o>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,o-=l.size}else break;else if(i<o){let l=e[n++];l&&(i+=l.size)}else{let l=e[--r];l&&(o+=l.size)}let s=0;return e[n-1]==null?(s=1,n--):e[n]==null&&(s=1,r++),new B0(t.of(e.slice(0,n)),s,t.of(e.slice(r)))}};function ah(t,e){return t==e?t:(t.constructor!=e.constructor&&(Qs=!0),e)}En.prototype.size=1;var uh=class extends En{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Sr(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,n,r,i,o,s){e<=o+this.length&&n>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},zn=class t extends uh{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Sr(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof t||i instanceof Di&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Di?i=new t(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):En.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Di=class t extends En{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,o=i-r+1,s,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*o);s=a/o,this.length>o+1&&(l=(this.height-a)/(this.length-o-1))}else s=this.height/o;return{firstLine:r,lastLine:i,perLine:s,perChar:l}}blockAt(e,n,r,i){let{firstLine:o,lastLine:s,perLine:l,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),f=l+c.length*a,h=Math.max(r,e-f/2);return new Sr(c.from,c.length,h,f,0)}else{let u=Math.max(0,Math.min(s-o,Math.floor((e-r)/l))),{from:c,length:f}=n.doc.line(o+u);return new Sr(c,f,r+l*u,l,0)}}lineAt(e,n,r,i,o){if(n==we.ByHeight)return this.blockAt(e,r,i,o);if(n==we.ByPosNoHeight){let{from:d,to:m}=r.doc.lineAt(e);return new Sr(d,m-d,0,0,0)}let{firstLine:s,perLine:l,perChar:a}=this.heightMetrics(r,o),u=r.doc.lineAt(e),c=l+u.length*a,f=u.number-s,h=i+l*f+a*(u.from-o-f);return new Sr(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,n,r,i,o,s){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(r,o);for(let c=e,f=i;c<=n;){let h=r.doc.lineAt(c);if(c==e){let m=h.number-l;f+=a*m+u*(e-o-m)}let d=a+u*h.length;s(new Sr(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof t?r[r.length-1]=new t(o.length+i):r.push(null,new t(i-1))}if(e>0){let o=r[0];o instanceof t?r[0]=new t(e+o.length):r.unshift(new t(e-1),null)}return En.of(r)}decomposeLeft(e,n){n.push(new t(e-1),null)}decomposeRight(e,n){n.push(null,new t(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let s=[],l=Math.max(n,i.from),a=-1;for(i.from>n&&s.push(new t(i.from-n-1).updateHeight(e,n));l<=o&&i.more;){let c=e.doc.lineAt(l).length;s.length&&s.push(null);let f=i.heights[i.index++];a==-1?a=f:Math.abs(f-a)>=Qf&&(a=-2);let h=new zn(c,f);h.outdated=!1,s.push(h),l+=c+1}l<=o&&s.push(null,new t(o-l).updateHeight(e,l));let u=En.of(s);return(a<0||Math.abs(u.height-this.height)>=Qf||Math.abs(a-this.heightMetrics(e,n).perLine)>=Qf)&&(Qs=!0),ah(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},B0=class extends En{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let s=i+this.left.height,l=o+this.left.length+this.break,a=n==we.ByHeight?e<s:e<l,u=a?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,s,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=n==we.ByPosNoHeight?we.ByPosNoHeight:we.ByPos;return a?u.join(this.right.lineAt(l,c,r,s,l)):this.left.lineAt(l,c,r,i,o).join(u)}forEachLine(e,n,r,i,o,s){let l=i+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,o,s),n>=a&&this.right.forEachLine(e,n,r,l,a,s);else{let u=this.lineAt(a,we.ByPos,r,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,o,s),u.to>=e&&u.from<=n&&s(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,l,a,s)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let l of r)o.push(l);if(e>0&&rC(o,s-1),n<this.length){let l=o.length;this.decomposeRight(n,o),rC(o,l)}return En.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?En.of(this.break?[e,null,n]:[e,n]):(this.left=ah(this.left,e),this.right=ah(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:s}=this,l=n+o.length+this.break,a=null;return i&&i.from<=n+o.length&&i.more?a=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=l+s.length&&i.more?a=s=s.updateHeight(e,l,r,i):s.updateHeight(e,l,r),a?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function rC(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Di&&(r=t[e+1])instanceof Di&&t.splice(e-1,3,new Di(n.length+1+r.length))}var wP=5,z0=class t{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof zn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new zn(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=n-e;r.block?this.addBlock(new uh(s,i,r)):(s||o||i>=wP)&&this.addLineDeco(i,o,s)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new zn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Di(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof zn)return e;let n=new zn(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof zn)&&!this.isCovered?this.nodes.push(new zn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof zn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new t(r,e);return te.spans(n,r,i,o,0),o.finish(r)}};function CP(t,e,n){let r=new U0;return te.compare(t,e,n,r,0),r.changes}var U0=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Zf(e,n,this.changes,5)}};function EP(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();o=Math.max(o,h.left),s=Math.min(s,h.right),l=Math.max(l,h.top),a=Math.min(u==t.parentNode?i.innerHeight:a,h.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-n.left,right:Math.max(o,s)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function bP(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function TP(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}var Xa=class{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,n){return I.replace({widget:new V0(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}},V0=class extends He{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},ch=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=iC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ue.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(cy).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new D0(n),this.stateDeco=e.facet(iu).filter(r=>typeof r!="function"),this.heightMap=En.empty().applyChanges(this.stateDeco,Y.empty,this.heightOracle.setDoc(e.doc),[new wr(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=I.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new $s(o,s))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?iC:new H0(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Wa(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(iu).filter(c=>typeof c!="function");let i=e.changedRanges,o=wr.extendWithRanges(i,CP(r,this.stateDeco,e?e.changes:$t.empty(this.state.doc.length))),s=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);nC(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||Qs)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($C)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?ue.RTL:ue.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),l=n.getBoundingClientRect(),a=s||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:S,scaleY:k}=wC(n,l);(S>.005&&Math.abs(this.scaleX-S)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=S,this.scaleY=k,u|=16,s=a=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,h=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=bC(e.scrollDOM);let m=(this.printing?TP:EP)(n,this.paddingTop),x=m.top-this.pixelViewport.top,v=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!bP(e.dom))return 0;let g=l.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(s=!0),s||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:k,charWidth:w,textHeight:C}=e.docView.measureTextSize();s=k>0&&i.refresh(o,k,w,C,Math.max(5,g/w),S),s&&(e.docView.minWidth=0,u|=16)}x>0&&v>0?c=Math.max(x,v):x<0&&v<0&&(c=Math.min(x,v)),nC();for(let k of this.viewports){let w=k.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(k);this.heightMap=(s?En.empty().applyChanges(this.stateDeco,Y.empty,this.heightOracle,[new wr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new F0(k.from,w))}Qs&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:l}=this,a=new $s(i.lineAt(s-r*1e3,we.ByHeight,o,0,0).from,i.lineAt(l+(1-r)*1e3,we.ByHeight,o,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,we.ByPos,o,0,0),h;n.y=="center"?h=(f.top+f.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?h=f.top:h=f.bottom-c,a=new $s(i.lineAt(h-1e3/2,we.ByHeight,o,0,0).from,i.lineAt(h+c+1e3/2,we.ByHeight,o,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new $s(this.heightMap.lineAt(r,we.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,we.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,we.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:l}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=l+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Xa(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,s=i<<1;if(this.defaultTextDirection!=ue.LTR&&!r)return[];let l=[],a=(c,f,h,d)=>{if(f-c<o)return;let m=this.state.selection.main,x=[m.from];m.empty||x.push(m.to);for(let p of x)if(p>c&&p<f){a(c,p-10,h,d),a(p+10,f,h,d);return}let v=RP(e,p=>p.from>=h.from&&p.to<=h.to&&Math.abs(p.from-c)<o&&Math.abs(p.to-f)<o&&!x.some(g=>p.from<g&&p.to>g));if(!v){if(f<h.to&&n&&r&&n.visibleRanges.some(y=>y.from<=f&&y.to>=f)){let y=n.moveToLineBoundary(b.cursor(f),!1,!0).head;y>c&&(f=y)}let p=this.gapSize(h,c,f,d),g=r||p<2e6?p:2e6;v=new Xa(c,f,p,g)}l.push(v)},u=c=>{if(c.length<s||c.type!=Yt.Text)return;let f=AP(c.from,c.to,this.stateDeco);if(f.total<s)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,m;if(r){let x=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,p;if(h!=null){let g=Gf(f,h),y=((this.visibleBottom-this.visibleTop)/2+x)/c.height;v=g-y,p=g+y}else v=(this.visibleTop-c.top-x)/c.height,p=(this.visibleBottom-c.top+x)/c.height;d=jf(f,v),m=jf(f,p)}else{let x=f.total*this.heightOracle.charWidth,v=i*this.heightOracle.charWidth,p=0;if(x>2e6)for(let w of e)w.from>=c.from&&w.from<c.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=w.size-w.displaySize);let g=this.pixelViewport.left+p,y=this.pixelViewport.right+p,S,k;if(h!=null){let w=Gf(f,h),C=((y-g)/2+v)/x;S=w-C,k=w+C}else S=(g-v)/x,k=(y+v)/x;d=jf(f,S),m=jf(f,k)}d>c.from&&a(c.from,d,c,f),m<c.to&&a(m,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,n,r,i){let o=Gf(i,r)-Gf(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){Xa.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=I.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];te.spans(n,this.viewport.from,this.viewport.to,{span(o,s){r.push({from:o,to:s})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let o=0;o<r.length&&!(i&8);o++){let s=this.visibleRanges[o],l=r[o];(s.from!=l.from||s.to!=l.to)&&(i|=4,e&&e.mapPos(s.from,-1)==l.from&&e.mapPos(s.to,1)==l.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Wa(this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Wa(this.heightMap.lineAt(this.scaler.fromDOM(e),we.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Wa(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},$s=class{constructor(e,n){this.from=e,this.to=n}};function AP(t,e,n){let r=[],i=t,o=0;return te.spans(n,t,e,{span(){},point(s,l){s>i&&(r.push({from:i,to:s}),o+=s-i),i=l}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function jf({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:s}=e[i],l=s-o;if(r<=l)return o+r;r-=l}}function Gf(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function RP(t,e){for(let n of t)if(e(n))return n}var iC={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}},H0=class t{constructor(e,n,r){let i=0,o=0,s=0;this.viewports=r.map(({from:l,to:a})=>{let u=n.lineAt(l,we.ByPos,e,0,0).top,c=n.lineAt(a,we.ByPos,e,0,0).bottom;return i+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let l of this.viewports)l.domTop=s+(l.top-o)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}eq(e){return e instanceof t?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}};function Wa(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Sr(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Wa(i,e)):t._content)}var $f=N.define({combine:t=>t.join(" ")}),W0=N.define({combine:t=>t.indexOf(!0)>-1}),j0=Bn.newName(),dE=Bn.newName(),pE=Bn.newName(),mE={"&light":"."+dE,"&dark":"."+pE};function G0(t,e,n){return new Bn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}var OP=G0("."+j0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},mE),IP={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},d0=P.ie&&P.ie_version<=11,$0=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new w0,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(P.ie&&P.ie_version<=11||P.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&P.android&&e.constructor.EDIT_CONTEXT!==!1&&!(P.chrome&&P.chrome_version<126)&&(this.editContext=new K0(e),e.state.facet(ni)&&(e.contentDOM.editContext=this.editContext.editContext)),d0&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(ni)?r.root.activeElement!=this.dom:!Xf(this.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(P.ie&&P.ie_version<=11||P.android&&P.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Ga(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ja(e.root);if(!n)return!1;let r=P.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&MP(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Xf(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&EN(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,IP),d0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),d0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Ys(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(i=!0),n==-1?{from:n,to:r}=s:(n=Math.min(s.from,n),r=Math.max(s.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Xf(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new L0(this.view,e,n,r);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=rE(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=oC(n,e.previousSibling||e.target.previousSibling,-1),i=oC(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ni)!=e.state.facet(ni)&&(e.view.contentDOM.editContext=e.state.facet(ni)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function oC(t,e,n){for(;e;){let r=he.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function sC(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return Ga(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function MP(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return sC(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?sC(t,n):null}var K0=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:o,head:s}=i,l=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let u=a-l>r.text.length;l==this.from&&o<this.from?l=o:a==this.to&&o>this.to&&(a=o);let c=iE(e.state.sliceDoc(l,a),r.text,(u?i.from:i.to)-l,u?"end":null);if(!c){let h=b.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:c.from+l,to:c.toA+l,insert:Y.of(r.text.slice(c.from,c.toB).split(`
`))};if((P.mac||P.android)&&f.from==s-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:Y.of([r.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);hy(e,f,b.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],o=null;for(let s=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);s<l;s++){let a=e.coordsForChar(s);o=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||o||new DOMRect,i.push(o)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let o of r.getTextFormats()){let s=o.underlineStyle,l=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(l)){let a=this.toEditorPos(o.rangeStart),u=this.toEditorPos(o.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;i.push(I.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:qC.of(I.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Ja(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,s,l,a,u)=>{if(r)return;let c=u.length-(s-o);if(i&&s>=i.to)if(i.from==o&&i.to==s&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(o+=n,s+=n,s<=this.from)this.from+=c,this.to+=c;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},R=class t{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(o=>r(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||CN(e.parent)||document,this.viewState=new ch(e.state||ee.create(e)),e.scrollTo&&e.scrollTo.is(Vf)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Gs).map(i=>new qa(i));for(let i of this.plugins)i.update(this);this.observer=new $0(this),this.inputState=new N0(this),this.inputState.ensureHandlers(this.plugins),this.docView=new sh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof st?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(cE))?(this.inputState.notifiedFocused=s,l=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,a=fE(o,s),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(ee.phrases)!=this.state.facet(ee.phrases))return this.setState(o);i=oh.create(this,o,e),i.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new Ka(d.empty?d:b.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(Vf)&&(f=d.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=fh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Va)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet($f)!=i.state.facet($f)&&(this.viewState.mustMeasureContent=!0),(n||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(R0))try{h(i)}catch(d){bt(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!rE(this,c)&&u.force&&Ys(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new ch(e),this.plugins=e.facet(Gs).map(r=>new qa(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new sh(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Gs),r=e.state.facet(Gs);if(n!=r){let i=[];for(let o of r){let s=n.indexOf(o);if(s<0)i.push(new qa(o));else{let l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){bt(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(s<0)if(bC(r))o=-1,s=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);o=d.from,s=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(m){return bt(this.state,m),lC}}),f=oh.create(this,this.state,[]),h=!1;f.flags|=a,n?n.flags|=a:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=lC)try{let m=u[d];m.write&&m.write(c[d],this)}catch(m){bt(this.state,m)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let m=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(R0))l(n)}get themeClasses(){return j0+" "+(this.state.facet(W0)?pE:dE)+" "+this.state.facet($f)}updateAttrs(){let e=aC(this,YC,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ni)?"true":"false",class:"cm-content",style:`${P.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),aC(this,cy,n);let r=this.observer.ignore(()=>{let i=E0(this.contentDOM,this.contentAttrs,n),o=E0(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(t.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Va);let e=this.state.facet(t.cspNonce);Bn.mount(this.root,this.styleModules.concat(OP).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return h0(this,e,Gw(this,e,n,r))}moveByGroup(e,n){return h0(this,e,Gw(this,e,n,r=>eP(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=r[n?r.length-1:0];return b.cursor(o.side(n,i)+e.from,o.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return JN(this,e,n,r)}moveVertically(e,n,r){return h0(this,e,tP(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),eE(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[kr.find(o,e-i.from,-1,n)];return lu(r,s.dir==ue.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(GC)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>LP)return FC(e.length);let n=this.textDirectionAt(e.from),r;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||DC(o.isolates,r=Uw(this,e))))return o.order;r||(r=Uw(this,e));let i=FN(e.text,n,r);return this.bidiCache.push(new fh(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||P.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{CC(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Vf.of(new Ka(typeof e=="number"?b.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Vf.of(new Ka(b.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return X.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return X.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Bn.newName(),i=[$f.of(r),Va.of(G0(`.${r}`,e))];return n&&n.dark&&i.push(W0.of(!0)),i}static baseTheme(e){return Cn.lowest(Va.of(G0("."+j0,e,mE)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&he.get(r)||he.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}};R.styleModule=Va;R.inputHandler=WC;R.clipboardInputFilter=ay;R.clipboardOutputFilter=uy;R.scrollHandler=KC;R.focusChangeEffect=jC;R.perLineTextDirection=GC;R.exceptionSink=HC;R.updateListener=R0;R.editable=ni;R.mouseSelectionStyle=VC;R.dragMovesSelection=UC;R.clickAddsSelectionRange=zC;R.decorations=iu;R.outerDecorations=XC;R.atomicRanges=au;R.bidiIsolatedRanges=ZC;R.scrollMargins=QC;R.darkTheme=W0;R.cspNonce=N.define({combine:t=>t.length?t[0]:""});R.contentAttributes=cy;R.editorAttributes=YC;R.lineWrapping=R.contentAttributes.of({class:"cm-lineWrapping"});R.announce=H.define();var LP=4096,lC={},fh=class t{constructor(e,n,r,i,o,s){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=o,this.order=s}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:ue.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!n.touchesRange(s.from,s.to)&&r.push(new t(n.mapPos(s.from,1),n.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return r}};function aC(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(t):o;s&&C0(s,n)}return n}var NP=P.mac?"mac":P.windows?"win":P.linux?"linux":"key";function PP(t,e){let n=t.split(/-(?!$)/),r=n[n.length-1];r=="Space"&&(r=" ");let i,o,s,l;for(let a=0;a<n.length-1;++a){let u=n[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),l&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Kf(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}var _P=Cn.default(R.domEventHandlers({keydown(t,e){return xE(gE(e.state),t,e,"editor")}})),ri=N.define({enables:_P}),uC=new WeakMap;function gE(t){let e=t.facet(ri),n=uC.get(e);return n||uC.set(e,n=FP(e.reduce((r,i)=>r.concat(i),[]))),n}function yE(t,e,n){return xE(gE(t.state),e,t,n)}var _i=null,DP=4e3;function FP(t,e=NP){let n=Object.create(null),r=Object.create(null),i=(s,l)=>{let a=r[s];if(a==null)r[s]=l;else if(a!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,l,a,u,c)=>{var f,h;let d=n[s]||(n[s]=Object.create(null)),m=l.split(/ (?!$)/).map(p=>PP(p,e));for(let p=1;p<m.length;p++){let g=m.slice(0,p).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[y=>{let S=_i={view:y,prefix:g,scope:s};return setTimeout(()=>{_i==S&&(_i=null)},DP),!0}]})}let x=m.join(" ");i(x,!1);let v=d[x]||(d[x]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&v.run.push(a),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let s of t){let l=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let u of l){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=s;for(let h in c)c[h].run.push(d=>f(d,q0))}let a=s[e]||s.key;if(a)for(let u of l)o(u,a,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(u,"Shift-"+a,s.shift,s.preventDefault,s.stopPropagation)}return n}var q0=null;function xE(t,e,n,r){q0=e;let i=Mw(e),o=Ct(i,0),s=wn(o)==i.length&&i!=" ",l="",a=!1,u=!1,c=!1;_i&&_i.view==n&&_i.scope==r&&(l=_i.prefix+" ",sE.indexOf(e.keyCode)<0&&(u=!0,_i=null));let f=new Set,h=v=>{if(v){for(let p of v.run)if(!f.has(p)&&(f.add(p),p(n)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],m,x;return d&&(h(d[l+Kf(i,e,!s)])?a=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(P.windows&&e.ctrlKey&&e.altKey)&&!(P.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(m=ti[e.keyCode])&&m!=i?(h(d[l+Kf(m,e,!0)])||e.shiftKey&&(x=js[e.keyCode])!=i&&x!=m&&h(d[l+Kf(x,e,!1)]))&&(a=!0):s&&e.shiftKey&&h(d[l+Kf(i,e,!0)])&&(a=!0),!a&&h(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),q0=null,a}var ou=class t{constructor(e,n,r,i,o){this.className=e,this.left=n,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=vE(e);return[new t(n,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return BP(e,n,r)}};function vE(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ue.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function cC(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let o=t.dom.getBoundingClientRect(),s=(i.top+i.bottom)/2,l=t.posAtCoords({x:o.left+1,y:s}),a=t.posAtCoords({x:o.right-1,y:s});return l==null||a==null?r:{from:Math.max(r.from,Math.min(l,a)),to:Math.min(r.to,Math.max(l,a))}}function BP(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==ue.LTR,s=t.contentDOM,l=s.getBoundingClientRect(),a=vE(t),u=s.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=l.right-(c?parseInt(c.paddingRight):0),d=I0(t,r,1),m=I0(t,i,-1),x=d.type==Yt.Text?d:null,v=m.type==Yt.Text?m:null;if(x&&(t.lineWrapping||d.widgetLineBreaks)&&(x=cC(t,r,1,x)),v&&(t.lineWrapping||m.widgetLineBreaks)&&(v=cC(t,i,-1,v)),x&&v&&x.from==v.from&&x.to==v.to)return g(y(n.from,n.to,x));{let k=x?y(n.from,null,x):S(d,!1),w=v?y(null,n.to,v):S(m,!0),C=[];return(x||d).to<(v||m).from-(x&&v?1:0)||d.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<w.top?C.push(p(f,k.bottom,h,w.top)):k.bottom<w.top&&t.elementAtHeight((k.bottom+w.top)/2).type==Yt.Text&&(k.bottom=w.top=(k.bottom+w.top)/2),g(k).concat(C).concat(g(w))}function p(k,w,C,T){return new ou(e,k-a.left,w-a.top,C-k,T-w)}function g({top:k,bottom:w,horizontal:C}){let T=[];for(let O=0;O<C.length;O+=2)T.push(p(C[O],k,C[O+1],w));return T}function y(k,w,C){let T=1e9,O=-1e9,L=[];function U(G,Z,le,Te,Ue){let ne=t.coordsAtPos(G,G==C.to?-2:2),de=t.coordsAtPos(le,le==C.from?2:-2);!ne||!de||(T=Math.min(ne.top,de.top,T),O=Math.max(ne.bottom,de.bottom,O),Ue==ue.LTR?L.push(o&&Z?f:ne.left,o&&Te?h:de.right):L.push(!o&&Te?f:de.left,!o&&Z?h:ne.right))}let B=k??C.from,j=w??C.to;for(let G of t.visibleRanges)if(G.to>B&&G.from<j)for(let Z=Math.max(G.from,B),le=Math.min(G.to,j);;){let Te=t.state.doc.lineAt(Z);for(let Ue of t.bidiSpans(Te)){let ne=Ue.from+Te.from,de=Ue.to+Te.from;if(ne>=le)break;de>Z&&U(Math.max(ne,Z),k==null&&ne<=B,Math.min(de,le),w==null&&de>=j,Ue.dir)}if(Z=Te.to+1,Z>=le)break}return L.length==0&&U(B,k==null,j,w==null,t.textDirection),{top:T,bottom:O,horizontal:L}}function S(k,w){let C=l.top+(w?k.top:k.bottom);return{top:C,bottom:C,horizontal:[]}}}function zP(t,e){return t.constructor==e.constructor&&t.eq(e)}var Y0=class{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Jf)!=e.state.facet(Jf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(Jf);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!zP(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,P.safari&&P.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},Jf=N.define();function SE(t){return[X.define(e=>new Y0(e,t)),Jf.of(t)]}var su=N.define({combine(t){return Dt(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function kE(t={}){return[su.of(t),UP,VP,HP,$C.of(!0)]}function wE(t){return t.startState.facet(su)!=t.state.facet(su)}var UP=SE({above:!0,markers(t){let{state:e}=t,n=e.facet(su),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty||n.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:b.cursor(i.head,i.head>i.anchor?-1:1);for(let a of ou.forRange(t,s,l))r.push(a)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=wE(t);return n&&fC(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){fC(e.state,t)},class:"cm-cursorLayer"});function fC(t,e){e.style.animationDuration=t.facet(su).cursorBlinkRate+"ms"}var VP=SE({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:ou.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||wE(t)},class:"cm-selectionLayer"}),HP=Cn.highest(R.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),CE=H.define({map(t,e){return t==null?null:e.mapPos(t)}}),ja=re.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(CE)?r.value:n,t)}}),WP=X.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(ja);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(ja)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(ja),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(ja)!=t&&this.view.dispatch({effects:CE.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function EE(){return[ja,WP]}function hC(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),s=n,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)i(s+l.index,l)}function jP(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}var X0=class{constructor(e){let{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(l,a,u,c)=>i(c,u,u+l[0].length,l,a);else if(typeof r=="function")this.addMatch=(l,a,u,c)=>{let f=r(l,a,u);f&&c(u,u+l[0].length,f)};else if(r)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let n=new Re,r=n.add.bind(n);for(let{from:i,to:o}of jP(e,this.maxLength))hC(e.state.doc,this.regexp,i,o,(s,l)=>this.addMatch(l,e,s,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(r=Math.min(l,r),i=Math.max(a,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),l=Math.min(o.to,i);if(l>=s){let a=e.state.doc.lineAt(s),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(o.from,a.from),f=Math.min(o.to,u.to);if(this.boundary){for(;s>a.from;s--)if(this.boundary.test(a.text[s-1-a.from])){c=s;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){f=l;break}}let h=[],d,m=(x,v,p)=>h.push(p.range(x,v));if(a==u)for(this.regexp.lastIndex=c-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,m);else hC(e.state.doc,this.regexp,c,f,(x,v)=>this.addMatch(v,e,x,m));n=n.update({filterFrom:c,filterTo:f,filter:(x,v)=>x<c||v>f,add:h})}}return n}},Z0=/x/.unicode!=null?"gu":"g",GP=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Z0),$P={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},p0=null;function KP(){var t;if(p0==null&&typeof document<"u"&&document.body){let e=document.body.style;p0=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return p0||!1}var eh=N.define({combine(t){let e=Dt(t,{render:null,specialChars:GP,addSpecialChars:null});return(e.replaceTabs=!KP())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Z0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Z0)),e}});function bE(t={}){return[eh.of(t),qP()]}var dC=null;function qP(){return dC||(dC=X.fromClass(class{constructor(t){this.view=t,this.decorations=I.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(eh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new X0({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=Ct(e[0],0);if(o==9){let s=i.lineAt(r),l=n.state.tabSize,a=ei(s.text,l,r-s.from);return I.replace({widget:new J0((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=I.replace({widget:new Q0(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(eh);t.startState.facet(eh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}var YP="\u2022";function XP(t){return t>=32?YP:t==10?"\u2424":String.fromCharCode(9216+t)}var Q0=class extends He{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=XP(this.code),r=e.state.phrase("Control character")+" "+($P[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}},J0=class extends He{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};function TE(){return QP}var ZP=I.line({class:"cm-activeLine"}),QP=X.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(ZP.range(i.from)),e=i.from)}return I.set(n)}},{decorations:t=>t.decorations}),ey=class extends He{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?Xs(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=lu(n[0],r.direction!="rtl"),o=parseInt(r.lineHeight);return i.bottom-i.top>o*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+o}:i}ignoreEvent(){return!1}};function AE(t){let e=X.fromClass(class{constructor(n){this.view=n,this.placeholder=t?I.set([I.widget({widget:new ey(t),side:1}).range(0)]):I.none}get decorations(){return this.view.state.doc.length?I.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,R.contentAttributes.of({"aria-placeholder":t})]:e}var ty=2e3;function JP(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>ty||n.off>ty||e.col<0||n.col<0){let s=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=r;a<=i;a++){let u=t.doc.line(a);u.length<=l&&o.push(b.range(u.from+s,u.to+l))}}else{let s=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=r;a<=i;a++){let u=t.doc.line(a),c=Bf(u.text,s,t.tabSize,!0);if(c<0)o.push(b.cursor(u.to));else{let f=Bf(u.text,l,t.tabSize);o.push(b.range(u.from+c,u.from+f))}}}return o}function e3(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function pC(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>ty?-1:i==r.length?e3(t,e.clientX):ei(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function t3(t,e){let n=pC(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),s=i.state.doc.lineAt(o);n={line:s.number,col:n.col,off:Math.min(n.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let l=pC(t,i);if(!l)return r;let a=JP(t.state,n,l);return a.length?s?b.create(a.concat(r.ranges)):b.create(a):r}}:null}function RE(t){let e=t?.eventFilter||(n=>n.altKey&&n.button==0);return R.mouseSelectionStyle.of((n,r)=>e(r)?t3(n,r):null)}var n3={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},r3={style:"cursor: crosshair"};function OE(t={}){let[e,n]=n3[t.key||"Alt"],r=X.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,R.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?r3:null})]}var qf="-10000px",hh=class{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=r(s,o))}update(e,n){var r;let i=e.state.facet(this.facet),o=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let s=[],l=n?[]:null;for(let a=0;a<o.length;a++){let u=o[a],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==u.create&&(c=f)}if(c<0)s[a]=this.createTooltipView(u,a?s[a-1]:null),l&&(l[a]=!!u.above);else{let f=s[a]=this.tooltipViews[c];l&&(l[a]=n[c]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(this.removeTooltipView(a),(r=a.destroy)===null||r===void 0||r.call(a));return n&&(l.forEach((a,u)=>n[u]=a),n.length=l.length),this.input=i,this.tooltips=o,this.tooltipViews=s,!0}};function i3(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}var m0=N.define({combine:t=>{var e,n,r;return{position:P.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||i3}}}),mC=new WeakMap,dy=X.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(m0);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new hh(t,uu,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(m0);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=qf,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(P.safari){let s=o.getBoundingClientRect();n=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}else n=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=fy(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let l=this.manager.tooltipViews[s];return l.getCoords?l.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(m0).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:o}=t,s=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(n.top,r.top)||f.top>=Math.min(n.bottom,r.bottom)||f.right<Math.max(n.left,r.left)-.1||f.left>Math.min(n.right,r.right)+.1)){c.style.top=qf;continue}let d=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,m=d?7:0,x=h.right-h.left,v=(e=mC.get(u))!==null&&e!==void 0?e:h.bottom-h.top,p=u.offset||s3,g=this.view.textDirection==ue.LTR,y=h.width>r.right-r.left?g?r.left:r.right-h.width:g?Math.max(r.left,Math.min(f.left-(d?14:0)+p.x,r.right-x)):Math.min(Math.max(r.left,f.left-x+(d?14:0)-p.x),r.right-x),S=this.above[l];!a.strictSide&&(S?f.top-v-m-p.y<r.top:f.bottom+v+m+p.y>r.bottom)&&S==r.bottom-f.bottom>f.top-r.top&&(S=this.above[l]=!S);let k=(S?f.top-r.top:r.bottom-f.bottom)-m;if(k<v&&u.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=qf;continue}mC.set(u,v),c.style.height=(v=k)/o+"px"}else c.style.height&&(c.style.height="");let w=S?f.top-v-m-p.y:f.bottom+m+p.y,C=y+x;if(u.overlap!==!0)for(let T of s)T.left<C&&T.right>y&&T.top<w+v&&T.bottom>w&&(w=S?T.top-v-2-m:T.bottom+m+2);if(this.position=="absolute"?(c.style.top=(w-t.parent.top)/o+"px",gC(c,(y-t.parent.left)/i)):(c.style.top=w/o+"px",gC(c,y/i)),d){let T=f.left+(g?p.x:-p.x)-(y+14-7);d.style.left=T/i+"px"}u.overlap!==!0&&s.push({left:y,top:w,right:C,bottom:w+v}),c.classList.toggle("cm-tooltip-above",S),c.classList.toggle("cm-tooltip-below",!S),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=qf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function gC(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}var o3=R.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),s3={x:0,y:0},uu=N.define({enables:[dy,o3]}),dh=N.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])}),ph=class t{static create(e){return new t(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new hh(e,dh,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},l3=uu.compute([dh],t=>{let e=t.facet(dh);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:ph.create,above:e[0].above,arrow:e.some(n=>n.arrow)}}),ny=class{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,o=1;if(r instanceof Zs)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let l=e.coordsAtPos(i);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=a&&a.dir==ue.RTL?-1:1;o=n.x<l.left?-u:u}let s=this.source(e,i,o);if(s?.then){let l=this.pending={pos:i};s.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>bt(e.state,a,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(dy),n=e?e.manager.tooltips.findIndex(r=>r.create==ph.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:o}=this;if(i.length&&o&&!a3(o.dom,e)||this.pending){let{pos:s}=i[0]||this.pending,l=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:s;(s==l?this.view.posAtCoords(this.lastMove)!=s:!u3(this.view,s,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},Yf=4;function a3(t,e){let{left:n,right:r,top:i,bottom:o}=t.getBoundingClientRect(),s;if(s=t.querySelector(".cm-tooltip-arrow")){let l=s.getBoundingClientRect();i=Math.min(l.top,i),o=Math.max(l.bottom,o)}return e.clientX>=n-Yf&&e.clientX<=r+Yf&&e.clientY>=i-Yf&&e.clientY<=o+Yf}function u3(t,e,n,r,i,o){let s=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,l)<i)return!1;let a=t.posAtCoords({x:r,y:i},!1);return a>=e&&a<=n}function IE(t,e={}){let n=H.define(),r=re.define({create(){return[]},update(i,o){if(i.length&&(e.hideOnChange&&(o.docChanged||o.selection)?i=[]:e.hideOn&&(i=i.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let l of i){let a=o.changes.mapPos(l.pos,-1,wt.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=o.changes.mapPos(u.end)),s.push(u)}}i=s}for(let s of o.effects)s.is(n)&&(i=s.value),s.is(c3)&&(i=[]);return i},provide:i=>dh.from(i)});return{active:r,extension:[r,X.define(i=>new ny(i,t,r,n,e.hoverTime||300)),l3]}}function py(t,e){let n=t.plugin(dy);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}var c3=H.define();var yC=N.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Vo(t,e){let n=t.plugin(ME),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}var ME=X.fromClass(class{constructor(t){this.input=t.state.facet(Uo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(yC);this.top=new Ks(t,!0,e.topContainer),this.bottom=new Ks(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(yC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ks(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ks(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Uo);if(n!=this.input){let r=n.filter(a=>a),i=[],o=[],s=[],l=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),l.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?o:s).push(c)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>R.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})}),Ks=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=xC(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=xC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function xC(t){let e=t.nextSibling;return t.remove(),e}var Uo=N.define({enables:ME});var Tt=class extends tr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Tt.prototype.elementClass="";Tt.prototype.toDOM=void 0;Tt.prototype.mapMode=wt.TrackBefore;Tt.prototype.startSide=Tt.prototype.endSide=-1;Tt.prototype.point=!0;var th=N.define(),f3=N.define(),h3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>te.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Za=N.define();function cu(t){return[LE(),Za.of({...h3,...t})]}var ry=N.define({combine:t=>t.some(e=>e)});function LE(t){let e=[d3];return t&&t.fixed===!1&&e.push(ry.of(!0)),e}var d3=X.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Za).map(e=>new mh(t,e)),this.fixed=!t.state.facet(ry);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(ry)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=te.iter(this.view.state.facet(th),this.view.viewport.from),r=[],i=this.gutters.map(o=>new oy(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let s=!0;for(let l of o.type)if(l.type==Yt.Text&&s){iy(n,r,l.from);for(let a of i)a.line(this.view,l,r);s=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(o.type==Yt.Text){iy(n,r,o.from);for(let s of i)s.line(this.view,o,r)}else if(o.widget)for(let s of i)s.widget(this.view,o);for(let o of i)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Za),n=t.state.facet(Za),r=t.docChanged||t.heightChanged||t.viewportChanged||!te.eq(t.startState.facet(th),t.state.facet(th),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let s=e.indexOf(o);s<0?i.push(new mh(this.view,o)):(this.gutters[s].update(t),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>R.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ue.LTR?{left:r,right:i}:{right:r,left:i}})});function vC(t){return Array.isArray(t)?t:[t]}function iy(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}var oy=class{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=te.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,o=(n.top-this.height)/e.scaleY,s=n.height/e.scaleY;if(this.i==i.elements.length){let l=new gh(e,s,o,r);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,s,o,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];iy(this.cursor,i,n.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let s=this.gutter;i.length==0&&!s.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let o of e.state.facet(f3)){let s=o(e,n.widget,n);s&&(i||(i=[])).push(s)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}},mh=class{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let a=o.getBoundingClientRect();s=(a.top+a.bottom)/2}else s=i.clientY;let l=e.lineBlockAtHeight(s-e.documentTop);n.domEventHandlers[r](e,l,i)&&i.preventDefault()});this.markers=vC(n.markers(e)),n.initialSpacer&&(this.spacer=new gh(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=vC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!te.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},gh=class{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),p3(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let l=s,a=o<n.length?n[o++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,u=!0;break}}else l=this.markers.length;for(;s<l;){let c=this.markers[s++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&s++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}};function p3(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}var m3=N.define(),g3=N.define(),qs=N.define({combine(t){return Dt(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],s=n[i];r[i]=o?(l,a,u)=>o(l,a,u)||s(l,a,u):s}return r}})}}),Qa=class extends Tt{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function g0(t,e){return t.state.facet(qs).formatNumber(e,t.state)}var y3=Za.compute([qs],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(m3)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Qa(g0(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(g3)){let o=i(e,n,r);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(qs)!=e.state.facet(qs),initialSpacer(e){return new Qa(g0(e,SC(e.state.doc.lines)))},updateSpacer(e,n){let r=g0(n.view,SC(n.view.state.doc.lines));return r==e.number?e:new Qa(r)},domEventHandlers:t.facet(qs).domEventHandlers,side:"before"}));function NE(t={}){return[qs.of(t),LE(),y3]}function SC(t){let e=9;for(;e<t;)e=e*10+9;return e}var x3=new class extends Tt{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},v3=th.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(x3.range(i)))}return te.of(e)});function PE(){return v3}var S3=0,fu=class{constructor(e,n){this.from=e,this.to=n}},$=class{constructor(e={}){this.id=S3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bn.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}};$.closedBy=new $({deserialize:t=>t.split(" ")});$.openedBy=new $({deserialize:t=>t.split(" ")});$.group=new $({deserialize:t=>t.split(" ")});$.isolate=new $({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});$.contextHash=new $({perNode:!0});$.lookAhead=new $({perNode:!0});$.mounted=new $({perNode:!0});var Js=class{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[$.mounted.id]}},k3=Object.create(null),bn=class t{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):k3,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new t(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop($.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop($.group),o=-1;o<(i?i.length:0);o++){let s=n[o<0?r.name:i[o]];if(s)return s}}}};bn.none=new bn("",Object.create(null),0,8);var vh=new WeakMap,_E=new WeakMap,pt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(pt||(pt={}));var Ft=class t{constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let e=Js.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new pu(this.topNode,e)}cursorAt(e,n=0,r=0){let i=vh.get(this)||this.topNode,o=new pu(i);return o.moveTo(e,n),vh.set(this,o._tree),o}get topNode(){return new br(this,0,0,null)}resolve(e,n=0){let r=hu(vh.get(this)||this.topNode,e,n,!1);return vh.set(this,r),r}resolveInner(e,n=0){let r=hu(_E.get(this)||this.topNode,e,n,!0);return _E.set(this,r),r}resolveStack(e,n=0){return w3(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e,s=e.mode||0,l=(s&pt.IncludeAnonymous)>0;for(let a=this.cursor(s|pt.IncludeAnonymous);;){let u=!1;if(a.from<=o&&a.to>=i&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:ky(bn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new t(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new t(bn.none,n,r,i)))}static build(e){return C3(e)}};Ft.empty=new Ft(bn.none,[],[],0);var my=class t{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new t(this.buffer,this.index)}},Ui=class t{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return bn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,n,r,i,o){let{buffer:s}=this,l=-1;for(let a=e;a!=n&&!(BE(o,i,s[a+1],s[a+2])&&(l=a,r>0));a=s[a+3]);return l}slice(e,n,r){let i=this.buffer,o=new Uint16Array(n-e),s=0;for(let l=e,a=0;l<n;){o[a++]=i[l++],o[a++]=i[l++]-r;let u=o[a++]=i[l++]-r;o[a++]=i[l++]-e,s=Math.max(s,u)}return new t(o,s,this.set)}};function BE(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function hu(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let s=!r&&t instanceof br&&t.index<0?null:t.parent;if(!s)return t;t=s}let o=r?0:pt.IgnoreOverlays;if(r)for(let s=t,l=s.parent;l;s=l,l=s.parent)s instanceof br&&s.index<0&&((i=l.enter(e,n,o))===null||i===void 0?void 0:i.from)!=s.from&&(t=l);for(;;){let s=t.enter(e,n,o);if(!s)return t;t=s}}var kh=class{cursor(e=0){return new pu(this,e)}getChild(e,n=null,r=null){let i=DE(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return DE(this,e,n,r)}resolve(e,n=0){return hu(this,e,n,!1)}resolveInner(e,n=0){return hu(this,e,n,!0)}matchContext(e){return gy(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}},br=class t extends kh{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){for(let s=this;;){for(let{children:l,positions:a}=s._tree,u=n>0?l.length:-1;e!=u;e+=n){let c=l[e],f=a[e]+s.from;if(BE(i,r,f,f+c.length)){if(c instanceof Ui){if(o&pt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,r-f,i);if(h>-1)return new du(new yy(s,c,e,f),null,h)}else if(o&pt.IncludeAnonymous||!c.type.isAnonymous||Sy(c)){let h;if(!(o&pt.IgnoreMounts)&&(h=Js.get(c))&&!h.overlay)return new t(h.tree,f,e,s);let d=new t(c,f,e,s);return o&pt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(o&pt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+n:e=n<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&pt.IgnoreOverlays)&&(i=Js.get(this._tree))&&i.overlay){let o=e-this.from;for(let{from:s,to:l}of i.overlay)if((n>0?s<=o:s<o)&&(n<0?l>=o:l>o))return new t(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function DE(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(let s=!1;!s;)if(s=i.type.is(n),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function gy(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}var yy=class{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}},du=class t extends kh{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new t(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&pt.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new t(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new t(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new t(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1];e.push(r.slice(i,o,s)),n.push(0)}return new Ft(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function zE(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let s=t[o];(s.from>n.from||s.to<n.to)&&(n=s,e=o)}let r=n instanceof br&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new xy(i,n)}var xy=class{constructor(e,n){this.heads=e,this.node=n}get next(){return zE(this.heads)}};function w3(t,e,n){let r=t.resolveInner(e,n),i=null;for(let o=r instanceof br?r:r.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(i||(i=[r])).push(s.resolve(e,n)),o=s}else{let s=Js.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let l=new br(s.tree,s.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(hu(l,e,n,!1))}}return i?zE(i):r}var pu=class{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof br)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof br?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&pt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let l=r._tree.children[o];if(this.mode&pt.IncludeAnonymous||l instanceof Ui||!l.type.isAnonymous||Sy(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;n=s,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)n=new du(this.buffer,n,this.stack[i]);return this.bufferNode=new du(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return gy(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return gy(this._tree,e,i);let s=r[n.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}};function Sy(t){return t.children.some(e=>e instanceof Ui||!e.type.isAnonymous||Sy(e))}function C3(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=1024,reused:o=[],minRepeatType:s=r.types.length}=t,l=Array.isArray(n)?new my(n,n.length):n,a=r.types,u=0,c=0;function f(k,w,C,T,O,L){let{id:U,start:B,end:j,size:G}=l,Z=c,le=u;if(G<0)if(l.next(),G==-1){let qe=o[U];C.push(qe),T.push(B-k);return}else if(G==-3){u=U;return}else if(G==-4){c=U;return}else throw new RangeError(`Unrecognized record size: ${G}`);let Te=a[U],Ue,ne,de=B-k;if(j-B<=i&&(ne=v(l.pos-w,O))){let qe=new Uint16Array(ne.size-ne.skip),nt=l.pos-ne.size,On=qe.length;for(;l.pos>nt;)On=p(ne.start,qe,On);Ue=new Ui(qe,j-ne.start,r),de=ne.start-k}else{let qe=l.pos-G;l.next();let nt=[],On=[],fr=U>=s?U:-1,ft=0,ho=j;for(;l.pos>qe;)fr>=0&&l.id==fr&&l.size>=0?(l.end<=ho-i&&(m(nt,On,B,ft,l.end,ho,fr,Z,le),ft=nt.length,ho=l.end),l.next()):L>2500?h(B,qe,nt,On):f(B,qe,nt,On,fr,L+1);if(fr>=0&&ft>0&&ft<nt.length&&m(nt,On,B,ft,B,ho,fr,Z,le),nt.reverse(),On.reverse(),fr>-1&&ft>0){let rt=d(Te,le);Ue=ky(Te,nt,On,0,nt.length,0,j-B,rt,rt)}else Ue=x(Te,nt,On,j-B,Z-j,le)}C.push(Ue),T.push(de)}function h(k,w,C,T){let O=[],L=0,U=-1;for(;l.pos>w;){let{id:B,start:j,end:G,size:Z}=l;if(Z>4)l.next();else{if(U>-1&&j<U)break;U<0&&(U=G-i),O.push(B,j,G),L++,l.next()}}if(L){let B=new Uint16Array(L*4),j=O[O.length-2];for(let G=O.length-3,Z=0;G>=0;G-=3)B[Z++]=O[G],B[Z++]=O[G+1]-j,B[Z++]=O[G+2]-j,B[Z++]=Z;C.push(new Ui(B,O[2]-j,r)),T.push(j-k)}}function d(k,w){return(C,T,O)=>{let L=0,U=C.length-1,B,j;if(U>=0&&(B=C[U])instanceof Ft){if(!U&&B.type==k&&B.length==O)return B;(j=B.prop($.lookAhead))&&(L=T[U]+B.length+j)}return x(k,C,T,O,L,w)}}function m(k,w,C,T,O,L,U,B,j){let G=[],Z=[];for(;k.length>T;)G.push(k.pop()),Z.push(w.pop()+C-O);k.push(x(r.types[U],G,Z,L-O,B-L,j)),w.push(O-C)}function x(k,w,C,T,O,L,U){if(L){let B=[$.contextHash,L];U=U?[B].concat(U):[B]}if(O>25){let B=[$.lookAhead,O];U=U?[B].concat(U):[B]}return new Ft(k,w,C,T,U)}function v(k,w){let C=l.fork(),T=0,O=0,L=0,U=C.end-i,B={size:0,start:0,skip:0};e:for(let j=C.pos-k;C.pos>j;){let G=C.size;if(C.id==w&&G>=0){B.size=T,B.start=O,B.skip=L,L+=4,T+=4,C.next();continue}let Z=C.pos-G;if(G<0||Z<j||C.start<U)break;let le=C.id>=s?4:0,Te=C.start;for(C.next();C.pos>Z;){if(C.size<0)if(C.size==-3)le+=4;else break e;else C.id>=s&&(le+=4);C.next()}O=Te,T+=G,L+=le}return(w<0||T==k)&&(B.size=T,B.start=O,B.skip=L),B.size>4?B:void 0}function p(k,w,C){let{id:T,start:O,end:L,size:U}=l;if(l.next(),U>=0&&T<s){let B=C;if(U>4){let j=l.pos-(U-4);for(;l.pos>j;)C=p(k,w,C)}w[--C]=B,w[--C]=L-k,w[--C]=O-k,w[--C]=T}else U==-3?u=T:U==-4&&(c=T);return C}let g=[],y=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,g,y,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new Ft(a[t.topID],g.reverse(),y.reverse(),S)}var FE=new WeakMap;function Sh(t,e){if(!t.isAnonymous||e instanceof Ui||e.type!=t)return 1;let n=FE.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Ft)){n=1;break}n+=Sh(t,r)}FE.set(e,n)}return n}function ky(t,e,n,r,i,o,s,l,a){let u=0;for(let m=r;m<i;m++)u+=Sh(t,e[m]);let c=Math.ceil(u*1.5/8),f=[],h=[];function d(m,x,v,p,g){for(let y=v;y<p;){let S=y,k=x[y],w=Sh(t,m[y]);for(y++;y<p;y++){let C=Sh(t,m[y]);if(w+C>=c)break;w+=C}if(y==S+1){if(w>c){let C=m[S];d(C.children,C.positions,0,C.children.length,x[S]+g);continue}f.push(m[S])}else{let C=x[y-1]+m[y-1].length-k;f.push(ky(t,m,x,S,y,k,C,null,a))}h.push(k+g-o)}}return d(e,n,r,i,0),(l||a)(f,h,s)}var Ho=class t{constructor(e,n,r,i,o=!1,s=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new t(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<n.length?n[l]:null,f=c?c.fromA:1e9;if(f-a>=r)for(;s&&s.from<f;){let h=s;if(a>=h.from||f<=h.to||u){let d=Math.max(h.from,a)-u,m=Math.min(h.to,f)-u;h=d>=m?null:new t(d,m,h.tree,h.offset+u,l>0,!!c)}if(h&&i.push(h),s.to>f)break;s=o<e.length?e[o++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}},wh=class{startParse(e,n,r){return typeof e=="string"&&(e=new vy(e)),r=r?r.length?r.map(i=>new fu(i.from,i.to)):[new fu(0,0)]:[new fu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}},vy=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}};var YV=new $({perNode:!0});var E3=0,rr=class t{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=E3++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof t&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new t(r,[],null,[]);if(i.set.push(i),n)for(let o of n.set)i.set.push(o);return i}static defineModifier(e){let n=new Th(e);return r=>r.modified.indexOf(n)>-1?r:Th.get(r.base||r,r.modified.concat(n).sort((i,o)=>i.id-o.id))}},b3=0,Th=class t{constructor(e){this.name=e,this.instances=[],this.id=b3++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(l=>l.base==e&&T3(n,l.modified));if(r)return r;let i=[],o=new rr(e.name,i,e,n);for(let l of n)l.instances.push(o);let s=A3(n);for(let l of e.set)if(!l.modified.length)for(let a of s)i.push(t.get(l,a));return o}};function T3(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function A3(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function HE(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],s=2,l=i;for(let f=0;;){if(l=="..."&&f>0&&f+3==i.length){s=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+i);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){s=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);l=i.slice(f)}let a=o.length-1,u=o[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new jo(r,s,a>0?o.slice(0,a):null);e[u]=c.sort(e[u])}}return WE.add(e)}var WE=new $({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let o=new jo(i.tags,i.mode,i.context);n?n.next=o:r=o,n=o}return r}}),jo=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};jo.empty=new jo([],2,null);function by(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let s of o.tag)n[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let l of o)for(let a of l.set){let u=n[a.id];if(u){s=s?s+" "+u:u;break}}return s},scope:r}}function R3(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function jE(t,e,n,r=0,i=t.length){let o=new Cy(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}var Cy=class{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:s,from:l,to:a}=e;if(l>=r||a<=n)return;s.isTop&&(o=this.highlighters.filter(d=>!d.scope||d.scope(s)));let u=i,c=O3(e)||jo.empty,f=R3(o,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(n,l),u),c.opaque)return;let h=e.tree&&e.tree.prop($.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),m=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),x=e.firstChild();for(let v=0,p=l;;v++){let g=v<h.overlay.length?h.overlay[v]:null,y=g?g.from+l:a,S=Math.max(n,p),k=Math.min(r,y);if(S<k&&x)for(;e.from<k&&(this.highlightRange(e,S,k,i,o),this.startSpan(Math.min(k,e.to),u),!(e.to>=y||!e.nextSibling())););if(!g||y>r)break;p=g.to+l,p>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+l),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}x&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}};function O3(t){let e=t.type.prop(WE);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}var M=rr.define,Ch=M(),Vi=M(),UE=M(Vi),VE=M(Vi),Hi=M(),Eh=M(Hi),wy=M(Hi),Rr=M(),Wo=M(Rr),Tr=M(),Ar=M(),Ey=M(),mu=M(Ey),bh=M(),E={comment:Ch,lineComment:M(Ch),blockComment:M(Ch),docComment:M(Ch),name:Vi,variableName:M(Vi),typeName:UE,tagName:M(UE),propertyName:VE,attributeName:M(VE),className:M(Vi),labelName:M(Vi),namespace:M(Vi),macroName:M(Vi),literal:Hi,string:Eh,docString:M(Eh),character:M(Eh),attributeValue:M(Eh),number:wy,integer:M(wy),float:M(wy),bool:M(Hi),regexp:M(Hi),escape:M(Hi),color:M(Hi),url:M(Hi),keyword:Tr,self:M(Tr),null:M(Tr),atom:M(Tr),unit:M(Tr),modifier:M(Tr),operatorKeyword:M(Tr),controlKeyword:M(Tr),definitionKeyword:M(Tr),moduleKeyword:M(Tr),operator:Ar,derefOperator:M(Ar),arithmeticOperator:M(Ar),logicOperator:M(Ar),bitwiseOperator:M(Ar),compareOperator:M(Ar),updateOperator:M(Ar),definitionOperator:M(Ar),typeOperator:M(Ar),controlOperator:M(Ar),punctuation:Ey,separator:M(Ey),bracket:mu,angleBracket:M(mu),squareBracket:M(mu),paren:M(mu),brace:M(mu),content:Rr,heading:Wo,heading1:M(Wo),heading2:M(Wo),heading3:M(Wo),heading4:M(Wo),heading5:M(Wo),heading6:M(Wo),contentSeparator:M(Rr),list:M(Rr),quote:M(Rr),emphasis:M(Rr),strong:M(Rr),link:M(Rr),monospace:M(Rr),strikethrough:M(Rr),inserted:M(),deleted:M(),changed:M(),invalid:M(),meta:bh,documentMeta:M(bh),annotation:M(bh),processingInstruction:M(bh),definition:rr.defineModifier("definition"),constant:rr.defineModifier("constant"),function:rr.defineModifier("function"),standard:rr.defineModifier("standard"),local:rr.defineModifier("local"),special:rr.defineModifier("special")};for(let t in E){let e=E[t];e instanceof rr&&(e.name=t)}var QV=by([{tag:E.link,class:"tok-link"},{tag:E.heading,class:"tok-heading"},{tag:E.emphasis,class:"tok-emphasis"},{tag:E.strong,class:"tok-strong"},{tag:E.keyword,class:"tok-keyword"},{tag:E.atom,class:"tok-atom"},{tag:E.bool,class:"tok-bool"},{tag:E.url,class:"tok-url"},{tag:E.labelName,class:"tok-labelName"},{tag:E.inserted,class:"tok-inserted"},{tag:E.deleted,class:"tok-deleted"},{tag:E.literal,class:"tok-literal"},{tag:E.string,class:"tok-string"},{tag:E.number,class:"tok-number"},{tag:[E.regexp,E.escape,E.special(E.string)],class:"tok-string2"},{tag:E.variableName,class:"tok-variableName"},{tag:E.local(E.variableName),class:"tok-variableName tok-local"},{tag:E.definition(E.variableName),class:"tok-variableName tok-definition"},{tag:E.special(E.variableName),class:"tok-variableName2"},{tag:E.definition(E.propertyName),class:"tok-propertyName tok-definition"},{tag:E.typeName,class:"tok-typeName"},{tag:E.namespace,class:"tok-namespace"},{tag:E.className,class:"tok-className"},{tag:E.macroName,class:"tok-macroName"},{tag:E.propertyName,class:"tok-propertyName"},{tag:E.operator,class:"tok-operator"},{tag:E.comment,class:"tok-comment"},{tag:E.meta,class:"tok-meta"},{tag:E.invalid,class:"tok-invalid"},{tag:E.punctuation,class:"tok-punctuation"}]);var Ty,yu=new $;var I3=new $,Vn=class{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ee.prototype.hasOwnProperty("tree")||Object.defineProperty(ee.prototype,"tree",{get(){return mt(this)}}),this.parser=n,this.extension=[Wi.of(this),ee.languageData.of((o,s,l)=>{let a=GE(o,s,l),u=a.type.prop(yu);if(!u)return[];let c=o.facet(u),f=a.type.prop(I3);if(f){let h=a.resolve(s-a.from,l);for(let d of f)if(d.test(h,o)){let m=o.facet(d.facet);return d.type=="replace"?m:m.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return GE(e,n,r).type.prop(yu)==this.data}findRegions(e){let n=e.facet(Wi);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(yu)==this.data){r.push({from:s,to:s+o.length});return}let l=o.prop($.mounted);if(l){if(l.tree.prop(yu)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+s,to:a.to+s});else r.push({from:s,to:s+o.length});return}else if(l.overlay){let a=r.length;if(i(l.tree,l.overlay[0].from+s),r.length>a)return}}for(let a=0;a<o.children.length;a++){let u=o.children[a];u instanceof Ft&&i(u,o.positions[a]+s)}};return i(mt(e),0),r}get allowsNesting(){return!0}};Vn.setState=H.define();function GE(t,e,n){let r=t.facet(Wi),i=mt(t).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,n,pt.ExcludeBuffers))o.type.isTop&&(i=o);return i}function mt(t){let e=t.field(Vn.state,!1);return e?e.tree:Ft.empty}var Iy=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}},gu=null,My=class t{constructor(e,n,r=[],i,o,s,l,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new t(e,n,[],Ft.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Iy(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Ft.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ho.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ho.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=gu;gu=this;try{return e()}finally{gu=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=$E(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,f,h)=>a.push({fromA:u,toA:c,fromB:f,toB:h})),r=Ho.applyChanges(r,a),i=Ft.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&l.push({from:c,to:f})}}}return new t(this.parser,n,r,i,o,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=$E(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends wh{createParse(n,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let a=gu;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=s,new Ft(bn.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return gu}};function $E(t,e,n){return Ho.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}var vu=class t{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new t(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=My.create(e.facet(Wi).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new t(r)}};Vn.state=re.define({create:vu.init,update(t,e){for(let n of e.effects)if(n.is(Vn.setState))return n.value;return e.startState.facet(Wi)!=e.state.facet(Wi)?vu.init(e.state):t.apply(e)}});var QE=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(QE=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});var Ay=typeof navigator<"u"&&(!((Ty=navigator.scheduling)===null||Ty===void 0)&&Ty.isInputPending)?()=>navigator.scheduling.isInputPending():null,M3=X.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Vn.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Vn.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=QE(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(Vn.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Ay?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<i&&r.doc.length>i+1e3,a=o.context.work(()=>Ay&&Ay()||Date.now()>s,i+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Vn.setState.of(new vu(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>bt(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Wi=N.define({combine(t){return t.length?t[0]:null},enables:t=>[Vn.state,M3,R.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});var L3=N.define(),Ko=N.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Su(t){let e=t.facet(Ko);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function tl(t,e){let n="",r=t.tabSize,i=t.facet(Ko)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let o=0;o<e;o++)n+=i;return n}function Oh(t,e){t instanceof ee&&(t=new Go(t));for(let r of t.state.facet(L3)){let i=r(t,e);if(i!==void 0)return i}let n=mt(t.state);return n.length>=e?P3(t,n,e):null}var Go=class{constructor(e,n={}){this.state=e,this.options=n,this.unit=Su(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return ei(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},N3=new $;function P3(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let o=[];for(let s=i;s&&!(s.from<r.node.from||s.to>r.node.to||s.from==r.node.from&&s.type==r.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)r={node:o[s],next:r}}return JE(r,t,n)}function JE(t,e,n){for(let r=t;r;r=r.next){let i=D3(r.node);if(i)return i(Ly.create(e,n,r))}return 0}function _3(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function D3(t){let e=t.type.prop(N3);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop($.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>U3(s,!0,1,void 0,o&&!_3(s)?i.from:void 0)}return t.parent==null?F3:null}function F3(){return 0}var Ly=class t extends Go{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new t(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(B3(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return JE(this.context.next,this.base,this.pos)}};function B3(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function z3(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=s)return null;let u=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+u}}l=a.to}}function U3(t,e,n,r,i){let o=t.textAfter,s=o.match(/^\s*/)[0].length,l=r&&o.slice(s,s+r.length)==r||i==t.pos+s,a=e?z3(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}var V3=200;function eb(){return ee.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+V3)return t;let o=n.sliceString(i.from,r);if(!e.some(u=>u.test(o)))return t;let{state:s}=t,l=-1,a=[];for(let{head:u}of s.selection.ranges){let c=s.doc.lineAt(u);if(c.from==l)continue;l=c.from;let f=Oh(s,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=tl(s,f);h!=d&&a.push({from:c.from,to:c.from+h.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}var By=N.define(),H3=new $;function W3(t,e,n){let r=mt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),o=null;for(let s=i;s;s=s.next){let l=s.node;if(l.to<=n||l.from>n)continue;if(o&&l.from<e)break;let a=l.type.prop(H3);if(a&&(l.to<r.length-50||r.length==t.doc.length||!j3(l))){let u=a(l,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(o=u)}}return o}function j3(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Ah(t,e,n){for(let r of t.facet(By)){let i=r(t,e,n);if(i)return i}return W3(t,e,n)}function tb(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}var nl=H.define({map:tb}),qo=H.define({map:tb});function nb(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}var $o=re.define({create(){return I.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=KE(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(nl)&&!G3(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(zy),i=r?I.replace({widget:new Ny(r(e.state,n.value))}):qE;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(qo)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=KE(t,e.selection.main.head)),t},provide:t=>R.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(qE.range(r,i))}return I.set(e,!0)}});function KE(t,e,n=e){let r=!1;return t.between(e,n,(i,o)=>{i<n&&o>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,o)=>i>=n||o<=e}):t}function Rh(t,e,n){var r;let i=null;return(r=t.field($o,!1))===null||r===void 0||r.between(e,n,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function G3(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function rb(t,e){return t.field($o,!1)?e:e.concat(H.appendConfig.of(sb()))}var $3=t=>{for(let e of nb(t)){let n=Ah(t.state,e.from,e.to);if(n)return t.dispatch({effects:rb(t.state,[nl.of(n),ib(t,n)])}),!0}return!1},K3=t=>{if(!t.state.field($o,!1))return!1;let e=[];for(let n of nb(t)){let r=Rh(t.state,n.from,n.to);r&&e.push(qo.of(r),ib(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function ib(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return R.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}var q3=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=Ah(e,i.from,i.to);o&&n.push(nl.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:rb(t.state,n)}),!!n.length},Y3=t=>{let e=t.state.field($o,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(qo.of({from:r,to:i}))}),t.dispatch({effects:n}),!0};var ob=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:$3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:K3},{key:"Ctrl-Alt-[",run:q3},{key:"Ctrl-Alt-]",run:Y3}],X3={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},zy=N.define({combine(t){return Dt(t,X3)}});function sb(t){let e=[$o,Q3];return t&&e.push(zy.of(t)),e}function lb(t,e){let{state:n}=t,r=n.facet(zy),i=s=>{let l=t.lineBlockAt(t.posAtDOM(s.target)),a=Rh(t.state,l.from,l.to);a&&t.dispatch({effects:qo.of(a)}),s.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}var qE=I.replace({widget:new class extends He{toDOM(t){return lb(t,null)}}}),Ny=class extends He{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return lb(e,this.value)}},Z3={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1},xu=class extends Tt{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}};function ab(t={}){let e={...Z3,...t},n=new xu(e,!0),r=new xu(e,!1),i=X.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Wi)!=s.state.facet(Wi)||s.startState.field($o,!1)!=s.state.field($o,!1)||mt(s.startState)!=mt(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new Re;for(let a of s.viewportLineBlocks){let u=Rh(s.state,a.from,a.to)?r:Ah(s.state,a.from,a.to)?n:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:o}=e;return[i,cu({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(i))===null||l===void 0?void 0:l.markers)||te.empty},initialSpacer(){return new xu(e,!1)},domEventHandlers:{...o,click:(s,l,a)=>{if(o.click&&o.click(s,l,a))return!0;let u=Rh(s.state,l.from,l.to);if(u)return s.dispatch({effects:qo.of(u)}),!0;let c=Ah(s.state,l.from,l.to);return c?(s.dispatch({effects:nl.of(c)}),!0):!1}}}),sb()]}var Q3=R.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),el=class t{constructor(e,n){this.specs=e;let r;function i(l){let a=Bn.newName();return(r||(r=Object.create(null)))["."+a]=l,a}let o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,s=n.scope;this.scope=s instanceof Vn?l=>l.prop(yu)==s.data:s?l=>l==s:void 0,this.style=by(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=r?new Bn(r):null,this.themeType=n.themeType}static define(e,n){return new t(e,n||{})}},Py=N.define(),ub=N.define({combine(t){return t.length?[t[0]]:null}});function Ry(t){let e=t.facet(Py);return e.length?e:t.facet(ub)}function Ih(t,e){let n=[J3],r;return t instanceof el&&(t.module&&n.push(R.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(ub.of(t)):r?n.push(Py.computeN([R.darkTheme],i=>i.facet(R.darkTheme)==(r=="dark")?[t]:[])):n.push(Py.of(t)),n}var _y=class{constructor(e){this.markCache=Object.create(null),this.tree=mt(e.state),this.decorations=this.buildDeco(e,Ry(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=mt(e.state),r=Ry(e.state),i=r!=Ry(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!i&&n.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return I.none;let r=new Re;for(let{from:i,to:o}of e.visibleRanges)jE(this.tree,n,(s,l,a)=>{r.add(s,l,this.markCache[a]||(this.markCache[a]=I.mark({class:a})))},i,o);return r.finish()}},J3=Cn.high(X.fromClass(_y,{decorations:t=>t.decorations})),cb=el.define([{tag:E.meta,color:"#404740"},{tag:E.link,textDecoration:"underline"},{tag:E.heading,textDecoration:"underline",fontWeight:"bold"},{tag:E.emphasis,fontStyle:"italic"},{tag:E.strong,fontWeight:"bold"},{tag:E.strikethrough,textDecoration:"line-through"},{tag:E.keyword,color:"#708"},{tag:[E.atom,E.bool,E.url,E.contentSeparator,E.labelName],color:"#219"},{tag:[E.literal,E.inserted],color:"#164"},{tag:[E.string,E.deleted],color:"#a11"},{tag:[E.regexp,E.escape,E.special(E.string)],color:"#e40"},{tag:E.definition(E.variableName),color:"#00f"},{tag:E.local(E.variableName),color:"#30a"},{tag:[E.typeName,E.namespace],color:"#085"},{tag:E.className,color:"#167"},{tag:[E.special(E.variableName),E.macroName],color:"#256"},{tag:E.definition(E.propertyName),color:"#00c"},{tag:E.comment,color:"#940"},{tag:E.invalid,color:"#f00"}]),e_=R.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),fb=1e4,hb="()[]{}",db=N.define({combine(t){return Dt(t,{afterCursor:!0,brackets:hb,maxScanDistance:fb,renderMatch:r_})}}),t_=I.mark({class:"cm-matchingBracket"}),n_=I.mark({class:"cm-nonmatchingBracket"});function r_(t){let e=[],n=t.matched?t_:n_;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}var i_=re.define({create(){return I.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(db);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=ir(e.state,i.head,-1,r)||i.head>0&&ir(e.state,i.head-1,1,r)||r.afterCursor&&(ir(e.state,i.head,1,r)||i.head<e.state.doc.length&&ir(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return I.set(n,!0)},provide:t=>R.decorations.from(t)}),o_=[i_,e_];function pb(t={}){return[db.of(t),o_]}var s_=new $;function Dy(t,e,n){let r=t.prop(e<0?$.openedBy:$.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Fy(t){let e=t.type.prop(s_);return e?e(t.node):t}function ir(t,e,n,r={}){let i=r.maxScanDistance||fb,o=r.brackets||hb,s=mt(t),l=s.resolveInner(e,n);for(let a=l;a;a=a.parent){let u=Dy(a.type,n,o);if(u&&a.from<a.to){let c=Fy(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return l_(t,e,n,a,c,u,o)}}return a_(t,e,n,s,l.type,i,o)}function l_(t,e,n,r,i,o,s){let l=r.parent,a={from:i.from,to:i.to},u=0,c=l?.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let f=Fy(c);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Dy(c.type,n,s))u++;else if(Dy(c.type,-n,s)){if(u==0){let f=Fy(c);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function a_(t,e,n,r,i,o,s){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=s.indexOf(l);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=o;){let d=c.value;n<0&&(h+=d.length);let m=e+h*n;for(let x=n>0?0:d.length-1,v=n>0?d.length:-1;x!=v;x+=n){let p=s.indexOf(d[x]);if(!(p<0||r.resolveInner(m+x,1).type!=i))if(p%2==0==n>0)f++;else{if(f==1)return{start:u,end:{from:m+x,to:m+x+1},matched:p>>1==a>>1};f--}}n>0&&(h+=d.length)}return c.done?{start:u,matched:!1}:null}var u_=Object.create(null),YE=[bn.none];var XE=[],ZE=Object.create(null),c_=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])c_[t]=f_(u_,e);function Oy(t,e){XE.indexOf(t)>-1||(XE.push(t),console.warn(e))}function f_(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=t[u]||E[u];c?typeof c=="function"?a.length?a=a.map(c):Oy(u,`Modifier ${u} used at start of tag`):a.length?Oy(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:Oy(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(l=>l.id),o=ZE[i];if(o)return o.id;let s=ZE[i]=bn.define({id:YE.length,name:r,props:[HE({[r]:n})]});return YE.push(s),s.id}var lH={rtl:I.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:ue.RTL}),ltr:I.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:ue.LTR}),auto:I.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var h_=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=$y(t.state,n.from);return r.line?d_(t):r.block?m_(t):!1};function Gy(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}var d_=Gy(x_,0);var p_=Gy(Cb,0);var m_=Gy((t,e)=>Cb(t,e,y_(e)),0);function $y(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}var ku=50;function g_(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-ku,r),s=t.sliceDoc(i,i+ku),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(s)[0].length,u=o.length-l;if(o.slice(u-e.length,u)==e&&s.slice(a,a+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let c,f;i-r<=2*ku?c=f=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+ku),f=t.sliceDoc(i-ku,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,m=f.length-d-n.length;return c.slice(h,h+e.length)==e&&f.slice(m,m+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function y_(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Cb(t,e,n=e.selection.ranges){let r=n.map(o=>$y(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,s)=>g_(e,r[s],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let s=0,l;s<i.length;s++)if(l=i[s]){let a=r[s],{open:u,close:c}=l;o.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:o}}return null}function x_(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of n){let l=r.length,a=1e9,u=$y(e,o).line;if(u){for(let c=o;c<=s;){let f=e.doc.lineAt(c);if(f.from>i&&(o==s||s>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,m=f.text.slice(h,h+u.length)==u?h:-1;h<f.text.length&&h<a&&(a=h),r.push({line:f,comment:m,token:u,indent:h,empty:d,single:!1})}c=f.to+1}if(a<1e9)for(let c=l;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==l+1&&(r[l].single=!0)}}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:u,empty:c,single:f}of r)(f||!c)&&o.push({from:l.from+u,insert:a+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:a}of r)if(l>=0){let u=s.from+l,c=u+a.length;s.text[c-s.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}var Vy=_t.define(),v_=_t.define(),S_=N.define(),Eb=N.define({combine(t){return Dt(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),bb=re.define({create(){return Yo.empty},update(t,e){let n=e.state.facet(Eb),r=e.annotation(Vy);if(r){let a=or.fromTransaction(e,r.selection),u=r.side,c=u==0?t.undone:t.done;return a?c=Lh(c,c.length,n.minDepth,a):c=Ob(c,e.startState.selection),new Yo(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(v_);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(st.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=or.fromTransaction(e),s=e.annotation(st.time),l=e.annotation(st.userEvent);return o?t=t.addChanges(o,s,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Yo(t.done.map(or.fromJSON),t.undone.map(or.fromJSON))}});function Tb(t={}){return[bb,Eb.of(t),R.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?Ab:e.inputType=="historyRedo"?Hy:null;return r?(e.preventDefault(),r(n)):!1}})]}function Nh(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(bb,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}var Ab=Nh(0,!1),Hy=Nh(1,!1),k_=Nh(0,!0),w_=Nh(1,!0);var or=class t{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new t(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new t(e.changes&&$t.fromJSON(e.changes),[],e.mapped&&Jr.fromJSON(e.mapped),e.startSelection&&b.fromJSON(e.startSelection),e.selectionsAfter.map(b.fromJSON))}static fromTransaction(e,n){let r=Hn;for(let i of e.startState.facet(S_)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new t(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Hn)}static selection(e){return new t(void 0,Hn,void 0,void 0,e)}};function Lh(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function C_(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,s,l)=>{for(let a=0;a<n.length;){let u=n[a++],c=n[a++];l>=u&&s<=c&&(r=!0)}}),r}function E_(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function Rb(t,e){return t.length?e.length?t.concat(e):t:e}var Hn=[],b_=200;function Ob(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-b_));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Lh(t,t.length-1,1e9,n.setSelAfter(r)))}else return[or.selection([e])]}function T_(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Uy(t,e){if(!t.length)return t;let n=t.length,r=Hn;for(;n;){let i=A_(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[or.selection(r)]:Hn}function A_(t,e,n){let r=Rb(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Hn,n);if(!t.changes)return or.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new or(i,H.mapEffects(t.effects,e),s,t.startSelection.map(o),r)}var R_=/^(input\.type|delete)($|\.)/,Yo=class t{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new t(this.done,this.undone):this}addChanges(e,n,r,i,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||R_.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,C_(l.changes,e.changes))||r=="input.type.compose")?s=Lh(s,s.length-1,i.minDepth,new or(e.changes.compose(l.changes),Rb(H.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Hn)):s=Lh(s,s.length,i.minDepth,e),new t(s,Hn,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Hn;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&E_(o[o.length-1],e)?this:new t(Ob(this.done,e),this.undone,n,r)}addMapping(e){return new t(Uy(this.done,e),Uy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],s=o.selectionsAfter[0]||n.selection;if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Vy.of({side:e,rest:T_(i),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=i.length==1?Hn:i.slice(0,i.length-1);return o.mapped&&(l=Uy(l,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Vy.of({side:e,rest:l,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};Yo.empty=new Yo(Hn,Hn);var Ib=[{key:"Mod-z",run:Ab,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Hy,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Hy,preventDefault:!0},{key:"Mod-u",run:k_,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:w_,preventDefault:!0}];function rl(t,e){return b.create(t.ranges.map(e),t.mainIndex)}function sr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function lr({state:t,dispatch:e},n){let r=rl(t.selection,n);return r.eq(t.selection,!0)?!1:(e(sr(t,r)),!0)}function Ph(t,e){return b.cursor(e?t.to:t.from)}function Mb(t,e){return lr(t,n=>n.empty?t.moveByChar(n,e):Ph(n,e))}function Bt(t){return t.textDirectionAt(t.state.selection.main.head)==ue.LTR}var Lb=t=>Mb(t,!Bt(t)),Nb=t=>Mb(t,Bt(t));function Pb(t,e){return lr(t,n=>n.empty?t.moveByGroup(n,e):Ph(n,e))}var O_=t=>Pb(t,!Bt(t)),I_=t=>Pb(t,Bt(t));var gH=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function M_(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function _h(t,e,n){let r=mt(t).resolveInner(e.head),i=n?$.closedBy:$.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;M_(t,u,i)?r=u:a=n?u.to:u.from}let o=r.type.prop(i),s,l;return o&&(s=n?ir(t,r.from,1):ir(t,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,b.cursor(l,n?-1:1)}var L_=t=>lr(t,e=>_h(t.state,e,!Bt(t))),N_=t=>lr(t,e=>_h(t.state,e,Bt(t)));function _b(t,e){return lr(t,n=>{if(!n.empty)return Ph(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}var Db=t=>_b(t,!1),Fb=t=>_b(t,!0);function Bb(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let o of t.state.facet(R.scrollMargins)){let s=o(t);s?.top&&(n=Math.max(s?.top,n)),s?.bottom&&(r=Math.max(s?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function zb(t,e){let n=Bb(t),{state:r}=t,i=rl(r.selection,s=>s.empty?t.moveVertically(s,e,n.height):Ph(s,e));if(i.eq(r.selection))return!1;let o;if(n.selfScroll){let s=t.coordsAtPos(r.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,u=l.bottom-n.marginBottom;s&&s.top>a&&s.bottom<u&&(o=R.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-a}))}return t.dispatch(sr(r,i),{effects:o}),!0}var mb=t=>zb(t,!1),Wy=t=>zb(t,!0);function ji(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=b.cursor(r.from+o))}return i}var P_=t=>lr(t,e=>ji(t,e,!0)),__=t=>lr(t,e=>ji(t,e,!1)),D_=t=>lr(t,e=>ji(t,e,!Bt(t))),F_=t=>lr(t,e=>ji(t,e,Bt(t))),B_=t=>lr(t,e=>b.cursor(t.lineBlockAt(e.head).from,1)),z_=t=>lr(t,e=>b.cursor(t.lineBlockAt(e.head).to,-1));function U_(t,e,n){let r=!1,i=rl(t.selection,o=>{let s=ir(t,o.head,-1)||ir(t,o.head,1)||o.head>0&&ir(t,o.head-1,1)||o.head<t.doc.length&&ir(t,o.head+1,-1);if(!s||!s.end)return o;r=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return n?b.range(o.anchor,l):b.cursor(l)});return r?(e(sr(t,i)),!0):!1}var V_=({state:t,dispatch:e})=>U_(t,e,!1);function Wn(t,e){let n=rl(t.state.selection,r=>{let i=e(r);return b.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(sr(t.state,n)),!0)}function Ub(t,e){return Wn(t,n=>t.moveByChar(n,e))}var Vb=t=>Ub(t,!Bt(t)),Hb=t=>Ub(t,Bt(t));function Wb(t,e){return Wn(t,n=>t.moveByGroup(n,e))}var H_=t=>Wb(t,!Bt(t)),W_=t=>Wb(t,Bt(t));var j_=t=>Wn(t,e=>_h(t.state,e,!Bt(t))),G_=t=>Wn(t,e=>_h(t.state,e,Bt(t)));function jb(t,e){return Wn(t,n=>t.moveVertically(n,e))}var Gb=t=>jb(t,!1),$b=t=>jb(t,!0);function Kb(t,e){return Wn(t,n=>t.moveVertically(n,e,Bb(t).height))}var gb=t=>Kb(t,!1),yb=t=>Kb(t,!0),$_=t=>Wn(t,e=>ji(t,e,!0)),K_=t=>Wn(t,e=>ji(t,e,!1)),q_=t=>Wn(t,e=>ji(t,e,!Bt(t))),Y_=t=>Wn(t,e=>ji(t,e,Bt(t))),X_=t=>Wn(t,e=>b.cursor(t.lineBlockAt(e.head).from)),Z_=t=>Wn(t,e=>b.cursor(t.lineBlockAt(e.head).to)),xb=({state:t,dispatch:e})=>(e(sr(t,{anchor:0})),!0),vb=({state:t,dispatch:e})=>(e(sr(t,{anchor:t.doc.length})),!0),Sb=({state:t,dispatch:e})=>(e(sr(t,{anchor:t.selection.main.anchor,head:0})),!0),kb=({state:t,dispatch:e})=>(e(sr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Q_=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),J_=({state:t,dispatch:e})=>{let n=Dh(t).map(({from:r,to:i})=>b.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:b.create(n),userEvent:"select"})),!0},eD=({state:t,dispatch:e})=>{let n=rl(t.selection,r=>{let i=mt(t),o=i.resolveStack(r.from,1);if(r.empty){let s=i.resolveStack(r.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:l}=s;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&s.next)return b.range(l.to,l.from)}return r});return n.eq(t.selection)?!1:(e(sr(t,n)),!0)};function qb(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let o of n.selection.ranges){let s=n.doc.lineAt(o.head);if(e?s.to<t.state.doc.length:s.from>0)for(let l=o;;){let a=t.moveVertically(l,e);if(a.head<s.from||a.head>s.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==l.head)break;l=a}}}return i.length==r.ranges.length?!1:(t.dispatch(sr(n,b.create(i,i.length-1))),!0)}var tD=t=>qb(t,!1),nD=t=>qb(t,!0),rD=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=b.create([n.main]):n.main.empty||(r=b.create([b.cursor(n.main.head)])),r?(e(sr(t,r)),!0):!1};function wu(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let a=e(o);a<s?(n="delete.backward",a=Mh(t,a,!1)):a>s&&(n="delete.forward",a=Mh(t,a,!0)),s=Math.min(s,a),l=Math.max(l,a)}else s=Mh(t,s,!1),l=Mh(t,l,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:b.cursor(s,s<o.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?R.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Mh(t,e,n){if(t instanceof R)for(let r of t.state.facet(R.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}var Yb=(t,e,n)=>wu(t,r=>{let i=r.from,{state:o}=t,s=o.doc.lineAt(i),l,a;if(n&&!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,i-s.from))){if(l[l.length-1]=="	")return i-1;let u=ei(l,o.tabSize),c=u%Su(o)||Su(o);for(let f=0;f<c&&l[l.length-1-f]==" ";f++)i--;a=i}else a=Xe(s.text,i-s.from,e,e)+s.from,a==i&&s.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,i-s.from))&&(a=Xe(s.text,a-s.from,!1,!1)+s.from);return a}),jy=t=>Yb(t,!1,!0);var Xb=t=>Yb(t,!0,!1),Zb=(t,e)=>wu(t,n=>{let r=n.head,{state:i}=t,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let l=null;;){if(r==(e?o.to:o.from)){r==n.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Xe(o.text,r-o.from,e)+o.from,u=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(u);if(l!=null&&c!=l)break;(u!=" "||r!=n.head)&&(l=c),r=a}return r}),Qb=t=>Zb(t,!1),iD=t=>Zb(t,!0);var oD=t=>wu(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)});var sD=t=>wu(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),lD=t=>wu(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)});var aD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Y.of(["",""])},range:b.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},uD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),s=i==o.from?i-1:Xe(o.text,i-o.from,!1)+o.from,l=i==o.to?i+1:Xe(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:t.doc.slice(i,l).append(t.doc.slice(s,i))},range:b.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Dh(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function Jb(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of Dh(t)){if(n?o.to==t.doc.length:o.from==0)continue;let s=t.doc.lineAt(n?o.to+1:o.from-1),l=s.length+1;if(n){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+t.lineBreak});for(let a of o.ranges)i.push(b.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:t.lineBreak+s.text});for(let a of o.ranges)i.push(b.range(a.anchor-l,a.head-l))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:b.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}var cD=({state:t,dispatch:e})=>Jb(t,e,!1),fD=({state:t,dispatch:e})=>Jb(t,e,!0);function eT(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Dh(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var hD=({state:t,dispatch:e})=>eT(t,e,!1),dD=({state:t,dispatch:e})=>eT(t,e,!0),pD=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Dh(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=rl(e.selection,i=>{let o;if(t.lineWrapping){let s=t.lineBlockAt(i.head),l=t.coordsAtPos(i.head,i.assoc||1);l&&(o=s.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,o)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function mD(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=mt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop($.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}var wb=tT(!1),gD=tT(!0);function tT(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,l=e.doc.lineAt(o),a=!t&&o==s&&mD(e,o);t&&(o=s=(s<=l.to?l:e.doc.lineAt(s)).to);let u=new Go(e,{simulateBreak:o,simulateDoubleBreak:!!a}),c=Oh(u,o);for(c==null&&(c=ei(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;a?{from:o,to:s}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",tl(e,c)];return a&&f.push(tl(e,u.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:Y.of(f)},range:b.cursor(o+1+f[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ky(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let l=t.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(e(l,i,r),n=l.number),s=l.to+1}let o=t.changes(i);return{changes:i,range:b.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}var yD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Go(t,{overrideIndentation:o=>{let s=n[o];return s??-1}}),i=Ky(t,(o,s,l)=>{let a=Oh(r,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let u=/^\s*/.exec(o.text)[0],c=tl(t,a);(u!=c||l.from<o.from+u.length)&&(n[o.from]=a,s.push({from:o.from,to:o.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},nT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Ky(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Ko)})}),{userEvent:"input.indent"})),!0),rT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Ky(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=ei(i,t.tabSize),s=0,l=tl(t,Math.max(0,o-Su(t)));for(;s<i.length&&s<l.length&&i.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+i.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),xD=t=>(t.setTabFocusMode(),!0);var vD=[{key:"Ctrl-b",run:Lb,shift:Vb,preventDefault:!0},{key:"Ctrl-f",run:Nb,shift:Hb},{key:"Ctrl-p",run:Db,shift:Gb},{key:"Ctrl-n",run:Fb,shift:$b},{key:"Ctrl-a",run:B_,shift:X_},{key:"Ctrl-e",run:z_,shift:Z_},{key:"Ctrl-d",run:Xb},{key:"Ctrl-h",run:jy},{key:"Ctrl-k",run:oD},{key:"Ctrl-Alt-h",run:Qb},{key:"Ctrl-o",run:aD},{key:"Ctrl-t",run:uD},{key:"Ctrl-v",run:Wy}],SD=[{key:"ArrowLeft",run:Lb,shift:Vb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:O_,shift:H_,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:D_,shift:q_,preventDefault:!0},{key:"ArrowRight",run:Nb,shift:Hb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:I_,shift:W_,preventDefault:!0},{mac:"Cmd-ArrowRight",run:F_,shift:Y_,preventDefault:!0},{key:"ArrowUp",run:Db,shift:Gb,preventDefault:!0},{mac:"Cmd-ArrowUp",run:xb,shift:Sb},{mac:"Ctrl-ArrowUp",run:mb,shift:gb},{key:"ArrowDown",run:Fb,shift:$b,preventDefault:!0},{mac:"Cmd-ArrowDown",run:vb,shift:kb},{mac:"Ctrl-ArrowDown",run:Wy,shift:yb},{key:"PageUp",run:mb,shift:gb},{key:"PageDown",run:Wy,shift:yb},{key:"Home",run:__,shift:K_,preventDefault:!0},{key:"Mod-Home",run:xb,shift:Sb},{key:"End",run:P_,shift:$_,preventDefault:!0},{key:"Mod-End",run:vb,shift:kb},{key:"Enter",run:wb,shift:wb},{key:"Mod-a",run:Q_},{key:"Backspace",run:jy,shift:jy,preventDefault:!0},{key:"Delete",run:Xb,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Qb,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:iD,preventDefault:!0},{mac:"Mod-Backspace",run:sD,preventDefault:!0},{mac:"Mod-Delete",run:lD,preventDefault:!0}].concat(vD.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),iT=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:L_,shift:j_},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:N_,shift:G_},{key:"Alt-ArrowUp",run:cD},{key:"Shift-Alt-ArrowUp",run:hD},{key:"Alt-ArrowDown",run:fD},{key:"Shift-Alt-ArrowDown",run:dD},{key:"Mod-Alt-ArrowUp",run:tD},{key:"Mod-Alt-ArrowDown",run:nD},{key:"Escape",run:rD},{key:"Mod-Enter",run:gD},{key:"Alt-l",mac:"Ctrl-l",run:J_},{key:"Mod-i",run:eD,preventDefault:!0},{key:"Mod-[",run:rT},{key:"Mod-]",run:nT},{key:"Mod-Alt-\\",run:yD},{key:"Shift-Mod-k",run:pD},{key:"Shift-Mod-\\",run:V_},{key:"Mod-/",run:h_},{key:"Alt-A",run:p_},{key:"Ctrl-m",mac:"Shift-Alt-m",run:xD}].concat(SD),oT={key:"Tab",run:nT,shift:rT};var sT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t,$i=class{constructor(e,n,r=0,i=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?l=>o(sT(l)):sT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ct(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Ua(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=wn(e);let i=this.normalize(n);if(i.length)for(let o=0,s=r;;o++){let l=i.charCodeAt(o),a=this.match(l,s,this.bufferPos+this.bufferStart);if(o==i.length-1){if(a)return this.value=a,this;break}s==r&&o<n.length&&n.charCodeAt(o)==l&&s++}}}match(e,n,r){let i=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],l=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[o+1],to:r}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}};typeof Symbol<"u"&&($i.prototype[Symbol.iterator]=function(){return this});var cT={from:-1,to:-1,match:/.*/.exec("")},e1="gm"+(/x/.unicode==null?"":"u"),zh=class{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=cT,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Vh(e,n,r,i,o);this.re=new RegExp(n,e1+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=Hh(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Hh(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},qy=new WeakMap,Uh=class t{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=qy.get(e);if(!i||i.from>=r||i.to<=n){let l=new t(n,e.sliceString(n,r));return qy.set(e,l),l}if(i.from==n&&i.to==r)return i;let{text:o,from:s}=i;return s>n&&(o=e.sliceString(n,s)+o,s=n),i.to<r&&(o+=e.sliceString(i.to,r)),qy.set(e,new t(s,o)),new t(n,o.slice(n-s,r-s))}},Vh=class{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=cT,this.matchPos=Hh(e,i),this.re=new RegExp(n,e1+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Uh.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Hh(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Uh.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(zh.prototype[Symbol.iterator]=Vh.prototype[Symbol.iterator]=function(){return this});function kD(t){try{return new RegExp(t,e1),!0}catch{return!1}}function Hh(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Yy(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=ie("input",{class:"cm-textfield",name:"line",value:e}),r=ie("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:Cu.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},ie("label",t.state.phrase("Go to line"),": ",n)," ",ie("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ie("button",{name:"close",onclick:()=>{t.dispatch({effects:Cu.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["\xD7"]));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!o)return;let{state:s}=t,l=s.doc.lineAt(s.selection.main.head),[,a,u,c,f]=o,h=c?+c.slice(1):0,d=u?+u:l.number;if(u&&f){let v=d/100;a&&(v=v*(a=="-"?-1:1)+l.number/s.doc.lines),d=Math.round(s.doc.lines*v)}else u&&a&&(d=d*(a=="-"?-1:1)+l.number);let m=s.doc.line(Math.max(1,Math.min(s.doc.lines,d))),x=b.cursor(m.from+Math.max(0,Math.min(h,m.length)));t.dispatch({effects:[Cu.of(!1),R.scrollIntoView(x.from,{y:"center"})],selection:x}),t.focus()}return{dom:r}}var Cu=H.define(),lT=re.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Cu)&&(t=n.value);return t},provide:t=>Uo.from(t,e=>e?Yy:null)}),wD=t=>{let e=Vo(t,Yy);if(!e){let n=[Cu.of(!0)];t.state.field(lT,!1)==null&&n.push(H.appendConfig.of([lT,CD])),t.dispatch({effects:n}),e=Vo(t,Yy)}return e&&e.dom.querySelector("input").select(),!0},CD=R.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),ED={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},fT=N.define({combine(t){return Dt(t,ED,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function hT(t){let e=[OD,RD];return t&&e.push(fT.of(t)),e}var bD=I.mark({class:"cm-selectionMatch"}),TD=I.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function aT(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=ae.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=ae.Word)}function AD(t,e,n,r){return t(e.sliceDoc(n,n+1))==ae.Word&&t(e.sliceDoc(r-1,r))==ae.Word}var RD=X.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(fT),{state:n}=t,r=n.selection;if(r.ranges.length>1)return I.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return I.none;let a=n.wordAt(i.head);if(!a)return I.none;s=n.charCategorizer(i.head),o=n.sliceDoc(a.from,a.to)}else{let a=i.to-i.from;if(a<e.minSelectionLength||a>200)return I.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),s=n.charCategorizer(i.head),!(aT(s,n,i.from,i.to)&&AD(s,n,i.from,i.to)))return I.none}else if(o=n.sliceDoc(i.from,i.to),!o)return I.none}let l=[];for(let a of t.visibleRanges){let u=new $i(n.doc,o,a.from,a.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!s||aT(s,n,c,f))&&(i.empty&&c<=i.from&&f>=i.to?l.push(TD.range(c,f)):(c>=i.to||f<=i.from)&&l.push(bD.range(c,f)),l.length>e.maxMatches))return I.none}}return I.set(l)}},{decorations:t=>t.decorations}),OD=R.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),ID=({state:t,dispatch:e})=>{let{selection:n}=t,r=b.create(n.ranges.map(i=>t.wordAt(i.head)||b.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function MD(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,l=new $i(t.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new $i(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(a=>a.from==l.value.from))continue;if(o){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}var LD=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return ID({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=MD(t,r);return i?(e(t.update({selection:t.selection.addRange(b.range(i.from,i.to),!1),effects:R.scrollIntoView(i.to)})),!0):!1},sl=N.define({combine(t){return Dt(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Jy(e),scrollToMatch:e=>R.scrollIntoView(e)})}});var Wh=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||kD(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Zy(this):new Xy(this)}getCursor(e,n=0,r){let i=e.doc?e:ee.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?ol(this,i,n,r):il(this,i,n,r)}},jh=class{constructor(e){this.spec=e}};function il(t,e,n,r){return new $i(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?ND(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ND(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(Gh(i,n-o))!=ae.Word||e($h(i,n-o))!=ae.Word)&&(e($h(i,r-o))!=ae.Word||e(Gh(i,r-o))!=ae.Word))}var Xy=class extends jh{constructor(e){super(e)}nextMatch(e,n,r){let i=il(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,n+this.spec.unquoted.length);i=il(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),s=il(this.spec,e,o,i),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=il(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=il(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}};function ol(t,e,n,r){return new zh(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?PD(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Gh(t,e){return t.slice(Xe(t,e,!1),e)}function $h(t,e){return t.slice(e,Xe(t,e))}function PD(t){return(e,n,r)=>!r[0].length||(t(Gh(r.input,r.index))!=ae.Word||t($h(r.input,r.index))!=ae.Word)&&(t($h(r.input,r.index+r[0].length))!=ae.Word||t(Gh(r.input,r.index+r[0].length))!=ae.Word)}var Zy=class extends jh{nextMatch(e,n,r){let i=ol(this.spec,e,r,e.doc.length).next();return i.done&&(i=ol(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),s=ol(this.spec,e,o,r),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==n||l.from>o+10))return l;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let o=+r.slice(0,i);if(o>0&&o<e.match.length)return e.match[o]+r.slice(i)}return n})}matchAll(e,n){let r=ol(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=ol(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}},bu=H.define(),t1=H.define(),Gi=re.define({create(t){return new Eu(Qy(t).create(),null)},update(t,e){for(let n of e.effects)n.is(bu)?t=new Eu(n.value.create(),t.panel):n.is(t1)&&(t=new Eu(t.query,n.value?n1:null));return t},provide:t=>Uo.from(t,e=>e.panel)});var Eu=class{constructor(e,n){this.query=e,this.panel=n}},_D=I.mark({class:"cm-searchMatch"}),DD=I.mark({class:"cm-searchMatch cm-searchMatch-selected"}),FD=X.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Gi))}update(t){let e=t.state.field(Gi);(e!=t.startState.field(Gi)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return I.none;let{view:n}=this,r=new Re;for(let i=0,o=n.visibleRanges,s=o.length;i<s;i++){let{from:l,to:a}=o[i];for(;i<s-1&&a>o[i+1].from-2*250;)a=o[++i].to;t.highlight(n.state,l,a,(u,c)=>{let f=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);r.add(u,c,f?DD:_D)})}return r.finish()}},{decorations:t=>t.decorations});function Tu(t){return e=>{let n=e.state.field(Gi,!1);return n&&n.query.spec.valid?t(e,n):mT(e)}}var Kh=Tu((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=b.single(r.from,r.to),o=t.state.facet(sl);return t.dispatch({selection:i,effects:[r1(t,r),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),pT(t),!0}),qh=Tu((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let o=b.single(i.from,i.to),s=t.state.facet(sl);return t.dispatch({selection:o,effects:[r1(t,i),s.scrollToMatch(o.main,t)],userEvent:"select.search"}),pT(t),!0}),BD=Tu((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:b.create(n.map(r=>b.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),zD=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let l=new $i(t.doc,t.sliceDoc(r,i));!l.next().done;){if(o.length>1e3)return!1;l.value.from==r&&(s=o.length),o.push(b.range(l.value.from,l.value.to))}return e(t.update({selection:b.create(o,s),userEvent:"select.search.matches"})),!0},uT=Tu((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let s=o,l=[],a,u,c=[];s.from==r&&s.to==i&&(u=n.toText(e.getReplacement(s)),l.push({from:s.from,to:s.to,insert:u}),s=e.nextMatch(n,s.from,s.to),c.push(R.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let f=t.state.changes(l);return s&&(a=b.single(s.from,s.to).map(f),c.push(r1(t,s)),c.push(n.facet(sl).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:c,userEvent:"input.replace"}),!0}),UD=Tu((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:R.announce.of(r),userEvent:"input.replace.all"}),!0});function n1(t){return t.state.facet(sl).createPanel(t)}function Qy(t,e){var n,r,i,o,s;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=t.facet(sl);return new Wh({search:((n=e?.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:u.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:u.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:u.wholeWord})}function dT(t){let e=Vo(t,n1);return e&&e.dom.querySelector("[main-field]")}function pT(t){let e=dT(t);e&&e==t.root.activeElement&&e.select()}var mT=t=>{let e=t.state.field(Gi,!1);if(e&&e.panel){let n=dT(t);if(n&&n!=t.root.activeElement){let r=Qy(t.state,e.query.spec);r.valid&&t.dispatch({effects:bu.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[t1.of(!0),e?bu.of(Qy(t.state,e.query.spec)):H.appendConfig.of(HD)]});return!0},gT=t=>{let e=t.state.field(Gi,!1);if(!e||!e.panel)return!1;let n=Vo(t,n1);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:t1.of(!1)}),!0},yT=[{key:"Mod-f",run:mT,scope:"editor search-panel"},{key:"F3",run:Kh,shift:qh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Kh,shift:qh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:gT,scope:"editor search-panel"},{key:"Mod-Shift-l",run:zD},{key:"Mod-Alt-g",run:wD},{key:"Mod-d",run:LD,preventDefault:!0}],Jy=class{constructor(e){this.view=e;let n=this.query=e.state.field(Gi).query.spec;this.commit=this.commit.bind(this),this.searchField=ie("input",{value:n.search,placeholder:Tn(e,"Find"),"aria-label":Tn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ie("input",{value:n.replace,placeholder:Tn(e,"Replace"),"aria-label":Tn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ie("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=ie("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=ie("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,s){return ie("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=ie("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Kh(e),[Tn(e,"next")]),r("prev",()=>qh(e),[Tn(e,"previous")]),r("select",()=>BD(e),[Tn(e,"all")]),ie("label",null,[this.caseField,Tn(e,"match case")]),ie("label",null,[this.reField,Tn(e,"regexp")]),ie("label",null,[this.wordField,Tn(e,"by word")]),...e.state.readOnly?[]:[ie("br"),this.replaceField,r("replace",()=>uT(e),[Tn(e,"replace")]),r("replaceAll",()=>UD(e),[Tn(e,"replace all")])],ie("button",{name:"close",onclick:()=>gT(e),"aria-label":Tn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Wh({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:bu.of(e)}))}keydown(e){yE(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?qh:Kh)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),uT(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(bu)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(sl).top}};function Tn(t,e){return t.state.phrase(e)}var Fh=30,Bh=/[\s\.,:;?!]/;function r1(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-Fh),s=Math.min(i,n+Fh),l=t.state.sliceDoc(o,s);if(o!=r.from){for(let a=0;a<Fh;a++)if(!Bh.test(l[a+1])&&Bh.test(l[a])){l=l.slice(a);break}}if(s!=i){for(let a=l.length-1;a>l.length-Fh;a--)if(!Bh.test(l[a-1])&&Bh.test(l[a])){l=l.slice(0,a);break}}return R.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`)}var VD=R.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),HD=[Gi,Cn.low(FD),VD];var Xh=class{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=mt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(bT(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}};function xT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function WD(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=xT(e)+xT(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function jD(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:WD(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}var Zh=class{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}};function Zo(t){return t.selection.main.from}function bT(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}var TT=_t.define();function GD(t,e,n,r){let{main:i}=t.selection,o=n-i.from,s=r-i.from;return{...t.changeByRange(l=>{if(l!=i&&n!=r&&t.sliceDoc(l.from+o,l.from+s)!=t.sliceDoc(n,r))return{range:l};let a=t.toText(e);return{changes:{from:l.from+o,to:r==i.from?l.to:l.from+s,insert:a},range:b.cursor(l.from+o+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}var vT=new WeakMap;function $D(t){if(!Array.isArray(t))return t;let e=vT.get(t);return e||vT.set(t,e=jD(t)),e}var Qh=H.define(),Au=H.define(),l1=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Ct(e,n),i=wn(r);this.chars.push(r);let o=e.slice(n,n+i),s=o.toUpperCase();this.folded.push(Ct(s==o?o.toLowerCase():s,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:s}=this;if(n.length==1){let g=Ct(e,0),y=wn(g),S=y==e.length?0:-100;if(g!=n[0])if(g==r[0])S+=-200;else return null;return this.ret(S,[0,y])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,u=0;if(l<0){for(let g=0,y=Math.min(e.length,200);g<y&&u<a;){let S=Ct(e,g);(S==n[u]||S==r[u])&&(i[u++]=g),g+=wn(S)}if(u<a)return null}let c=0,f=0,h=!1,d=0,m=-1,x=-1,v=/[a-z]/.test(e),p=!0;for(let g=0,y=Math.min(e.length,200),S=0;g<y&&f<a;){let k=Ct(e,g);l<0&&(c<a&&k==n[c]&&(o[c++]=g),d<a&&(k==n[d]||k==r[d]?(d==0&&(m=g),x=g+1,d++):d=0));let w,C=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(w=Ua(k))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!g||C==1&&v||S==0&&C!=0)&&(n[f]==k||r[f]==k&&(h=!0)?s[f++]=g:s.length&&(p=!1)),S=C,g+=wn(k)}return f==a&&s[0]==0&&p?this.result(-100+(h?-200:0),s,e):d==a&&m==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-900-e.length,[m,x]):f==a?this.result(-100+(h?-200:0)+-700+(p?0:-1100),s,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],o=0;for(let s of n){let l=s+(this.astral?wn(Ct(r,s)):1);o&&i[o-1]==s?i[o-1]=l:(i[o++]=s,i[o++]=l)}return this.ret(e-r.length,i)}},a1=class{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}},gt=N.define({combine(t){return Dt(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:KD,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>ST(e(r),n(r)),optionClass:(e,n)=>r=>ST(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function ST(t,e){return t?e?t+" "+e:t:e}function KD(t,e,n,r,i,o){let s=t.textDirection==ue.RTL,l=s,a=!1,u="top",c,f,h=e.left-i.left,d=i.right-e.right,m=r.right-r.left,x=r.bottom-r.top;if(l&&h<Math.min(m,d)?l=!1:!l&&d<Math.min(m,h)&&(l=!0),m<=(l?h:d))c=Math.max(i.top,Math.min(n.top,i.bottom-x))-e.top,f=Math.min(400,l?h:d);else{a=!0,f=Math.min(400,(s?e.right:i.right-e.left)-30);let g=i.bottom-e.bottom;g>=x||g>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let v=(e.bottom-e.top)/o.offsetHeight,p=(e.right-e.left)/o.offsetWidth;return{style:`${u}: ${c/v}px; max-width: ${f/p}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":l?"left":"right")}}function qD(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,o){let s=document.createElement("span");s.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let u=0;u<o.length;){let c=o[u++],f=o[u++];c>a&&s.appendChild(document.createTextNode(l.slice(a,c)));let h=s.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(c,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&s.appendChild(document.createTextNode(l.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function i1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}var u1=class{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:o,selected:s}=i.open,l=e.state.facet(gt);this.optionContent=qD(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=i1(o.length,s,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:u}=e.state.field(n).open;for(let c=a.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(gt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Au.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:s,disabled:l}=r.open;(!i.open||i.open.options!=o)&&(this.range=i1(o.length,s,e.state.facet(gt).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),l!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=i1(n.options.length,n.selected,this.view.state.facet(gt).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:o}=i;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(i);if(!s)return;"then"in s?s.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,i)}).catch(l=>bt(this.view.state,l,"completion info")):(this.addInfoPane(s,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&XD(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return i.top>Math.min(o.bottom,n.bottom)-10||i.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(gt).positionInfo(this.view,n,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){let i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",s=>{s.target==i&&s.preventDefault()});let o=null;for(let s=r.from;s<r.to;s++){let{completion:l,match:a}=e[s],{section:u}=l;if(u){let h=typeof u=="string"?u:u.name;if(h!=o&&(s>r.from||r.from==0))if(o=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}let c=i.appendChild(document.createElement("li"));c.id=n+"-"+s,c.setAttribute("role","option");let f=this.optionClass(l);f&&(c.className=f);for(let h of this.optionContent){let d=h(l,this.view.state,this.view,a);d&&c.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function YD(t,e){return n=>new u1(n,t,e)}function XD(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function kT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ZD(t,e){let n=[],r=null,i=null,o=c=>{n.push(c);let{section:f}=c.completion;if(f){r||(r=[]);let h=typeof f=="string"?f:f.name;r.some(d=>d.name==h)||r.push(typeof f=="string"?{name:h}:f)}},s=e.facet(gt);for(let c of t)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)o(new Zh(h,c.source,f?f(h):[],1e9-n.length));else{let h=e.sliceDoc(c.from,c.to),d,m=s.filterStrict?new a1(h):new l1(h);for(let x of c.result.options)if(d=m.match(x.label)){let v=x.displayLabel?f?f(x,d.matched):[]:d.matched,p=d.score+(x.boost||0);if(o(new Zh(x,c.source,v,p)),typeof x.section=="object"&&x.section.rank==="dynamic"){let{name:g}=x.section;i||(i=Object.create(null)),i[g]=Math.max(p,i[g]||-1e9)}}}}if(r){let c=Object.create(null),f=0,h=(d,m)=>(d.rank==="dynamic"&&m.rank==="dynamic"?i[m.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof m.rank=="number"?m.rank:1e9)||(d.name<m.name?-1:1);for(let d of r.sort(h))f-=1e5,c[d.name]=f;for(let d of n){let{section:m}=d.completion;m&&(d.score+=c[typeof m=="string"?m:m.name])}}let l=[],a=null,u=s.compareCompletions;for(let c of n.sort((f,h)=>h.score-f.score||u(f.completion,h.completion))){let f=c.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(c):kT(c.completion)>kT(a)&&(l[l.length-1]=c),a=c.completion}return l}var c1=class t{constructor(e,n,r,i,o,s){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=s}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new t(this.options,wT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,o,s){if(i&&!s&&e.some(u=>u.isPending))return i.setDisabled();let l=ZD(e,n);if(!l.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let a=n.facet(gt).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==u){a=c;break}}return new t(l,wT(r,a),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:r4,above:o.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new t(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new t(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},f1=class t{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new t(t4,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(gt),o=(r.override||n.languageDataAt("autocomplete",Zo(n)).map($D)).map(a=>(this.active.find(c=>c.source==a)||new ii(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((a,u)=>a==this.active[u])&&(o=this.active);let s=this.open,l=e.effects.some(a=>a.is(d1));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!QD(o,this.active)||l?s=c1.build(o,n,this.id,s,r,l):s&&s.disabled&&!o.some(a=>a.isPending)&&(s=null),!s&&o.every(a=>!a.isPending)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new ii(a.source,0):a));for(let a of e.effects)a.is(RT)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new t(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?JD:e4}};function QD(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}var JD={"aria-autocomplete":"list"},e4={};function wT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}var t4=[];function AT(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(TT);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}var ii=class t{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=AT(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new t(i.source,0)),r&4&&i.state==0&&(i=new t(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(Qh))i=new t(i.source,1,o.value);else if(o.is(Au))i=new t(i.source,0);else if(o.is(d1))for(let s of o.value)s.source==i.source&&(i=s);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Zo(e.state))}},Jh=class t extends ii{constructor(e,n,r,i,o,s){super(e,3,n),this.limit=r,this.result=i,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Zo(e.state);if(l>s||!i||n&2&&(Zo(e.startState)==this.from||l<this.limit))return new ii(this.source,n&4?1:0);let a=e.changes.mapPos(this.limit);return n4(i.validFor,e.state,o,s)?new t(this.source,this.explicit,a,i,o,s):i.update&&(i=i.update(i,o,s,new Xh(e.state,l,!1)))?new t(this.source,this.explicit,a,i,i.from,(r=i.to)!==null&&r!==void 0?r:Zo(e.state)):new ii(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new t(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ii(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}};function n4(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):bT(t,!0).test(i)}var d1=H.define({map(t,e){return t.map(n=>n.map(e))}}),RT=H.define(),ln=re.define({create(){return f1.start()},update(t,e){return t.update(e)},provide:t=>[uu.from(t,e=>e.tooltip),R.contentAttributes.from(t,e=>e.attrs)]});function p1(t,e){let n=e.completion.apply||e.completion.label,r=t.state.field(ln).active.find(i=>i.source==e.source);return r instanceof Jh?(typeof n=="string"?t.dispatch({...GD(t.state,n,r.from,r.to),annotations:TT.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}var r4=YD(ln,p1);function Yh(t,e="option"){return n=>{let r=n.state.field(ln,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(gt).interactionDelay)return!1;let i=1,o;e=="page"&&(o=py(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),n.dispatch({effects:RT.of(l)}),!0}}var i4=t=>{let e=t.state.field(ln,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(gt).interactionDelay?!1:p1(t,e.open.options[e.open.selected])},o1=t=>t.state.field(ln,!1)?(t.dispatch({effects:Qh.of(!0)}),!0):!1,o4=t=>{let e=t.state.field(ln,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Au.of(null)}),!0)},h1=class{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}},s4=50,l4=1e3,a4=X.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(ln).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(ln),n=t.state.facet(gt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(ln)==e)return;let r=t.transactions.some(o=>{let s=AT(o,n);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(r||s.context.abortOnDocChange&&t.docChanged||s.updates.length+t.transactions.length>s4&&Date.now()-s.time>l4){for(let l of s.context.abortListeners)try{l()}catch(a){bt(this.view.state,a)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(s=>s.is(Qh)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(ln);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(gt).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=Zo(e),r=new Xh(e,n,t.explicit,this.view),i=new h1(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Au.of(null)}),bt(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(gt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(gt),r=this.view.state.field(ln);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let l=Zo(o.updates.length?o.updates[0].startState:this.view.state),a=Math.min(l,o.done.from+(o.active.explicit?0:1)),u=new Jh(o.active.source,o.active.explicit,a,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:l);for(let c of o.updates)u=u.update(c,n);if(u.hasResult()){e.push(u);continue}}let s=r.active.find(l=>l.source==o.active.source);if(s&&s.isPending)if(o.done==null){let l=new ii(o.active.source,0);for(let a of o.updates)l=l.update(a,n);l.isPending||e.push(l)}else this.startQuery(s)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:d1.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(ln,!1);if(e&&e.tooltip&&this.view.state.facet(gt).closeOnBlur){let n=e.open&&py(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Au.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Qh.of(!1)}),20),this.composing=0}}}),u4=typeof navigator=="object"&&/Win/.test(navigator.platform),c4=Cn.highest(R.domEventHandlers({keydown(t,e){let n=e.state.field(ln,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(u4&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(s=>s.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&p1(e,r),!1}})),f4=R.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var Ru={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Xo=H.define({map(t,e){let n=e.mapPos(t,-1,wt.TrackAfter);return n??void 0}}),m1=new class extends tr{};m1.startSide=1;m1.endSide=-1;var OT=re.define({create(){return te.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Xo)&&(t=t.update({add:[m1.range(n.value,n.value+1)]}));return t}});function IT(){return[d4,OT]}var s1="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function MT(t){for(let e=0;e<s1.length;e+=2)if(s1.charCodeAt(e)==t)return s1.charAt(e+1);return Ua(t<128?t:t+1)}function LT(t,e){return t.languageDataAt("closeBrackets",e)[0]||Ru}var h4=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),d4=R.inputHandler.of((t,e,n,r)=>{if((h4?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&wn(Ct(r,0))==1||e!=i.from||n!=i.to)return!1;let o=m4(t.state,r);return o?(t.dispatch(o),!0):!1}),p4=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=LT(t,t.selection.main.head).brackets||Ru.brackets,i=null,o=t.changeByRange(s=>{if(s.empty){let l=g4(t.doc,s.head);for(let a of r)if(a==l&&ed(t.doc,s.head)==MT(Ct(a,0)))return{changes:{from:s.head-a.length,to:s.head+a.length},range:b.cursor(s.head-a.length)}}return{range:i=s}});return i||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},NT=[{key:"Backspace",run:p4}];function m4(t,e){let n=LT(t,t.selection.main.head),r=n.brackets||Ru.brackets;for(let i of r){let o=MT(Ct(i,0));if(e==i)return o==i?v4(t,i,r.indexOf(i+i+i)>-1,n):y4(t,i,o,n.before||Ru.before);if(e==o&&PT(t,t.selection.main.from))return x4(t,i,o)}return null}function PT(t,e){let n=!1;return t.field(OT).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function ed(t,e){let n=t.sliceString(e,e+2);return n.slice(0,wn(Ct(n,0)))}function g4(t,e){let n=t.sliceString(e-2,e);return wn(Ct(n,0))==n.length?n:n.slice(1)}function y4(t,e,n,r){let i=null,o=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:n,from:s.to}],effects:Xo.of(s.to+e.length),range:b.range(s.anchor+e.length,s.head+e.length)};let l=ed(t.doc,s.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+n,from:s.head},effects:Xo.of(s.head+e.length),range:b.cursor(s.head+e.length)}:{range:i=s}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function x4(t,e,n){let r=null,i=t.changeByRange(o=>o.empty&&ed(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:b.cursor(o.head+n.length)}:r={range:o});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function v4(t,e,n,r){let i=r.stringPrefixes||Ru.stringPrefixes,o=null,s=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Xo.of(l.to+e.length),range:b.range(l.anchor+e.length,l.head+e.length)};let a=l.head,u=ed(t.doc,a),c;if(u==e){if(CT(t,a))return{changes:{insert:e+e,from:a},effects:Xo.of(a+e.length),range:b.cursor(a+e.length)};if(PT(t,a)){let h=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:b.cursor(a+h.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(c=ET(t,a-2*e.length,i))>-1&&CT(t,c))return{changes:{insert:e+e+e+e,from:a},effects:Xo.of(a+e.length),range:b.cursor(a+e.length)};if(t.charCategorizer(a)(u)!=ae.Word&&ET(t,a,i)>-1&&!S4(t,a,e,i))return{changes:{insert:e+e,from:a},effects:Xo.of(a+e.length),range:b.cursor(a+e.length)}}return{range:o=l}});return o?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function CT(t,e){let n=mt(t).resolveInner(e+1);return n.parent&&n.from==e}function S4(t,e,n,r){let i=mt(t).resolveInner(e,-1),o=r.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=l.indexOf(n);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>n.length+a;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function ET(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=ae.Word)return e;for(let i of n){let o=e-i.length;if(t.sliceDoc(o,e)==i&&r(t.sliceDoc(o-1,o))!=ae.Word)return o}return-1}function _T(t={}){return[c4,ln,gt.of(t),a4,k4,f4]}var g1=[{key:"Ctrl-Space",run:o1},{mac:"Alt-`",run:o1},{mac:"Alt-i",run:o1},{key:"Escape",run:o4},{key:"ArrowDown",run:Yh(!0)},{key:"ArrowUp",run:Yh(!1)},{key:"PageDown",run:Yh(!0,"page")},{key:"PageUp",run:Yh(!1,"page")},{key:"Enter",run:i4}],k4=Cn.highest(ri.computeN([gt],t=>t.facet(gt).defaultKeymap?[g1]:[]));var nd=class{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}},Qo=class t{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(Ou).markerFilter;i&&(e=i(e,r));let o=e.slice().sort((d,m)=>d.from-m.from||d.to-m.to),s=new Re,l=[],a=0,u=r.doc.iter(),c=0,f=r.doc.length;for(let d=0;;){let m=d==o.length?null:o[d];if(!m&&!l.length)break;let x,v;if(l.length)x=a,v=l.reduce((y,S)=>Math.min(y,S.to),m&&m.from>x?m.from:1e8);else{if(x=m.from,x>f)break;v=m.to,l.push(m),d++}for(;d<o.length;){let y=o[d];if(y.from==x&&(y.to>y.from||y.to==x))l.push(y),d++,v=Math.min(y.to,v);else{v=Math.min(y.from,v);break}}v=Math.min(v,f);let p=!1;if(l.some(y=>y.from==x&&(y.to==v||v==f))&&(p=x==v,!p&&v-x<10)){let y=x-(c+u.value.length);y>0&&(u.next(y),c=x);for(let S=x;;){if(S>=v){p=!0;break}if(!u.lineBreak&&c+u.value.length>S)break;S=c+u.value.length,c+=u.value.length,u.next()}}let g=L4(l);if(p)s.add(x,x,I.widget({widget:new y1(g),diagnostics:l.slice()}));else{let y=l.reduce((S,k)=>k.markClass?S+" "+k.markClass:S,"");s.add(x,v,I.mark({class:"cm-lintRange cm-lintRange-"+g+y,diagnostics:l.slice(),inclusiveEnd:l.some(S=>S.to>v)}))}if(a=v,a==f)break;for(let y=0;y<l.length;y++)l[y].to<=a&&l.splice(y--,1)}let h=s.finish();return new t(h,n,ll(h))}};function ll(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!r)r=new nd(i,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new nd(r.from,o,r.diagnostic)}}),r}function w4(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(Ou).hideOn(t,n,r);if(i!=null)return i;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(s=>s.is(BT))||t.changes.touchesRange(o.from,Math.max(o.to,r)))}function C4(t,e){return t.field(An,!1)?e:e.concat(H.appendConfig.of(N4))}var BT=H.define(),x1=H.define(),zT=H.define(),An=re.define({create(){return new Qo(I.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);r=ll(n,t.selected.diagnostic,o)||ll(n,null,o)}!n.size&&i&&e.state.facet(Ou).autoPanel&&(i=null),t=new Qo(n,i,r)}for(let n of e.effects)if(n.is(BT)){let r=e.state.facet(Ou).autoPanel?n.value.length?Iu.open:null:t.panel;t=Qo.init(n.value,r,e.state)}else n.is(x1)?t=new Qo(t.diagnostics,n.value?Iu.open:null,t.selected):n.is(zT)&&(t=new Qo(t.diagnostics,t.panel,n.value));return t},provide:t=>[Uo.from(t,e=>e.panel),R.decorations.from(t,e=>e.diagnostics)]});var E4=I.mark({class:"cm-lintRange cm-lintRange-active"});function b4(t,e,n){let{diagnostics:r}=t.state.field(An),i,o=-1,s=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(a,u,{spec:c})=>{if(e>=a&&e<=u&&(a==u||(e>a||n>0)&&(e<u||n<0)))return i=c.diagnostics,o=a,s=u,!1});let l=t.state.facet(Ou).tooltipFilter;return i&&l&&(i=l(i,t.state)),i?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create(){return{dom:T4(t,i)}}}:null}function T4(t,e){return ie("ul",{class:"cm-tooltip-lint"},e.map(n=>HT(t,n,!1)))}var A4=t=>{let e=t.state.field(An,!1);(!e||!e.panel)&&t.dispatch({effects:C4(t.state,[x1.of(!0)])});let n=Vo(t,Iu.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},DT=t=>{let e=t.state.field(An,!1);return!e||!e.panel?!1:(t.dispatch({effects:x1.of(!1)}),!0)},R4=t=>{let e=t.state.field(An,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)};var UT=[{key:"Mod-Shift-m",run:A4,preventDefault:!0},{key:"F8",run:R4}];var Ou=N.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Dt(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:FT,tooltipFilter:FT,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,o)=>e(r,i,o)||n(r,i,o):e:n,autoPanel:(e,n)=>e||n})}}});function FT(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function VT(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function HT(t,e,n){var r;let i=n?VT(e.actions):[];return ie("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ie("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let l=!1,a=d=>{if(d.preventDefault(),l)return;l=!0;let m=ll(t.state.field(An).diagnostics,e);m&&o.apply(t,m.from,m.to)},{name:u}=o,c=i[s]?u.indexOf(i[s]):-1,f=c<0?u:[u.slice(0,c),ie("u",u.slice(c,c+1)),u.slice(c+1)],h=o.markClass?" "+o.markClass:"";return ie("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[s]})"`}.`},f)}),e.source&&ie("div",{class:"cm-diagnosticSource"},e.source))}var y1=class extends He{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ie("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}},rd=class{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=HT(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},Iu=class t{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)DT(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=VT(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==i.keyCode){let a=ll(this.view.state.field(An).diagnostics,o);a&&o.actions[l].apply(e,a.from,a.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=ie("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=ie("div",{class:"cm-panel-lint"},this.list,ie("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>DT(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(An).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(An),r=0,i=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:u})=>{for(let c of u.diagnostics){if(s.has(c))continue;s.add(c);let f=-1,h;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==c){f=d;break}f<0?(h=new rd(this.view,c),this.items.splice(r,0,h),i=!0):(h=this.items[f],f>r&&(this.items.splice(r,f-r),i=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new rd(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let u=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/u:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(An),r=ll(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:zT.of(r)})}static open(e){return new t(e)}};function O4(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function td(t){return O4(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var I4=R.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:td("#d11")},".cm-lintRange-warning":{backgroundImage:td("orange")},".cm-lintRange-info":{backgroundImage:td("#999")},".cm-lintRange-hint":{backgroundImage:td("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function M4(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function L4(t){let e="hint",n=1;for(let r of t){let i=M4(r.severity);i>n&&(n=i,e=r.severity)}return e}var N4=[An,R.decorations.compute([An],t=>{let{selected:e,panel:n}=t.field(An);return!e||!n||e.from==e.to?I.none:I.set([E4.range(e.from,e.to)])}),IE(b4,{hideOn:w4}),I4];var v1=function(e){e===void 0&&(e={});var{crosshairCursor:n=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(NT)),e.defaultKeymap!==!1&&(r=r.concat(iT)),e.searchKeymap!==!1&&(r=r.concat(yT)),e.historyKeymap!==!1&&(r=r.concat(Ib)),e.foldKeymap!==!1&&(r=r.concat(ob)),e.completionKeymap!==!1&&(r=r.concat(g1)),e.lintKeymap!==!1&&(r=r.concat(UT));var i=[];return e.lineNumbers!==!1&&i.push(NE()),e.highlightActiveLineGutter!==!1&&i.push(PE()),e.highlightSpecialChars!==!1&&i.push(bE()),e.history!==!1&&i.push(Tb()),e.foldGutter!==!1&&i.push(ab()),e.drawSelection!==!1&&i.push(kE()),e.dropCursor!==!1&&i.push(EE()),e.allowMultipleSelections!==!1&&i.push(ee.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(eb()),e.syntaxHighlighting!==!1&&i.push(Ih(cb,{fallback:!0})),e.bracketMatching!==!1&&i.push(pb()),e.closeBrackets!==!1&&i.push(IT()),e.autocompletion!==!1&&i.push(_T()),e.rectangularSelection!==!1&&i.push(RE()),n!==!1&&i.push(OE()),e.highlightActiveLine!==!1&&i.push(TE()),e.highlightSelectionMatches!==!1&&i.push(hT()),e.tabSize&&typeof e.tabSize=="number"&&i.push(Ko.of(" ".repeat(e.tabSize))),i.concat([ri.of(r.flat())]).filter(Boolean)};var P4="#e5c07b",WT="#e06c75",_4="#56b6c2",D4="#ffffff",id="#abb2bf",k1="#7d8799",F4="#61afef",B4="#98c379",jT="#d19a66",z4="#c678dd",U4="#21252b",GT="#2c313a",$T="#282c34",S1="#353a42",V4="#3E4451",KT="#528bff";var H4=R.theme({"&":{color:id,backgroundColor:$T},".cm-content":{caretColor:KT},".cm-cursor, .cm-dropCursor":{borderLeftColor:KT},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:V4},".cm-panels":{backgroundColor:U4,color:id},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:$T,color:k1,border:"none"},".cm-activeLineGutter":{backgroundColor:GT},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:S1},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:S1,borderBottomColor:S1},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:GT,color:id}}},{dark:!0}),W4=el.define([{tag:E.keyword,color:z4},{tag:[E.name,E.deleted,E.character,E.propertyName,E.macroName],color:WT},{tag:[E.function(E.variableName),E.labelName],color:F4},{tag:[E.color,E.constant(E.name),E.standard(E.name)],color:jT},{tag:[E.definition(E.name),E.separator],color:id},{tag:[E.typeName,E.className,E.number,E.changed,E.annotation,E.modifier,E.self,E.namespace],color:P4},{tag:[E.operator,E.operatorKeyword,E.url,E.escape,E.regexp,E.link,E.special(E.string)],color:_4},{tag:[E.meta,E.comment],color:k1},{tag:E.strong,fontWeight:"bold"},{tag:E.emphasis,fontStyle:"italic"},{tag:E.strikethrough,textDecoration:"line-through"},{tag:E.link,color:k1,textDecoration:"underline"},{tag:E.heading,fontWeight:"bold",color:WT},{tag:[E.atom,E.bool,E.special(E.variableName)],color:jT},{tag:[E.processingInstruction,E.string,E.inserted],color:B4},{tag:E.invalid,color:D4}]),qT=[H4,Ih(W4)];var YT=R.theme({"&":{backgroundColor:"#fff"}},{dark:!1});var XT=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:r=!0,readOnly:i=!1,theme:o="light",placeholder:s="",basicSetup:l=!0}=e,a=[];switch(n&&a.unshift(ri.of([oT])),l&&(typeof l=="boolean"?a.unshift(v1()):a.unshift(v1(l))),s&&a.unshift(AE(s)),o){case"light":a.push(YT);break;case"dark":a.push(qT);break;case"none":break;default:a.push(o);break}return r===!1&&a.push(R.editable.of(!1)),i&&a.push(ee.readOnly.of(!0)),[...a]};var ZT=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});var od=class{constructor(e,n){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=n,this.timeoutMS=n,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(n=>{try{n()}catch(r){console.error("TimeoutLatch callback error:",r)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}},sd=class{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}},w1=null,QT=()=>typeof window>"u"?new sd:(w1||(w1=new sd),w1);var JT=_t.define(),j4=200,G4=[];function eA(t){var{value:e,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:l=G4,autoFocus:a,theme:u="light",height:c=null,minHeight:f=null,maxHeight:h=null,width:d=null,minWidth:m=null,maxWidth:x=null,placeholder:v="",editable:p=!0,readOnly:g=!1,indentWithTab:y=!0,basicSetup:S=!0,root:k,initialState:w}=t,[C,T]=(0,an.useState)(),[O,L]=(0,an.useState)(),[U,B]=(0,an.useState)(),j=(0,an.useState)(()=>({current:null}))[0],G=(0,an.useState)(()=>({current:null}))[0],Z=R.theme({"&":{height:c,minHeight:f,maxHeight:h,width:d,minWidth:m,maxWidth:x},"& .cm-scroller":{height:"100% !important"}}),le=R.updateListener.of(ne=>{if(ne.docChanged&&typeof r=="function"&&!ne.transactions.some(nt=>nt.annotation(JT))){j.current?j.current.reset():(j.current=new od(()=>{if(G.current){var nt=G.current;G.current=null,nt()}j.current=null},j4),QT().add(j.current));var de=ne.state.doc,qe=de.toString();r(qe,ne)}i&&i(ZT(ne))}),Te=XT({theme:u,editable:p,readOnly:g,placeholder:v,indentWithTab:y,basicSetup:S}),Ue=[le,Z,...Te];return s&&typeof s=="function"&&Ue.push(R.updateListener.of(s)),Ue=Ue.concat(l),(0,an.useLayoutEffect)(()=>{if(C&&!U){var ne={doc:e,selection:n,extensions:Ue},de=w?ee.fromJSON(w.json,ne,w.fields):ee.create(ne);if(B(de),!O){var qe=new R({state:de,parent:C,root:k});L(qe),o&&o(qe,de)}}return()=>{O&&(B(void 0),L(void 0))}},[C,U]),(0,an.useEffect)(()=>{t.container&&T(t.container)},[t.container]),(0,an.useEffect)(()=>()=>{O&&(O.destroy(),L(void 0)),j.current&&(j.current.cancel(),j.current=null)},[O]),(0,an.useEffect)(()=>{a&&O&&O.focus()},[a,O]),(0,an.useEffect)(()=>{O&&O.dispatch({effects:H.reconfigure.of(Ue)})},[u,l,c,f,h,d,m,x,v,p,g,y,S,r,s]),(0,an.useEffect)(()=>{if(e!==void 0){var ne=O?O.state.doc.toString():"";if(O&&e!==ne){var de=j.current&&!j.current.isDone,qe=()=>{O&&e!==O.state.doc.toString()&&O.dispatch({changes:{from:0,to:O.state.doc.toString().length,insert:e||""},annotations:[JT.of(!0)]})};de?G.current=qe:qe()}}},[e,O]),{state:U,setState:B,view:O,setView:L,container:C,setContainer:T}}var iA=hr(al(),1),Q4=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],oA=(0,Ki.forwardRef)((t,e)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:u,autoFocus:c,theme:f="light",height:h,minHeight:d,maxHeight:m,width:x,minWidth:v,maxWidth:p,basicSetup:g,placeholder:y,indentWithTab:S,editable:k,readOnly:w,root:C,initialState:T}=t,O=iw(t,Q4),L=(0,Ki.useRef)(null),{state:U,view:B,container:j,setContainer:G}=eA({root:C,value:r,autoFocus:c,theme:f,height:h,minHeight:d,maxHeight:m,width:x,minWidth:v,maxWidth:p,basicSetup:g,placeholder:y,indentWithTab:S,editable:k,readOnly:w,selection:i,onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:u,extensions:o,initialState:T});(0,Ki.useImperativeHandle)(e,()=>({editor:L.current,state:U,view:B}),[L,j,U,B]);var Z=(0,Ki.useCallback)(Te=>{L.current=Te,G(Te)},[G]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var le=typeof f=="string"?"cm-theme-"+f:"cm-theme";return(0,iA.jsx)("div",Tf({ref:Z,className:""+le+(n?" "+n:"")},O))});oA.displayName="CodeMirror";var sA=oA;var J4=typeof window=="object"&&window&&window.Object===Object&&window,ad=J4;var e6=typeof self=="object"&&self&&self.Object===Object&&self,t6=ad||e6||Function("return this")(),Qe=t6;var n6=Qe.Symbol,yt=n6;var lA=Object.prototype,r6=lA.hasOwnProperty,i6=lA.toString,Mu=yt?yt.toStringTag:void 0;function o6(t){var e=r6.call(t,Mu),n=t[Mu];try{t[Mu]=void 0;var r=!0}catch{}var i=i6.call(t);return r&&(e?t[Mu]=n:delete t[Mu]),i}var aA=o6;var s6=Object.prototype,l6=s6.toString;function a6(t){return l6.call(t)}var uA=a6;var u6="[object Null]",c6="[object Undefined]",cA=yt?yt.toStringTag:void 0;function f6(t){return t==null?t===void 0?c6:u6:cA&&cA in Object(t)?aA(t):uA(t)}var Xt=f6;function h6(t){return t!=null&&typeof t=="object"}var We=h6;var d6="[object Symbol]";function p6(t){return typeof t=="symbol"||We(t)&&Xt(t)==d6}var qi=p6;function m6(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Or=m6;var g6=Array.isArray,V=g6;var y6=1/0,fA=yt?yt.prototype:void 0,hA=fA?fA.toString:void 0;function dA(t){if(typeof t=="string")return t;if(V(t))return Or(t,dA)+"";if(qi(t))return hA?hA.call(t):"";var e=t+"";return e=="0"&&1/t==-y6?"-0":e}var pA=dA;var x6=/\s/;function v6(t){for(var e=t.length;e--&&x6.test(t.charAt(e)););return e}var mA=v6;var S6=/^\s+/;function k6(t){return t&&t.slice(0,mA(t)+1).replace(S6,"")}var gA=k6;function w6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Pe=w6;var yA=NaN,C6=/^[-+]0x[0-9a-f]+$/i,E6=/^0b[01]+$/i,b6=/^0o[0-7]+$/i,T6=parseInt;function A6(t){if(typeof t=="number")return t;if(qi(t))return yA;if(Pe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Pe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=gA(t);var n=E6.test(t);return n||b6.test(t)?T6(t.slice(2),n?2:8):C6.test(t)?yA:+t}var xA=A6;var vA=1/0,R6=17976931348623157e292;function O6(t){if(!t)return t===0?t:0;if(t=xA(t),t===vA||t===-vA){var e=t<0?-1:1;return e*R6}return t===t?t:0}var SA=O6;function I6(t){var e=SA(t),n=e%1;return e===e?n?e-n:e:0}var Ir=I6;function M6(t){return t}var jn=M6;var L6="[object AsyncFunction]",N6="[object Function]",P6="[object GeneratorFunction]",_6="[object Proxy]";function D6(t){if(!Pe(t))return!1;var e=Xt(t);return e==N6||e==P6||e==L6||e==_6}var Zt=D6;var F6=Qe["__core-js_shared__"],ud=F6;var kA=function(){var t=/[^.]+$/.exec(ud&&ud.keys&&ud.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function B6(t){return!!kA&&kA in t}var wA=B6;var z6=Function.prototype,U6=z6.toString;function V6(t){if(t!=null){try{return U6.call(t)}catch{}try{return t+""}catch{}}return""}var oi=V6;var H6=/[\\^$.*+?()[\]{}|]/g,W6=/^\[object .+?Constructor\]$/,j6=Function.prototype,G6=Object.prototype,$6=j6.toString,K6=G6.hasOwnProperty,q6=RegExp("^"+$6.call(K6).replace(H6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Y6(t){if(!Pe(t)||wA(t))return!1;var e=Zt(t)?q6:W6;return e.test(oi(t))}var CA=Y6;function X6(t,e){return t?.[e]}var EA=X6;function Z6(t,e){var n=EA(t,e);return CA(n)?n:void 0}var un=Z6;var Q6=un(Qe,"WeakMap"),cd=Q6;var bA=Object.create,J6=function(){function t(){}return function(e){if(!Pe(e))return{};if(bA)return bA(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),TA=J6;function e8(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var AA=e8;function t8(){}var _e=t8;function n8(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var RA=n8;var r8=800,i8=16,o8=Date.now;function s8(t){var e=0,n=0;return function(){var r=o8(),i=i8-(r-n);if(n=r,i>0){if(++e>=r8)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var OA=s8;function l8(t){return function(){return t}}var IA=l8;var a8=function(){try{var t=un(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ul=a8;var u8=ul?function(t,e){return ul(t,"toString",{configurable:!0,enumerable:!1,value:IA(e),writable:!0})}:jn,MA=u8;var c8=OA(MA),LA=c8;function f8(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var fd=f8;function h8(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var hd=h8;function d8(t){return t!==t}var NA=d8;function p8(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var PA=p8;function m8(t,e,n){return e===e?PA(t,e,n):hd(t,NA,n)}var cl=m8;function g8(t,e){var n=t==null?0:t.length;return!!n&&cl(t,e,0)>-1}var dd=g8;var y8=9007199254740991,x8=/^(?:0|[1-9]\d*)$/;function v8(t,e){var n=typeof t;return e=e??y8,!!e&&(n=="number"||n!="symbol"&&x8.test(t))&&t>-1&&t%1==0&&t<e}var Yi=v8;function S8(t,e,n){e=="__proto__"&&ul?ul(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var fl=S8;function k8(t,e){return t===e||t!==t&&e!==e}var Mr=k8;var w8=Object.prototype,C8=w8.hasOwnProperty;function E8(t,e,n){var r=t[e];(!(C8.call(t,e)&&Mr(r,n))||n===void 0&&!(e in t))&&fl(t,e,n)}var Xi=E8;function b8(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],a=r?r(n[l],t[l],l,n,t):void 0;a===void 0&&(a=t[l]),i?fl(n,l,a):Xi(n,l,a)}return n}var Lr=b8;var _A=Math.max;function T8(t,e,n){return e=_A(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=_A(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(s),AA(t,this,l)}}var DA=T8;function A8(t,e){return LA(DA(t,e,jn),t+"")}var hl=A8;var R8=9007199254740991;function O8(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=R8}var dl=O8;function I8(t){return t!=null&&dl(t.length)&&!Zt(t)}var Je=I8;function M8(t,e,n){if(!Pe(n))return!1;var r=typeof e;return(r=="number"?Je(n)&&Yi(e,n.length):r=="string"&&e in n)?Mr(n[e],t):!1}var Zi=M8;function L8(t){return hl(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&Zi(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,o)}return e})}var FA=L8;var N8=Object.prototype;function P8(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||N8;return t===n}var Nr=P8;function _8(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var BA=_8;var D8="[object Arguments]";function F8(t){return We(t)&&Xt(t)==D8}var C1=F8;var zA=Object.prototype,B8=zA.hasOwnProperty,z8=zA.propertyIsEnumerable,U8=C1(function(){return arguments}())?C1:function(t){return We(t)&&B8.call(t,"callee")&&!z8.call(t,"callee")},Qi=U8;function V8(){return!1}var UA=V8;var WA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,VA=WA&&typeof module=="object"&&module&&!module.nodeType&&module,H8=VA&&VA.exports===WA,HA=H8?Qe.Buffer:void 0,W8=HA?HA.isBuffer:void 0,j8=W8||UA,si=j8;var G8="[object Arguments]",$8="[object Array]",K8="[object Boolean]",q8="[object Date]",Y8="[object Error]",X8="[object Function]",Z8="[object Map]",Q8="[object Number]",J8="[object Object]",e5="[object RegExp]",t5="[object Set]",n5="[object String]",r5="[object WeakMap]",i5="[object ArrayBuffer]",o5="[object DataView]",s5="[object Float32Array]",l5="[object Float64Array]",a5="[object Int8Array]",u5="[object Int16Array]",c5="[object Int32Array]",f5="[object Uint8Array]",h5="[object Uint8ClampedArray]",d5="[object Uint16Array]",p5="[object Uint32Array]",Ce={};Ce[s5]=Ce[l5]=Ce[a5]=Ce[u5]=Ce[c5]=Ce[f5]=Ce[h5]=Ce[d5]=Ce[p5]=!0;Ce[G8]=Ce[$8]=Ce[i5]=Ce[K8]=Ce[o5]=Ce[q8]=Ce[Y8]=Ce[X8]=Ce[Z8]=Ce[Q8]=Ce[J8]=Ce[e5]=Ce[t5]=Ce[n5]=Ce[r5]=!1;function m5(t){return We(t)&&dl(t.length)&&!!Ce[Xt(t)]}var jA=m5;function g5(t){return function(e){return t(e)}}var Pr=g5;var GA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lu=GA&&typeof module=="object"&&module&&!module.nodeType&&module,y5=Lu&&Lu.exports===GA,E1=y5&&ad.process,x5=function(){try{var t=Lu&&Lu.require&&Lu.require("util").types;return t||E1&&E1.binding&&E1.binding("util")}catch{}}(),Gn=x5;var $A=Gn&&Gn.isTypedArray,v5=$A?Pr($A):jA,pl=v5;var S5=Object.prototype,k5=S5.hasOwnProperty;function w5(t,e){var n=V(t),r=!n&&Qi(t),i=!n&&!r&&si(t),o=!n&&!r&&!i&&pl(t),s=n||r||i||o,l=s?BA(t.length,String):[],a=l.length;for(var u in t)(e||k5.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Yi(u,a)))&&l.push(u);return l}var pd=w5;function C5(t,e){return function(n){return t(e(n))}}var md=C5;var E5=md(Object.keys,Object),KA=E5;var b5=Object.prototype,T5=b5.hasOwnProperty;function A5(t){if(!Nr(t))return KA(t);var e=[];for(var n in Object(t))T5.call(t,n)&&n!="constructor"&&e.push(n);return e}var gd=A5;function R5(t){return Je(t)?pd(t):gd(t)}var ge=R5;var O5=Object.prototype,I5=O5.hasOwnProperty,M5=FA(function(t,e){if(Nr(e)||Je(e)){Lr(e,ge(e),t);return}for(var n in e)I5.call(e,n)&&Xi(t,n,e[n])}),At=M5;function L5(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var qA=L5;var N5=Object.prototype,P5=N5.hasOwnProperty;function _5(t){if(!Pe(t))return qA(t);var e=Nr(t),n=[];for(var r in t)r=="constructor"&&(e||!P5.call(t,r))||n.push(r);return n}var YA=_5;function D5(t){return Je(t)?pd(t,!0):YA(t)}var Ji=D5;var F5=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B5=/^\w*$/;function z5(t,e){if(V(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||qi(t)?!0:B5.test(t)||!F5.test(t)||e!=null&&t in Object(e)}var ml=z5;var U5=un(Object,"create"),li=U5;function V5(){this.__data__=li?li(null):{},this.size=0}var XA=V5;function H5(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ZA=H5;var W5="__lodash_hash_undefined__",j5=Object.prototype,G5=j5.hasOwnProperty;function $5(t){var e=this.__data__;if(li){var n=e[t];return n===W5?void 0:n}return G5.call(e,t)?e[t]:void 0}var QA=$5;var K5=Object.prototype,q5=K5.hasOwnProperty;function Y5(t){var e=this.__data__;return li?e[t]!==void 0:q5.call(e,t)}var JA=Y5;var X5="__lodash_hash_undefined__";function Z5(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=li&&e===void 0?X5:e,this}var e2=Z5;function gl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gl.prototype.clear=XA;gl.prototype.delete=ZA;gl.prototype.get=QA;gl.prototype.has=JA;gl.prototype.set=e2;var b1=gl;function Q5(){this.__data__=[],this.size=0}var t2=Q5;function J5(t,e){for(var n=t.length;n--;)if(Mr(t[n][0],e))return n;return-1}var eo=J5;var eF=Array.prototype,tF=eF.splice;function nF(t){var e=this.__data__,n=eo(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():tF.call(e,n,1),--this.size,!0}var n2=nF;function rF(t){var e=this.__data__,n=eo(e,t);return n<0?void 0:e[n][1]}var r2=rF;function iF(t){return eo(this.__data__,t)>-1}var i2=iF;function oF(t,e){var n=this.__data__,r=eo(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var o2=oF;function yl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}yl.prototype.clear=t2;yl.prototype.delete=n2;yl.prototype.get=r2;yl.prototype.has=i2;yl.prototype.set=o2;var to=yl;var sF=un(Qe,"Map"),no=sF;function lF(){this.size=0,this.__data__={hash:new b1,map:new(no||to),string:new b1}}var s2=lF;function aF(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var l2=aF;function uF(t,e){var n=t.__data__;return l2(e)?n[typeof e=="string"?"string":"hash"]:n.map}var ro=uF;function cF(t){var e=ro(this,t).delete(t);return this.size-=e?1:0,e}var a2=cF;function fF(t){return ro(this,t).get(t)}var u2=fF;function hF(t){return ro(this,t).has(t)}var c2=hF;function dF(t,e){var n=ro(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var f2=dF;function xl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xl.prototype.clear=s2;xl.prototype.delete=a2;xl.prototype.get=u2;xl.prototype.has=c2;xl.prototype.set=f2;var Jo=xl;var pF="Expected a function";function T1(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(pF);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(T1.Cache||Jo),n}T1.Cache=Jo;var h2=T1;var mF=500;function gF(t){var e=h2(t,function(r){return n.size===mF&&n.clear(),r}),n=e.cache;return e}var d2=gF;var yF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xF=/\\(\\)?/g,vF=d2(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(yF,function(n,r,i,o){e.push(i?o.replace(xF,"$1"):r||n)}),e}),p2=vF;function SF(t){return t==null?"":pA(t)}var m2=SF;function kF(t,e){return V(t)?t:ml(t,e)?[t]:p2(m2(t))}var io=kF;var wF=1/0;function CF(t){if(typeof t=="string"||qi(t))return t;var e=t+"";return e=="0"&&1/t==-wF?"-0":e}var _r=CF;function EF(t,e){e=io(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[_r(e[n++])];return n&&n==r?t:void 0}var vl=EF;function bF(t,e,n){var r=t==null?void 0:vl(t,e);return r===void 0?n:r}var g2=bF;function TF(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Sl=TF;var y2=yt?yt.isConcatSpreadable:void 0;function AF(t){return V(t)||Qi(t)||!!(y2&&t&&t[y2])}var x2=AF;function v2(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=x2),i||(i=[]);++o<s;){var l=t[o];e>0&&n(l)?e>1?v2(l,e-1,n,r,i):Sl(i,l):r||(i[i.length]=l)}return i}var kl=v2;function RF(t){var e=t==null?0:t.length;return e?kl(t,1):[]}var lt=RF;var OF=md(Object.getPrototypeOf,Object),yd=OF;function IF(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var xd=IF;function MF(t,e,n,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}var S2=MF;function LF(){this.__data__=new to,this.size=0}var k2=LF;function NF(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var w2=NF;function PF(t){return this.__data__.get(t)}var C2=PF;function _F(t){return this.__data__.has(t)}var E2=_F;var DF=200;function FF(t,e){var n=this.__data__;if(n instanceof to){var r=n.__data__;if(!no||r.length<DF-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jo(r)}return n.set(t,e),this.size=n.size,this}var b2=FF;function wl(t){var e=this.__data__=new to(t);this.size=e.size}wl.prototype.clear=k2;wl.prototype.delete=w2;wl.prototype.get=C2;wl.prototype.has=E2;wl.prototype.set=b2;var oo=wl;function BF(t,e){return t&&Lr(e,ge(e),t)}var T2=BF;function zF(t,e){return t&&Lr(e,Ji(e),t)}var A2=zF;var M2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,R2=M2&&typeof module=="object"&&module&&!module.nodeType&&module,UF=R2&&R2.exports===M2,O2=UF?Qe.Buffer:void 0,I2=O2?O2.allocUnsafe:void 0;function VF(t,e){if(e)return t.slice();var n=t.length,r=I2?I2(n):new t.constructor(n);return t.copy(r),r}var L2=VF;function HF(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var Cl=HF;function WF(){return[]}var vd=WF;var jF=Object.prototype,GF=jF.propertyIsEnumerable,N2=Object.getOwnPropertySymbols,$F=N2?function(t){return t==null?[]:(t=Object(t),Cl(N2(t),function(e){return GF.call(t,e)}))}:vd,El=$F;function KF(t,e){return Lr(t,El(t),e)}var P2=KF;var qF=Object.getOwnPropertySymbols,YF=qF?function(t){for(var e=[];t;)Sl(e,El(t)),t=yd(t);return e}:vd,Sd=YF;function XF(t,e){return Lr(t,Sd(t),e)}var _2=XF;function ZF(t,e,n){var r=e(t);return V(t)?r:Sl(r,n(t))}var kd=ZF;function QF(t){return kd(t,ge,El)}var Nu=QF;function JF(t){return kd(t,Ji,Sd)}var wd=JF;var eB=un(Qe,"DataView"),Cd=eB;var tB=un(Qe,"Promise"),Ed=tB;var nB=un(Qe,"Set"),so=nB;var D2="[object Map]",rB="[object Object]",F2="[object Promise]",B2="[object Set]",z2="[object WeakMap]",U2="[object DataView]",iB=oi(Cd),oB=oi(no),sB=oi(Ed),lB=oi(so),aB=oi(cd),es=Xt;(Cd&&es(new Cd(new ArrayBuffer(1)))!=U2||no&&es(new no)!=D2||Ed&&es(Ed.resolve())!=F2||so&&es(new so)!=B2||cd&&es(new cd)!=z2)&&(es=function(t){var e=Xt(t),n=e==rB?t.constructor:void 0,r=n?oi(n):"";if(r)switch(r){case iB:return U2;case oB:return D2;case sB:return F2;case lB:return B2;case aB:return z2}return e});var ar=es;var uB=Object.prototype,cB=uB.hasOwnProperty;function fB(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&cB.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var V2=fB;var hB=Qe.Uint8Array,bl=hB;function dB(t){var e=new t.constructor(t.byteLength);return new bl(e).set(new bl(t)),e}var Tl=dB;function pB(t,e){var n=e?Tl(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var H2=pB;var mB=/\w*$/;function gB(t){var e=new t.constructor(t.source,mB.exec(t));return e.lastIndex=t.lastIndex,e}var W2=gB;var j2=yt?yt.prototype:void 0,G2=j2?j2.valueOf:void 0;function yB(t){return G2?Object(G2.call(t)):{}}var $2=yB;function xB(t,e){var n=e?Tl(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var K2=xB;var vB="[object Boolean]",SB="[object Date]",kB="[object Map]",wB="[object Number]",CB="[object RegExp]",EB="[object Set]",bB="[object String]",TB="[object Symbol]",AB="[object ArrayBuffer]",RB="[object DataView]",OB="[object Float32Array]",IB="[object Float64Array]",MB="[object Int8Array]",LB="[object Int16Array]",NB="[object Int32Array]",PB="[object Uint8Array]",_B="[object Uint8ClampedArray]",DB="[object Uint16Array]",FB="[object Uint32Array]";function BB(t,e,n){var r=t.constructor;switch(e){case AB:return Tl(t);case vB:case SB:return new r(+t);case RB:return H2(t,n);case OB:case IB:case MB:case LB:case NB:case PB:case _B:case DB:case FB:return K2(t,n);case kB:return new r;case wB:case bB:return new r(t);case CB:return W2(t);case EB:return new r;case TB:return $2(t)}}var q2=BB;function zB(t){return typeof t.constructor=="function"&&!Nr(t)?TA(yd(t)):{}}var Y2=zB;var UB="[object Map]";function VB(t){return We(t)&&ar(t)==UB}var X2=VB;var Z2=Gn&&Gn.isMap,HB=Z2?Pr(Z2):X2,Q2=HB;var WB="[object Set]";function jB(t){return We(t)&&ar(t)==WB}var J2=jB;var eR=Gn&&Gn.isSet,GB=eR?Pr(eR):J2,tR=GB;var $B=1,KB=2,qB=4,nR="[object Arguments]",YB="[object Array]",XB="[object Boolean]",ZB="[object Date]",QB="[object Error]",rR="[object Function]",JB="[object GeneratorFunction]",e9="[object Map]",t9="[object Number]",iR="[object Object]",n9="[object RegExp]",r9="[object Set]",i9="[object String]",o9="[object Symbol]",s9="[object WeakMap]",l9="[object ArrayBuffer]",a9="[object DataView]",u9="[object Float32Array]",c9="[object Float64Array]",f9="[object Int8Array]",h9="[object Int16Array]",d9="[object Int32Array]",p9="[object Uint8Array]",m9="[object Uint8ClampedArray]",g9="[object Uint16Array]",y9="[object Uint32Array]",ye={};ye[nR]=ye[YB]=ye[l9]=ye[a9]=ye[XB]=ye[ZB]=ye[u9]=ye[c9]=ye[f9]=ye[h9]=ye[d9]=ye[e9]=ye[t9]=ye[iR]=ye[n9]=ye[r9]=ye[i9]=ye[o9]=ye[p9]=ye[m9]=ye[g9]=ye[y9]=!0;ye[QB]=ye[rR]=ye[s9]=!1;function bd(t,e,n,r,i,o){var s,l=e&$B,a=e&KB,u=e&qB;if(n&&(s=i?n(t,r,i,o):n(t)),s!==void 0)return s;if(!Pe(t))return t;var c=V(t);if(c){if(s=V2(t),!l)return RA(t,s)}else{var f=ar(t),h=f==rR||f==JB;if(si(t))return L2(t,l);if(f==iR||f==nR||h&&!i){if(s=a||h?{}:Y2(t),!l)return a?_2(t,A2(s,t)):P2(t,T2(s,t))}else{if(!ye[f])return i?t:{};s=q2(t,f,l)}}o||(o=new oo);var d=o.get(t);if(d)return d;o.set(t,s),tR(t)?t.forEach(function(v){s.add(bd(v,e,n,v,t,o))}):Q2(t)&&t.forEach(function(v,p){s.set(p,bd(v,e,n,p,t,o))});var m=u?a?wd:Nu:a?Ji:ge,x=c?void 0:m(t);return fd(x||t,function(v,p){x&&(p=v,v=t[p]),Xi(s,p,bd(v,e,n,p,t,o))}),s}var oR=bd;var x9=4;function v9(t){return oR(t,x9)}var Ee=v9;function S9(t){for(var e=-1,n=t==null?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}var Dr=S9;var k9="__lodash_hash_undefined__";function w9(t){return this.__data__.set(t,k9),this}var sR=w9;function C9(t){return this.__data__.has(t)}var lR=C9;function Td(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Jo;++e<n;)this.add(t[e])}Td.prototype.add=Td.prototype.push=sR;Td.prototype.has=lR;var Al=Td;function E9(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ad=E9;function b9(t,e){return t.has(e)}var Rl=b9;var T9=1,A9=2;function R9(t,e,n,r,i,o){var s=n&T9,l=t.length,a=e.length;if(l!=a&&!(s&&a>l))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=n&A9?new Al:void 0;for(o.set(t,e),o.set(e,t);++f<l;){var m=t[f],x=e[f];if(r)var v=s?r(x,m,f,e,t,o):r(m,x,f,t,e,o);if(v!==void 0){if(v)continue;h=!1;break}if(d){if(!Ad(e,function(p,g){if(!Rl(d,g)&&(m===p||i(m,p,n,r,o)))return d.push(g)})){h=!1;break}}else if(!(m===x||i(m,x,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var Rd=R9;function O9(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var aR=O9;function I9(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Ol=I9;var M9=1,L9=2,N9="[object Boolean]",P9="[object Date]",_9="[object Error]",D9="[object Map]",F9="[object Number]",B9="[object RegExp]",z9="[object Set]",U9="[object String]",V9="[object Symbol]",H9="[object ArrayBuffer]",W9="[object DataView]",uR=yt?yt.prototype:void 0,A1=uR?uR.valueOf:void 0;function j9(t,e,n,r,i,o,s){switch(n){case W9:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case H9:return!(t.byteLength!=e.byteLength||!o(new bl(t),new bl(e)));case N9:case P9:case F9:return Mr(+t,+e);case _9:return t.name==e.name&&t.message==e.message;case B9:case U9:return t==e+"";case D9:var l=aR;case z9:var a=r&M9;if(l||(l=Ol),t.size!=e.size&&!a)return!1;var u=s.get(t);if(u)return u==e;r|=L9,s.set(t,e);var c=Rd(l(t),l(e),r,i,o,s);return s.delete(t),c;case V9:if(A1)return A1.call(t)==A1.call(e)}return!1}var cR=j9;var G9=1,$9=Object.prototype,K9=$9.hasOwnProperty;function q9(t,e,n,r,i,o){var s=n&G9,l=Nu(t),a=l.length,u=Nu(e),c=u.length;if(a!=c&&!s)return!1;for(var f=a;f--;){var h=l[f];if(!(s?h in e:K9.call(e,h)))return!1}var d=o.get(t),m=o.get(e);if(d&&m)return d==e&&m==t;var x=!0;o.set(t,e),o.set(e,t);for(var v=s;++f<a;){h=l[f];var p=t[h],g=e[h];if(r)var y=s?r(g,p,h,e,t,o):r(p,g,h,t,e,o);if(!(y===void 0?p===g||i(p,g,n,r,o):y)){x=!1;break}v||(v=h=="constructor")}if(x&&!v){var S=t.constructor,k=e.constructor;S!=k&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(x=!1)}return o.delete(t),o.delete(e),x}var fR=q9;var Y9=1,hR="[object Arguments]",dR="[object Array]",Od="[object Object]",X9=Object.prototype,pR=X9.hasOwnProperty;function Z9(t,e,n,r,i,o){var s=V(t),l=V(e),a=s?dR:ar(t),u=l?dR:ar(e);a=a==hR?Od:a,u=u==hR?Od:u;var c=a==Od,f=u==Od,h=a==u;if(h&&si(t)){if(!si(e))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new oo),s||pl(t)?Rd(t,e,n,r,i,o):cR(t,e,a,n,r,i,o);if(!(n&Y9)){var d=c&&pR.call(t,"__wrapped__"),m=f&&pR.call(e,"__wrapped__");if(d||m){var x=d?t.value():t,v=m?e.value():e;return o||(o=new oo),i(x,v,n,r,o)}}return h?(o||(o=new oo),fR(t,e,n,r,i,o)):!1}var mR=Z9;function gR(t,e,n,r,i){return t===e?!0:t==null||e==null||!We(t)&&!We(e)?t!==t&&e!==e:mR(t,e,n,r,gR,i)}var Id=gR;var Q9=1,J9=2;function e7(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var l=n[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=n[i];var a=l[0],u=t[a],c=l[1];if(s&&l[2]){if(u===void 0&&!(a in t))return!1}else{var f=new oo;if(r)var h=r(u,c,a,t,e,f);if(!(h===void 0?Id(c,u,Q9|J9,r,f):h))return!1}}return!0}var yR=e7;function t7(t){return t===t&&!Pe(t)}var Md=t7;function n7(t){for(var e=ge(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Md(i)]}return e}var xR=n7;function r7(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Ld=r7;function i7(t){var e=xR(t);return e.length==1&&e[0][2]?Ld(e[0][0],e[0][1]):function(n){return n===t||yR(n,t,e)}}var vR=i7;function o7(t,e){return t!=null&&e in Object(t)}var SR=o7;function s7(t,e,n){e=io(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=_r(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&dl(i)&&Yi(s,i)&&(V(t)||Qi(t)))}var Nd=s7;function l7(t,e){return t!=null&&Nd(t,e,SR)}var kR=l7;var a7=1,u7=2;function c7(t,e){return ml(t)&&Md(e)?Ld(_r(t),e):function(n){var r=g2(n,t);return r===void 0&&r===e?kR(n,t):Id(e,r,a7|u7)}}var wR=c7;function f7(t){return function(e){return e?.[t]}}var CR=f7;function h7(t){return function(e){return vl(e,t)}}var ER=h7;function d7(t){return ml(t)?CR(_r(t)):ER(t)}var bR=d7;function p7(t){return typeof t=="function"?t:t==null?jn:typeof t=="object"?V(t)?wR(t[0],t[1]):vR(t):bR(t)}var et=p7;function m7(t,e,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}var TR=m7;function g7(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),l=s.length;l--;){var a=s[t?l:++i];if(n(o[a],a,o)===!1)break}return e}}var AR=g7;var y7=AR(),RR=y7;function x7(t,e){return t&&RR(t,e,ge)}var OR=x7;function v7(t,e){return function(n,r){if(n==null)return n;if(!Je(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var IR=v7;var S7=IR(OR),cn=S7;function k7(t,e,n,r){return cn(t,function(i,o,s){e(r,i,n(i),s)}),r}var MR=k7;function w7(t,e){return function(n,r){var i=V(n)?TR:MR,o=e?e():{};return i(n,t,et(r,2),o)}}var LR=w7;var NR=Object.prototype,C7=NR.hasOwnProperty,E7=hl(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Zi(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=Ji(o),l=-1,a=s.length;++l<a;){var u=s[l],c=t[u];(c===void 0||Mr(c,NR[u])&&!C7.call(t,u))&&(t[u]=o[u])}return t}),Il=E7;function b7(t){return We(t)&&Je(t)}var R1=b7;function T7(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Pd=T7;var A7=200;function R7(t,e,n,r){var i=-1,o=dd,s=!0,l=t.length,a=[],u=e.length;if(!l)return a;n&&(e=Or(e,Pr(n))),r?(o=Pd,s=!1):e.length>=A7&&(o=Rl,s=!1,e=new Al(e));e:for(;++i<l;){var c=t[i],f=n==null?c:n(c);if(c=r||c!==0?c:0,s&&f===f){for(var h=u;h--;)if(e[h]===f)continue e;a.push(c)}else o(e,f,r)||a.push(c)}return a}var PR=R7;var O7=hl(function(t,e){return R1(t)?PR(t,kl(e,1,R1,!0)):[]}),lo=O7;function I7(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Fr=I7;function M7(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:Ir(e),xd(t,e<0?0:e,r)):[]}var je=M7;function L7(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:Ir(e),e=r-e,xd(t,0,e<0?0:e)):[]}var ai=L7;function N7(t){return typeof t=="function"?t:jn}var _R=N7;function P7(t,e){var n=V(t)?fd:cn;return n(t,_R(e))}var F=P7;function _7(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var DR=_7;function D7(t,e){var n=!0;return cn(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var FR=D7;function F7(t,e,n){var r=V(t)?DR:FR;return n&&Zi(t,e,n)&&(e=void 0),r(t,et(e,3))}var zt=F7;function B7(t,e){var n=[];return cn(t,function(r,i,o){e(r,i,o)&&n.push(r)}),n}var _d=B7;function z7(t,e){var n=V(t)?Cl:_d;return n(t,et(e,3))}var Ut=z7;function U7(t){return function(e,n,r){var i=Object(e);if(!Je(e)){var o=et(n,3);e=ge(e),n=function(l){return o(i[l],l,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var BR=U7;var V7=Math.max;function H7(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Ir(n);return i<0&&(i=V7(r+i,0)),hd(t,et(e,3),i)}var zR=H7;var W7=BR(zR),Br=W7;function j7(t){return t&&t.length?t[0]:void 0}var xt=j7;function G7(t,e){var n=-1,r=Je(t)?Array(t.length):[];return cn(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var UR=G7;function $7(t,e){var n=V(t)?Or:UR;return n(t,et(e,3))}var _=$7;function K7(t,e){return kl(_(t,e),1)}var Qt=K7;var q7=Object.prototype,Y7=q7.hasOwnProperty,X7=LR(function(t,e,n){Y7.call(t,n)?t[n].push(e):fl(t,n,[e])}),O1=X7;var Z7=Object.prototype,Q7=Z7.hasOwnProperty;function J7(t,e){return t!=null&&Q7.call(t,e)}var VR=J7;function ez(t,e){return t!=null&&Nd(t,e,VR)}var z=ez;var tz="[object String]";function nz(t){return typeof t=="string"||!V(t)&&We(t)&&Xt(t)==tz}var at=nz;function rz(t,e){return Or(e,function(n){return t[n]})}var HR=rz;function iz(t){return t==null?[]:HR(t,ge(t))}var ce=iz;var oz=Math.max;function sz(t,e,n,r){t=Je(t)?t:ce(t),n=n&&!r?Ir(n):0;var i=t.length;return n<0&&(n=oz(i+n,0)),at(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&cl(t,e,n)>-1}var Oe=sz;var lz=Math.max;function az(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Ir(n);return i<0&&(i=lz(r+i,0)),cl(t,e,i)}var Dd=az;var uz="[object Map]",cz="[object Set]",fz=Object.prototype,hz=fz.hasOwnProperty;function dz(t){if(t==null)return!0;if(Je(t)&&(V(t)||typeof t=="string"||typeof t.splice=="function"||si(t)||pl(t)||Qi(t)))return!t.length;var e=ar(t);if(e==uz||e==cz)return!t.size;if(Nr(t))return!gd(t).length;for(var n in t)if(hz.call(t,n))return!1;return!0}var K=dz;var pz="[object RegExp]";function mz(t){return We(t)&&Xt(t)==pz}var WR=mz;var jR=Gn&&Gn.isRegExp,gz=jR?Pr(jR):WR,$n=gz;function yz(t){return t===void 0}var Vt=yz;var xz="Expected a function";function vz(t){if(typeof t!="function")throw new TypeError(xz);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var GR=vz;function Sz(t,e,n,r){if(!Pe(t))return t;e=io(e,t);for(var i=-1,o=e.length,s=o-1,l=t;l!=null&&++i<o;){var a=_r(e[i]),u=n;if(a==="__proto__"||a==="constructor"||a==="prototype")return t;if(i!=s){var c=l[a];u=r?r(c,a,l):void 0,u===void 0&&(u=Pe(c)?c:Yi(e[i+1])?[]:{})}Xi(l,a,u),l=l[a]}return t}var $R=Sz;function kz(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],l=vl(t,s);n(l,s)&&$R(o,io(s,t),l)}return o}var KR=kz;function wz(t,e){if(t==null)return{};var n=Or(wd(t),function(r){return[r]});return e=et(e),KR(t,n,function(r,i){return e(r,i[0])})}var fn=wz;function Cz(t,e,n,r,i){return i(t,function(o,s,l){n=r?(r=!1,o):e(n,o,s,l)}),n}var qR=Cz;function Ez(t,e,n){var r=V(t)?S2:qR,i=arguments.length<3;return r(t,et(e,4),n,i,cn)}var tt=Ez;function bz(t,e){var n=V(t)?Cl:_d;return n(t,GR(et(e,3)))}var ao=bz;function Tz(t,e){var n;return cn(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var YR=Tz;function Az(t,e,n){var r=V(t)?Ad:YR;return n&&Zi(t,e,n)&&(e=void 0),r(t,et(e,3))}var Pu=Az;var Rz=1/0,Oz=so&&1/Ol(new so([,-0]))[1]==Rz?function(t){return new so(t)}:_e,XR=Oz;var Iz=200;function Mz(t,e,n){var r=-1,i=dd,o=t.length,s=!0,l=[],a=l;if(n)s=!1,i=Pd;else if(o>=Iz){var u=e?null:XR(t);if(u)return Ol(u);s=!1,i=Rl,a=new Al}else a=e?[]:l;e:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,s&&f===f){for(var h=a.length;h--;)if(a[h]===f)continue e;e&&a.push(f),l.push(c)}else i(a,f,n)||(a!==l&&a.push(f),l.push(c))}return l}var ZR=Mz;function Lz(t){return t&&t.length?ZR(t):[]}var Ml=Lz;function Ll(t){console&&console.error&&console.error(`Error: ${t}`)}function _u(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Du(t){let e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function Fu(t){function e(){}e.prototype=t;let n=new e;function r(){return typeof n.bar}return r(),r(),t;(0,eval)(t)}function Nz(t){return Pz(t)?t.LABEL:t.name}function Pz(t){return at(t.LABEL)&&t.LABEL!==""}var Rn=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),F(this.definition,n=>{n.accept(e)})}},xe=class extends Rn{constructor(e){super([]),this.idx=1,At(this,fn(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},Jt=class extends Rn{constructor(e){super(e.definition),this.orgText="",At(this,fn(e,n=>n!==void 0))}},ve=class extends Rn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,At(this,fn(e,n=>n!==void 0))}},be=class extends Rn{constructor(e){super(e.definition),this.idx=1,At(this,fn(e,n=>n!==void 0))}},Ge=class extends Rn{constructor(e){super(e.definition),this.idx=1,At(this,fn(e,n=>n!==void 0))}},$e=class extends Rn{constructor(e){super(e.definition),this.idx=1,At(this,fn(e,n=>n!==void 0))}},oe=class extends Rn{constructor(e){super(e.definition),this.idx=1,At(this,fn(e,n=>n!==void 0))}},Be=class extends Rn{constructor(e){super(e.definition),this.idx=1,At(this,fn(e,n=>n!==void 0))}},ze=class extends Rn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,At(this,fn(e,n=>n!==void 0))}},Q=class{constructor(e){this.idx=1,At(this,fn(e,n=>n!==void 0))}accept(e){e.visit(this)}};function Fd(t){return _(t,Nl)}function Nl(t){function e(n){return _(n,Nl)}if(t instanceof xe){let n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return at(t.label)&&(n.label=t.label),n}else{if(t instanceof ve)return{type:"Alternative",definition:e(t.definition)};if(t instanceof be)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Ge)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof $e)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Nl(new Q({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Be)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Nl(new Q({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof oe)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof ze)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Q){let n={type:"Terminal",name:t.terminalType.name,label:Nz(t.terminalType),idx:t.idx};at(t.label)&&(n.terminalLabel=t.label);let r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=$n(r)?r.source:r),n}else{if(t instanceof Jt)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}var en=class{visit(e){let n=e;switch(n.constructor){case xe:return this.visitNonTerminal(n);case ve:return this.visitAlternative(n);case be:return this.visitOption(n);case Ge:return this.visitRepetitionMandatory(n);case $e:return this.visitRepetitionMandatoryWithSeparator(n);case Be:return this.visitRepetitionWithSeparator(n);case oe:return this.visitRepetition(n);case ze:return this.visitAlternation(n);case Q:return this.visitTerminal(n);case Jt:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function I1(t){return t instanceof ve||t instanceof be||t instanceof oe||t instanceof Ge||t instanceof $e||t instanceof Be||t instanceof Q||t instanceof Jt}function ts(t,e=[]){return t instanceof be||t instanceof oe||t instanceof Be?!0:t instanceof ze?Pu(t.definition,r=>ts(r,e)):t instanceof xe&&Oe(e,t)?!1:t instanceof Rn?(t instanceof xe&&e.push(t),zt(t.definition,r=>ts(r,e))):!1}function M1(t){return t instanceof ze}function hn(t){if(t instanceof xe)return"SUBRULE";if(t instanceof be)return"OPTION";if(t instanceof ze)return"OR";if(t instanceof Ge)return"AT_LEAST_ONE";if(t instanceof $e)return"AT_LEAST_ONE_SEP";if(t instanceof Be)return"MANY_SEP";if(t instanceof oe)return"MANY";if(t instanceof Q)return"CONSUME";throw Error("non exhaustive match")}var ui=class{walk(e,n=[]){F(e.definition,(r,i)=>{let o=je(e.definition,i+1);if(r instanceof xe)this.walkProdRef(r,o,n);else if(r instanceof Q)this.walkTerminal(r,o,n);else if(r instanceof ve)this.walkFlat(r,o,n);else if(r instanceof be)this.walkOption(r,o,n);else if(r instanceof Ge)this.walkAtLeastOne(r,o,n);else if(r instanceof $e)this.walkAtLeastOneSep(r,o,n);else if(r instanceof Be)this.walkManySep(r,o,n);else if(r instanceof oe)this.walkMany(r,o,n);else if(r instanceof ze)this.walkOr(r,o,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){let i=n.concat(r);this.walk(e,i)}walkOption(e,n,r){let i=n.concat(r);this.walk(e,i)}walkAtLeastOne(e,n,r){let i=[new be({definition:e.definition})].concat(n,r);this.walk(e,i)}walkAtLeastOneSep(e,n,r){let i=QR(e,n,r);this.walk(e,i)}walkMany(e,n,r){let i=[new be({definition:e.definition})].concat(n,r);this.walk(e,i)}walkManySep(e,n,r){let i=QR(e,n,r);this.walk(e,i)}walkOr(e,n,r){let i=n.concat(r);F(e.definition,o=>{let s=new ve({definition:[o]});this.walk(s,i)})}};function QR(t,e,n){return[new be({definition:[new Q({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function ns(t){if(t instanceof xe)return ns(t.referencedRule);if(t instanceof Q)return Fz(t);if(I1(t))return _z(t);if(M1(t))return Dz(t);throw Error("non exhaustive match")}function _z(t){let e=[],n=t.definition,r=0,i=n.length>r,o,s=!0;for(;i&&s;)o=n[r],s=ts(o),e=e.concat(ns(o)),r=r+1,i=n.length>r;return Ml(e)}function Dz(t){let e=_(t.definition,n=>ns(n));return Ml(lt(e))}function Fz(t){return[t.terminalType]}var Bd="_~IN~_";var L1=class extends ui{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){let i=Bz(e.referencedRule,e.idx)+this.topProd.name,o=n.concat(r),s=new ve({definition:o}),l=ns(s);this.follows[i]=l}};function JR(t){let e={};return F(t,n=>{let r=new L1(n).startWalking();At(e,r)}),e}function Bz(t,e){return t.name+e+Bd}function W(t){return t.charCodeAt(0)}function zd(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function Pl(t,e){if(t[e]===!0)throw"duplicate flag "+e;let n=t[e];t[e]=!0}function rs(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function Bu(){throw Error("Internal Error - Should never get here!")}function N1(t){return t.type==="Character"}var zu=[];for(let t=W("0");t<=W("9");t++)zu.push(t);var Uu=[W("_")].concat(zu);for(let t=W("a");t<=W("z");t++)Uu.push(t);for(let t=W("A");t<=W("Z");t++)Uu.push(t);var P1=[W(" "),W("\f"),W(`
`),W("\r"),W("	"),W("\v"),W("	"),W("\xA0"),W("\u1680"),W("\u2000"),W("\u2001"),W("\u2002"),W("\u2003"),W("\u2004"),W("\u2005"),W("\u2006"),W("\u2007"),W("\u2008"),W("\u2009"),W("\u200A"),W("\u2028"),W("\u2029"),W("\u202F"),W("\u205F"),W("\u3000"),W("\uFEFF")];var zz=/[0-9a-fA-F]/,Ud=/[0-9]/,Uz=/[1-9]/,Vu=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let n=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Pl(r,"global");break;case"i":Pl(r,"ignoreCase");break;case"m":Pl(r,"multiLine");break;case"u":Pl(r,"unicode");break;case"y":Pl(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){let e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){let e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}rs(n);let r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return Bu()}quantifier(e=!1){let n,r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let o;this.isDigit()?(o=this.integerIncludingZero(),n={atLeast:i,atMost:o}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;rs(n);break}if(!(e===!0&&n===void 0)&&rs(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e,n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),rs(e)?(e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):Bu()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[W(`
`),W("\r"),W("\u2028"),W("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=zu;break;case"D":e=zu,n=!0;break;case"s":e=P1;break;case"S":e=P1,n=!0;break;case"w":e=Uu;break;case"W":e=Uu,n=!0;break}return rs(e)?{type:"Set",value:e,complement:n}:Bu()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=W("\f");break;case"n":e=W(`
`);break;case"r":e=W("\r");break;case"t":e=W("	");break;case"v":e=W("\v");break}return rs(e)?{type:"Character",value:e}:Bu()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:W("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:W(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:W(e)}}}characterClass(){let e=[],n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){let r=this.classAtom(),i=r.type==="Character";if(N1(r)&&this.isRangeDash()){this.consumeChar("-");let o=this.classAtom(),s=o.type==="Character";if(N1(o)){if(o.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:o.value})}else zd(r.value,e),e.push(W("-")),zd(o.value,e)}else zd(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:W("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}let n=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(Uz.test(e)===!1)throw Error("Expecting a positive integer");for(;Ud.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Ud.test(e)===!1)throw Error("Expecting an integer");for(;Ud.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:W(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Ud.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let i=0;i<e;i++){let o=this.popChar();if(zz.test(o)===!1)throw Error("Expecting a HexDecimal digits");n+=o}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var uo=class{visitChildren(e){for(let n in e){let r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var Vd={},Vz=new Vu;function _l(t){let e=t.toString();if(Vd.hasOwnProperty(e))return Vd[e];{let n=Vz.pattern(e);return Vd[e]=n,n}}function eO(){Vd={}}var nO="Complement Sets are not supported for first char optimization",Hu=`Unable to use "first char" lexer optimizations:
`;function rO(t,e=!1){try{let n=_l(t);return _1(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===nO)e&&_u(`${Hu}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Ll(`${Hu}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function _1(t,e,n){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)_1(t.value[i],e,n);break;case"Alternative":let r=t.value;for(let i=0;i<r.length;i++){let o=r[i];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=o;switch(s.type){case"Character":Hd(s.value,e,n);break;case"Set":if(s.complement===!0)throw Error(nO);F(s.value,a=>{if(typeof a=="number")Hd(a,e,n);else{let u=a;if(n===!0)for(let c=u.from;c<=u.to;c++)Hd(c,e,n);else{for(let c=u.from;c<=u.to&&c<Dl;c++)Hd(c,e,n);if(u.to>=Dl){let c=u.from>=Dl?u.from:Dl,f=u.to,h=zr(c),d=zr(f);for(let m=h;m<=d;m++)e[m]=m}}}});break;case"Group":_1(s.value,e,n);break;default:throw Error("Non Exhaustive Match")}let l=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&D1(s)===!1||s.type!=="Group"&&l===!1)break}break;default:throw Error("non exhaustive match!")}return ce(e)}function Hd(t,e,n){let r=zr(t);e[r]=r,n===!0&&Hz(t,e)}function Hz(t,e){let n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){let i=zr(r.charCodeAt(0));e[i]=i}else{let i=n.toLowerCase();if(i!==n){let o=zr(i.charCodeAt(0));e[o]=o}}}function tO(t,e){return Br(t.value,n=>{if(typeof n=="number")return Oe(e,n);{let r=n;return Br(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function D1(t){let e=t.quantifier;return e&&e.atLeast===0?!0:t.value?V(t.value)?zt(t.value,D1):D1(t.value):!1}var F1=class extends uo{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){Oe(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?tO(e,this.targetCharCodes)===void 0&&(this.found=!0):tO(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Wd(t,e){if(e instanceof RegExp){let n=_l(e),r=new F1(t);return r.visit(n),r.found}else return Br(e,n=>Oe(t,n.charCodeAt(0)))!==void 0}var is="PATTERN",Fl="defaultMode",jd="modes",z1=typeof new RegExp("(?:)").sticky=="boolean";function sO(t,e){e=Il(e,{useSticky:z1,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(g,y)=>y()});let n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{sU()});let r;n("Reject Lexer.NA",()=>{r=ao(t,g=>g[is]===Ke.NA)});let i=!1,o;n("Transform Patterns",()=>{i=!1,o=_(r,g=>{let y=g[is];if($n(y)){let S=y.source;return S.length===1&&S!=="^"&&S!=="$"&&S!=="."&&!y.ignoreCase?S:S.length===2&&S[0]==="\\"&&!Oe(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],S[1])?S[1]:e.useSticky?oO(y):iO(y)}else{if(Zt(y))return i=!0,{exec:y};if(typeof y=="object")return i=!0,y;if(typeof y=="string"){if(y.length===1)return y;{let S=y.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),k=new RegExp(S);return e.useSticky?oO(k):iO(k)}}else throw Error("non exhaustive match")}})});let s,l,a,u,c;n("misc mapping",()=>{s=_(r,g=>g.tokenTypeIdx),l=_(r,g=>{let y=g.GROUP;if(y!==Ke.SKIPPED){if(at(y))return y;if(Vt(y))return!1;throw Error("non exhaustive match")}}),a=_(r,g=>{let y=g.LONGER_ALT;if(y)return V(y)?_(y,k=>Dd(r,k)):[Dd(r,y)]}),u=_(r,g=>g.PUSH_MODE),c=_(r,g=>z(g,"POP_MODE"))});let f;n("Line Terminator Handling",()=>{let g=pO(e.lineTerminatorCharacters);f=_(r,y=>!1),e.positionTracking!=="onlyOffset"&&(f=_(r,y=>z(y,"LINE_BREAKS")?!!y.LINE_BREAKS:dO(y,g)===!1&&Wd(g,y.PATTERN)))});let h,d,m,x;n("Misc Mapping #2",()=>{h=_(r,fO),d=_(o,iU),m=tt(r,(g,y)=>{let S=y.GROUP;return at(S)&&S!==Ke.SKIPPED&&(g[S]=[]),g},{}),x=_(o,(g,y)=>({pattern:o[y],longerAlt:a[y],canLineTerminator:f[y],isCustom:h[y],short:d[y],group:l[y],push:u[y],pop:c[y],tokenTypeIdx:s[y],tokenType:r[y]}))});let v=!0,p=[];return e.safeMode||n("First Char Optimization",()=>{p=tt(r,(g,y,S)=>{if(typeof y.PATTERN=="string"){let k=y.PATTERN.charCodeAt(0),w=zr(k);B1(g,w,x[S])}else if(V(y.START_CHARS_HINT)){let k;F(y.START_CHARS_HINT,w=>{let C=typeof w=="string"?w.charCodeAt(0):w,T=zr(C);k!==T&&(k=T,B1(g,T,x[S]))})}else if($n(y.PATTERN))if(y.PATTERN.unicode)v=!1,e.ensureOptimizations&&Ll(`${Hu}	Unable to analyze < ${y.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let k=rO(y.PATTERN,e.ensureOptimizations);K(k)&&(v=!1),F(k,w=>{B1(g,w,x[S])})}else e.ensureOptimizations&&Ll(`${Hu}	TokenType: <${y.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),v=!1;return g},[])}),{emptyGroups:m,patternIdxToConfig:x,charCodeToPatternIdxToConfig:p,hasCustom:i,canBeOptimized:v}}function lO(t,e){let n=[],r=jz(t);n=n.concat(r.errors);let i=Gz(r.valid),o=i.valid;return n=n.concat(i.errors),n=n.concat(Wz(o)),n=n.concat(Jz(o)),n=n.concat(eU(o,e)),n=n.concat(tU(o)),n}function Wz(t){let e=[],n=Ut(t,r=>$n(r[is]));return e=e.concat(Kz(n)),e=e.concat(Xz(n)),e=e.concat(Zz(n)),e=e.concat(Qz(n)),e=e.concat(qz(n)),e}function jz(t){let e=Ut(t,i=>!z(i,is)),n=_(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:Ie.MISSING_PATTERN,tokenTypes:[i]})),r=lo(t,e);return{errors:n,valid:r}}function Gz(t){let e=Ut(t,i=>{let o=i[is];return!$n(o)&&!Zt(o)&&!z(o,"exec")&&!at(o)}),n=_(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Ie.INVALID_PATTERN,tokenTypes:[i]})),r=lo(t,e);return{errors:n,valid:r}}var $z=/[^\\][$]/;function Kz(t){class e extends uo{constructor(){super(...arguments),this.found=!1}visitEndAnchor(o){this.found=!0}}let n=Ut(t,i=>{let o=i.PATTERN;try{let s=_l(o),l=new e;return l.visit(s),l.found}catch{return $z.test(o.source)}});return _(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ie.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function qz(t){let e=Ut(t,r=>r.PATTERN.test(""));return _(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:Ie.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}var Yz=/[^\\[][\^]|^\^/;function Xz(t){class e extends uo{constructor(){super(...arguments),this.found=!1}visitStartAnchor(o){this.found=!0}}let n=Ut(t,i=>{let o=i.PATTERN;try{let s=_l(o),l=new e;return l.visit(s),l.found}catch{return Yz.test(o.source)}});return _(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ie.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Zz(t){let e=Ut(t,r=>{let i=r[is];return i instanceof RegExp&&(i.multiline||i.global)});return _(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Ie.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Qz(t){let e=[],n=_(t,o=>tt(t,(s,l)=>(o.PATTERN.source===l.PATTERN.source&&!Oe(e,l)&&l.PATTERN!==Ke.NA&&(e.push(l),s.push(l)),s),[]));n=Dr(n);let r=Ut(n,o=>o.length>1);return _(r,o=>{let s=_(o,a=>a.name);return{message:`The same RegExp pattern ->${xt(o).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:Ie.DUPLICATE_PATTERNS_FOUND,tokenTypes:o}})}function Jz(t){let e=Ut(t,r=>{if(!z(r,"GROUP"))return!1;let i=r.GROUP;return i!==Ke.SKIPPED&&i!==Ke.NA&&!at(i)});return _(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Ie.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function eU(t,e){let n=Ut(t,i=>i.PUSH_MODE!==void 0&&!Oe(e,i.PUSH_MODE));return _(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:Ie.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function tU(t){let e=[],n=tt(t,(r,i,o)=>{let s=i.PATTERN;return s===Ke.NA||(at(s)?r.push({str:s,idx:o,tokenType:i}):$n(s)&&rU(s)&&r.push({str:s.source,idx:o,tokenType:i})),r},[]);return F(t,(r,i)=>{F(n,({str:o,idx:s,tokenType:l})=>{if(i<s&&nU(o,r.PATTERN)){let a=`Token: ->${l.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:a,type:Ie.UNREACHABLE_PATTERN,tokenTypes:[r,l]})}})}),e}function nU(t,e){if($n(e)){let n=e.exec(t);return n!==null&&n.index===0}else{if(Zt(e))return e(t,0,[],{});if(z(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function rU(t){return Br([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function iO(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function oO(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function aO(t,e,n){let r=[];return z(t,Fl)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Fl+`> property in its definition
`,type:Ie.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),z(t,jd)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+jd+`> property in its definition
`,type:Ie.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),z(t,jd)&&z(t,Fl)&&!z(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${Fl}: <${t.defaultMode}>which does not exist
`,type:Ie.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),z(t,jd)&&F(t.modes,(i,o)=>{F(i,(s,l)=>{if(Vt(s))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${o}> at index: <${l}>
`,type:Ie.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(z(s,"LONGER_ALT")){let a=V(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];F(a,u=>{!Vt(u)&&!Oe(i,u)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${s.name}> outside of mode <${o}>
`,type:Ie.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function uO(t,e,n){let r=[],i=!1,o=Dr(lt(ce(t.modes))),s=ao(o,a=>a[is]===Ke.NA),l=pO(n);return e&&F(s,a=>{let u=dO(a,l);if(u!==!1){let f={message:oU(a,u),type:u.issue,tokenType:a};r.push(f)}else z(a,"LINE_BREAKS")?a.LINE_BREAKS===!0&&(i=!0):Wd(l,a.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Ie.NO_LINE_BREAKS_FLAGS}),r}function cO(t){let e={},n=ge(t);return F(n,r=>{let i=t[r];if(V(i))e[r]=[];else throw Error("non exhaustive match")}),e}function fO(t){let e=t.PATTERN;if($n(e))return!1;if(Zt(e))return!0;if(z(e,"exec"))return!0;if(at(e))return!1;throw Error("non exhaustive match")}function iU(t){return at(t)&&t.length===1?t.charCodeAt(0):!1}var hO={test:function(t){let e=t.length;for(let n=this.lastIndex;n<e;n++){let r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function dO(t,e){if(z(t,"LINE_BREAKS"))return!1;if($n(t.PATTERN)){try{Wd(e,t.PATTERN)}catch(n){return{issue:Ie.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(at(t.PATTERN))return!1;if(fO(t))return{issue:Ie.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function oU(t,e){if(e.issue===Ie.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===Ie.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function pO(t){return _(t,n=>at(n)?n.charCodeAt(0):n)}function B1(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}var Dl=256,Gd=[];function zr(t){return t<Dl?t:Gd[t]}function sU(){if(K(Gd)){Gd=new Array(65536);for(let t=0;t<65536;t++)Gd[t]=t>255?255+~~(t/255):t}}function ci(t,e){let n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function Bl(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var mO=1,yO={};function fi(t){let e=lU(t);aU(e),cU(e),uU(e),F(e,n=>{n.isParent=n.categoryMatches.length>0})}function lU(t){let e=Ee(t),n=t,r=!0;for(;r;){n=Dr(lt(_(n,o=>o.CATEGORIES)));let i=lo(n,e);e=e.concat(i),K(i)?r=!1:n=i}return e}function aU(t){F(t,e=>{U1(e)||(yO[mO]=e,e.tokenTypeIdx=mO++),gO(e)&&!V(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),gO(e)||(e.CATEGORIES=[]),fU(e)||(e.categoryMatches=[]),hU(e)||(e.categoryMatchesMap={})})}function uU(t){F(t,e=>{e.categoryMatches=[],F(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(yO[r].tokenTypeIdx)})})}function cU(t){F(t,e=>{xO([],e)})}function xO(t,e){F(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),F(e.CATEGORIES,n=>{let r=t.concat(e);Oe(r,n)||xO(r,n)})}function U1(t){return z(t,"tokenTypeIdx")}function gO(t){return z(t,"CATEGORIES")}function fU(t){return z(t,"categoryMatches")}function hU(t){return z(t,"categoryMatchesMap")}function vO(t){return z(t,"tokenTypeIdx")}var V1={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var Ie;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Ie||(Ie={}));var Wu={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:V1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Wu);var Ke=class{constructor(e,n=Wu){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,o)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${i}>`);let{time:l,value:a}=Du(o),u=l>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${s}<-- <${i}> time: ${l}ms`),this.traceInitIndent--,a}else return o()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=At({},Wu,n);let r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,o=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Wu.lineTerminatorsPattern)this.config.lineTerminatorsPattern=hO;else if(this.config.lineTerminatorCharacters===Wu.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),V(e)?i={modes:{defaultMode:Ee(e)},defaultMode:Fl}:(o=!1,i=Ee(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(aO(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(uO(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},F(i.modes,(l,a)=>{i.modes[a]=ao(l,u=>Vt(u))});let s=ge(i.modes);if(F(i.modes,(l,a)=>{this.TRACE_INIT(`Mode: <${a}> processing`,()=>{if(this.modes.push(a),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(lO(l,s))}),K(this.lexerDefinitionErrors)){fi(l);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=sO(l,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[a]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[a]=u.charCodeToPatternIdxToConfig,this.emptyGroups=At({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[a]=u.canBeOptimized}})}),this.defaultMode=i.defaultMode,!K(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let a=_(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+a)}F(this.lexerDefinitionWarning,l=>{_u(l.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(z1?(this.chopInput=jn,this.match=this.matchWithTest):(this.updateLastIndex=_e,this.match=this.matchWithExec),o&&(this.handleModes=_e),this.trackStartLines===!1&&(this.computeNewColumn=jn),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=_e),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let l=tt(this.canModeBeOptimized,(a,u,c)=>(u===!1&&a.push(c),a),[]);if(n.ensureOptimizations&&!K(l))throw Error(`Lexer Modes: < ${l.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{eO()}),this.TRACE_INIT("toFastProperties",()=>{Fu(this)})})}tokenize(e,n=this.defaultMode){if(!K(this.lexerDefinitionErrors)){let i=_(this.lexerDefinitionErrors,o=>o.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,i,o,s,l,a,u,c,f,h,d,m,x,v,p,g,y=e,S=y.length,k=0,w=0,C=this.hasCustom?0:Math.floor(e.length/10),T=new Array(C),O=[],L=this.trackStartLines?1:void 0,U=this.trackStartLines?1:void 0,B=cO(this.emptyGroups),j=this.trackStartLines,G=this.config.lineTerminatorsPattern,Z=0,le=[],Te=[],Ue=[],ne=[];Object.freeze(ne);let de;function qe(){return le}function nt(rt){let In=zr(rt),as=Te[In];return as===void 0?ne:as}let On=rt=>{if(Ue.length===1&&rt.tokenType.PUSH_MODE===void 0){let In=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(rt);O.push({offset:rt.startOffset,line:rt.startLine,column:rt.startColumn,length:rt.image.length,message:In})}else{Ue.pop();let In=Fr(Ue);le=this.patternIdxToConfig[In],Te=this.charCodeToPatternIdxToConfig[In],Z=le.length;let as=this.canModeBeOptimized[In]&&this.config.safeMode===!1;Te&&as?de=nt:de=qe}};function fr(rt){Ue.push(rt),Te=this.charCodeToPatternIdxToConfig[rt],le=this.patternIdxToConfig[rt],Z=le.length,Z=le.length;let In=this.canModeBeOptimized[rt]&&this.config.safeMode===!1;Te&&In?de=nt:de=qe}fr.call(this,n);let ft,ho=this.config.recoveryEnabled;for(;k<S;){a=null;let rt=y.charCodeAt(k),In=de(rt),as=In.length;for(r=0;r<as;r++){ft=In[r];let pn=ft.pattern;u=null;let Ur=ft.short;if(Ur!==!1?rt===Ur&&(a=pn):ft.isCustom===!0?(g=pn.exec(y,k,T,B),g!==null?(a=g[0],g.payload!==void 0&&(u=g.payload)):a=null):(this.updateLastIndex(pn,k),a=this.match(pn,e,k)),a!==null){if(l=ft.longerAlt,l!==void 0){let hi=l.length;for(o=0;o<hi;o++){let Vr=le[l[o]],po=Vr.pattern;if(c=null,Vr.isCustom===!0?(g=po.exec(y,k,T,B),g!==null?(s=g[0],g.payload!==void 0&&(c=g.payload)):s=null):(this.updateLastIndex(po,k),s=this.match(po,e,k)),s&&s.length>a.length){a=s,u=c,ft=Vr;break}}}break}}if(a!==null){if(f=a.length,h=ft.group,h!==void 0&&(d=ft.tokenTypeIdx,m=this.createTokenInstance(a,k,d,ft.tokenType,L,U,f),this.handlePayload(m,u),h===!1?w=this.addToken(T,w,m):B[h].push(m)),e=this.chopInput(e,f),k=k+f,U=this.computeNewColumn(U,f),j===!0&&ft.canLineTerminator===!0){let pn=0,Ur,hi;G.lastIndex=0;do Ur=G.test(a),Ur===!0&&(hi=G.lastIndex-1,pn++);while(Ur===!0);pn!==0&&(L=L+pn,U=f-hi,this.updateTokenEndLineColumnLocation(m,h,hi,pn,L,U,f))}this.handleModes(ft,On,fr,m)}else{let pn=k,Ur=L,hi=U,Vr=ho===!1;for(;Vr===!1&&k<S;)for(e=this.chopInput(e,1),k++,i=0;i<Z;i++){let po=le[i],Cp=po.pattern,wx=po.short;if(wx!==!1?y.charCodeAt(k)===wx&&(Vr=!0):po.isCustom===!0?Vr=Cp.exec(y,k,T,B)!==null:(this.updateLastIndex(Cp,k),Vr=Cp.exec(e)!==null),Vr===!0)break}if(x=k-pn,U=this.computeNewColumn(U,x),p=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y,pn,x,Ur,hi),O.push({offset:pn,line:Ur,column:hi,length:x,message:p}),ho===!1)break}}return this.hasCustom||(T.length=w),{tokens:T,groups:B,errors:O}}handleModes(e,n,r,i){if(e.pop===!0){let o=e.push;n(i),o!==void 0&&r.call(this,o)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,i,o,s,l){let a,u;n!==void 0&&(a=r===l-1,u=a?-1:0,i===1&&a===!0||(e.endLine=o+u,e.endColumn=s-1+-u))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,n,r,i,o,s){return{image:e,startOffset:n,startLine:o,startColumn:s,tokenTypeIdx:r,tokenType:i}}createFullToken(e,n,r,i,o,s,l){return{image:e,startOffset:n,endOffset:n+l-1,startLine:o,endLine:o,startColumn:s,endColumn:s+l-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){let r=e.exec(n);return r!==null?r[0]:null}};Ke.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Ke.NA=/NOT_APPLICABLE/;function os(t){return H1(t)?t.LABEL:t.name}function H1(t){return at(t.LABEL)&&t.LABEL!==""}var dU="parent",SO="categories",kO="label",wO="group",CO="push_mode",EO="pop_mode",bO="longer_alt",TO="line_breaks",AO="start_chars_hint";function ut(t){return pU(t)}function pU(t){let e=t.pattern,n={};if(n.name=t.name,Vt(e)||(n.PATTERN=e),z(t,dU))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return z(t,SO)&&(n.CATEGORIES=t[SO]),fi([n]),z(t,kO)&&(n.LABEL=t[kO]),z(t,wO)&&(n.GROUP=t[wO]),z(t,EO)&&(n.POP_MODE=t[EO]),z(t,CO)&&(n.PUSH_MODE=t[CO]),z(t,bO)&&(n.LONGER_ALT=t[bO]),z(t,TO)&&(n.LINE_BREAKS=t[TO]),z(t,AO)&&(n.START_CHARS_HINT=t[AO]),n}var ur=ut({name:"EOF",pattern:Ke.NA});fi([ur]);function ss(t,e,n,r,i,o,s,l){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:s,endColumn:l,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function W1(t,e){return ci(t,e)}var $d={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${H1(t)?`--> ${os(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){let o="Expecting: ",l=`
but found: '`+xt(e).image+"'";if(r)return o+r+l;{let a=tt(t,(h,d)=>h.concat(d),[]),u=_(a,h=>`[${_(h,d=>os(d)).join(", ")}]`),f=`one of these possible Token sequences:
${_(u,(h,d)=>`  ${d+1}. ${h}`).join(`
`)}`;return o+f+l}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){let i="Expecting: ",s=`
but found: '`+xt(e).image+"'";if(n)return i+n+s;{let a=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${_(t,u=>`[${_(u,c=>os(c)).join(",")}]`).join(" ,")}>`;return i+a+s}}};Object.freeze($d);var RO={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},cr={buildDuplicateFoundError(t,e){function n(c){return c instanceof Q?c.terminalType.name:c instanceof xe?c.nonTerminalName:""}let r=t.name,i=xt(e),o=i.idx,s=hn(i),l=n(i),a=o>0,u=`->${s}${a?o:""}<- ${l?`with argument: ->${l}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){let e=_(t.prefixPath,i=>os(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){let e=_(t.prefixPath,i=>os(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx,r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=hn(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){let e=t.topLevelRule.name,n=_(t.leftRecursionPath,o=>o.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Jt?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function OO(t,e){let n=new j1(t,e);return n.resolveRefs(),n.errors}var j1=class extends en{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){F(ce(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{let r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:ct.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var G1=class extends ui{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Ee(this.path.ruleStack).reverse(),this.occurrenceStack=Ee(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let i=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){K(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Kd=class extends G1{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let i=n.concat(r),o=new ve({definition:i});this.possibleTokTypes=ns(o),this.found=!0}}},zl=class extends ui{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},qd=class extends zl{walkMany(e,n,r){if(e.idx===this.occurrence){let i=xt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,n,r)}},ju=class extends zl{walkManySep(e,n,r){if(e.idx===this.occurrence){let i=xt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,n,r)}},Yd=class extends zl{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){let i=xt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,n,r)}},Gu=class extends zl{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){let i=xt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,n,r)}};function Xd(t,e,n=[]){n=Ee(n);let r=[],i=0;function o(l){return l.concat(je(t,i+1))}function s(l){let a=Xd(o(l),e,n);return r.concat(a)}for(;n.length<e&&i<t.length;){let l=t[i];if(l instanceof ve)return s(l.definition);if(l instanceof xe)return s(l.definition);if(l instanceof be)r=s(l.definition);else if(l instanceof Ge){let a=l.definition.concat([new oe({definition:l.definition})]);return s(a)}else if(l instanceof $e){let a=[new ve({definition:l.definition}),new oe({definition:[new Q({terminalType:l.separator})].concat(l.definition)})];return s(a)}else if(l instanceof Be){let a=l.definition.concat([new oe({definition:[new Q({terminalType:l.separator})].concat(l.definition)})]);r=s(a)}else if(l instanceof oe){let a=l.definition.concat([new oe({definition:l.definition})]);r=s(a)}else{if(l instanceof ze)return F(l.definition,a=>{K(a.definition)===!1&&(r=s(a.definition))}),r;if(l instanceof Q)n.push(l.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:je(t,i)}),r}function Zd(t,e,n,r){let i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE",l=!1,a=e.length,u=a-r-1,c=[],f=[];for(f.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!K(f);){let h=f.pop();if(h===s){l&&Fr(f).idx<=u&&f.pop();continue}let d=h.def,m=h.idx,x=h.ruleStack,v=h.occurrenceStack;if(K(d))continue;let p=d[0];if(p===i){let g={idx:m,def:je(d),ruleStack:ai(x),occurrenceStack:ai(v)};f.push(g)}else if(p instanceof Q)if(m<a-1){let g=m+1,y=e[g];if(n(y,p.terminalType)){let S={idx:g,def:je(d),ruleStack:x,occurrenceStack:v};f.push(S)}}else if(m===a-1)c.push({nextTokenType:p.terminalType,nextTokenOccurrence:p.idx,ruleStack:x,occurrenceStack:v}),l=!0;else throw Error("non exhaustive match");else if(p instanceof xe){let g=Ee(x);g.push(p.nonTerminalName);let y=Ee(v);y.push(p.idx);let S={idx:m,def:p.definition.concat(o,je(d)),ruleStack:g,occurrenceStack:y};f.push(S)}else if(p instanceof be){let g={idx:m,def:je(d),ruleStack:x,occurrenceStack:v};f.push(g),f.push(s);let y={idx:m,def:p.definition.concat(je(d)),ruleStack:x,occurrenceStack:v};f.push(y)}else if(p instanceof Ge){let g=new oe({definition:p.definition,idx:p.idx}),y=p.definition.concat([g],je(d)),S={idx:m,def:y,ruleStack:x,occurrenceStack:v};f.push(S)}else if(p instanceof $e){let g=new Q({terminalType:p.separator}),y=new oe({definition:[g].concat(p.definition),idx:p.idx}),S=p.definition.concat([y],je(d)),k={idx:m,def:S,ruleStack:x,occurrenceStack:v};f.push(k)}else if(p instanceof Be){let g={idx:m,def:je(d),ruleStack:x,occurrenceStack:v};f.push(g),f.push(s);let y=new Q({terminalType:p.separator}),S=new oe({definition:[y].concat(p.definition),idx:p.idx}),k=p.definition.concat([S],je(d)),w={idx:m,def:k,ruleStack:x,occurrenceStack:v};f.push(w)}else if(p instanceof oe){let g={idx:m,def:je(d),ruleStack:x,occurrenceStack:v};f.push(g),f.push(s);let y=new oe({definition:p.definition,idx:p.idx}),S=p.definition.concat([y],je(d)),k={idx:m,def:S,ruleStack:x,occurrenceStack:v};f.push(k)}else if(p instanceof ze)for(let g=p.definition.length-1;g>=0;g--){let y=p.definition[g],S={idx:m,def:y.definition.concat(je(d)),ruleStack:x,occurrenceStack:v};f.push(S),f.push(s)}else if(p instanceof ve)f.push({idx:m,def:p.definition.concat(je(d)),ruleStack:x,occurrenceStack:v});else if(p instanceof Jt)f.push(mU(p,m,x,v));else throw Error("non exhaustive match")}return c}function mU(t,e,n,r){let i=Ee(n);i.push(t.name);let o=Ee(r);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}var De;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(De||(De={}));function Jd(t){if(t instanceof be||t==="Option")return De.OPTION;if(t instanceof oe||t==="Repetition")return De.REPETITION;if(t instanceof Ge||t==="RepetitionMandatory")return De.REPETITION_MANDATORY;if(t instanceof $e||t==="RepetitionMandatoryWithSeparator")return De.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Be||t==="RepetitionWithSeparator")return De.REPETITION_WITH_SEPARATOR;if(t instanceof ze||t==="Alternation")return De.ALTERNATION;throw Error("non exhaustive match")}function MO(t,e,n,r,i,o){let s=$u(t,e,n),l=FO(s)?Bl:ci;return o(s,r,l,i)}function LO(t,e,n,r,i,o){let s=Ku(t,e,i,n),l=FO(s)?Bl:ci;return o(s[0],l,r)}function NO(t,e,n,r){let i=t.length,o=zt(t,s=>zt(s,l=>l.length===1));if(e)return function(s){let l=_(s,a=>a.GATE);for(let a=0;a<i;a++){let u=t[a],c=u.length,f=l[a];if(!(f!==void 0&&f.call(this)===!1))e:for(let h=0;h<c;h++){let d=u[h],m=d.length;for(let x=0;x<m;x++){let v=this.LA(x+1);if(n(v,d[x])===!1)continue e}return a}}};if(o&&!r){let s=_(t,a=>lt(a)),l=tt(s,(a,u,c)=>(F(u,f=>{z(a,f.tokenTypeIdx)||(a[f.tokenTypeIdx]=c),F(f.categoryMatches,h=>{z(a,h)||(a[h]=c)})}),a),{});return function(){let a=this.LA(1);return l[a.tokenTypeIdx]}}else return function(){for(let s=0;s<i;s++){let l=t[s],a=l.length;e:for(let u=0;u<a;u++){let c=l[u],f=c.length;for(let h=0;h<f;h++){let d=this.LA(h+1);if(n(d,c[h])===!1)continue e}return s}}}}function PO(t,e,n){let r=zt(t,o=>o.length===1),i=t.length;if(r&&!n){let o=lt(t);if(o.length===1&&K(o[0].categoryMatches)){let l=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===l}}else{let s=tt(o,(l,a,u)=>(l[a.tokenTypeIdx]=!0,F(a.categoryMatches,c=>{l[c]=!0}),l),[]);return function(){let l=this.LA(1);return s[l.tokenTypeIdx]===!0}}}else return function(){e:for(let o=0;o<i;o++){let s=t[o],l=s.length;for(let a=0;a<l;a++){let u=this.LA(a+1);if(e(u,s[a])===!1)continue e}return!0}return!1}}var K1=class extends ui{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,De.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,De.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,De.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,De.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,De.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}},Qd=class extends en{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,De.OPTION)}visitRepetition(e){this.checkIsTarget(e,De.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,De.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,De.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,De.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,De.ALTERNATION)}};function IO(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function $1(t){let e=[""];for(let n=0;n<t.length;n++){let r=t[n],i=[];for(let o=0;o<e.length;o++){let s=e[o];i.push(s+"_"+r.tokenTypeIdx);for(let l=0;l<r.categoryMatches.length;l++){let a="_"+r.categoryMatches[l];i.push(s+a)}}e=i}return e}function gU(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;let i=t[r];for(let o=0;o<e.length;o++){let s=e[o];if(i[s]===!0)return!1}}return!0}function _O(t,e){let n=_(t,s=>Xd([s],1)),r=IO(n.length),i=_(n,s=>{let l={};return F(s,a=>{let u=$1(a.partialPath);F(u,c=>{l[c]=!0})}),l}),o=n;for(let s=1;s<=e;s++){let l=o;o=IO(l.length);for(let a=0;a<l.length;a++){let u=l[a];for(let c=0;c<u.length;c++){let f=u[c].partialPath,h=u[c].suffixDef,d=$1(f);if(gU(i,d,a)||K(h)||f.length===e){let x=r[a];if(ep(x,f)===!1){x.push(f);for(let v=0;v<d.length;v++){let p=d[v];i[a][p]=!0}}}else{let x=Xd(h,s+1,f);o[a]=o[a].concat(x),F(x,v=>{let p=$1(v.partialPath);F(p,g=>{i[a][g]=!0})})}}}}return r}function $u(t,e,n,r){let i=new Qd(t,De.ALTERNATION,r);return e.accept(i),_O(i.result,n)}function Ku(t,e,n,r){let i=new Qd(t,n);e.accept(i);let o=i.result,l=new K1(e,t,n).startWalking(),a=new ve({definition:o}),u=new ve({definition:l});return _O([a,u],r)}function ep(t,e){e:for(let n=0;n<t.length;n++){let r=t[n];if(r.length===e.length){for(let i=0;i<r.length;i++){let o=e[i],s=r[i];if((o===s||s.categoryMatchesMap[o.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function DO(t,e){return t.length<e.length&&zt(t,(n,r)=>{let i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function FO(t){return zt(t,e=>zt(e,n=>zt(n,r=>K(r.categoryMatches))))}function BO(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return _(e,n=>Object.assign({type:ct.CUSTOM_LOOKAHEAD_VALIDATION},n))}function zO(t,e,n,r){let i=Qt(t,a=>yU(a,n)),o=CU(t,e,n),s=Qt(t,a=>SU(a,n)),l=Qt(t,a=>vU(a,t,r,n));return i.concat(o,s,l)}function yU(t,e){let n=new q1;t.accept(n);let r=n.allProductions,i=O1(r,xU),o=fn(i,l=>l.length>1);return _(ce(o),l=>{let a=xt(l),u=e.buildDuplicateFoundError(t,l),c=hn(a),f={message:u,type:ct.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:c,occurrence:a.idx},h=UO(a);return h&&(f.parameter=h),f})}function xU(t){return`${hn(t)}_#_${t.idx}_#_${UO(t)}`}function UO(t){return t instanceof Q?t.terminalType.name:t instanceof xe?t.nonTerminalName:""}var q1=class extends en{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function vU(t,e,n,r){let i=[];if(tt(e,(s,l)=>l.name===t.name?s+1:s,0)>1){let s=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:s,type:ct.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function VO(t,e,n){let r=[],i;return Oe(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:ct.INVALID_RULE_OVERRIDE,ruleName:t})),r}function X1(t,e,n,r=[]){let i=[],o=tp(e.definition);if(K(o))return[];{let s=t.name;Oe(o,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:ct.LEFT_RECURSION,ruleName:s});let a=lo(o,r.concat([t])),u=Qt(a,c=>{let f=Ee(r);return f.push(c),X1(t,c,n,f)});return i.concat(u)}}function tp(t){let e=[];if(K(t))return e;let n=xt(t);if(n instanceof xe)e.push(n.referencedRule);else if(n instanceof ve||n instanceof be||n instanceof Ge||n instanceof $e||n instanceof Be||n instanceof oe)e=e.concat(tp(n.definition));else if(n instanceof ze)e=lt(_(n.definition,o=>tp(o.definition)));else if(!(n instanceof Q))throw Error("non exhaustive match");let r=ts(n),i=t.length>1;if(r&&i){let o=je(t);return e.concat(tp(o))}else return e}var qu=class extends en{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function HO(t,e){let n=new qu;t.accept(n);let r=n.alternations;return Qt(r,o=>{let s=ai(o.definition);return Qt(s,(l,a)=>{let u=Zd([l],[],ci,1);return K(u)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:o,emptyChoiceIdx:a}),type:ct.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:o.idx,alternative:a+1}]:[]})})}function WO(t,e,n){let r=new qu;t.accept(r);let i=r.alternations;return i=ao(i,s=>s.ignoreAmbiguities===!0),Qt(i,s=>{let l=s.idx,a=s.maxLookahead||e,u=$u(l,t,a,s),c=kU(u,s,t,n),f=wU(u,s,t,n);return c.concat(f)})}var Y1=class extends en{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function SU(t,e){let n=new qu;t.accept(n);let r=n.alternations;return Qt(r,o=>o.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:o}),type:ct.TOO_MANY_ALTS,ruleName:t.name,occurrence:o.idx}]:[])}function jO(t,e,n){let r=[];return F(t,i=>{let o=new Y1;i.accept(o);let s=o.allProductions;F(s,l=>{let a=Jd(l),u=l.maxLookahead||e,c=l.idx,h=Ku(c,i,a,u)[0];if(K(lt(h))){let d=n.buildEmptyRepetitionError({topLevelRule:i,repetition:l});r.push({message:d,type:ct.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function kU(t,e,n,r){let i=[],o=tt(t,(l,a,u)=>(e.definition[u].ignoreAmbiguities===!0||F(a,c=>{let f=[u];F(t,(h,d)=>{u!==d&&ep(h,c)&&e.definition[d].ignoreAmbiguities!==!0&&f.push(d)}),f.length>1&&!ep(i,c)&&(i.push(c),l.push({alts:f,path:c}))}),l),[]);return _(o,l=>{let a=_(l.alts,c=>c+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:a,prefixPath:l.path}),type:ct.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:l.alts}})}function wU(t,e,n,r){let i=tt(t,(s,l,a)=>{let u=_(l,c=>({idx:a,path:c}));return s.concat(u)},[]);return Dr(Qt(i,s=>{if(e.definition[s.idx].ignoreAmbiguities===!0)return[];let a=s.idx,u=s.path,c=Ut(i,h=>e.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<a&&DO(h.path,u));return _(c,h=>{let d=[h.idx+1,a+1],m=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:d,prefixPath:h.path}),type:ct.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:m,alternatives:d}})}))}function CU(t,e,n){let r=[],i=_(e,o=>o.name);return F(t,o=>{let s=o.name;if(Oe(i,s)){let l=n.buildNamespaceConflictError(o);r.push({message:l,type:ct.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),r}function GO(t){let e=Il(t,{errMsgProvider:RO}),n={};return F(t.rules,r=>{n[r.name]=r}),OO(n,e.errMsgProvider)}function $O(t){return t=Il(t,{errMsgProvider:cr}),zO(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var KO="MismatchedTokenException",qO="NoViableAltException",YO="EarlyExitException",XO="NotAllInputParsedException",ZO=[KO,qO,YO,XO];Object.freeze(ZO);function co(t){return Oe(ZO,t.name)}var Ul=class extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},ls=class extends Ul{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=KO}},Yu=class extends Ul{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=qO}},Xu=class extends Ul{constructor(e,n){super(e,n),this.name=XO}},Zu=class extends Ul{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=YO}};var Z1={},J1="InRuleRecoveryException",Q1=class extends Error{constructor(e){super(e),this.name=J1}},np=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=z(e,"recoveryEnabled")?e.recoveryEnabled:dn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=EU)}getTokenToInsert(e){let n=ss(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,i){let o=this.findReSyncTokenType(),s=this.exportLexerState(),l=[],a=!1,u=this.LA(1),c=this.LA(1),f=()=>{let h=this.LA(0),d=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:h,ruleName:this.getCurrRuleFullName()}),m=new ls(d,u,this.LA(0));m.resyncedTokens=ai(l),this.SAVE_ERROR(m)};for(;!a;)if(this.tokenMatcher(c,i)){f();return}else if(r.call(this)){f(),e.apply(this,n);return}else this.tokenMatcher(c,o)?a=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,l));this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){let r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new Q1("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||K(n))return!1;let r=this.LA(1);return Br(n,o=>this.tokenMatcher(r,o))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return Oe(r,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),n=this.LA(1),r=2;for(;;){let i=Br(e,o=>W1(n,o));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Z1;let e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return _(e,(r,i)=>i===0?Z1:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){let e=_(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return lt(e)}getFollowSetFromFollowKey(e){if(e===Z1)return[ur];let n=e.ruleName+e.idxInCallingRule+Bd+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,ur)||n.push(e),n}reSyncTo(e){let n=[],r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return ai(n)}attemptInRepetitionRecovery(e,n,r,i,o,s,l){}getCurrentGrammarPath(e,n){let r=this.getHumanReadableRuleStack(),i=Ee(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return _(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function EU(t,e,n,r,i,o,s){let l=this.getKeyForAutomaticLookahead(r,i),a=this.firstAfterRepMap[l];if(a===void 0){let h=this.getCurrRuleFullName(),d=this.getGAstProductions()[h];a=new o(d,i).startWalking(),this.firstAfterRepMap[l]=a}let u=a.token,c=a.occurrence,f=a.isEndOfRule;this.RULE_STACK.length===1&&f&&u===void 0&&(u=ur,c=1),!(u===void 0||c===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,c,s)&&this.tryInRepetitionRecovery(t,e,n,u)}function rp(t,e,n){return n|e|t}var Qu=class{constructor(e){var n;this.maxLookahead=(n=e?.maxLookahead)!==null&&n!==void 0?n:dn.maxLookahead}validate(e){let n=this.validateNoLeftRecursion(e.rules);if(K(n)){let r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),o=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...i,...o]}return n}validateNoLeftRecursion(e){return Qt(e,n=>X1(n,n,cr))}validateEmptyOrAlternatives(e){return Qt(e,n=>HO(n,cr))}validateAmbiguousAlternationAlternatives(e,n){return Qt(e,r=>WO(r,n,cr))}validateSomeNonEmptyLookaheadPath(e,n){return jO(e,n,cr)}buildLookaheadForAlternation(e){return MO(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,NO)}buildLookaheadForOptional(e){return LO(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Jd(e.prodType),PO)}};var op=class{initLooksAhead(e){this.dynamicTokensEnabled=z(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:dn.dynamicTokensEnabled,this.maxLookahead=z(e,"maxLookahead")?e.maxLookahead:dn.maxLookahead,this.lookaheadStrategy=z(e,"lookaheadStrategy")?e.lookaheadStrategy:new Qu({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){F(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{let{alternation:r,repetition:i,option:o,repetitionMandatory:s,repetitionMandatoryWithSeparator:l,repetitionWithSeparator:a}=bU(n);F(r,u=>{let c=u.idx===0?"":u.idx;this.TRACE_INIT(`${hn(u)}${c}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:n,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=rp(this.fullRuleNameToShort[n.name],256,u.idx);this.setLaFuncCache(h,f)})}),F(i,u=>{this.computeLookaheadFunc(n,u.idx,768,"Repetition",u.maxLookahead,hn(u))}),F(o,u=>{this.computeLookaheadFunc(n,u.idx,512,"Option",u.maxLookahead,hn(u))}),F(s,u=>{this.computeLookaheadFunc(n,u.idx,1024,"RepetitionMandatory",u.maxLookahead,hn(u))}),F(l,u=>{this.computeLookaheadFunc(n,u.idx,1536,"RepetitionMandatoryWithSeparator",u.maxLookahead,hn(u))}),F(a,u=>{this.computeLookaheadFunc(n,u.idx,1280,"RepetitionWithSeparator",u.maxLookahead,hn(u))})})})}computeLookaheadFunc(e,n,r,i,o,s){this.TRACE_INIT(`${s}${n===0?"":n}`,()=>{let l=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:o||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),a=rp(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(a,l)})}getKeyForAutomaticLookahead(e,n){let r=this.getLastExplicitRuleShortName();return rp(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}},ex=class extends en{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},ip=new ex;function bU(t){ip.reset(),t.accept(ip);let e=ip.dslMethods;return ip.reset(),e}function rx(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function ix(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function QO(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function JO(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}var TU="name";function ox(t,e){Object.defineProperty(t,TU,{enumerable:!1,configurable:!0,writable:!1,value:e})}function AU(t,e){let n=ge(t),r=n.length;for(let i=0;i<r;i++){let o=n[i],s=t[o],l=s.length;for(let a=0;a<l;a++){let u=s[a];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}function eI(t,e){let n=function(){};ox(n,t+"BaseSemantics");let r={visit:function(i,o){if(V(i)&&(i=i[0]),!Vt(i))return this[i.name](i.children,o)},validateVisitor:function(){let i=RU(this,e);if(!K(i)){let o=_(i,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${o.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function tI(t,e,n){let r=function(){};ox(r,t+"BaseSemanticsWithDefaults");let i=Object.create(n.prototype);return F(e,o=>{i[o]=AU}),r.prototype=i,r.prototype.constructor=r,r}var sx;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(sx||(sx={}));function RU(t,e){return OU(t,e)}function OU(t,e){let n=Ut(e,i=>Zt(t[i])===!1),r=_(n,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:sx.MISSING_METHOD,methodName:i}));return Dr(r)}var up=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=z(e,"nodeLocationTracking")?e.nodeLocationTracking:dn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=_e,this.cstFinallyStateUpdate=_e,this.cstPostTerminal=_e,this.cstPostNonTerminal=_e,this.cstPostRule=_e;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=ix,this.setNodeLocationFromNode=ix,this.cstPostRule=_e,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=_e,this.setNodeLocationFromNode=_e,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=rx,this.setNodeLocationFromNode=rx,this.cstPostRule=_e,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=_e,this.setNodeLocationFromNode=_e,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=_e,this.setNodeLocationFromNode=_e,this.cstPostRule=_e,this.setInitialNodeLocation=_e;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){let n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){let r=this.CST_STACK[this.CST_STACK.length-1];QO(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){let r=this.CST_STACK[this.CST_STACK.length-1];JO(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(Vt(this.baseCstVisitorConstructor)){let e=eI(this.className,ge(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Vt(this.baseCstVisitorWithDefaultsConstructor)){let e=tI(this.className,ge(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var cp=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Vl}LA(e){let n=this.currIdx+e;return n<0||this.tokVectorLength<=n?Vl:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var fp=class{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=Hl){if(Oe(this.definedRulesNames,e)){let s={message:cr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ct.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);let i=this.defineRule(e,n,r);return this[e]=i,i}OVERRIDE_RULE(e,n,r=Hl){let i=VO(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let o=this.defineRule(e,n,r);return this[e]=o,o}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(co(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Fd(ce(this.gastProductionsCache))}};var hp=class{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Bl,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},z(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(V(e)){if(K(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(V(e))this.tokensMap=tt(e,(o,s)=>(o[s.name]=s,o),{});else if(z(e,"modes")&&zt(lt(ce(e.modes)),vO)){let o=lt(ce(e.modes)),s=Ml(o);this.tokensMap=tt(s,(l,a)=>(l[a.name]=a,l),{})}else if(Pe(e))this.tokensMap=Ee(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=ur;let r=z(e,"modes")?lt(ce(e.modes)):ce(e),i=zt(r,o=>K(o.categoryMatches));this.tokenMatcher=i?Bl:ci,fi(ce(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=z(r,"resyncEnabled")?r.resyncEnabled:Hl.resyncEnabled,o=z(r,"recoveryValueFunc")?r.recoveryValueFunc:Hl.recoveryValueFunc,s=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;let l;return this.outputCst===!0?l=function(...c){try{this.ruleInvocationStateUpdate(s,e,this.subruleIdx),n.apply(this,c);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}}:l=function(...c){try{return this.ruleInvocationStateUpdate(s,e,this.subruleIdx),n.apply(this,c)}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}},Object.assign(l,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){let i=this.RULE_STACK.length===1,o=n&&!this.isBackTracking()&&this.recoveryEnabled;if(co(e)){let s=e;if(o){let l=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(l))if(s.resyncedTokens=this.reSyncTo(l),this.outputCst){let a=this.CST_STACK[this.CST_STACK.length-1];return a.recoveredNode=!0,a}else return r(e);else{if(this.outputCst){let a=this.CST_STACK[this.CST_STACK.length-1];a.recoveredNode=!0,s.partialCstResult=a}throw s}}else{if(i)return this.moveToTerminatedState(),r(e);throw s}}else throw e}optionInternal(e,n){let r=this.getKeyForAutomaticLookahead(512,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof e!="function"){o=e.DEF;let s=e.GATE;if(s!==void 0){let l=i;i=()=>s.call(this)&&l.call(this)}}else o=e;if(i.call(this)===!0)return o.call(this)}atLeastOneInternal(e,n){let r=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;let s=n.GATE;if(s!==void 0){let l=i;i=()=>s.call(this)&&l.call(this)}}else o=n;if(i.call(this)===!0){let s=this.doSingleRepetition(o);for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o)}else throw this.raiseEarlyExitException(e,De.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],i,1024,e,Yd)}atLeastOneSepFirstInternal(e,n){let r=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){let i=n.DEF,o=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let l=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,i,Gu],l,1536,e,Gu)}else throw this.raiseEarlyExitException(e,De.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){let r=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;let l=n.GATE;if(l!==void 0){let a=i;i=()=>l.call(this)&&a.call(this)}}else o=n;let s=!0;for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],i,768,e,qd,s)}manySepFirstInternal(e,n){let r=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){let i=n.DEF,o=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let l=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,i,ju],l,1280,e,ju)}}repetitionSepSecondInternal(e,n,r,i,o){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,o],r,1536,e,o)}doSingleRepetition(e){let n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){let r=this.getKeyForAutomaticLookahead(256,n),i=V(e)?e:e.DEF,s=this.getLaFuncFromCache(r).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Xu(n,e))}}subruleInternal(e,n,r){let i;try{let o=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=e.apply(this,o),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(o){throw this.subruleInternalError(o,r,e.ruleName)}}subruleInternalError(e,n,r){throw co(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let i;try{let o=this.LA(1);this.tokenMatcher(o,e)===!0?(this.consumeToken(),i=o):this.consumeInternalError(e,o,r)}catch(o){i=this.consumeInternalRecovery(e,n,o)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,n,r){let i,o=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:o,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new ls(i,n,o))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(o){throw o.name===J1?r:o}}else throw r}saveRecogState(){let e=this.errors,n=Ee(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),ur)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var dp=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=z(e,"errorMessageProvider")?e.errorMessageProvider:dn.errorMessageProvider}SAVE_ERROR(e){if(co(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Ee(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Ee(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){let i=this.getCurrRuleFullName(),o=this.getGAstProductions()[i],l=Ku(e,o,n,this.maxLookahead)[0],a=[];for(let c=1;c<=this.maxLookahead;c++)a.push(this.LA(c));let u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:l,actual:a,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new Zu(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){let r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],o=$u(e,i,this.maxLookahead),s=[];for(let u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));let l=this.LA(0),a=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:s,previous:l,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Yu(a,this.LA(1),l))}};var pp=class{initContentAssist(){}computeContentAssist(e,n){let r=this.gastProductionsCache[e];if(Vt(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Zd([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let n=xt(e.ruleStack),i=this.getGAstProductions()[n];return new Kd(i,e).startWalking()}};var yp={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(yp);var nI=!0,rI=Math.pow(2,8)-1,oI=ut({name:"RECORDING_PHASE_TOKEN",pattern:Ke.NA});fi([oI]);var sI=ss(oI,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(sI);var MU={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},mp=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let n=e>0?e:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let n=0;n<10;n++){let r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return Vl}topLevelRuleRecord(e,n){try{let r=new Jt({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return ec.call(this,be,e,n)}atLeastOneInternalRecord(e,n){ec.call(this,Ge,n,e)}atLeastOneSepFirstInternalRecord(e,n){ec.call(this,$e,n,e,nI)}manyInternalRecord(e,n){ec.call(this,oe,n,e)}manySepFirstInternalRecord(e,n){ec.call(this,Be,n,e,nI)}orInternalRecord(e,n){return LU.call(this,e,n)}subruleInternalRecord(e,n,r){if(gp(n),!e||z(e,"ruleName")===!1){let l=new Error(`<SUBRULE${iI(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw l.KNOWN_RECORDER_ERROR=!0,l}let i=Fr(this.recordingProdStack),o=e.ruleName,s=new xe({idx:n,nonTerminalName:o,label:r?.LABEL,referencedRule:void 0});return i.definition.push(s),this.outputCst?MU:yp}consumeInternalRecord(e,n,r){if(gp(n),!U1(e)){let s=new Error(`<CONSUME${iI(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let i=Fr(this.recordingProdStack),o=new Q({idx:n,terminalType:e,label:r?.LABEL});return i.definition.push(o),sI}};function ec(t,e,n,r=!1){gp(n);let i=Fr(this.recordingProdStack),o=Zt(e)?e:e.DEF,s=new t({definition:[],idx:n});return r&&(s.separator=e.SEP),z(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),i.definition.push(s),this.recordingProdStack.pop(),yp}function LU(t,e){gp(e);let n=Fr(this.recordingProdStack),r=V(t)===!1,i=r===!1?t:t.DEF,o=new ze({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});z(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD);let s=Pu(i,l=>Zt(l.GATE));return o.hasPredicates=s,n.definition.push(o),F(i,l=>{let a=new ve({definition:[]});o.definition.push(a),z(l,"IGNORE_AMBIGUITIES")?a.ignoreAmbiguities=l.IGNORE_AMBIGUITIES:z(l,"GATE")&&(a.ignoreAmbiguities=!0),this.recordingProdStack.push(a),l.ALT.call(this),this.recordingProdStack.pop()}),yp}function iI(t){return t===0?"":`${t}`}function gp(t){if(t<0||t>rI){let e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${rI+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var xp=class{initPerformanceTracer(e){if(z(e,"traceInitPerf")){let n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=dn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);let{time:i,value:o}=Du(n),s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,o}else return n()}};function lI(t,e){e.forEach(n=>{let r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;let o=Object.getOwnPropertyDescriptor(r,i);o&&(o.get||o.set)?Object.defineProperty(t.prototype,i,o):t.prototype[i]=n.prototype[i]})})}var Vl=ss(ur,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Vl);var dn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:$d,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Hl=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),ct;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ct||(ct={}));var vp=class t{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;let n=this.className;this.TRACE_INIT("toFastProps",()=>{Fu(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),F(this.definedRulesNames,i=>{let s=this[i].originalGrammarAction,l;this.TRACE_INIT(`${i} Rule`,()=>{l=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=l})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=GO({rules:ce(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(K(r)&&this.skipValidations===!1){let i=$O({rules:ce(this.gastProductionsCache),tokenTypes:ce(this.tokensMap),errMsgProvider:cr,grammarName:n}),o=BO({lookaheadStrategy:this.lookaheadStrategy,rules:ce(this.gastProductionsCache),tokenTypes:ce(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,o)}}),K(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let i=JR(ce(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,o;(o=(i=this.lookaheadStrategy).initialize)===null||o===void 0||o.call(i,{rules:ce(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(ce(this.gastProductionsCache))})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!K(this.definitionErrors))throw e=_(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;let r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),z(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=z(n,"skipValidations")?n.skipValidations:dn.skipValidations}};vp.DEFER_DEFINITION_ERRORS_HANDLING=!1;lI(vp,[np,op,up,cp,hp,fp,dp,pp,mp,xp]);var PU=ut({name:"NewLine",pattern:/\n/}),_U=ut({name:"DirectoryStart",pattern:/\//}),DU=ut({name:"FileExtension",pattern:/\.(tsx|jsx|ts|js|json|css|scss|html|md|py|java|cpp|c|go|rs|rb|php|yaml|yml|xml|sql|sh|bash)/}),FU=ut({name:"Component",pattern:/%[a-zA-Z][a-zA-Z0-9_]*/}),BU=ut({name:"FunctionToken",pattern:/\$[a-zA-Z][a-zA-Z0-9_]*\(\)/}),zU=ut({name:"Reference",pattern:/@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*/}),UU=ut({name:"Variable",pattern:/var[a-zA-Z][a-zA-Z0-9_]*/}),VU=ut({name:"UserNote",pattern:/#/}),HU=ut({name:"StringLiteral",pattern:/"[^"]*"/}),WU=ut({name:"NumberLiteral",pattern:/\d+(\.\d+)?/}),jU=ut({name:"Equals",pattern:/=/}),GU=ut({name:"Identifier",pattern:/[a-zA-Z][a-zA-Z0-9_\-]*/}),$U=ut({name:"Content",pattern:/[^\n\r]+/}),KU=ut({name:"WhiteSpace",pattern:/[ \t]+/,group:Ke.SKIPPED}),qU=[KU,VU,HU,WU,FU,UU,zU,BU,DU,_U,jU,GU,$U,PU],aI=new Ke(qU);function YU(t){switch(t){case"DirectoryStart":return"cm-directoryStart";case"Reference":return"cm-reference";case"FunctionToken":return"cm-function";case"Component":return"cm-component";case"Variable":return"cm-variable";case"FileExtension":return"cm-fileExtension";case"Identifier":return"cm-identifier";case"Comment":return"cm-comment";case"StringLiteral":return"cm-string";case"NumberLiteral":return"cm-number";case"BooleanLiteral":return"cm-boolean";case"SuggestionPrefix":return"cm-suggestion-prefix";case"FeedbackPrefix":return"cm-feedback-prefix";case"UserNote":return"cm-user-note";case"ToolTrigger":return"cm-tool-trigger";case"Content":return"cm-content-token";default:return"cm-defaultToken"}}var XU=X.fromClass(class{constructor(t){this.decorations=this.buildDecorations(t.state.doc.toString())}update(t){t.docChanged&&(this.decorations=this.buildDecorations(t.state.doc.toString()))}buildDecorations(t){let e=t.split(`
`),n=[],r=0;for(let o=0;o<e.length;o++){let s=e[o];if(s.trim()){let a=aI.tokenize(s);for(let u of a.tokens){let c=YU(u.tokenType.name),f=I.mark({class:c}),h=r+u.startOffset,d=r+(u.endOffset??u.startOffset+u.image.length-1)+1;h!=null&&d!=null&&h<d&&n.push({from:h,to:d,decoration:f})}this.collectStructuralDecorations(n,s,r,o)}r+=s.length+1}n.sort((o,s)=>o.from-s.from);let i=new Re;for(let{from:o,to:s,decoration:l}of n)i.add(o,s,l);return i.finish()}collectStructuralDecorations(t,e,n,r){let i=e.match(/^(\s*)/),o=i?i[1]:"",s=Math.floor(o.length/2),l=e.trim();if(!l)return;if(this.isStructuralLine(l)&&s>0){let u=I.mark({class:"cm-structure-connection",attributes:{style:`--parent-indent: ${s-1};`}});t.push({from:n,to:n+e.length,decoration:u})}}isStructuralLine(t){return t.startsWith("/")&&!t.includes(".")||!!t.match(/^[a-zA-Z][a-zA-Z0-9_]*\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)||!!t.match(/^\$[a-zA-Z][a-zA-Z0-9_]*\(\)$/)||!!t.match(/^%[a-zA-Z][a-zA-Z0-9_]*$/)||t.startsWith("#")||!!t.match(/^@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*$/)}},{decorations:t=>t.decorations});function uI(){return XU}function ax(t){let e=t.match(/^(\s*)/);return e?Math.floor(e[1].length/2):0}function cI(t){let e=[],n=t.toString().split(`
`);for(let r=0;r<n.length;r++){let i=n[r],o=i.trim(),s=ax(i);if(!o)continue;let l=null;if(o.startsWith("/")&&!o.includes(".")?l="directory":o.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md|vue|py|java|cpp|c|go|rs|php|rb|swift|kt|dart)$/)?l="file":o.startsWith("%")?l="component":o.startsWith("$")&&o.includes("()")&&(l="function"),l){let a=ZU(n,r,s);if(a>r){let u=t.line(r+1).from,c=t.line(a+1).to;e.push({from:u,to:c,type:l,indentLevel:s})}}}return e}function ZU(t,e,n){let r=e;for(let i=e+1;i<t.length;i++){let o=t[i];if(!o.trim())continue;if(ax(o)<=n)break;r=i}return r}var hI=re.define({create(t){return cI(t.doc)},update(t,e){return e.docChanged?cI(e.state.doc):t}});function fI(t,e,n){let r=t.field(hI,!1);if(!r)return null;let o=t.doc.lineAt(e),s=o.text,l=s.trim(),a=ax(s);if(!(l.startsWith("/")&&!l.includes(".")||l.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md|vue|py|java|cpp|c|go|rs|php|rb|swift|kt|dart)$/)||l.startsWith("%")||l.startsWith("$")&&l.includes("()")))return null;let c=r.find(f=>f.from<=e&&f.to>=n&&f.indentLevel===a);return c&&c.to>c.from?{from:o.to,to:c.to}:null}function dI(){return[hI,By.of(fI),X.fromClass(class{constructor(t){this.view=t}update(t){}}),R.domEventHandlers({keydown(t,e){if(t.ctrlKey&&t.shiftKey&&t.key==="["){t.preventDefault();let{state:n}=e,{selection:r}=n,i=n.doc.lineAt(r.main.head),o=fI(n,i.from,i.to);return o&&e.dispatch({effects:nl.of(o)}),!0}if(t.ctrlKey&&t.shiftKey&&t.key==="]"){t.preventDefault();let{state:n}=e,{selection:r}=n,i=n.doc.lineAt(r.main.head);return e.dispatch({effects:qo.of({from:i.from,to:i.to})}),!0}return!1}})]}var ux=class extends He{constructor(n,r=0){super();this.iconType=n;this.level=r}toDOM(){let n=document.createElement("span");switch(n.className=`cm-file-structure-icon cm-${this.iconType}-icon`,n.style.marginLeft=`${this.level*16}px`,n.style.display="inline-block",n.style.width="16px",n.style.height="16px",n.style.marginRight="6px",n.style.verticalAlign="text-top",this.iconType){case"directory":n.innerHTML='<svg viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M853.333333 256H469.333333l-85.333333-85.333333H170.666667c-46.933333 0-85.333333 38.4-85.333334 85.333333v170.666667h853.333334v-85.333334c0-46.933333-38.4-85.333333-85.333334-85.333333z" fill="#FFA000"></path><path d="M853.333333 256H170.666667c-46.933333 0-85.333333 38.4-85.333334 85.333333v426.666667c0 46.933333 38.4 85.333333 85.333334 85.333333h682.666666c46.933333 0 85.333333-38.4 85.333334-85.333333V341.333333c0-46.933333-38.4-85.333333-85.333334-85.333333z" fill="#FFCA28"></path></g></svg>',n.style.color="#f59e0b";break;case"file-jsx":case"file-tsx":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M18.6789 15.9759C18.6789 14.5415 17.4796 13.3785 16 13.3785C14.5206 13.3785 13.3211 14.5415 13.3211 15.9759C13.3211 17.4105 14.5206 18.5734 16 18.5734C17.4796 18.5734 18.6789 17.4105 18.6789 15.9759Z" fill="#53C1DE"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M24.7004 11.1537C25.2661 8.92478 25.9772 4.79148 23.4704 3.39016C20.9753 1.99495 17.7284 4.66843 16.0139 6.27318C14.3044 4.68442 10.9663 2.02237 8.46163 3.42814C5.96751 4.82803 6.73664 8.8928 7.3149 11.1357C4.98831 11.7764 1 13.1564 1 15.9759C1 18.7874 4.98416 20.2888 7.29698 20.9289C6.71658 23.1842 5.98596 27.1909 8.48327 28.5877C10.9973 29.9932 14.325 27.3945 16.0554 25.7722C17.7809 27.3864 20.9966 30.0021 23.4922 28.6014C25.9956 27.1963 25.3436 23.1184 24.7653 20.8625C27.0073 20.221 31 18.7523 31 15.9759C31 13.1835 26.9903 11.7923 24.7004 11.1537ZM24.4162 19.667C24.0365 18.5016 23.524 17.2623 22.8971 15.9821C23.4955 14.7321 23.9881 13.5088 24.3572 12.3509C26.0359 12.8228 29.7185 13.9013 29.7185 15.9759C29.7185 18.07 26.1846 19.1587 24.4162 19.667ZM22.85 27.526C20.988 28.571 18.2221 26.0696 16.9478 24.8809C17.7932 23.9844 18.638 22.9422 19.4625 21.7849C20.9129 21.6602 22.283 21.4562 23.5256 21.1777C23.9326 22.7734 24.7202 26.4763 22.85 27.526ZM9.12362 27.5111C7.26143 26.47 8.11258 22.8946 8.53957 21.2333C9.76834 21.4969 11.1286 21.6865 12.5824 21.8008C13.4123 22.9332 14.2816 23.9741 15.1576 24.8857C14.0753 25.9008 10.9945 28.557 9.12362 27.5111ZM2.28149 15.9759C2.28149 13.874 5.94207 12.8033 7.65904 12.3326C8.03451 13.5165 8.52695 14.7544 9.12123 16.0062C8.51925 17.2766 8.01977 18.5341 7.64085 19.732C6.00369 19.2776 2.28149 18.0791 2.28149 15.9759ZM9.1037 4.50354C10.9735 3.45416 13.8747 6.00983 15.1159 7.16013C14.2444 8.06754 13.3831 9.1006 12.5603 10.2265C11.1494 10.3533 9.79875 10.5569 8.55709 10.8297C8.09125 9.02071 7.23592 5.55179 9.1037 4.50354ZM20.3793 11.5771C21.3365 11.6942 22.2536 11.85 23.1147 12.0406C22.8562 12.844 22.534 13.6841 22.1545 14.5453C21.6044 13.5333 21.0139 12.5416 20.3793 11.5771ZM16.0143 8.0481C16.6054 8.66897 17.1974 9.3623 17.7798 10.1145C16.5985 10.0603 15.4153 10.0601 14.234 10.1137C14.8169 9.36848 15.414 8.67618 16.0143 8.0481ZM9.8565 14.5444C9.48329 13.6862 9.16398 12.8424 8.90322 12.0275C9.75918 11.8418 10.672 11.69 11.623 11.5748C10.9866 12.5372 10.3971 13.5285 9.8565 14.5444ZM11.6503 20.4657C10.6679 20.3594 9.74126 20.2153 8.88556 20.0347C9.15044 19.2055 9.47678 18.3435 9.85796 17.4668C10.406 18.4933 11.0045 19.4942 11.6503 20.4657ZM16.0498 23.9915C15.4424 23.356 14.8365 22.6531 14.2448 21.8971C15.4328 21.9423 16.6231 21.9424 17.811 21.891C17.2268 22.6608 16.6369 23.3647 16.0498 23.9915ZM22.1667 17.4222C22.5677 18.3084 22.9057 19.1657 23.1742 19.9809C22.3043 20.1734 21.3652 20.3284 20.3757 20.4435C21.015 19.4607 21.6149 18.4536 22.1667 17.4222ZM18.7473 20.5941C16.9301 20.72 15.1016 20.7186 13.2838 20.6044C12.2509 19.1415 11.3314 17.603 10.5377 16.0058C11.3276 14.4119 12.2404 12.8764 13.2684 11.4158C15.0875 11.2825 16.9178 11.2821 18.7369 11.4166C19.7561 12.8771 20.6675 14.4086 21.4757 15.9881C20.6771 17.5812 19.7595 19.1198 18.7473 20.5941ZM22.8303 4.4666C24.7006 5.51254 23.8681 9.22726 23.4595 10.8426C22.2149 10.5641 20.8633 10.3569 19.4483 10.2281C18.6239 9.09004 17.7698 8.05518 16.9124 7.15949C18.1695 5.98441 20.9781 3.43089 22.8303 4.4666Z" fill="#53C1DE"></path> </g></svg>',n.style.color="#3b82f6";break;case"file-js":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_js</title><path d="M18.774,19.7a3.727,3.727,0,0,0,3.376,2.078c1.418,0,2.324-.709,2.324-1.688,0-1.173-.931-1.589-2.491-2.272l-.856-.367c-2.469-1.052-4.11-2.37-4.11-5.156,0-2.567,1.956-4.52,5.012-4.52A5.058,5.058,0,0,1,26.9,10.52l-2.665,1.711a2.327,2.327,0,0,0-2.2-1.467,1.489,1.489,0,0,0-1.638,1.467c0,1.027.636,1.442,2.1,2.078l.856.366c2.908,1.247,4.549,2.518,4.549,5.376,0,3.081-2.42,4.769-5.671,4.769a6.575,6.575,0,0,1-6.236-3.5ZM6.686,20c.538.954,1.027,1.76,2.2,1.76,1.124,0,1.834-.44,1.834-2.15V7.975h3.422V19.658c0,3.543-2.078,5.156-5.11,5.156A5.312,5.312,0,0,1,3.9,21.688Z" style="fill:#f5de19"></path></g></svg>',n.style.color="#f59e0b";break;case"file-ts":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_typescript</title><path d="M23.827,8.243A4.424,4.424,0,0,1,26.05,9.524a5.853,5.853,0,0,1,.852,1.143c.011.045-1.534,1.083-2.471,1.662-.034.023-.169-.124-.322-.35a2.014,2.014,0,0,0-1.67-1c-1.077-.074-1.771.49-1.766,1.433a1.3,1.3,0,0,0,.153.666c.237.49.677.784,2.059,1.383,2.544,1.095,3.636,1.817,4.31,2.843a5.158,5.158,0,0,1,.416,4.333,4.764,4.764,0,0,1-3.932,2.815,10.9,10.9,0,0,1-2.708-.028,6.531,6.531,0,0,1-3.616-1.884,6.278,6.278,0,0,1-.926-1.371,2.655,2.655,0,0,1,.327-.208c.158-.09.756-.434,1.32-.761L19.1,19.6l.214.312a4.771,4.771,0,0,0,1.35,1.292,3.3,3.3,0,0,0,3.458-.175,1.545,1.545,0,0,0,.2-1.974c-.276-.395-.84-.727-2.443-1.422a8.8,8.8,0,0,1-3.349-2.055,4.687,4.687,0,0,1-.976-1.777,7.116,7.116,0,0,1-.062-2.268,4.332,4.332,0,0,1,3.644-3.374A9,9,0,0,1,23.827,8.243ZM15.484,9.726l.011,1.454h-4.63V24.328H7.6V11.183H2.97V9.755A13.986,13.986,0,0,1,3.01,8.289c.017-.023,2.832-.034,6.245-.028l6.211.017Z" style="fill:#007acc"></path></g></svg>';break;case"file-css":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 28L4 3H28L26 28L16 31L6 28Z" fill="#1172B8"></path> <path d="M26 5H16V29.5L24 27L26 5Z" fill="#33AADD"></path> <path d="M19.5 17.5H9.5L9 14L17 11.5H9L8.5 8.5H24L23.5 12L17 14.5H23L22 24L16 26L10 24L9.5 19H12.5L13 21.5L16 22.5L19 21.5L19.5 17.5Z" fill="white"></path> </g></svg>',n.style.color="#1172B8";break;case"file-html":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 28L4 3H28L26 28L16 31L6 28Z" fill="#E44D26"></path> <path d="M26 5H16V29.5L24 27L26 5Z" fill="#F16529"></path> <path d="M9.5 17.5L8.5 8H24L23.5 11H11.5L12 14.5H23L22 24L16 26L10 24L9.5 19H12.5L13 21.5L16 22.5L19 21.5L19.5 17.5H9.5Z" fill="white"></path> </g></svg>',n.style.color="#F16529";break;case"file-md":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_markdown</title><rect x="2.5" y="7.955" width="27" height="16.091" style="fill:none;stroke:#755838"></rect><polygon points="5.909 20.636 5.909 11.364 8.636 11.364 11.364 14.773 14.091 11.364 16.818 11.364 16.818 20.636 14.091 20.636 14.091 15.318 11.364 18.727 8.636 15.318 8.636 20.636 5.909 20.636" style="fill:#755838"></polygon><polygon points="22.955 20.636 18.864 16.136 21.591 16.136 21.591 11.364 24.318 11.364 24.318 16.136 27.045 16.136 22.955 20.636" style="fill:#755838"></polygon></g></svg>',n.style.color="#3b82f6";break;case"file-json":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_json</title><path d="M4.014,14.976a2.51,2.51,0,0,0,1.567-.518A2.377,2.377,0,0,0,6.386,13.1,15.261,15.261,0,0,0,6.6,10.156q.012-2.085.075-2.747a5.236,5.236,0,0,1,.418-1.686,3.025,3.025,0,0,1,.755-1.018A3.046,3.046,0,0,1,9,4.125,6.762,6.762,0,0,1,10.544,4h.7V5.96h-.387a2.338,2.338,0,0,0-1.723.468A3.4,3.4,0,0,0,8.709,8.52a36.054,36.054,0,0,1-.137,4.133,4.734,4.734,0,0,1-.768,2.06A4.567,4.567,0,0,1,6.1,16a3.809,3.809,0,0,1,1.992,1.754,8.861,8.861,0,0,1,.618,3.865q0,2.435.05,2.9A1.755,1.755,0,0,0,9.264,25.7a2.639,2.639,0,0,0,1.592.337h.387V28h-.7a5.655,5.655,0,0,1-1.773-.2,2.97,2.97,0,0,1-1.324-.93,3.353,3.353,0,0,1-.681-1.63A24.175,24.175,0,0,1,6.6,22.006,16.469,16.469,0,0,0,6.386,18.9a2.408,2.408,0,0,0-.805-1.361,2.489,2.489,0,0,0-1.567-.524Z" style="fill:#f5de19"></path><path d="M27.986,17.011a2.489,2.489,0,0,0-1.567.524,2.408,2.408,0,0,0-.805,1.361,16.469,16.469,0,0,0-.212,3.109,24.175,24.175,0,0,1-.169,3.234,3.353,3.353,0,0,1-.681,1.63,2.97,2.97,0,0,1-1.324.93,5.655,5.655,0,0,1-1.773.2h-.7V26.04h.387a2.639,2.639,0,0,0,1.592-.337,1.755,1.755,0,0,0,.506-1.186q.05-.462.05-2.9a8.861,8.861,0,0,1,.618-3.865A3.809,3.809,0,0,1,25.9,16a4.567,4.567,0,0,1-1.7-1.286,4.734,4.734,0,0,1-.768-2.06,36.054,36.054,0,0,1-.137-4.133,3.4,3.4,0,0,0-.425-2.092,2.338,2.338,0,0,0-1.723-.468h-.387V4h.7A6.762,6.762,0,0,1,23,4.125a3.046,3.046,0,0,1,1.149.581,3.025,3.025,0,0,1,.755,1.018,5.236,5.236,0,0,1,.418,1.686q.062.662.075,2.747a15.261,15.261,0,0,0,.212,2.947,2.377,2.377,0,0,0,.805,1.355,2.51,2.51,0,0,0,1.567.518Z" style="fill:#f5de19"></path></g></svg>',n.style.color="#3b82f6";break;case"function":n.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.576"></g><g id="SVGRepo_iconCarrier"> <path d="M13.5 4.50012C10.5 3.50012 9.5 7.00012 9.5 7.00012L7 16.0001C7 16.0001 5.5 20.0001 2.5 19.0001M5.5 9.00007H14L16 15.0001C16 15.0001 17 17.0001 18.5 15.5001M11 15.5C13.5 16.5 16.5 8.50001 19 9.00001" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',n.style.color="#10b981";break;case"component":n.innerHTML='<svg viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>function-block</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Combined-Shape" fill="#8b5cf6"> <path d="M362.666667,85.3333333 L362.666333,234.666333 L426.666667,234.666667 L426.666667,277.333333 L362.666333,277.333333 L362.666667,426.666667 L149.333333,426.666667 L149.333333,341.333333 L85.3333333,341.333333 L85.3333333,298.666667 L149.333333,298.666333 L149.333333,213.333333 L85.3333333,213.333333 L85.3333333,170.666667 L149.333333,170.666333 L149.333333,85.3333333 L362.666667,85.3333333 Z M320,128 L192,128 L192,384 L320,384 L320,128 Z"> </path> </g> </g> </g></svg>',n.style.color="#8b5cf6";break;case"reference":n.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M13.0607 8.11097L14.4749 9.52518C17.2086 12.2589 17.2086 16.691 14.4749 19.4247L14.1214 19.7782C11.3877 22.5119 6.95555 22.5119 4.22188 19.7782C1.48821 17.0446 1.48821 12.6124 4.22188 9.87874L5.6361 11.293C3.68348 13.2456 3.68348 16.4114 5.6361 18.364C7.58872 20.3166 10.7545 20.3166 12.7071 18.364L13.0607 18.0104C15.0133 16.0578 15.0133 12.892 13.0607 10.9394L11.6465 9.52518L13.0607 8.11097Z" fill="#f59e0b"></path> <path d="M10.9393 15.8891L9.52513 14.4749C6.79146 11.7412 6.79146 7.309 9.52513 4.57534L9.87868 4.22179C12.6124 1.48812 17.0445 1.48812 19.7782 4.22179C22.5119 6.95546 22.5119 11.3876 19.7782 14.1213L18.364 12.7071C20.3166 10.7544 20.3166 7.58861 18.364 5.63599C16.4114 3.68337 13.2456 3.68337 11.293 5.63599L10.9393 5.98954C8.98670 7.94216 8.98670 11.1080 10.9393 13.0606L12.3535 14.4749L10.9393 15.8891Z" fill="#f59e0b"></path> </g></svg>',n.style.color="#f59e0b";break;case"user_note":n.innerHTML='<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" fill="#000000" transform="matrix(-1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>comment-3</title> <desc>Created with Sketch Beta.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="Icon-Set" sketch:type="MSLayerGroup" transform="translate(-204.000000, -255.000000)" fill="#000000"> <path d="M228,267 C226.896,267 226,267.896 226,269 C226,270.104 226.896,271 228,271 C229.104,271 230,270.104 230,269 C230,267.896 229.104,267 228,267 L228,267 Z M220,281 C218.832,281 217.704,280.864 216.62,280.633 L211.912,283.463 L211.975,278.824 C208.366,276.654 206,273.066 206,269 C206,262.373 212.268,257 220,257 C227.732,257 234,262.373 234,269 C234,275.628 227.732,281 220,281 L220,281 Z M220,255 C211.164,255 204,261.269 204,269 C204,273.419 206.345,277.354 210,279.919 L210,287 L217.009,282.747 C217.979,282.907 218.977,283 220,283 C228.836,283 236,276.732 236,269 C236,261.269 228.836,255 220,255 L220,255 Z M212,267 C210.896,267 210,267.896 210,269 C210,270.104 210.896,271 212,271 C213.104,271 214,270.104 214,269 C214,267.896 213.104,267 212,267 L212,267 Z M220,267 C218.896,267 218,267.896 218,269 C218,270.104 218.896,271 220,271 C221.104,271 222,270.104 222,269 C222,267.896 221.104,267 220,267 L220,267 Z" id="comment-3" sketch:type="MSShapeGroup"> </path> </g> </g> </g></svg>',n.style.color="#6b7280";break;default:n.innerHTML="",n.style.color="#6b7280"}return n}};function QU(t){let e=t.match(/^(\s*)/);return e?Math.floor(e[1].length/2):0}function JU(t){let e=t.toLowerCase();return e.includes(".ts")||e.includes(".tsx")?"file-ts":e.includes(".js")||e.includes(".jsx")?"file-js":e.includes(".css")||e.includes(".scss")?"file-css":e.includes(".html")?"file-html":e.includes(".md")?"file-md":e.includes(".json")?"file-json":e.includes(".txt")?"file-txt":e.includes(".yml")?"file-yml":e.includes(".yaml")?"file-yaml":"file"}function eV(t,e){let n=[],r=t.trim(),i=QU(t);if(!r)return n;let o="",s=!1;if(r.startsWith("/")&&!r.includes("."))o="directory",s=!0;else if(r.match(/^[a-zA-Z][a-zA-Z0-9_]*\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)){let l=r.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)?.[0]||"";o=JU(l),s=!0}else r.match(/^\$[a-zA-Z][a-zA-Z0-9_]*\(\)$/)?(o="function",s=!0):r.match(/^%[a-zA-Z][a-zA-Z0-9_]*$/)?(o="component",s=!0):r.startsWith("#")?(o="user_note",s=!0):r.match(/^@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*$/)&&(o="reference",s=!0);if(s){let l=I.widget({widget:new ux(o,i),side:-1}),a=t.match(/^(\s*)/),u=a?a[1].length:0;n.push(l)}return n}var tV=X.fromClass(class{constructor(t){this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){let e=new Re,n=t.state.doc;for(let r=1;r<=n.lines;r++){let i=n.line(r),o=eV(i.text,r);for(let s of o){let l=i.text.match(/^(\s*)/),a=l?l[1].length:0,u=i.from+a;e.add(u,u,s)}}return e.finish()}},{decorations:t=>t.decorations});function pI(){return tV}var gI=H.define(),yI=H.define(),fx=H.define(),hx=H.define(),xI=re.define({create(){return[]},update(t,e){for(let n of e.effects){if(n.is(gI))return n.value.map((r,i)=>({...r,id:r.id||`change-${Date.now()}-${i}`}));if(n.is(yI)){let r=n.value.map((o,s)=>({...o,id:o.id||`change-${Date.now()}-${s}`})),i=new Map(t.map(o=>[`${o.element.type}:${o.element.name}`,o]));return r.forEach(o=>i.set(`${o.element.type}:${o.element.name}`,o)),Array.from(i.values())}if(n.is(fx))return[];if(n.is(hx))return console.log("rejecting change",t.find(r=>r.id===n.value.changeId)),t.filter(r=>r.id!==n.value.changeId)}return t}}),nV=I.line({class:"cm-feedbackAddedLine",attributes:{"data-feedback-type":"added"}}),rV=I.line({class:"cm-feedbackModifiedLine",attributes:{"data-feedback-type":"modified"}}),iV=new class extends Tt{constructor(){super(...arguments);this.elementClass="cm-feedbackAddedGutter"}},oV=new class extends Tt{constructor(){super(...arguments);this.elementClass="cm-feedbackModifiedGutter"}},sV=new class extends Tt{constructor(){super(...arguments);this.elementClass="cm-feedbackRemovedGutter"}},cx=class extends He{constructor(n,r,i,o){super();this.content=n;this.elementName=r;this.changeId=i;this.view=o}toDOM(n){let r=document.createElement("div");r.className="cm-feedbackDeletedChunk";let i=r.appendChild(document.createElement("div"));i.className="cm-feedbackButtonContainer";let o=i.appendChild(document.createElement("button"));if(o.className="cm-feedbackRejectButton",o.textContent="\u2715",o.title="Restore this content",o.onclick=s=>{s.preventDefault(),s.stopPropagation(),console.log("rejecting change",this.changeId),this.view.dispatch({effects:hx.of({changeId:this.changeId})}),window.dispatchEvent(new CustomEvent("feedbackChangeRejected",{detail:{changeId:this.changeId,type:"remove",content:this.content,elementName:this.elementName}}))},this.content.trim()){let s=r.appendChild(document.createElement("div"));s.className="cm-feedbackDeletedContent",this.content.split(`
`).forEach((a,u)=>{u>0&&s.appendChild(document.createElement("br"));let c=s.appendChild(document.createElement("del"));c.className="cm-feedbackDeletedText",c.textContent=a})}return r}get estimatedHeight(){let n=this.content.split(`
`).length;return Math.max(40,n*20+30)}},Sp=class extends He{constructor(n,r,i,o){super();this.changeType=n;this.changeId=r;this.view=i;this.originalContent=o}toDOM(n){let r=document.createElement("div");r.className="cm-feedbackHoverButton";let i=r.appendChild(document.createElement("button"));return i.className="cm-feedbackRejectButton",i.textContent=this.changeType==="add"?"\u2715":"\u21B6",i.title=this.changeType==="add"?"Remove this addition":"Revert this change",i.onclick=o=>{o.preventDefault(),o.stopPropagation(),this.view.dispatch({effects:hx.of({changeId:this.changeId})}),window.dispatchEvent(new CustomEvent("feedbackChangeRejected",{detail:{changeId:this.changeId,type:this.changeType,originalContent:this.originalContent}}))},r}get estimatedHeight(){return 0}};function lV(t,e){let n=t.toString().split(`
`);if(e.lineNumber&&e.lineNumber>0&&e.lineNumber<=n.length)return e.lineNumber;let r=e.element,i=[];switch(r.type){case"component":i.push(`%${r.name}`);break;case"function":i.push(`$${r.name}()`);break;case"file":if(i.push(r.name),r.path){let o=r.path.split("/"),s=o[o.length-1];s!==r.name&&i.push(s)}break;case"directory":if(i.push(`/${r.name}`),r.path){let o=r.path.split("/").pop();o&&o!==r.name&&i.push(`/${o}`)}break;case"reference":i.push(`@${r.name}`),r.path&&i.push(`@${r.path}`);break;default:i.push(r.name)}if(e.indentLevel!==void 0){for(let o=0;o<n.length;o++){let s=n[o],l=s.match(/^(\s*)/)?.[1]||"",a=s.trim();if(Math.floor(l.length/2)===e.indentLevel){for(let c of i)if(a===c)return o+1}}for(let o=0;o<n.length;o++){let s=n[o],l=s.match(/^(\s*)/)?.[1]||"",a=s.trim();if(Math.floor(l.length/2)===e.indentLevel){for(let c of i)if(a.includes(c))return o+1}}}for(let o=0;o<n.length;o++){let s=n[o].trim();for(let l of i)if(s===l)return o+1}for(let o=0;o<n.length;o++){let s=n[o].trim();for(let l of i)if(s.includes(l))return o+1}return-1}function mI(t){let e=t.state.field(xI),n=t.state.doc,r=new Re,i=new Re,o=new Map;for(let u of e){let c=lV(n,u);c>0&&(o.has(c)||o.set(c,[]),o.get(c).push(u))}let s=Array.from(o.keys()).sort((u,c)=>u-c);for(let u of s){let c=o.get(u),f;u<=n.lines?f=n.line(u):f=n.line(n.lines);let d=c.sort((m,x)=>{let v={remove:3,modify:2,add:1};return(v[x.type]||0)-(v[m.type]||0)})[0];switch(d.type){case"add":r.add(f.from,f.from,nV),i.add(f.from,f.from,iV);let m=I.widget({widget:new Sp("add",d.id||"unknown",t),side:1});r.add(f.to,f.to,m);break;case"modify":r.add(f.from,f.from,rV),i.add(f.from,f.from,oV);let x=I.widget({widget:new Sp("modify",d.id||"unknown",t,d.originalContent),side:1});r.add(f.to,f.to,x);break;case"remove":let v=I.widget({widget:new cx(d.content||"",d.element.name,d.id||"unknown",t),side:1});r.add(f.from,f.from,v),i.add(f.from,f.from,sV);break}}let l=r.finish(),a=i.finish();return{deco:l,gutter:a}}var vI=X.fromClass(class{constructor(t){let e=mI(t);this.deco=e.deco,this.gutter=e.gutter}update(t){if(t.transactions.some(n=>n.effects.some(r=>r.is(gI)||r.is(fx)))){let n=mI(t.view);this.deco=n.deco,this.gutter=n.gutter}else t.docChanged&&(this.deco=this.deco.map(t.changes),this.gutter=this.gutter.map(t.changes))}},{decorations:t=>t.deco}),aV=Cn.low(cu({class:"cm-feedbackGutter",markers:t=>t.plugin(vI)?.gutter||te.empty})),uV=R.baseTheme({".cm-feedbackAddedLine":{backgroundColor:"rgba(34, 187, 34, 0.15)",paddingLeft:"4px",position:"relative"},".cm-feedbackModifiedLine":{backgroundColor:"rgba(255, 165, 0, 0.15)",borderLeft:"3px solid rgba(255, 165, 0, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackRemovedLine":{backgroundColor:"rgba(238, 68, 51, 0.1)"},".cm-feedbackDeletedChunk":{backgroundColor:"rgba(238, 68, 51, 0.05)",border:"1px solid rgba(238, 68, 51, 0.2)",borderRadius:"4px",position:"relative"},".cm-feedbackDeletedContent":{fontFamily:"monospace",fontSize:"0.9em",lineHeight:"1.4"},".cm-feedbackDeletedText":{textDecoration:"line-through",color:"#666",opacity:.8},".cm-feedbackGutter":{width:"4px",paddingLeft:"1px"},".cm-feedbackAddedGutter":{background:"#22bb22",borderRadius:"2px"},".cm-feedbackModifiedGutter":{background:"#ffa500",borderRadius:"2px"},".cm-feedbackRemovedGutter":{background:"#ee4433",borderRadius:"2px"},".cm-feedbackHoverButton":{display:"inline-block",marginLeft:"8px",opacity:"0",transition:"opacity 0.2s ease",pointerEvents:"none",position:"relative",zIndex:"10"},".cm-line:hover .cm-feedbackHoverButton":{opacity:"1",pointerEvents:"auto"},".cm-feedbackAddedLine:hover .cm-feedbackHoverButton, .cm-feedbackModifiedLine:hover .cm-feedbackHoverButton":{opacity:"1",pointerEvents:"auto"},".cm-feedbackRejectButton":{background:"rgba(238, 68, 51, 0.8)",color:"white",border:"none",borderRadius:"3px",padding:"2px 6px",fontSize:"12px",cursor:"pointer",fontWeight:"bold",transition:"background-color 0.2s ease"},".cm-feedbackRejectButton:hover":{background:"rgba(238, 68, 51, 1)"},".cm-feedbackButtonContainer":{position:"absolute",right:"8px",top:"4px",zIndex:"10"},"&dark .cm-feedbackAddedLine":{backgroundColor:"rgba(34, 187, 34, 0.2)"},"&dark .cm-feedbackModifiedLine":{backgroundColor:"rgba(255, 165, 0, 0.2)",borderLeft:"3px solid rgba(255, 165, 0, 0.8)"},"&dark .cm-feedbackRemovedLine":{backgroundColor:"rgba(238, 68, 51, 0.15)"},"&dark .cm-feedbackDeletedChunk":{backgroundColor:"rgba(238, 68, 51, 0.08)",border:"1px solid rgba(238, 68, 51, 0.3)"},"&dark .cm-feedbackDeletedHeader":{color:"#ff6655"},"&dark .cm-feedbackDeletedText":{color:"#999"},"&dark .cm-feedbackAddedGutter":{background:"#44dd44"},"&dark .cm-feedbackModifiedGutter":{background:"#ffbb33"},"&dark .cm-feedbackRemovedGutter":{background:"#ff6655"},"&dark .cm-feedbackRejectButton":{background:"rgba(255, 102, 85, 0.8)"},"&dark .cm-feedbackRejectButton:hover":{background:"rgba(255, 102, 85, 1)"}});function SI(){return[xI,vI,aV,uV]}function dx(t,e){t.dispatch({effects:yI.of(e)})}function tc(t){t.dispatch({effects:fx.of()})}var gx=H.define(),yx=H.define(),wI=H.define(),wp=re.define({create(){return[]},update(t,e){for(let n of e.effects){if(n.is(gx))return n.value;if(n.is(yx))return[];if(n.is(wI))return t.filter(r=>r.id!==n.value)}return e.docChanged?[]:t}});function xx(t){return!Number.isFinite(t)||t<0?0:Math.min(t,8)}function kp(t,e){let n=t.state.doc,r=Math.min(e.insertLine,n.lines),o=n.line(r).to,l=`
${"  ".repeat(xx(e.indentLevel))}${e.syntax}`;t.dispatch({changes:{from:o,insert:l},effects:wI.of(e.id)})}function kI(t,e){if(e.length===0)return I.none;let n=new Re,r=t.state.doc,i=Math.max(1,r.lines);for(let o of e){let s=o.insertLine>=1&&o.insertLine<=r.lines,l=s?o.insertLine:i,a=r.line(Math.max(1,l)),c=o.insertLine>r.lines||r.length===0?r.length:a.to;s&&n.add(a.from,a.from,I.line({class:"cm-feedforwardLine",attributes:{"data-feedforward-id":o.id}})),n.add(c,c,I.widget({widget:new mx(o),side:1,block:!0}))}return n.finish()}var mx=class extends He{constructor(e){super(),this.entry=e}toDOM(e){let n=document.createElement("div");n.className="cm-feedforwardSuggestion",n.setAttribute("data-suggestion-id",this.entry.id),this.entry.reason&&(n.title=this.entry.reason);let r=document.createElement("button");r.className="cm-feedforwardAcceptButton",r.textContent="\u2713",r.title="Accept suggestion (Tab or Ctrl+\u2193)",r.onclick=o=>{o.preventDefault(),o.stopPropagation(),kp(e,this.entry)},n.appendChild(r);let i=document.createElement("pre");if(i.className="cm-feedforwardSuggestionCode",i.textContent=`${"  ".repeat(xx(this.entry.indentLevel))}${this.entry.syntax}`,n.appendChild(i),this.entry.reason){let o=document.createElement("div");o.className="cm-feedforwardSuggestionReason",o.textContent=this.entry.reason,n.appendChild(o)}return n}eq(e){return this.entry.id===e.entry.id&&this.entry.syntax===e.entry.syntax&&this.entry.reason===e.entry.reason&&this.entry.indentLevel===e.entry.indentLevel&&this.entry.insertLine===e.entry.insertLine}ignoreEvent(){return!1}get estimatedHeight(){return this.entry.reason?50:34}},cV=X.fromClass(class{constructor(t){this.decorations=kI(t,t.state.field(wp))}update(t){(t.docChanged||t.transactions.some(e=>e.effects.some(n=>n.is(gx)||n.is(yx))))&&(this.decorations=kI(t.view,t.state.field(wp)))}},{decorations:t=>t.decorations}),fV=R.baseTheme({".cm-feedforwardLine":{backgroundColor:"rgba(14, 165, 233, 0.08)"},".cm-feedforwardSuggestion":{margin:"4px 0",padding:"6px 10px",paddingRight:"40px",borderRadius:"4px",borderLeft:"3px solid rgba(14, 165, 233, 0.45)",backgroundColor:"rgba(14, 165, 233, 0.1)",fontFamily:"inherit",fontSize:"0.95em",lineHeight:"1.4",color:"inherit",position:"relative"},".cm-feedforwardAcceptButton":{position:"absolute",top:"6px",right:"8px",padding:"4px 8px",backgroundColor:"rgba(34, 197, 94, 0.8)",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px",fontWeight:"bold",transition:"background-color 0.2s ease",zIndex:"10"},".cm-feedforwardAcceptButton:hover":{backgroundColor:"rgba(34, 197, 94, 1)"},".cm-feedforwardSuggestionCode":{margin:"0",whiteSpace:"pre",fontFamily:"inherit"},".cm-feedforwardSuggestionReason":{marginTop:"4px",fontSize:"0.75rem",opacity:"0.75"},"&dark .cm-feedforwardLine":{backgroundColor:"rgba(56, 189, 248, 0.12)"},"&dark .cm-feedforwardSuggestion":{backgroundColor:"rgba(56, 189, 248, 0.12)",borderLeft:"3px solid rgba(56, 189, 248, 0.6)"},"&dark .cm-feedforwardAcceptButton":{backgroundColor:"rgba(74, 222, 128, 0.8)"},"&dark .cm-feedforwardAcceptButton:hover":{backgroundColor:"rgba(74, 222, 128, 1)"}});function px(t){let e=t.state.field(wp);if(e.length===0)return null;let n=t.state.selection.main.head,r=t.state.doc.lineAt(n).number,i=null,o=1/0;for(let s of e){let l=Math.abs(s.insertLine-r);(l<o||l===o&&s.insertLine>=r)&&(o=l,i=s)}return i}var hV=ri.of([{key:"Tab",run:t=>{let e=px(t);return e?(kp(t,e),!0):!1}},{key:"Ctrl-ArrowDown",run:t=>{let e=px(t);return e?(kp(t,e),!0):!1}},{key:"Cmd-ArrowDown",run:t=>{let e=px(t);return e?(kp(t,e),!0):!1}}]);function CI(){return[wp,cV,fV,hV]}function EI(t,e){let n=e.map((r,i)=>({id:`${r.codocSyntax}-${r.insertLine}-${i}`,syntax:r.codocSyntax.trim(),reason:r.reason??"",insertLine:Number.isFinite(r.insertLine)?r.insertLine:t.state.doc.lines+1,indentLevel:xx(r.indentLevel??0)}));t.dispatch({effects:gx.of(n)})}function bI(t){t.dispatch({effects:yx.of()})}var vx=H.define(),OI=re.define({create(){return{nodes:{},edges:[]}},update(t,e){for(let n of e.effects)if(n.is(vx))return n.value;return t}});function TI(t,e){if(e<1||e>t.lines)return{type:null,name:null};let r=t.line(e).text.trim();return r.startsWith("%")?{type:"component",name:r.substring(1)}:r.startsWith("$")&&r.includes("()")?{type:"function",name:r.substring(1,r.indexOf("()"))}:r.match(/^\w+\.\w+$/)?{type:"file",name:r}:r.startsWith("/")?{type:"directory",name:r.substring(1)}:{type:null,name:null}}function AI(t,e,n){for(let r=e;r>=1;r--){let o=t.line(r).text.trim();if(o.match(/^\w+\.\w+$/)){for(let s of Object.keys(n.nodes))if(n.nodes[s].type==="file"&&s.endsWith(o))return s;return o}}return null}function dV(t,e,n,r){let i=new Set,o=n?`${n}:${t}`:t;i.add(o);let s=r.nodes[o];if(!s){for(let[a,u]of Object.entries(r.nodes))if(u.name===t&&u.type===e){i.add(a),u.upstream.forEach(c=>i.add(c)),u.downstream.forEach(c=>i.add(c));break}return i}s.upstream.forEach(a=>i.add(a)),s.downstream.forEach(a=>i.add(a));let l=(a,u)=>{if(u>2)return;let c=r.nodes[a];c&&(c.upstream.forEach(f=>{i.has(f)||(i.add(f),l(f,u+1))}),c.downstream.forEach(f=>{i.has(f)||(i.add(f),l(f,u+1))}))};if(l(o,1),n&&(e==="function"||e==="component")){i.add(n);let a=n.split("/");for(let u=1;u<a.length;u++)i.add(a.slice(0,u).join("/"))}return i}function RI(t){let e=t.state.doc,n=t.state.field(OI),r=t.state.selection.main.head,i=e.lineAt(r).number,o=TI(e,i);if(!o.type||!o.name)return I.none;if(Object.keys(n.nodes).length===0)return I.none;let s=AI(e,i,n),l=dV(o.name,o.type,s,n);console.log("=== Dependency Highlighting Debug ==="),console.log("Graph nodes count:",Object.keys(n.nodes).length),console.log("Graph edges count:",n.edges.length),console.log("Current Element:",o),console.log("Current File Path (full):",s),console.log("Related IDs for highlighting:",Array.from(l)),console.log("Sample graph nodes:",Object.keys(n.nodes).slice(0,10));let a=new Re,u=0,c=0;for(let f=1;f<=e.lines;f++){let h=e.line(f),d=TI(e,f);if(!d.type||!d.name)continue;let m=!1,x=AI(e,f,n),v=[x?`${x}:${d.name}`:d.name,x||"",d.name];for(let p of v)if(p&&l.has(p)){m=!0,c++;break}!m&&f!==i&&(a.add(h.from,h.from,I.line({class:"cm-dimmedLine",attributes:{"data-dependency-dimmed":"true"}})),u++)}return console.log(`Applied decorations: ${c} related, ${u} dimmed`),console.log("First few relatedIds:",Array.from(l).slice(0,5)),a.finish()}var pV=X.fromClass(class{constructor(t){this.decorations=RI(t)}update(t){(t.selectionSet||t.transactions.some(e=>e.effects.some(n=>n.is(vx))))&&(this.decorations=RI(t.view))}},{decorations:t=>t.decorations}),mV=R.baseTheme({".cm-dimmedLine":{opacity:"0.6",transition:"opacity 0.2s ease"}});function II(){return[OI,pV,mV]}function Sx(t,e){console.log("=== Setting Dependency Graph ==="),console.log("Nodes count:",Object.keys(e.nodes).length),console.log("Edges count:",e.edges.length),console.log("Sample nodes:",Object.keys(e.nodes).slice(0,10)),console.log("Sample edges:",e.edges.slice(0,5)),t.dispatch({effects:vx.of(e)})}var fo=hr(al()),nc=acquireVsCodeApi(),MI=()=>{let[t,e]=(0,Rt.useState)(""),[n,r]=(0,Rt.useState)([]),[i,o]=(0,Rt.useState)([]),[s,l]=(0,Rt.useState)(null),a=(0,Rt.useRef)(null),u=()=>a.current?.view??null;(0,Rt.useEffect)(()=>{let x=v=>{let p=v.data,g=u();switch(p.type){case"contentUpdate":e(p.content);break;case"codebaseScanned":if(r(p.parsedSchema||[]),o(p.snapshot?.files||[]),p.snapshot?.dependencyGraph){l(p.snapshot.dependencyGraph);let y=u();y&&Sx(y,p.snapshot.dependencyGraph)}break;case"feedbackChanges":if(g&&p.changes){let y=p.changes;dx(g,y)}break;case"showFeedbackDecorations":if(g&&p.changes){let y=p.changes;dx(g,y)}break;case"clearFeedbackDecorations":g&&tc(g);break;case"clearFeedback":g&&tc(g);break;case"suggestions":if(g&&p.suggestions){let y=p.suggestions;EI(g,y)}break;case"clearSuggestions":g&&bI(g);break;case"generationComplete":nc.postMessage({type:"analyzeChanges"});break}};return window.addEventListener("message",x),()=>window.removeEventListener("message",x)},[n,i]),(0,Rt.useEffect)(()=>{if(s){let x=u();x&&Sx(x,s)}},[s]);let c=(0,Rt.useCallback)(()=>{nc.postMessage({type:"syncCodebase"})},[]),f=(0,Rt.useCallback)(()=>{let x=u();x&&tc(x),nc.postMessage({type:"generateCode"})},[]),h=(0,Rt.useCallback)(()=>{let x=u();x&&tc(x),nc.postMessage({type:"clearAllFeedback"})},[]),d=(0,Rt.useCallback)(x=>{e(x),nc.postMessage({type:"contentChanged",content:x})},[]),m=Rt.default.useMemo(()=>[pI(),uI(),...dI(),...SI(),...CI(),...II()],[]);return(0,fo.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-editor-foreground)"},children:[(0,fo.jsxs)("div",{style:{padding:"4px 8px",borderBottom:"1px solid var(--vscode-panel-border)",display:"flex",gap:"8px",alignItems:"center"},children:[(0,fo.jsx)("button",{onClick:c,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Sync"}),(0,fo.jsx)("button",{onClick:f,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Generate"}),(0,fo.jsx)("button",{onClick:h,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"1px solid var(--vscode-button-border)",borderRadius:"2px",cursor:"pointer"},title:"Clear all feedback decorations",children:"Clear Feedback"})]}),(0,fo.jsx)(sA,{ref:a,value:t,onChange:d,extensions:m,style:{flex:1,fontSize:"14px",lineHeight:"1.6",height:"100%"},basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!1,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,searchKeymap:!0,foldKeymap:!0,completionKeymap:!1,lintKeymap:!0}})]})};var kx=hr(al()),gV=NI.default.createRoot(document.getElementById("root"));gV.render((0,kx.jsx)(LI.default.StrictMode,{children:(0,kx.jsx)(MI,{})}));})();
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
