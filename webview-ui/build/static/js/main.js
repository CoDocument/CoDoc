"use strict";(()=>{var $I=Object.create;var Rx=Object.defineProperty;var KI=Object.getOwnPropertyDescriptor;var qI=Object.getOwnPropertyNames;var YI=Object.getPrototypeOf,XI=Object.prototype.hasOwnProperty;var jr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ZI=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qI(e))!XI.call(t,i)&&i!==n&&Rx(t,i,{get:()=>e[i],enumerable:!(r=KI(e,i))||r.enumerable});return t};var gn=(t,e,n)=>(n=t!=null?$I(YI(t)):{},ZI(e||!t||!t.__esModule?Rx(n,"default",{value:t,enumerable:!0}):n,t));var Vx=jr(X=>{"use strict";var Xl=Symbol.for("react.element"),QI=Symbol.for("react.portal"),JI=Symbol.for("react.fragment"),eM=Symbol.for("react.strict_mode"),tM=Symbol.for("react.profiler"),nM=Symbol.for("react.provider"),rM=Symbol.for("react.context"),iM=Symbol.for("react.forward_ref"),oM=Symbol.for("react.suspense"),sM=Symbol.for("react.memo"),lM=Symbol.for("react.lazy"),Ox=Symbol.iterator;function aM(t){return t===null||typeof t!="object"?null:(t=Ox&&t[Ox]||t["@@iterator"],typeof t=="function"?t:null)}var Lx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nx=Object.assign,Px={};function ps(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||Lx}ps.prototype.isReactComponent={};ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _x(){}_x.prototype=ps.prototype;function Ip(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||Lx}var Mp=Ip.prototype=new _x;Mp.constructor=Ip;Nx(Mp,ps.prototype);Mp.isPureReactComponent=!0;var Ix=Array.isArray,Dx=Object.prototype.hasOwnProperty,Lp={current:null},Fx={key:!0,ref:!0,__self:!0,__source:!0};function Bx(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Dx.call(e,r)&&!Fx.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Xl,type:t,key:o,ref:s,props:i,_owner:Lp.current}}function cM(t,e){return{$$typeof:Xl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Np(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xl}function uM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mx=/\/+/g;function Op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uM(""+t.key):e.toString(36)}function uu(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Xl:case QI:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Op(s,0):r,Ix(i)?(n="",t!=null&&(n=t.replace(Mx,"$&/")+"/"),uu(i,e,n,"",function(c){return c})):i!=null&&(Np(i)&&(i=cM(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Mx,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Ix(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Op(o,l);s+=uu(o,e,n,a,i)}else if(a=aM(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Op(o,l++),s+=uu(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function cu(t,e,n){if(t==null)return t;var r=[],i=0;return uu(t,r,"","",function(o){return e.call(n,o,i++)}),r}function fM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},fu={transition:null},hM={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:fu,ReactCurrentOwner:Lp};function zx(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:cu,forEach:function(t,e,n){cu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cu(t,function(){e++}),e},toArray:function(t){return cu(t,function(e){return e})||[]},only:function(t){if(!Np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=ps;X.Fragment=JI;X.Profiler=tM;X.PureComponent=Ip;X.StrictMode=eM;X.Suspense=oM;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hM;X.act=zx;X.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Nx({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Lp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Dx.call(e,a)&&!Fx.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Xl,type:t.type,key:i,ref:o,props:r,_owner:s}};X.createContext=function(t){return t={$$typeof:rM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nM,_context:t},t.Consumer=t};X.createElement=Bx;X.createFactory=function(t){var e=Bx.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:iM,render:t}};X.isValidElement=Np;X.lazy=function(t){return{$$typeof:lM,_payload:{_status:-1,_result:t},_init:fM}};X.memo=function(t,e){return{$$typeof:sM,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=fu.transition;fu.transition={};try{t()}finally{fu.transition=e}};X.unstable_act=zx;X.useCallback=function(t,e){return Wt.current.useCallback(t,e)};X.useContext=function(t){return Wt.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};X.useEffect=function(t,e){return Wt.current.useEffect(t,e)};X.useId=function(){return Wt.current.useId()};X.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};X.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return Wt.current.useMemo(t,e)};X.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};X.useRef=function(t){return Wt.current.useRef(t)};X.useState=function(t){return Wt.current.useState(t)};X.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};X.useTransition=function(){return Wt.current.useTransition()};X.version="18.3.1"});var pi=jr(($U,Ux)=>{"use strict";Ux.exports=Vx()});var Zx=jr(xe=>{"use strict";function Fp(t,e){var n=t.length;t.push(e);e:for(;0<n;){var r=n-1>>>1,i=t[r];if(0<hu(i,e))t[r]=e,t[n]=i,n=r;else break e}}function Xn(t){return t.length===0?null:t[0]}function pu(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=t[s],a=s+1,c=t[a];if(0>hu(l,n))a<i&&0>hu(c,l)?(t[r]=c,t[a]=n,r=a):(t[r]=l,t[s]=n,r=s);else if(a<i&&0>hu(c,n))t[r]=c,t[a]=n,r=a;else break e}}return e}function hu(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(Hx=performance,xe.unstable_now=function(){return Hx.now()}):(Pp=Date,Wx=Pp.now(),xe.unstable_now=function(){return Pp.now()-Wx});var Hx,Pp,Wx,pr=[],mi=[],dM=1,Ln=null,Mt=3,mu=!1,xo=!1,Ql=!1,$x=typeof setTimeout=="function"?setTimeout:null,Kx=typeof clearTimeout=="function"?clearTimeout:null,jx=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Bp(t){for(var e=Xn(mi);e!==null;){if(e.callback===null)pu(mi);else if(e.startTime<=t)pu(mi),e.sortIndex=e.expirationTime,Fp(pr,e);else break;e=Xn(mi)}}function zp(t){if(Ql=!1,Bp(t),!xo)if(Xn(pr)!==null)xo=!0,Up(Vp);else{var e=Xn(mi);e!==null&&Hp(zp,e.startTime-t)}}function Vp(t,e){xo=!1,Ql&&(Ql=!1,Kx(Jl),Jl=-1),mu=!0;var n=Mt;try{for(Bp(e),Ln=Xn(pr);Ln!==null&&(!(Ln.expirationTime>e)||t&&!Xx());){var r=Ln.callback;if(typeof r=="function"){Ln.callback=null,Mt=Ln.priorityLevel;var i=r(Ln.expirationTime<=e);e=xe.unstable_now(),typeof i=="function"?Ln.callback=i:Ln===Xn(pr)&&pu(pr),Bp(e)}else pu(pr);Ln=Xn(pr)}if(Ln!==null)var o=!0;else{var s=Xn(mi);s!==null&&Hp(zp,s.startTime-e),o=!1}return o}finally{Ln=null,Mt=n,mu=!1}}var gu=!1,du=null,Jl=-1,qx=5,Yx=-1;function Xx(){return!(xe.unstable_now()-Yx<qx)}function _p(){if(du!==null){var t=xe.unstable_now();Yx=t;var e=!0;try{e=du(!0,t)}finally{e?Zl():(gu=!1,du=null)}}else gu=!1}var Zl;typeof jx=="function"?Zl=function(){jx(_p)}:typeof MessageChannel<"u"?(Dp=new MessageChannel,Gx=Dp.port2,Dp.port1.onmessage=_p,Zl=function(){Gx.postMessage(null)}):Zl=function(){$x(_p,0)};var Dp,Gx;function Up(t){du=t,gu||(gu=!0,Zl())}function Hp(t,e){Jl=$x(function(){t(xe.unstable_now())},e)}xe.unstable_IdlePriority=5;xe.unstable_ImmediatePriority=1;xe.unstable_LowPriority=4;xe.unstable_NormalPriority=3;xe.unstable_Profiling=null;xe.unstable_UserBlockingPriority=2;xe.unstable_cancelCallback=function(t){t.callback=null};xe.unstable_continueExecution=function(){xo||mu||(xo=!0,Up(Vp))};xe.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):qx=0<t?Math.floor(1e3/t):5};xe.unstable_getCurrentPriorityLevel=function(){return Mt};xe.unstable_getFirstCallbackNode=function(){return Xn(pr)};xe.unstable_next=function(t){switch(Mt){case 1:case 2:case 3:var e=3;break;default:e=Mt}var n=Mt;Mt=e;try{return t()}finally{Mt=n}};xe.unstable_pauseExecution=function(){};xe.unstable_requestPaint=function(){};xe.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=Mt;Mt=t;try{return e()}finally{Mt=n}};xe.unstable_scheduleCallback=function(t,e,n){var r=xe.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=n+i,t={id:dM++,callback:e,priorityLevel:t,startTime:n,expirationTime:i,sortIndex:-1},n>r?(t.sortIndex=n,Fp(mi,t),Xn(pr)===null&&t===Xn(mi)&&(Ql?(Kx(Jl),Jl=-1):Ql=!0,Hp(zp,n-r))):(t.sortIndex=i,Fp(pr,t),xo||mu||(xo=!0,Up(Vp))),t};xe.unstable_shouldYield=Xx;xe.unstable_wrapCallback=function(t){var e=Mt;return function(){var n=Mt;Mt=e;try{return t.apply(this,arguments)}finally{Mt=n}}}});var Jx=jr((qU,Qx)=>{"use strict";Qx.exports=Zx()});var rw=jr(wn=>{"use strict";var pM=pi(),Sn=Jx();function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sS=new Set,ka={};function Mo(t,e){_s(t,e),_s(t+"Capture",e)}function _s(t,e){for(ka[t]=e,t=0;t<e.length;t++)sS.add(e[t])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,mM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ev={},tv={};function gM(t){return fm.call(tv,t)?!0:fm.call(ev,t)?!1:mM.test(t)?tv[t]=!0:(ev[t]=!0,!1)}function yM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xM(t,e,n,r){if(e===null||typeof e>"u"||yM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var rg=/[\-:]([a-z])/g;function ig(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rg,ig);Et[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rg,ig);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rg,ig);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function og(t,e,n,r){var i=Et.hasOwnProperty(e)?Et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xM(e,n,i,r)&&(n=null),r||i===null?gM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ei=pM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yu=Symbol.for("react.element"),ys=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),lS=Symbol.for("react.provider"),aS=Symbol.for("react.context"),lg=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),ag=Symbol.for("react.memo"),yi=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var cS=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var nv=Symbol.iterator;function ea(t){return t===null||typeof t!="object"?null:(t=nv&&t[nv]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Wp;function aa(t){if(Wp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wp=e&&e[1]||""}return`
`+Wp+t}var jp=!1;function Gp(t,e){if(!t||jp)return"";jp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{jp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?aa(t):""}function vM(t){switch(t.tag){case 5:return aa(t.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return t=Gp(t.type,!1),t;case 11:return t=Gp(t.type.render,!1),t;case 1:return t=Gp(t.type,!0),t;default:return""}}function mm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case ys:return"Portal";case hm:return"Profiler";case sg:return"StrictMode";case dm:return"Suspense";case pm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aS:return(t.displayName||"Context")+".Consumer";case lS:return(t._context.displayName||"Context")+".Provider";case lg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ag:return e=t.displayName||null,e!==null?e:mm(t.type)||"Memo";case yi:e=t._payload,t=t._init;try{return mm(t(e))}catch{}}return null}function SM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mm(e);case 8:return e===sg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kM(t){var e=uS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xu(t){t._valueTracker||(t._valueTracker=kM(t))}function fS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gm(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hS(t,e){e=e.checked,e!=null&&og(t,"checked",e,!1)}function ym(t,e){hS(t,e);var n=Mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xm(t,e.type,n):e.hasOwnProperty("defaultValue")&&xm(t,e.type,Mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xm(t,e,n){(e!=="number"||$u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ca=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ov(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(ca(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mi(n)}}function dS(t,e){var n=Mi(e.value),r=Mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vu,mS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vu=vu||document.createElement("div"),vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ha={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wM=["Webkit","ms","Moz","O"];Object.keys(ha).forEach(function(t){wM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ha[e]=ha[t]})});function gS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ha.hasOwnProperty(t)&&ha[t]?(""+e).trim():e+"px"}function yS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var CM=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function km(t,e){if(e){if(CM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function wm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cm=null;function cg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bm=null,Is=null,Ms=null;function lv(t){if(t=Va(t)){if(typeof bm!="function")throw Error(O(280));var e=t.stateNode;e&&(e=kf(e),bm(t.stateNode,t.type,e))}}function xS(t){Is?Ms?Ms.push(t):Ms=[t]:Is=t}function vS(){if(Is){var t=Is,e=Ms;if(Ms=Is=null,lv(t),e)for(t=0;t<e.length;t++)lv(e[t])}}function SS(t,e){return t(e)}function kS(){}var $p=!1;function wS(t,e,n){if($p)return t(e,n);$p=!0;try{return SS(t,e,n)}finally{$p=!1,(Is!==null||Ms!==null)&&(kS(),vS())}}function Ca(t,e){var n=t.stateNode;if(n===null)return null;var r=kf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Em=!1;if(Xr)try{ms={},Object.defineProperty(ms,"passive",{get:function(){Em=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Em=!1}var ms;function bM(t,e,n,r,i,o,s,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var da=!1,Ku=null,qu=!1,Tm=null,EM={onError:function(t){da=!0,Ku=t}};function TM(t,e,n,r,i,o,s,l,a){da=!1,Ku=null,bM.apply(EM,arguments)}function AM(t,e,n,r,i,o,s,l,a){if(TM.apply(this,arguments),da){if(da){var c=Ku;da=!1,Ku=null}else throw Error(O(198));qu||(qu=!0,Tm=c)}}function Lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function CS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function av(t){if(Lo(t)!==t)throw Error(O(188))}function RM(t){var e=t.alternate;if(!e){if(e=Lo(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return av(i),t;if(o===r)return av(i),e;o=o.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function bS(t){return t=RM(t),t!==null?ES(t):null}function ES(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ES(t);if(e!==null)return e;t=t.sibling}return null}var TS=Sn.unstable_scheduleCallback,cv=Sn.unstable_cancelCallback,OM=Sn.unstable_shouldYield,IM=Sn.unstable_requestPaint,Ge=Sn.unstable_now,MM=Sn.unstable_getCurrentPriorityLevel,ug=Sn.unstable_ImmediatePriority,AS=Sn.unstable_UserBlockingPriority,Yu=Sn.unstable_NormalPriority,LM=Sn.unstable_LowPriority,RS=Sn.unstable_IdlePriority,yf=null,xr=null;function NM(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(yf,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:DM,PM=Math.log,_M=Math.LN2;function DM(t){return t>>>=0,t===0?32:31-(PM(t)/_M|0)|0}var Su=64,ku=4194304;function ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=ua(l):(o&=s,o!==0&&(r=ua(o)))}else s=n&~i,s!==0?r=ua(s):o!==0&&(r=ua(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),i=1<<n,r|=t[n],e&=~i;return r}function FM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-tr(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=FM(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function Am(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OS(){var t=Su;return Su<<=1,!(Su&4194240)&&(Su=64),t}function Kp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ba(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function zM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-tr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function fg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function IS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var MS,hg,LS,NS,PS,Rm=!1,wu=[],Ci=null,bi=null,Ei=null,ba=new Map,Ea=new Map,vi=[],VM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uv(t,e){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function ta(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Va(e),e!==null&&hg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UM(t,e,n,r,i){switch(e){case"focusin":return Ci=ta(Ci,t,e,n,r,i),!0;case"dragenter":return bi=ta(bi,t,e,n,r,i),!0;case"mouseover":return Ei=ta(Ei,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ba.set(o,ta(ba.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ea.set(o,ta(Ea.get(o)||null,t,e,n,r,i)),!0}return!1}function _S(t){var e=ko(t.target);if(e!==null){var n=Lo(e);if(n!==null){if(e=n.tag,e===13){if(e=CS(n),e!==null){t.blockedOn=e,PS(t.priority,function(){LS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Om(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cm=r,n.target.dispatchEvent(r),Cm=null}else return e=Va(n),e!==null&&hg(e),t.blockedOn=n,!1;e.shift()}return!0}function fv(t,e,n){Du(t)&&n.delete(e)}function HM(){Rm=!1,Ci!==null&&Du(Ci)&&(Ci=null),bi!==null&&Du(bi)&&(bi=null),Ei!==null&&Du(Ei)&&(Ei=null),ba.forEach(fv),Ea.forEach(fv)}function na(t,e){t.blockedOn===e&&(t.blockedOn=null,Rm||(Rm=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,HM)))}function Ta(t){function e(i){return na(i,t)}if(0<wu.length){na(wu[0],t);for(var n=1;n<wu.length;n++){var r=wu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ci!==null&&na(Ci,t),bi!==null&&na(bi,t),Ei!==null&&na(Ei,t),ba.forEach(e),Ea.forEach(e),n=0;n<vi.length;n++)r=vi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vi.length&&(n=vi[0],n.blockedOn===null);)_S(n),n.blockedOn===null&&vi.shift()}var Ls=ei.ReactCurrentBatchConfig,Zu=!0;function WM(t,e,n,r){var i=ce,o=Ls.transition;Ls.transition=null;try{ce=1,dg(t,e,n,r)}finally{ce=i,Ls.transition=o}}function jM(t,e,n,r){var i=ce,o=Ls.transition;Ls.transition=null;try{ce=4,dg(t,e,n,r)}finally{ce=i,Ls.transition=o}}function dg(t,e,n,r){if(Zu){var i=Om(t,e,n,r);if(i===null)em(t,e,r,Qu,n),uv(t,r);else if(UM(i,t,e,n,r))r.stopPropagation();else if(uv(t,r),e&4&&-1<VM.indexOf(t)){for(;i!==null;){var o=Va(i);if(o!==null&&MS(o),o=Om(t,e,n,r),o===null&&em(t,e,r,Qu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else em(t,e,r,null,n)}}var Qu=null;function Om(t,e,n,r){if(Qu=null,t=cg(r),t=ko(t),t!==null)if(e=Lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=CS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function DS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MM()){case ug:return 1;case AS:return 4;case Yu:case LM:return 16;case RS:return 536870912;default:return 16}default:return 16}}var ki=null,pg=null,Fu=null;function FS(){if(Fu)return Fu;var t,e=pg,n=e.length,r,i="value"in ki?ki.value:ki.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Fu=i.slice(t,1<r?1-r:void 0)}function Bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cu(){return!0}function hv(){return!1}function kn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Cu:hv,this.isPropagationStopped=hv,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),e}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mg=kn(Hs),za=De({},Hs,{view:0,detail:0}),GM=kn(za),qp,Yp,ra,xf=De({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ra&&(ra&&t.type==="mousemove"?(qp=t.screenX-ra.screenX,Yp=t.screenY-ra.screenY):Yp=qp=0,ra=t),qp)},movementY:function(t){return"movementY"in t?t.movementY:Yp}}),dv=kn(xf),$M=De({},xf,{dataTransfer:0}),KM=kn($M),qM=De({},za,{relatedTarget:0}),Xp=kn(qM),YM=De({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),XM=kn(YM),ZM=De({},Hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QM=kn(ZM),JM=De({},Hs,{data:0}),pv=kn(JM),eL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nL[t])?!!e[t]:!1}function gg(){return rL}var iL=De({},za,{key:function(t){if(t.key){var e=eL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gg,charCode:function(t){return t.type==="keypress"?Bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oL=kn(iL),sL=De({},xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mv=kn(sL),lL=De({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gg}),aL=kn(lL),cL=De({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),uL=kn(cL),fL=De({},xf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hL=kn(fL),dL=[9,13,27,32],yg=Xr&&"CompositionEvent"in window,pa=null;Xr&&"documentMode"in document&&(pa=document.documentMode);var pL=Xr&&"TextEvent"in window&&!pa,BS=Xr&&(!yg||pa&&8<pa&&11>=pa),gv=" ",yv=!1;function zS(t,e){switch(t){case"keyup":return dL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function mL(t,e){switch(t){case"compositionend":return VS(e);case"keypress":return e.which!==32?null:(yv=!0,gv);case"textInput":return t=e.data,t===gv&&yv?null:t;default:return null}}function gL(t,e){if(vs)return t==="compositionend"||!yg&&zS(t,e)?(t=FS(),Fu=pg=ki=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BS&&e.locale!=="ko"?null:e.data;default:return null}}var yL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yL[t.type]:e==="textarea"}function US(t,e,n,r){xS(r),e=Ju(e,"onChange"),0<e.length&&(n=new mg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ma=null,Aa=null;function xL(t){QS(t,0)}function vf(t){var e=ws(t);if(fS(e))return t}function vL(t,e){if(t==="change")return e}var HS=!1;Xr&&(Xr?(Eu="oninput"in document,Eu||(Zp=document.createElement("div"),Zp.setAttribute("oninput","return;"),Eu=typeof Zp.oninput=="function"),bu=Eu):bu=!1,HS=bu&&(!document.documentMode||9<document.documentMode));var bu,Eu,Zp;function vv(){ma&&(ma.detachEvent("onpropertychange",WS),Aa=ma=null)}function WS(t){if(t.propertyName==="value"&&vf(Aa)){var e=[];US(e,Aa,t,cg(t)),wS(xL,e)}}function SL(t,e,n){t==="focusin"?(vv(),ma=e,Aa=n,ma.attachEvent("onpropertychange",WS)):t==="focusout"&&vv()}function kL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vf(Aa)}function wL(t,e){if(t==="click")return vf(e)}function CL(t,e){if(t==="input"||t==="change")return vf(e)}function bL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:bL;function Ra(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fm.call(e,i)||!rr(t[i],e[i]))return!1}return!0}function Sv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kv(t,e){var n=Sv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sv(n)}}function jS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GS(){for(var t=window,e=$u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$u(t.document)}return e}function xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function EL(t){var e=GS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jS(n.ownerDocument.documentElement,n)){if(r!==null&&xg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=kv(n,o);var s=kv(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var TL=Xr&&"documentMode"in document&&11>=document.documentMode,Ss=null,Im=null,ga=null,Mm=!1;function wv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mm||Ss==null||Ss!==$u(r)||(r=Ss,"selectionStart"in r&&xg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ga&&Ra(ga,r)||(ga=r,r=Ju(Im,"onSelect"),0<r.length&&(e=new mg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function Tu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:Tu("Animation","AnimationEnd"),animationiteration:Tu("Animation","AnimationIteration"),animationstart:Tu("Animation","AnimationStart"),transitionend:Tu("Transition","TransitionEnd")},Qp={},$S={};Xr&&($S=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Sf(t){if(Qp[t])return Qp[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $S)return Qp[t]=e[n];return t}var KS=Sf("animationend"),qS=Sf("animationiteration"),YS=Sf("animationstart"),XS=Sf("transitionend"),ZS=new Map,Cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,e){ZS.set(t,e),Mo(e,[t])}for(Au=0;Au<Cv.length;Au++)Ru=Cv[Au],bv=Ru.toLowerCase(),Ev=Ru[0].toUpperCase()+Ru.slice(1),Ni(bv,"on"+Ev);var Ru,bv,Ev,Au;Ni(KS,"onAnimationEnd");Ni(qS,"onAnimationIteration");Ni(YS,"onAnimationStart");Ni("dblclick","onDoubleClick");Ni("focusin","onFocus");Ni("focusout","onBlur");Ni(XS,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AL=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Tv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AM(r,e,void 0,t),t.currentTarget=null}function QS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Tv(i,l,c),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,c=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Tv(i,l,c),o=a}}}if(qu)throw t=Tm,qu=!1,Tm=null,t}function Ee(t,e){var n=e[Dm];n===void 0&&(n=e[Dm]=new Set);var r=t+"__bubble";n.has(r)||(JS(e,t,2,!1),n.add(r))}function Jp(t,e,n){var r=0;e&&(r|=4),JS(n,t,r,e)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Oa(t){if(!t[Ou]){t[Ou]=!0,sS.forEach(function(n){n!=="selectionchange"&&(AL.has(n)||Jp(n,!1,t),Jp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ou]||(e[Ou]=!0,Jp("selectionchange",!1,e))}}function JS(t,e,n,r){switch(DS(e)){case 1:var i=WM;break;case 4:i=jM;break;default:i=dg}n=i.bind(null,e,n,t),i=void 0,!Em||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function em(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=ko(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}wS(function(){var c=o,u=cg(n),f=[];e:{var h=ZS.get(t);if(h!==void 0){var d=mg,p=t;switch(t){case"keypress":if(Bu(n)===0)break e;case"keydown":case"keyup":d=oL;break;case"focusin":p="focus",d=Xp;break;case"focusout":p="blur",d=Xp;break;case"beforeblur":case"afterblur":d=Xp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=dv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=KM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=aL;break;case KS:case qS:case YS:d=XM;break;case XS:d=uL;break;case"scroll":d=GM;break;case"wheel":d=hL;break;case"copy":case"cut":case"paste":d=QM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=mv}var x=(e&4)!==0,v=!x&&t==="scroll",m=x?h!==null?h+"Capture":null:h;x=[];for(var g=c,y;g!==null;){y=g;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,m!==null&&(S=Ca(g,m),S!=null&&x.push(Ia(g,S,y)))),v)break;g=g.return}0<x.length&&(h=new d(h,p,null,n,u),f.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Cm&&(p=n.relatedTarget||n.fromElement)&&(ko(p)||p[Zr]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=c,p=p?ko(p):null,p!==null&&(v=Lo(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=c),d!==p)){if(x=dv,S="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=mv,S="onPointerLeave",m="onPointerEnter",g="pointer"),v=d==null?h:ws(d),y=p==null?h:ws(p),h=new x(S,g+"leave",d,n,u),h.target=v,h.relatedTarget=y,S=null,ko(u)===c&&(x=new x(m,g+"enter",p,n,u),x.target=y,x.relatedTarget=v,S=x),v=S,d&&p)t:{for(x=d,m=p,g=0,y=x;y;y=gs(y))g++;for(y=0,S=m;S;S=gs(S))y++;for(;0<g-y;)x=gs(x),g--;for(;0<y-g;)m=gs(m),y--;for(;g--;){if(x===m||m!==null&&x===m.alternate)break t;x=gs(x),m=gs(m)}x=null}else x=null;d!==null&&Av(f,h,d,x,!1),p!==null&&v!==null&&Av(f,v,p,x,!0)}}e:{if(h=c?ws(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var k=vL;else if(xv(h))if(HS)k=CL;else{k=kL;var w=SL}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=wL);if(k&&(k=k(t,c))){US(f,k,n,u);break e}w&&w(t,h,c),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&xm(h,"number",h.value)}switch(w=c?ws(c):window,t){case"focusin":(xv(w)||w.contentEditable==="true")&&(Ss=w,Im=c,ga=null);break;case"focusout":ga=Im=Ss=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,wv(f,n,u);break;case"selectionchange":if(TL)break;case"keydown":case"keyup":wv(f,n,u)}var C;if(yg)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else vs?zS(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(BS&&n.locale!=="ko"&&(vs||A!=="onCompositionStart"?A==="onCompositionEnd"&&vs&&(C=FS()):(ki=u,pg="value"in ki?ki.value:ki.textContent,vs=!0)),w=Ju(c,A),0<w.length&&(A=new pv(A,t,null,n,u),f.push({event:A,listeners:w}),C?A.data=C:(C=VS(n),C!==null&&(A.data=C)))),(C=pL?mL(t,n):gL(t,n))&&(c=Ju(c,"onBeforeInput"),0<c.length&&(u=new pv("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=C))}QS(f,e)})}function Ia(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ju(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ca(t,n),o!=null&&r.unshift(Ia(t,o,i)),o=Ca(t,e),o!=null&&r.push(Ia(t,o,i))),t=t.return}return r}function gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Av(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Ca(n,o),a!=null&&s.unshift(Ia(n,a,l))):i||(a=Ca(n,o),a!=null&&s.push(Ia(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var RL=/\r\n?/g,OL=/\u0000|\uFFFD/g;function Rv(t){return(typeof t=="string"?t:""+t).replace(RL,`
`).replace(OL,"")}function Iu(t,e,n){if(e=Rv(e),Rv(t)!==e&&n)throw Error(O(425))}function ef(){}var Lm=null,Nm=null;function Pm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _m=typeof setTimeout=="function"?setTimeout:void 0,IL=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,ML=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(t){return Ov.resolve(null).then(t).catch(LL)}:_m;function LL(t){setTimeout(function(){throw t})}function tm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ta(e)}function Ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Iv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),yr="__reactFiber$"+Ws,Ma="__reactProps$"+Ws,Zr="__reactContainer$"+Ws,Dm="__reactEvents$"+Ws,NL="__reactListeners$"+Ws,PL="__reactHandles$"+Ws;function ko(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Iv(t);t!==null;){if(n=t[yr])return n;t=Iv(t)}return e}t=n,n=t.parentNode}return null}function Va(t){return t=t[yr]||t[Zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function kf(t){return t[Ma]||null}var Fm=[],Cs=-1;function Pi(t){return{current:t}}function Te(t){0>Cs||(t.current=Fm[Cs],Fm[Cs]=null,Cs--)}function ve(t,e){Cs++,Fm[Cs]=t.current,t.current=e}var Li={},_t=Pi(Li),on=Pi(!1),To=Li;function Ds(t,e){var n=t.type.contextTypes;if(!n)return Li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function sn(t){return t=t.childContextTypes,t!=null}function tf(){Te(on),Te(_t)}function Mv(t,e,n){if(_t.current!==Li)throw Error(O(168));ve(_t,e),ve(on,n)}function ek(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,SM(t)||"Unknown",i));return De({},n,r)}function nf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Li,To=_t.current,ve(_t,t),ve(on,on.current),!0}function Lv(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=ek(t,e,To),r.__reactInternalMemoizedMergedChildContext=t,Te(on),Te(_t),ve(_t,t)):Te(on),ve(on,n)}var $r=null,wf=!1,nm=!1;function tk(t){$r===null?$r=[t]:$r.push(t)}function _L(t){wf=!0,tk(t)}function _i(){if(!nm&&$r!==null){nm=!0;var t=0,e=ce;try{var n=$r;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$r=null,wf=!1}catch(i){throw $r!==null&&($r=$r.slice(t+1)),TS(ug,_i),i}finally{ce=e,nm=!1}}return null}var bs=[],Es=0,rf=null,of=0,Nn=[],Pn=0,Ao=null,Kr=1,qr="";function vo(t,e){bs[Es++]=of,bs[Es++]=rf,rf=t,of=e}function nk(t,e,n){Nn[Pn++]=Kr,Nn[Pn++]=qr,Nn[Pn++]=Ao,Ao=t;var r=Kr;t=qr;var i=32-tr(r)-1;r&=~(1<<i),n+=1;var o=32-tr(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Kr=1<<32-tr(e)+i|n<<i|r,qr=o+t}else Kr=1<<o|n<<i|r,qr=t}function vg(t){t.return!==null&&(vo(t,1),nk(t,1,0))}function Sg(t){for(;t===rf;)rf=bs[--Es],bs[Es]=null,of=bs[--Es],bs[Es]=null;for(;t===Ao;)Ao=Nn[--Pn],Nn[Pn]=null,qr=Nn[--Pn],Nn[Pn]=null,Kr=Nn[--Pn],Nn[Pn]=null}var vn=null,xn=null,Me=!1,er=null;function rk(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,xn=Ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ao!==null?{id:Kr,overflow:qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,xn=null,!0):!1;default:return!1}}function Bm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zm(t){if(Me){var e=xn;if(e){var n=e;if(!Nv(t,e)){if(Bm(t))throw Error(O(418));e=Ti(n.nextSibling);var r=vn;e&&Nv(t,e)?rk(r,n):(t.flags=t.flags&-4097|2,Me=!1,vn=t)}}else{if(Bm(t))throw Error(O(418));t.flags=t.flags&-4097|2,Me=!1,vn=t}}}function Pv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function Mu(t){if(t!==vn)return!1;if(!Me)return Pv(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pm(t.type,t.memoizedProps)),e&&(e=xn)){if(Bm(t))throw ik(),Error(O(418));for(;e;)rk(t,e),e=Ti(e.nextSibling)}if(Pv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=Ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=vn?Ti(t.stateNode.nextSibling):null;return!0}function ik(){for(var t=xn;t;)t=Ti(t.nextSibling)}function Fs(){xn=vn=null,Me=!1}function kg(t){er===null?er=[t]:er.push(t)}var DL=ei.ReactCurrentBatchConfig;function ia(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Lu(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _v(t){var e=t._init;return e(t._payload)}function ok(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=Ii(m,g),m.index=0,m.sibling=null,m}function o(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,g,y,S){return g===null||g.tag!==6?(g=cm(y,m.mode,S),g.return=m,g):(g=i(g,y),g.return=m,g)}function a(m,g,y,S){var k=y.type;return k===xs?u(m,g,y.props.children,S,y.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===yi&&_v(k)===g.type)?(S=i(g,y.props),S.ref=ia(m,g,y),S.return=m,S):(S=Gu(y.type,y.key,y.props,null,m.mode,S),S.ref=ia(m,g,y),S.return=m,S)}function c(m,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=um(y,m.mode,S),g.return=m,g):(g=i(g,y.children||[]),g.return=m,g)}function u(m,g,y,S,k){return g===null||g.tag!==7?(g=Eo(y,m.mode,S,k),g.return=m,g):(g=i(g,y),g.return=m,g)}function f(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=cm(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case yu:return y=Gu(g.type,g.key,g.props,null,m.mode,y),y.ref=ia(m,null,g),y.return=m,y;case ys:return g=um(g,m.mode,y),g.return=m,g;case yi:var S=g._init;return f(m,S(g._payload),y)}if(ca(g)||ea(g))return g=Eo(g,m.mode,y,null),g.return=m,g;Lu(m,g)}return null}function h(m,g,y,S){var k=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:l(m,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case yu:return y.key===k?a(m,g,y,S):null;case ys:return y.key===k?c(m,g,y,S):null;case yi:return k=y._init,h(m,g,k(y._payload),S)}if(ca(y)||ea(y))return k!==null?null:u(m,g,y,S,null);Lu(m,y)}return null}function d(m,g,y,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(y)||null,l(g,m,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case yu:return m=m.get(S.key===null?y:S.key)||null,a(g,m,S,k);case ys:return m=m.get(S.key===null?y:S.key)||null,c(g,m,S,k);case yi:var w=S._init;return d(m,g,y,w(S._payload),k)}if(ca(S)||ea(S))return m=m.get(y)||null,u(g,m,S,k,null);Lu(g,S)}return null}function p(m,g,y,S){for(var k=null,w=null,C=g,A=g=0,P=null;C!==null&&A<y.length;A++){C.index>A?(P=C,C=null):P=C.sibling;var E=h(m,C,y[A],S);if(E===null){C===null&&(C=P);break}t&&C&&E.alternate===null&&e(m,C),g=o(E,g,A),w===null?k=E:w.sibling=E,w=E,C=P}if(A===y.length)return n(m,C),Me&&vo(m,A),k;if(C===null){for(;A<y.length;A++)C=f(m,y[A],S),C!==null&&(g=o(C,g,A),w===null?k=C:w.sibling=C,w=C);return Me&&vo(m,A),k}for(C=r(m,C);A<y.length;A++)P=d(C,m,A,y[A],S),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?A:P.key),g=o(P,g,A),w===null?k=P:w.sibling=P,w=P);return t&&C.forEach(function(_){return e(m,_)}),Me&&vo(m,A),k}function x(m,g,y,S){var k=ea(y);if(typeof k!="function")throw Error(O(150));if(y=k.call(y),y==null)throw Error(O(151));for(var w=k=null,C=g,A=g=0,P=null,E=y.next();C!==null&&!E.done;A++,E=y.next()){C.index>A?(P=C,C=null):P=C.sibling;var _=h(m,C,E.value,S);if(_===null){C===null&&(C=P);break}t&&C&&_.alternate===null&&e(m,C),g=o(_,g,A),w===null?k=_:w.sibling=_,w=_,C=P}if(E.done)return n(m,C),Me&&vo(m,A),k;if(C===null){for(;!E.done;A++,E=y.next())E=f(m,E.value,S),E!==null&&(g=o(E,g,A),w===null?k=E:w.sibling=E,w=E);return Me&&vo(m,A),k}for(C=r(m,C);!E.done;A++,E=y.next())E=d(C,m,A,E.value,S),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?A:E.key),g=o(E,g,A),w===null?k=E:w.sibling=E,w=E);return t&&C.forEach(function(N){return e(m,N)}),Me&&vo(m,A),k}function v(m,g,y,S){if(typeof y=="object"&&y!==null&&y.type===xs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case yu:e:{for(var k=y.key,w=g;w!==null;){if(w.key===k){if(k=y.type,k===xs){if(w.tag===7){n(m,w.sibling),g=i(w,y.props.children),g.return=m,m=g;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===yi&&_v(k)===w.type){n(m,w.sibling),g=i(w,y.props),g.ref=ia(m,w,y),g.return=m,m=g;break e}n(m,w);break}else e(m,w);w=w.sibling}y.type===xs?(g=Eo(y.props.children,m.mode,S,y.key),g.return=m,m=g):(S=Gu(y.type,y.key,y.props,null,m.mode,S),S.ref=ia(m,g,y),S.return=m,m=S)}return s(m);case ys:e:{for(w=y.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=i(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=um(y,m.mode,S),g.return=m,m=g}return s(m);case yi:return w=y._init,v(m,g,w(y._payload),S)}if(ca(y))return p(m,g,y,S);if(ea(y))return x(m,g,y,S);Lu(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,y),g.return=m,m=g):(n(m,g),g=cm(y,m.mode,S),g.return=m,m=g),s(m)):n(m,g)}return v}var Bs=ok(!0),sk=ok(!1),sf=Pi(null),lf=null,Ts=null,wg=null;function Cg(){wg=Ts=lf=null}function bg(t){var e=sf.current;Te(sf),t._currentValue=e}function Vm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){lf=t,wg=Ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(wg!==t)if(t={context:t,memoizedValue:e,next:null},Ts===null){if(lf===null)throw Error(O(308));Ts=t,lf.dependencies={lanes:0,firstContext:t}}else Ts=Ts.next=t;return e}var wo=null;function Eg(t){wo===null?wo=[t]:wo.push(t)}function lk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Eg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qr(t,r)}function Qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xi=!1;function Tg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ak(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qr(t,n)}return i=r.interleaved,i===null?(e.next=e,Eg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qr(t,n)}function zu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fg(t,n)}}function Dv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function af(t,e,n,r){var i=t.updateQueue;xi=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,s===null?o=c:s.next=c,s=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==s&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,u=c=a=null,l=o;do{var h=l.lane,d=l.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,x=l;switch(h=e,d=n,x.tag){case 1:if(p=x.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=De({},f,h);break e;case 2:xi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else d={eventTime:d,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=d,a=f):u=u.next=d,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(a=f),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Oo|=s,t.lanes=s,t.memoizedState=f}}function Fv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var Ua={},vr=Pi(Ua),La=Pi(Ua),Na=Pi(Ua);function Co(t){if(t===Ua)throw Error(O(174));return t}function Ag(t,e){switch(ve(Na,e),ve(La,t),ve(vr,Ua),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sm(e,t)}Te(vr),ve(vr,e)}function zs(){Te(vr),Te(La),Te(Na)}function ck(t){Co(Na.current);var e=Co(vr.current),n=Sm(e,t.type);e!==n&&(ve(La,t),ve(vr,n))}function Rg(t){La.current===t&&(Te(vr),Te(La))}var Pe=Pi(0);function cf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rm=[];function Og(){for(var t=0;t<rm.length;t++)rm[t]._workInProgressVersionPrimary=null;rm.length=0}var Vu=ei.ReactCurrentDispatcher,im=ei.ReactCurrentBatchConfig,Ro=0,_e=null,lt=null,mt=null,uf=!1,ya=!1,Pa=0,FL=0;function Lt(){throw Error(O(321))}function Ig(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function Mg(t,e,n,r,i,o){if(Ro=o,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vu.current=t===null||t.memoizedState===null?UL:HL,t=n(r,i),ya){o=0;do{if(ya=!1,Pa=0,25<=o)throw Error(O(301));o+=1,mt=lt=null,e.updateQueue=null,Vu.current=WL,t=n(r,i)}while(ya)}if(Vu.current=ff,e=lt!==null&&lt.next!==null,Ro=0,mt=lt=_e=null,uf=!1,e)throw Error(O(300));return t}function Lg(){var t=Pa!==0;return Pa=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?_e.memoizedState=mt=t:mt=mt.next=t,mt}function Bn(){if(lt===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=mt===null?_e.memoizedState:mt.next;if(e!==null)mt=e,lt=t;else{if(t===null)throw Error(O(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},mt===null?_e.memoizedState=mt=t:mt=mt.next=t}return mt}function _a(t,e){return typeof e=="function"?e(t):e}function om(t){var e=Bn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,c=o;do{var u=c.lane;if((Ro&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,_e.lanes|=u,Oo|=u}c=c.next}while(c!==null&&c!==o);a===null?s=r:a.next=l,rr(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,_e.lanes|=o,Oo|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sm(t){var e=Bn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);rr(o,e.memoizedState)||(rn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function uk(){}function fk(t,e){var n=_e,r=Bn(),i=e(),o=!rr(r.memoizedState,i);if(o&&(r.memoizedState=i,rn=!0),r=r.queue,Ng(pk.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Da(9,dk.bind(null,n,r,i,e),void 0,null),gt===null)throw Error(O(349));Ro&30||hk(n,e,i)}return i}function hk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dk(t,e,n,r){e.value=n,e.getSnapshot=r,mk(e)&&gk(t)}function pk(t,e,n){return n(function(){mk(e)&&gk(t)})}function mk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function gk(t){var e=Qr(t,1);e!==null&&nr(e,t,1,-1)}function Bv(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},e.queue=t,t=t.dispatch=VL.bind(null,_e,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yk(){return Bn().memoizedState}function Uu(t,e,n,r){var i=gr();_e.flags|=t,i.memoizedState=Da(1|e,n,void 0,r===void 0?null:r)}function Cf(t,e,n,r){var i=Bn();r=r===void 0?null:r;var o=void 0;if(lt!==null){var s=lt.memoizedState;if(o=s.destroy,r!==null&&Ig(r,s.deps)){i.memoizedState=Da(e,n,o,r);return}}_e.flags|=t,i.memoizedState=Da(1|e,n,o,r)}function zv(t,e){return Uu(8390656,8,t,e)}function Ng(t,e){return Cf(2048,8,t,e)}function xk(t,e){return Cf(4,2,t,e)}function vk(t,e){return Cf(4,4,t,e)}function Sk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kk(t,e,n){return n=n!=null?n.concat([t]):null,Cf(4,4,Sk.bind(null,e,t),n)}function Pg(){}function wk(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ig(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ck(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ig(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bk(t,e,n){return Ro&21?(rr(n,e)||(n=OS(),_e.lanes|=n,Oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n)}function BL(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=im.transition;im.transition={};try{t(!1),e()}finally{ce=n,im.transition=r}}function Ek(){return Bn().memoizedState}function zL(t,e,n){var r=Oi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tk(t))Ak(e,n);else if(n=lk(t,e,n,r),n!==null){var i=Gt();nr(n,t,r,i),Rk(n,e,r)}}function VL(t,e,n){var r=Oi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tk(t))Ak(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,rr(l,s)){var a=e.interleaved;a===null?(i.next=i,Eg(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=lk(t,e,i,r),n!==null&&(i=Gt(),nr(n,t,r,i),Rk(n,e,r))}}function Tk(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function Ak(t,e){ya=uf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fg(t,n)}}var ff={readContext:Fn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},UL={readContext:Fn,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:zv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uu(4194308,4,Sk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uu(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zL.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:Bv,useDebugValue:Pg,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=Bv(!1),e=t[0];return t=BL.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,i=gr();if(Me){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),gt===null)throw Error(O(349));Ro&30||hk(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zv(pk.bind(null,r,o,t),[t]),r.flags|=2048,Da(9,dk.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=gr(),e=gt.identifierPrefix;if(Me){var n=qr,r=Kr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HL={readContext:Fn,useCallback:wk,useContext:Fn,useEffect:Ng,useImperativeHandle:kk,useInsertionEffect:xk,useLayoutEffect:vk,useMemo:Ck,useReducer:om,useRef:yk,useState:function(){return om(_a)},useDebugValue:Pg,useDeferredValue:function(t){var e=Bn();return bk(e,lt.memoizedState,t)},useTransition:function(){var t=om(_a)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:uk,useSyncExternalStore:fk,useId:Ek,unstable_isNewReconciler:!1},WL={readContext:Fn,useCallback:wk,useContext:Fn,useEffect:Ng,useImperativeHandle:kk,useInsertionEffect:xk,useLayoutEffect:vk,useMemo:Ck,useReducer:sm,useRef:yk,useState:function(){return sm(_a)},useDebugValue:Pg,useDeferredValue:function(t){var e=Bn();return lt===null?e.memoizedState=t:bk(e,lt.memoizedState,t)},useTransition:function(){var t=sm(_a)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:uk,useSyncExternalStore:fk,useId:Ek,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Um(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bf={isMounted:function(t){return(t=t._reactInternals)?Lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=Oi(t),o=Yr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ai(t,o,i),e!==null&&(nr(e,t,i,r),zu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=Oi(t),o=Yr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ai(t,o,i),e!==null&&(nr(e,t,i,r),zu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gt(),r=Oi(t),i=Yr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ai(t,i,r),e!==null&&(nr(e,t,r,n),zu(e,t,r))}};function Vv(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ra(n,r)||!Ra(i,o):!0}function Ok(t,e,n){var r=!1,i=Li,o=e.contextType;return typeof o=="object"&&o!==null?o=Fn(o):(i=sn(e)?To:_t.current,r=e.contextTypes,o=(r=r!=null)?Ds(t,i):Li),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Uv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bf.enqueueReplaceState(e,e.state,null)}function Hm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Tg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Fn(o):(o=sn(e)?To:_t.current,i.context=Ds(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Um(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bf.enqueueReplaceState(i,i.state,null),af(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e){try{var n="",r=e;do n+=vM(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function lm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jL=typeof WeakMap=="function"?WeakMap:Map;function Ik(t,e,n){n=Yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){df||(df=!0,Jm=r),Wm(t,e)},n}function Mk(t,e,n){n=Yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Wm(t,e),typeof r!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Hv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iN.bind(null,t,e,n),e.then(t,t))}function Wv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yr(-1,1),e.tag=2,Ai(n,e,1))),n.lanes|=1),t)}var GL=ei.ReactCurrentOwner,rn=!1;function jt(t,e,n,r){e.child=t===null?sk(e,null,n,r):Bs(e,t.child,n,r)}function Gv(t,e,n,r,i){n=n.render;var o=e.ref;return Ns(e,i),r=Mg(t,e,n,r,o,i),n=Lg(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jr(t,e,i)):(Me&&n&&vg(e),e.flags|=1,jt(t,e,r,i),e.child)}function $v(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Hg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Lk(t,e,o,r,i)):(t=Gu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ra,n(s,r)&&t.ref===e.ref)return Jr(t,e,i)}return e.flags|=1,t=Ii(o,r),t.ref=e.ref,t.return=e,e.child=t}function Lk(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ra(o,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(rn=!0);else return e.lanes=t.lanes,Jr(t,e,i)}return jm(t,e,n,r,i)}function Nk(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Rs,yn),yn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Rs,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ve(Rs,yn),yn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ve(Rs,yn),yn|=r;return jt(t,e,i,n),e.child}function Pk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jm(t,e,n,r,i){var o=sn(n)?To:_t.current;return o=Ds(e,o),Ns(e,i),n=Mg(t,e,n,r,o,i),r=Lg(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jr(t,e,i)):(Me&&r&&vg(e),e.flags|=1,jt(t,e,n,i),e.child)}function Kv(t,e,n,r,i){if(sn(n)){var o=!0;nf(e)}else o=!1;if(Ns(e,i),e.stateNode===null)Hu(t,e),Ok(e,n,r),Hm(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fn(c):(c=sn(n)?To:_t.current,c=Ds(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Uv(e,s,r,c),xi=!1;var h=e.memoizedState;s.state=h,af(e,r,s,i),a=e.memoizedState,l!==r||h!==a||on.current||xi?(typeof u=="function"&&(Um(e,n,u,r),a=e.memoizedState),(l=xi||Vv(e,n,l,r,h,a,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,ak(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Qn(e.type,l),s.props=c,f=e.pendingProps,h=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Fn(a):(a=sn(n)?To:_t.current,a=Ds(e,a));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==a)&&Uv(e,s,r,a),xi=!1,h=e.memoizedState,s.state=h,af(e,r,s,i);var p=e.memoizedState;l!==f||h!==p||on.current||xi?(typeof d=="function"&&(Um(e,n,d,r),p=e.memoizedState),(c=xi||Vv(e,n,c,r,h,p,a)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=a,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Gm(t,e,n,r,o,i)}function Gm(t,e,n,r,i,o){Pk(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Lv(e,n,!1),Jr(t,e,o);r=e.stateNode,GL.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Bs(e,t.child,null,o),e.child=Bs(e,null,l,o)):jt(t,e,l,o),e.memoizedState=r.state,i&&Lv(e,n,!0),e.child}function _k(t){var e=t.stateNode;e.pendingContext?Mv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mv(t,e.context,!1),Ag(t,e.containerInfo)}function qv(t,e,n,r,i){return Fs(),kg(i),e.flags|=256,jt(t,e,n,r),e.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function Km(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dk(t,e,n){var r=e.pendingProps,i=Pe.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(Pe,i&1),t===null)return zm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Af(s,r,0,null),t=Eo(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Km(n),e.memoizedState=$m,t):_g(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $L(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Ii(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Ii(l,o):(o=Eo(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Km(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=$m,r}return o=t.child,t=o.sibling,r=Ii(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _g(t,e){return e=Af({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nu(t,e,n,r){return r!==null&&kg(r),Bs(e,t.child,null,n),t=_g(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $L(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=lm(Error(O(422))),Nu(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Af({mode:"visible",children:r.children},i,0,null),o=Eo(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Bs(e,t.child,null,s),e.child.memoizedState=Km(s),e.memoizedState=$m,o);if(!(e.mode&1))return Nu(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(O(419)),r=lm(o,r,void 0),Nu(t,e,s,r)}if(l=(s&t.childLanes)!==0,rn||l){if(r=gt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Qr(t,i),nr(r,t,i,-1))}return Ug(),r=lm(Error(O(421))),Nu(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=oN.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,xn=Ti(i.nextSibling),vn=e,Me=!0,er=null,t!==null&&(Nn[Pn++]=Kr,Nn[Pn++]=qr,Nn[Pn++]=Ao,Kr=t.id,qr=t.overflow,Ao=e),e=_g(e,r.children),e.flags|=4096,e)}function Yv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vm(t.return,e,n)}function am(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Fk(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(jt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yv(t,n,e);else if(t.tag===19)Yv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&cf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),am(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&cf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}am(e,!0,n,null,o);break;case"together":am(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KL(t,e,n){switch(e.tag){case 3:_k(e),Fs();break;case 5:ck(e);break;case 1:sn(e.type)&&nf(e);break;case 4:Ag(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(sf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Dk(t,e,n):(ve(Pe,Pe.current&1),t=Jr(t,e,n),t!==null?t.sibling:null);ve(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Fk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Nk(t,e,n)}return Jr(t,e,n)}var Bk,qm,zk,Vk;Bk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qm=function(){};zk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Co(vr.current);var o=null;switch(n){case"input":i=gm(t,i),r=gm(t,r),o=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),o=[];break;case"textarea":i=vm(t,i),r=vm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ef)}km(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ka.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var a=r[c];if(l=i?.[c],r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ka.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ee("scroll",t),o||l===a||(o=[])):(o=o||[]).push(c,a))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};Vk=function(t,e,n,r){n!==r&&(e.flags|=4)};function oa(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qL(t,e,n){var r=e.pendingProps;switch(Sg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return sn(e.type)&&tf(),Nt(e),null;case 3:return r=e.stateNode,zs(),Te(on),Te(_t),Og(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(ng(er),er=null))),qm(t,e),Nt(e),null;case 5:Rg(e);var i=Co(Na.current);if(n=e.type,t!==null&&e.stateNode!=null)zk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return Nt(e),null}if(t=Co(vr.current),Mu(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[yr]=e,r[Ma]=o,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<fa.length;i++)Ee(fa[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":rv(r,o),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",r);break;case"textarea":ov(r,o),Ee("invalid",r)}km(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Iu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Iu(r.textContent,l,t),i=["children",""+l]):ka.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ee("scroll",r)}switch(n){case"input":xu(r),iv(r,o,!0);break;case"textarea":xu(r),sv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ef)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[yr]=e,t[Ma]=r,Bk(t,e,!1,!1),e.stateNode=t;e:{switch(s=wm(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<fa.length;i++)Ee(fa[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":rv(t,r),i=gm(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":ov(t,r),i=vm(t,r),Ee("invalid",t);break;default:i=r}km(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?yS(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&mS(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&wa(t,a):typeof a=="number"&&wa(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ka.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Ee("scroll",t):a!=null&&og(t,o,a,s))}switch(n){case"input":xu(t),iv(t,r,!1);break;case"textarea":xu(t),sv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Os(t,!!r.multiple,o,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ef)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)Vk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Co(Na.current),Co(vr.current),Mu(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(o=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:Iu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Iu(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Nt(e),null;case 13:if(Te(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&xn!==null&&e.mode&1&&!(e.flags&128))ik(),Fs(),e.flags|=98560,o=!1;else if(o=Mu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(O(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[yr]=e}else Fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),o=!1}else er!==null&&(ng(er),er=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?at===0&&(at=3):Ug())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return zs(),qm(t,e),t===null&&Oa(e.stateNode.containerInfo),Nt(e),null;case 10:return bg(e.type._context),Nt(e),null;case 17:return sn(e.type)&&tf(),Nt(e),null;case 19:if(Te(Pe),o=e.memoizedState,o===null)return Nt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)oa(o,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=cf(t),s!==null){for(e.flags|=128,oa(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Pe,Pe.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ge()>Us&&(e.flags|=128,r=!0,oa(o,!1),e.lanes=4194304)}else{if(!r)if(t=cf(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Me)return Nt(e),null}else 2*Ge()-o.renderingStartTime>Us&&n!==1073741824&&(e.flags|=128,r=!0,oa(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ge(),e.sibling=null,n=Pe.current,ve(Pe,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Vg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function YL(t,e){switch(Sg(e),e.tag){case 1:return sn(e.type)&&tf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zs(),Te(on),Te(_t),Og(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rg(e),null;case 13:if(Te(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Pe),null;case 4:return zs(),null;case 10:return bg(e.type._context),null;case 22:case 23:return Vg(),null;case 24:return null;default:return null}}var Pu=!1,Pt=!1,XL=typeof WeakSet=="function"?WeakSet:Set,U=null;function As(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Ym(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Xv=!1;function ZL(t,e){if(Lm=Zu,t=GS(),xg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===i&&(l=s),h===o&&++u===r&&(a=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nm={focusedElem:t,selectionRange:n},Zu=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,v=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:Qn(e.type,x),v);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(S){Ve(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return p=Xv,Xv=!1,p}function xa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Ym(e,n,o)}i=i.next}while(i!==r)}}function Ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Uk(t){var e=t.alternate;e!==null&&(t.alternate=null,Uk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[Ma],delete e[Dm],delete e[NL],delete e[PL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hk(t){return t.tag===5||t.tag===3||t.tag===4}function Zv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ef));else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}function Qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qm(t,e,n),t=t.sibling;t!==null;)Qm(t,e,n),t=t.sibling}var Ct=null,Jn=!1;function gi(t,e,n){for(n=n.child;n!==null;)Wk(t,e,n),n=n.sibling}function Wk(t,e,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(yf,n)}catch{}switch(n.tag){case 5:Pt||As(n,e);case 6:var r=Ct,i=Jn;Ct=null,gi(t,e,n),Ct=r,Jn=i,Ct!==null&&(Jn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Jn?(t=Ct,n=n.stateNode,t.nodeType===8?tm(t.parentNode,n):t.nodeType===1&&tm(t,n),Ta(t)):tm(Ct,n.stateNode));break;case 4:r=Ct,i=Jn,Ct=n.stateNode.containerInfo,Jn=!0,gi(t,e,n),Ct=r,Jn=i;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Ym(n,e,s),i=i.next}while(i!==r)}gi(t,e,n);break;case 1:if(!Pt&&(As(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,e,l)}gi(t,e,n);break;case 21:gi(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,gi(t,e,n),Pt=r):gi(t,e,n);break;default:gi(t,e,n)}}function Qv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XL),e.forEach(function(r){var i=sN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Ct=l.stateNode,Jn=!1;break e;case 3:Ct=l.stateNode.containerInfo,Jn=!0;break e;case 4:Ct=l.stateNode.containerInfo,Jn=!0;break e}l=l.return}if(Ct===null)throw Error(O(160));Wk(o,s,i),Ct=null,Jn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Ve(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jk(e,t),e=e.sibling}function jk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zn(e,t),mr(t),r&4){try{xa(3,t,t.return),Ef(3,t)}catch(x){Ve(t,t.return,x)}try{xa(5,t,t.return)}catch(x){Ve(t,t.return,x)}}break;case 1:Zn(e,t),mr(t),r&512&&n!==null&&As(n,n.return);break;case 5:if(Zn(e,t),mr(t),r&512&&n!==null&&As(n,n.return),t.flags&32){var i=t.stateNode;try{wa(i,"")}catch(x){Ve(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&hS(i,o),wm(l,s);var c=wm(l,o);for(s=0;s<a.length;s+=2){var u=a[s],f=a[s+1];u==="style"?yS(i,f):u==="dangerouslySetInnerHTML"?mS(i,f):u==="children"?wa(i,f):og(i,u,f,c)}switch(l){case"input":ym(i,o);break;case"textarea":dS(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?Os(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?Os(i,!!o.multiple,o.defaultValue,!0):Os(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ma]=o}catch(x){Ve(t,t.return,x)}}break;case 6:if(Zn(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){Ve(t,t.return,x)}}break;case 3:if(Zn(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(x){Ve(t,t.return,x)}break;case 4:Zn(e,t),mr(t);break;case 13:Zn(e,t),mr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Bg=Ge())),r&4&&Qv(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(c=Pt)||u,Zn(e,t),Pt=c):Zn(e,t),mr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(U=t,u=t.child;u!==null;){for(f=U=u;U!==null;){switch(h=U,d=h.child,h.tag){case 0:case 11:case 14:case 15:xa(4,h,h.return);break;case 1:As(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(x){Ve(r,n,x)}}break;case 5:As(h,h.return);break;case 22:if(h.memoizedState!==null){eS(f);continue}}d!==null?(d.return=h,U=d):eS(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=gS("display",s))}catch(x){Ve(t,t.return,x)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Ve(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zn(e,t),mr(t),r&4&&Qv(t);break;case 21:break;default:Zn(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hk(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wa(i,""),r.flags&=-33);var o=Zv(t);Qm(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Zv(t);Zm(t,l,s);break;default:throw Error(O(161))}}catch(a){Ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QL(t,e,n){U=t,Gk(t,e,n)}function Gk(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Pu;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Pt;l=Pu;var c=Pt;if(Pu=s,(Pt=a)&&!c)for(U=i;U!==null;)s=U,a=s.child,s.tag===22&&s.memoizedState!==null?tS(i):a!==null?(a.return=s,U=a):tS(i);for(;o!==null;)U=o,Gk(o,e,n),o=o.sibling;U=i,Pu=l,Pt=c}Jv(t,e,n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,U=o):Jv(t,e,n)}}function Jv(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||Ef(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Fv(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fv(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Ta(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Pt||e.flags&512&&Xm(e)}catch(h){Ve(e,e.return,h)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function eS(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function tS(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ef(4,e)}catch(a){Ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Ve(e,i,a)}}var o=e.return;try{Xm(e)}catch(a){Ve(e,o,a)}break;case 5:var s=e.return;try{Xm(e)}catch(a){Ve(e,s,a)}}}catch(a){Ve(e,e.return,a)}if(e===t){U=null;break}var l=e.sibling;if(l!==null){l.return=e.return,U=l;break}U=e.return}}var JL=Math.ceil,hf=ei.ReactCurrentDispatcher,Dg=ei.ReactCurrentOwner,Dn=ei.ReactCurrentBatchConfig,re=0,gt=null,Je=null,bt=0,yn=0,Rs=Pi(0),at=0,Fa=null,Oo=0,Tf=0,Fg=0,va=null,nn=null,Bg=0,Us=1/0,Gr=null,df=!1,Jm=null,Ri=null,_u=!1,wi=null,pf=0,Sa=0,eg=null,Wu=-1,ju=0;function Gt(){return re&6?Ge():Wu!==-1?Wu:Wu=Ge()}function Oi(t){return t.mode&1?re&2&&bt!==0?bt&-bt:DL.transition!==null?(ju===0&&(ju=OS()),ju):(t=ce,t!==0||(t=window.event,t=t===void 0?16:DS(t.type)),t):1}function nr(t,e,n,r){if(50<Sa)throw Sa=0,eg=null,Error(O(185));Ba(t,n,r),(!(re&2)||t!==gt)&&(t===gt&&(!(re&2)&&(Tf|=n),at===4&&Si(t,bt)),ln(t,r),n===1&&re===0&&!(e.mode&1)&&(Us=Ge()+500,wf&&_i()))}function ln(t,e){var n=t.callbackNode;BM(t,e);var r=Xu(t,t===gt?bt:0);if(r===0)n!==null&&cv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cv(n),e===1)t.tag===0?_L(nS.bind(null,t)):tk(nS.bind(null,t)),ML(function(){!(re&6)&&_i()}),n=null;else{switch(IS(r)){case 1:n=ug;break;case 4:n=AS;break;case 16:n=Yu;break;case 536870912:n=RS;break;default:n=Yu}n=Jk(n,$k.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $k(t,e){if(Wu=-1,ju=0,re&6)throw Error(O(327));var n=t.callbackNode;if(Ps()&&t.callbackNode!==n)return null;var r=Xu(t,t===gt?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mf(t,r);else{e=r;var i=re;re|=2;var o=qk();(gt!==t||bt!==e)&&(Gr=null,Us=Ge()+500,bo(t,e));do try{nN();break}catch(l){Kk(t,l)}while(!0);Cg(),hf.current=o,re=i,Je!==null?e=0:(gt=null,bt=0,e=at)}if(e!==0){if(e===2&&(i=Am(t),i!==0&&(r=i,e=tg(t,i))),e===1)throw n=Fa,bo(t,0),Si(t,r),ln(t,Ge()),n;if(e===6)Si(t,r);else{if(i=t.current.alternate,!(r&30)&&!eN(i)&&(e=mf(t,r),e===2&&(o=Am(t),o!==0&&(r=o,e=tg(t,o))),e===1))throw n=Fa,bo(t,0),Si(t,r),ln(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:So(t,nn,Gr);break;case 3:if(Si(t,r),(r&130023424)===r&&(e=Bg+500-Ge(),10<e)){if(Xu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_m(So.bind(null,t,nn,Gr),e);break}So(t,nn,Gr);break;case 4:if(Si(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-tr(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JL(r/1960))-r,10<r){t.timeoutHandle=_m(So.bind(null,t,nn,Gr),r);break}So(t,nn,Gr);break;case 5:So(t,nn,Gr);break;default:throw Error(O(329))}}}return ln(t,Ge()),t.callbackNode===n?$k.bind(null,t):null}function tg(t,e){var n=va;return t.current.memoizedState.isDehydrated&&(bo(t,e).flags|=256),t=mf(t,e),t!==2&&(e=nn,nn=n,e!==null&&ng(e)),t}function ng(t){nn===null?nn=t:nn.push.apply(nn,t)}function eN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!rr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Si(t,e){for(e&=~Fg,e&=~Tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function nS(t){if(re&6)throw Error(O(327));Ps();var e=Xu(t,0);if(!(e&1))return ln(t,Ge()),null;var n=mf(t,e);if(t.tag!==0&&n===2){var r=Am(t);r!==0&&(e=r,n=tg(t,r))}if(n===1)throw n=Fa,bo(t,0),Si(t,e),ln(t,Ge()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,So(t,nn,Gr),ln(t,Ge()),null}function zg(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Us=Ge()+500,wf&&_i())}}function Io(t){wi!==null&&wi.tag===0&&!(re&6)&&Ps();var e=re;re|=1;var n=Dn.transition,r=ce;try{if(Dn.transition=null,ce=1,t)return t()}finally{ce=r,Dn.transition=n,re=e,!(re&6)&&_i()}}function Vg(){yn=Rs.current,Te(Rs)}function bo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IL(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Sg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tf();break;case 3:zs(),Te(on),Te(_t),Og();break;case 5:Rg(r);break;case 4:zs();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:bg(r.type._context);break;case 22:case 23:Vg()}n=n.return}if(gt=t,Je=t=Ii(t.current,null),bt=yn=e,at=0,Fa=null,Fg=Tf=Oo=0,nn=va=null,wo!==null){for(e=0;e<wo.length;e++)if(n=wo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}wo=null}return t}function Kk(t,e){do{var n=Je;try{if(Cg(),Vu.current=ff,uf){for(var r=_e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uf=!1}if(Ro=0,mt=lt=_e=null,ya=!1,Pa=0,Dg.current=null,n===null||n.return===null){at=1,Fa=e,Je=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=bt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=Wv(s);if(d!==null){d.flags&=-257,jv(d,s,l,o,e),d.mode&1&&Hv(o,c,e),e=d,a=c;var p=e.updateQueue;if(p===null){var x=new Set;x.add(a),e.updateQueue=x}else p.add(a);break e}else{if(!(e&1)){Hv(o,c,e),Ug();break e}a=Error(O(426))}}else if(Me&&l.mode&1){var v=Wv(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),jv(v,s,l,o,e),kg(Vs(a,l));break e}}o=a=Vs(a,l),at!==4&&(at=2),va===null?va=[o]:va.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=Ik(o,a,e);Dv(o,m);break e;case 1:l=a;var g=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ri===null||!Ri.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=Mk(o,l,e);Dv(o,S);break e}}o=o.return}while(o!==null)}Xk(n)}catch(k){e=k,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function qk(){var t=hf.current;return hf.current=ff,t===null?ff:t}function Ug(){(at===0||at===3||at===2)&&(at=4),gt===null||!(Oo&268435455)&&!(Tf&268435455)||Si(gt,bt)}function mf(t,e){var n=re;re|=2;var r=qk();(gt!==t||bt!==e)&&(Gr=null,bo(t,e));do try{tN();break}catch(i){Kk(t,i)}while(!0);if(Cg(),re=n,hf.current=r,Je!==null)throw Error(O(261));return gt=null,bt=0,at}function tN(){for(;Je!==null;)Yk(Je)}function nN(){for(;Je!==null&&!OM();)Yk(Je)}function Yk(t){var e=Qk(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?Xk(t):Je=e,Dg.current=null}function Xk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YL(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,Je=null;return}}else if(n=qL(n,e,yn),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);at===0&&(at=5)}function So(t,e,n){var r=ce,i=Dn.transition;try{Dn.transition=null,ce=1,rN(t,e,n,r)}finally{Dn.transition=i,ce=r}return null}function rN(t,e,n,r){do Ps();while(wi!==null);if(re&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(zM(t,o),t===gt&&(Je=gt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_u||(_u=!0,Jk(Yu,function(){return Ps(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Dn.transition,Dn.transition=null;var s=ce;ce=1;var l=re;re|=4,Dg.current=null,ZL(t,n),jk(n,t),EL(Nm),Zu=!!Lm,Nm=Lm=null,t.current=n,QL(n,t,i),IM(),re=l,ce=s,Dn.transition=o}else t.current=n;if(_u&&(_u=!1,wi=t,pf=i),o=t.pendingLanes,o===0&&(Ri=null),NM(n.stateNode,r),ln(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(df)throw df=!1,t=Jm,Jm=null,t;return pf&1&&t.tag!==0&&Ps(),o=t.pendingLanes,o&1?t===eg?Sa++:(Sa=0,eg=t):Sa=0,_i(),null}function Ps(){if(wi!==null){var t=IS(pf),e=Dn.transition,n=ce;try{if(Dn.transition=null,ce=16>t?16:t,wi===null)var r=!1;else{if(t=wi,wi=null,pf=0,re&6)throw Error(O(331));var i=re;for(re|=4,U=t.current;U!==null;){var o=U,s=o.child;if(U.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(U=c;U!==null;){var u=U;switch(u.tag){case 0:case 11:case 15:xa(8,u,o)}var f=u.child;if(f!==null)f.return=u,U=f;else for(;U!==null;){u=U;var h=u.sibling,d=u.return;if(Uk(u),u===c){U=null;break}if(h!==null){h.return=d,U=h;break}U=d}}}var p=o.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}U=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,U=s;else e:for(;U!==null;){if(o=U,o.flags&2048)switch(o.tag){case 0:case 11:case 15:xa(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,U=m;break e}U=o.return}}var g=t.current;for(U=g;U!==null;){s=U;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,U=y;else e:for(s=g;U!==null;){if(l=U,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ef(9,l)}}catch(k){Ve(l,l.return,k)}if(l===s){U=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,U=S;break e}U=l.return}}if(re=i,_i(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(yf,t)}catch{}r=!0}return r}finally{ce=n,Dn.transition=e}}return!1}function rS(t,e,n){e=Vs(n,e),e=Ik(t,e,1),t=Ai(t,e,1),e=Gt(),t!==null&&(Ba(t,1,e),ln(t,e))}function Ve(t,e,n){if(t.tag===3)rS(t,t,n);else for(;e!==null;){if(e.tag===3){rS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ri===null||!Ri.has(r))){t=Vs(n,t),t=Mk(e,t,1),e=Ai(e,t,1),t=Gt(),e!==null&&(Ba(e,1,t),ln(e,t));break}}e=e.return}}function iN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(bt&n)===n&&(at===4||at===3&&(bt&130023424)===bt&&500>Ge()-Bg?bo(t,0):Fg|=n),ln(t,e)}function Zk(t,e){e===0&&(t.mode&1?(e=ku,ku<<=1,!(ku&130023424)&&(ku=4194304)):e=1);var n=Gt();t=Qr(t,e),t!==null&&(Ba(t,e,n),ln(t,n))}function oN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zk(t,n)}function sN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),Zk(t,n)}var Qk;Qk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rn=!1,KL(t,e,n);rn=!!(t.flags&131072)}else rn=!1,Me&&e.flags&1048576&&nk(e,of,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hu(t,e),t=e.pendingProps;var i=Ds(e,_t.current);Ns(e,n),i=Mg(null,e,r,t,i,n);var o=Lg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(o=!0,nf(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Tg(e),i.updater=bf,e.stateNode=i,i._reactInternals=e,Hm(e,r,t,n),e=Gm(null,e,r,!0,o,n)):(e.tag=0,Me&&o&&vg(e),jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aN(r),t=Qn(r,t),i){case 0:e=jm(null,e,r,t,n);break e;case 1:e=Kv(null,e,r,t,n);break e;case 11:e=Gv(null,e,r,t,n);break e;case 14:e=$v(null,e,r,Qn(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),jm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Kv(t,e,r,i,n);case 3:e:{if(_k(e),t===null)throw Error(O(387));r=e.pendingProps,o=e.memoizedState,i=o.element,ak(t,e),af(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Vs(Error(O(423)),e),e=qv(t,e,r,n,i);break e}else if(r!==i){i=Vs(Error(O(424)),e),e=qv(t,e,r,n,i);break e}else for(xn=Ti(e.stateNode.containerInfo.firstChild),vn=e,Me=!0,er=null,n=sk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fs(),r===i){e=Jr(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return ck(e),t===null&&zm(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Pm(r,i)?s=null:o!==null&&Pm(r,o)&&(e.flags|=32),Pk(t,e),jt(t,e,s,n),e.child;case 6:return t===null&&zm(e),null;case 13:return Dk(t,e,n);case 4:return Ag(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bs(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Gv(t,e,r,i,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ve(sf,r._currentValue),r._currentValue=s,o!==null)if(rr(o.value,s)){if(o.children===i.children&&!on.current){e=Jr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Yr(-1,n&-n),a.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Vm(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(O(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Vm(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ns(e,n),i=Fn(i),r=r(i),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,i=Qn(r,e.pendingProps),i=Qn(r.type,i),$v(t,e,r,i,n);case 15:return Lk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Hu(t,e),e.tag=1,sn(r)?(t=!0,nf(e)):t=!1,Ns(e,n),Ok(e,r,i),Hm(e,r,i,n),Gm(null,e,r,!0,t,n);case 19:return Fk(t,e,n);case 22:return Nk(t,e,n)}throw Error(O(156,e.tag))};function Jk(t,e){return TS(t,e)}function lN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,r){return new lN(t,e,n,r)}function Hg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aN(t){if(typeof t=="function")return Hg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lg)return 11;if(t===ag)return 14}return 2}function Ii(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gu(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Hg(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case xs:return Eo(n.children,i,o,e);case sg:s=8,i|=8;break;case hm:return t=_n(12,n,e,i|2),t.elementType=hm,t.lanes=o,t;case dm:return t=_n(13,n,e,i),t.elementType=dm,t.lanes=o,t;case pm:return t=_n(19,n,e,i),t.elementType=pm,t.lanes=o,t;case cS:return Af(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lS:s=10;break e;case aS:s=9;break e;case lg:s=11;break e;case ag:s=14;break e;case yi:s=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=_n(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Eo(t,e,n,r){return t=_n(7,t,r,e),t.lanes=n,t}function Af(t,e,n,r){return t=_n(22,t,r,e),t.elementType=cS,t.lanes=n,t.stateNode={isHidden:!1},t}function cm(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function um(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kp(0),this.expirationTimes=Kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wg(t,e,n,r,i,o,s,l,a){return t=new cN(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=_n(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tg(o),t}function uN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ys,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ew(t){if(!t)return Li;t=t._reactInternals;e:{if(Lo(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(sn(n))return ek(t,n,e)}return e}function tw(t,e,n,r,i,o,s,l,a){return t=Wg(n,r,!0,t,i,o,s,l,a),t.context=ew(null),n=t.current,r=Gt(),i=Oi(n),o=Yr(r,i),o.callback=e??null,Ai(n,o,i),t.current.lanes=i,Ba(t,i,r),ln(t,r),t}function Rf(t,e,n,r){var i=e.current,o=Gt(),s=Oi(i);return n=ew(n),e.context===null?e.context=n:e.pendingContext=n,e=Yr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ai(i,e,s),t!==null&&(nr(t,i,s,o),zu(t,i,s)),s}function gf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jg(t,e){iS(t,e),(t=t.alternate)&&iS(t,e)}function fN(){return null}var nw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gg(t){this._internalRoot=t}Of.prototype.render=Gg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Rf(t,e,null,null)};Of.prototype.unmount=Gg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Io(function(){Rf(null,t,null,null)}),e[Zr]=null}};function Of(t){this._internalRoot=t}Of.prototype.unstable_scheduleHydration=function(t){if(t){var e=NS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vi.length&&e!==0&&e<vi[n].priority;n++);vi.splice(n,0,t),n===0&&_S(t)}};function $g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oS(){}function hN(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=gf(s);o.call(c)}}var s=tw(e,r,t,0,null,!1,!1,"",oS);return t._reactRootContainer=s,t[Zr]=s.current,Oa(t.nodeType===8?t.parentNode:t),Io(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=gf(a);l.call(c)}}var a=Wg(t,0,!1,null,null,!1,!1,"",oS);return t._reactRootContainer=a,t[Zr]=a.current,Oa(t.nodeType===8?t.parentNode:t),Io(function(){Rf(e,a,n,r)}),a}function Mf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=gf(s);l.call(a)}}Rf(e,s,t,i)}else s=hN(n,e,t,i,r);return gf(s)}MS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ua(e.pendingLanes);n!==0&&(fg(e,n|1),ln(e,Ge()),!(re&6)&&(Us=Ge()+500,_i()))}break;case 13:Io(function(){var r=Qr(t,1);if(r!==null){var i=Gt();nr(r,t,1,i)}}),jg(t,1)}};hg=function(t){if(t.tag===13){var e=Qr(t,134217728);if(e!==null){var n=Gt();nr(e,t,134217728,n)}jg(t,134217728)}};LS=function(t){if(t.tag===13){var e=Oi(t),n=Qr(t,e);if(n!==null){var r=Gt();nr(n,t,e,r)}jg(t,e)}};NS=function(){return ce};PS=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};bm=function(t,e,n){switch(e){case"input":if(ym(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kf(r);if(!i)throw Error(O(90));fS(r),ym(r,i)}}}break;case"textarea":dS(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};SS=zg;kS=Io;var dN={usingClientEntryPoint:!1,Events:[Va,ws,kf,xS,vS,zg]},sa={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pN={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bS(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||fN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(la=__REACT_DEVTOOLS_GLOBAL_HOOK__,!la.isDisabled&&la.supportsFiber))try{yf=la.inject(pN),xr=la}catch{}var la;wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dN;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$g(e))throw Error(O(200));return uN(t,e,null,n)};wn.createRoot=function(t,e){if(!$g(t))throw Error(O(299));var n=!1,r="",i=nw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wg(t,1,!1,null,null,n,!1,r,i),t[Zr]=e.current,Oa(t.nodeType===8?t.parentNode:t),new Gg(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=bS(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return Io(t)};wn.hydrate=function(t,e,n){if(!If(e))throw Error(O(200));return Mf(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!$g(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=nw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=tw(e,null,t,1,n??null,i,!1,o,s),t[Zr]=e.current,Oa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Of(e)};wn.render=function(t,e,n){if(!If(e))throw Error(O(200));return Mf(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!If(t))throw Error(O(40));return t._reactRootContainer?(Io(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[Zr]=null})}),!0):!1};wn.unstable_batchedUpdates=zg;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!If(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Mf(t,e,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426"});var sw=jr((XU,ow)=>{"use strict";function iw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iw)}catch(t){console.error(t)}}iw(),ow.exports=rw()});var aw=jr(Kg=>{"use strict";var lw=sw();Kg.createRoot=lw.createRoot,Kg.hydrateRoot=lw.hydrateRoot;var ZU});var lA=jr(dd=>{"use strict";var i6=pi(),o6=Symbol.for("react.element"),s6=Symbol.for("react.fragment"),l6=Object.prototype.hasOwnProperty,a6=i6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c6={key:!0,ref:!0,__self:!0,__source:!0};function sA(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)l6.call(e,r)&&!c6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:o6,type:t,key:o,ref:s,props:i,_owner:a6.current}}dd.Fragment=s6;dd.jsx=sA;dd.jsxs=sA});var Yi=jr((zW,aA)=>{"use strict";aA.exports=lA()});var jI=gn(pi()),GI=gn(aw());var me=gn(pi());function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lf.apply(null,arguments)}function cw(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Xi=gn(pi(),1);var cn=gn(pi(),1);var Yg=[],dw=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?dw:Yg).push(n=n+t[e])})();function mN(t){if(t<768)return!1;for(let e=0,n=Yg.length;;){let r=e+n>>1;if(t<Yg[r])n=r;else if(t>=dw[r])e=r+1;else return!0;if(e==n)return!1}}function uw(t){return t>=127462&&t<=127487}var fw=8205;function pw(t,e,n=!0,r=!0){return(n?mw:gN)(t,e,r)}function mw(t,e,n){if(e==t.length)return e;e&&gw(t.charCodeAt(e))&&yw(t.charCodeAt(e-1))&&e--;let r=qg(t,e);for(e+=hw(r);e<t.length;){let i=qg(t,e);if(r==fw||i==fw||n&&mN(i))e+=hw(i),r=i;else if(uw(i)){let o=0,s=e-2;for(;s>=0&&uw(qg(t,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function gN(t,e,n){for(;e>0;){let r=mw(t,e-2,n);if(r<e)return r;e--}return 0}function qg(t,e){let n=t.charCodeAt(e);if(!yw(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return gw(r)?(n-55296<<10)+(r-56320)+65536:n}function gw(t){return t>=56320&&t<57344}function yw(t){return t>=55296&&t<56320}function hw(t){return t<65536?1:2}var Z=class t{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=qs(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Gs.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=qs(this,e,n);let r=[];return this.decompose(e,n,r,0),Gs.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new _o(this),o=new _o(e);for(let s=n,l=n;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new _o(this,e)}iterRange(e,n=this.length){return new Ff(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Bf(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?t.empty:e.length<=32?new Cn(e):Gs.from(Cn.split(e,[]))}},Cn=class t extends Z{constructor(e,n=yN(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.text[o],l=i+s.length;if((n?r:l)>=e)return new Zg(i,l,r,s);i=l+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new t(xw(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),l=Df(o.text,s.text.slice(),0,o.length);if(l.length<=32)r.push(new t(l,s.length+o.length));else{let a=l.length>>1;r.push(new t(l.slice(0,a)),new t(l.slice(a)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof t))return super.replace(e,n,r);[e,n]=qs(this,e,n);let i=Df(this.text,Df(r.text,xw(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new t(i,o):Gs.from(t.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){[e,n]=qs(this,e,n);let i="";for(let o=0,s=0;o<=n&&s<this.text.length;s++){let l=this.text[s],a=o+l.length;o>e&&s&&(i+=r),e<a&&n>o&&(i+=l.slice(Math.max(0,e-o),n-o)),o=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new t(r,i)),r=[],i=-1);return i>-1&&n.push(new t(r,i)),n}},Gs=class t extends Z{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.children[o],l=i+s.length,a=r+s.lines-1;if((n?a:l)>=e)return s.lineInner(e,n,r,i);i=l+1,r=a+1}}decompose(e,n,r,i){for(let o=0,s=0;s<=n&&o<this.children.length;o++){let l=this.children[o],a=s+l.length;if(e<=a&&n>=s){let c=i&((s<=e?1:0)|(a>=n?2:0));s>=e&&a<=n&&!c?r.push(l):l.decompose(e-s,n-s,r,c)}s=a+1}}replace(e,n,r){if([e,n]=qs(this,e,n),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],l=o+s.length;if(e>=o&&n<=l){let a=s.replace(e-o,n-o,r),c=this.lines-s.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let u=this.children.slice();return u[i]=a,new t(u,this.length-(n-e)+r.length)}return super.replace(o,l,a)}o=l+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=qs(this,e,n);let i="";for(let o=0,s=0;o<this.children.length&&s<=n;o++){let l=this.children[o],a=s+l.length;s>e&&o&&(i+=r),e<a&&n>s&&(i+=l.sliceString(e-s,n-s,r)),s=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof t))return 0;let r=0,[i,o,s,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==s||o==l)return r;let a=this.children[i],c=e.children[o];if(a!=c)return r+a.scanIdentical(c,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let p of e)p.flatten(d);return new Cn(d,n)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,l=[],a=0,c=-1,u=[];function f(d){let p;if(d.lines>o&&d instanceof t)for(let x of d.children)f(x);else d.lines>s&&(a>s||!a)?(h(),l.push(d)):d instanceof Cn&&a&&(p=u[u.length-1])instanceof Cn&&d.lines+p.lines<=32?(a+=d.lines,c+=d.length+1,u[u.length-1]=new Cn(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>i&&h(),a+=d.lines,c+=d.length+1,u.push(d))}function h(){a!=0&&(l.push(u.length==1?u[0]:t.from(u,c)),c=-1,a=u.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new t(l,n)}};Z.empty=new Cn([""],0);function yN(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Df(t,e,n=0,r=1e9){for(let i=0,o=0,s=!0;o<t.length&&i<=r;o++){let l=t[o],a=i+l.length;a>=n&&(a>r&&(l=l.slice(0,r-i)),i<n&&(l=l.slice(n-i)),s?(e[e.length-1]+=l,s=!1):e.push(l)),i=a+1}return e}function xw(t,e,n){return Df(t,[""],e,n)}var _o=class{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Cn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,l=i instanceof Cn?i.text.length:i.children.length;if(s==(n>0?l:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Cn){let a=i.text[s+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[s+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof Cn?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Ff=class{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new _o(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Bf=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(Z.prototype[Symbol.iterator]=function(){return this.iter()},_o.prototype[Symbol.iterator]=Ff.prototype[Symbol.iterator]=Bf.prototype[Symbol.iterator]=function(){return this});var Zg=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}};function qs(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function et(t,e,n=!0,r=!0){return pw(t,e,n,r)}function xN(t){return t>=56320&&t<57344}function vN(t){return t>=55296&&t<56320}function At(t,e){let n=t.charCodeAt(e);if(!vN(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return xN(r)?(n-55296<<10)+(r-56320)+65536:n}function Ka(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function bn(t){return t<65536?1:2}var Qg=/\r\n?|\n/,Tt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Tt||(Tt={})),ti=class t{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],s=this.sections[n++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,n=!1){Jg(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new t(e)}composeDesc(e){return this.empty?e:e.empty?this:Cw(this,e)}mapDesc(e,n=!1){return e.empty?this:e0(this,e,n)}mapPos(e,n=-1,r=Tt.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],a=this.sections[s++],c=i+l;if(a<0){if(c>e)return o+(e-i);o+=l}else{if(r!=Tt.Simple&&c>=e&&(r==Tt.TrackDel&&i<e&&c>e||r==Tt.TrackBefore&&i<e||r==Tt.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!l)return e==i||n<0?o:o+a;o+=a}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],s=this.sections[r++],l=i+o;if(s>=0&&i<=n&&l>=e)return i<e&&l>n?"cover":!0;i=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t(e)}static create(e){return new t(e)}},Kt=class t extends ti{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Jg(this,(n,r,i,o,s)=>e=e.replace(i,i+(r-n),s),!1),e}mapDesc(e,n=!1){return e0(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let s=n[i],l=n[i+1];if(l>=0){n[i]=l,n[i+1]=s;let a=i>>1;for(;r.length<a;)r.push(Z.empty);r.push(s?e.slice(o,o+s):Z.empty)}o+=s}return new t(n,r)}compose(e){return this.empty?e:e.empty?this:Cw(this,e,!0)}map(e,n=!1){return e.empty?this:e0(this,e,n,!0)}iterChanges(e,n=!1){Jg(this,e,n)}get desc(){return ti.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new Do(this);e:for(let s=0,l=0;;){let a=s==e.length?1e9:e[s++];for(;l<a||l==a&&o.len==0;){if(o.done)break e;let u=Math.min(o.len,a-l);Dt(i,u,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;Dt(n,u,f),f>0&&Di(r,n,o.text),o.forward(u),l+=u}let c=e[s++];for(;l<c;){if(o.done)break e;let u=Math.min(o.len,c-l);Dt(n,u,-1),Dt(i,u,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(u),l+=u}}return{changes:new t(n,r),filtered:ti.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],s=0,l=null;function a(u=!1){if(!u&&!i.length)return;s<n&&Dt(i,n-s,-1);let f=new t(i,o);l=l?l.compose(f.map(l)):f,i=[],o=[],s=0}function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof t){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:d}=u;if(f>h||f<0||h>n)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);let p=d?typeof d=="string"?Z.of(d.split(r||Qg)):d:Z.empty,x=p.length;if(f==h&&x==0)return;f<s&&a(),f>s&&Dt(i,f-s,-1),Dt(i,h-f,x),Di(o,i,p),s=h}}return c(e),a(!l),l}static empty(e){return new t(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(Z.empty);r[i]=Z.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new t(n,r)}static createSet(e,n){return new t(e,n)}};function Dt(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Di(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Z.empty);t.push(n)}}function Jg(t,e,n){let r=t.inserted;for(let i=0,o=0,s=0;s<t.sections.length;){let l=t.sections[s++],a=t.sections[s++];if(a<0)i+=l,o+=l;else{let c=i,u=o,f=Z.empty;for(;c+=l,u+=a,a&&r&&(f=f.append(r[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)l=t.sections[s++],a=t.sections[s++];e(i,c,o,u,f),i=c,o=u}}}function e0(t,e,n,r=!1){let i=[],o=r?[]:null,s=new Do(t),l=new Do(e);for(let a=-1;;){if(s.done&&l.len||l.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&l.ins==-1){let c=Math.min(s.len,l.len);Dt(i,c,-1),s.forward(c),l.forward(c)}else if(l.ins>=0&&(s.ins<0||a==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!n))){let c=l.len;for(Dt(i,l.ins,-1);c;){let u=Math.min(s.len,c);s.ins>=0&&a<s.i&&s.len<=u&&(Dt(i,0,s.ins),o&&Di(o,i,s.text),a=s.i),s.forward(u),c-=u}l.next()}else if(s.ins>=0){let c=0,u=s.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);c+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Dt(i,c,a<s.i?s.ins:0),o&&a<s.i&&Di(o,i,s.text),a=s.i,s.forward(s.len-u)}else{if(s.done&&l.done)return o?Kt.createSet(i,o):ti.create(i);throw new Error("Mismatched change set lengths")}}}function Cw(t,e,n=!1){let r=[],i=n?[]:null,o=new Do(t),s=new Do(e);for(let l=!1;;){if(o.done&&s.done)return i?Kt.createSet(r,i):ti.create(r);if(o.ins==0)Dt(r,o.len,0,l),o.next();else if(s.len==0&&!s.done)Dt(r,0,s.ins,l),i&&Di(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let a=Math.min(o.len2,s.len),c=r.length;if(o.ins==-1){let u=s.ins==-1?-1:s.off?0:s.ins;Dt(r,a,u,l),i&&u&&Di(i,r,s.text)}else s.ins==-1?(Dt(r,o.off?0:o.len,a,l),i&&Di(i,r,o.textBit(a))):(Dt(r,o.off?0:o.len,s.off?0:s.ins,l),i&&!s.off&&Di(i,r,s.text));l=(o.ins>a||s.ins>=0&&s.len>a)&&(l||r.length>c),o.forward2(a),s.forward(a)}}}}var Do=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Z.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Z.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},js=class t{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new t(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return T.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return T.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return T.range(e.anchor,e.head)}static create(e,n,r){return new t(e,n,r)}},T=class t{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:t.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new t([this.main],0)}addRange(e,n=!0){return t.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,t.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new t(e.ranges.map(n=>js.fromJSON(n)),e.main)}static single(e,n=e){return new t([t.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return t.normalized(e.slice(),n);r=o.to}return new t(e,n)}static cursor(e,n=0,r,i){return js.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let o=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?js.create(n,e,48|o):js.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let l=s.from,a=Math.max(o.to,s.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?t.range(a,l):t.range(l,a))}}return new t(e,n)}};function bw(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}var u0=0,B=class t{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=u0++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new t(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:f0),!!e.static,e.enables)}of(e){return new $s([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new $s(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new $s(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}};function f0(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}var $s=class{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=u0++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:((n=e[f.id])!==null&&n!==void 0?n:1)&1||u.push(e[f.id]);return{create(f){return f.values[s]=r(f),1},update(f,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||t0(f,u)){let d=r(f);if(l?!vw(d,f.values[s],i):!i(d,f.values[s]))return f.values[s]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[o];if(p!=null){let x=Hf(h,p);if(this.dependencies.every(v=>v instanceof B?h.facet(v)===f.facet(v):v instanceof ee?h.field(v,!1)==f.field(v,!1):!0)||(l?vw(d=r(f),x,i):i(d=r(f),x)))return f.values[s]=x,0}else d=r(f);return f.values[s]=d,1}}}};function vw(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function t0(t,e){let n=!1;for(let r of e)Wa(t,r)&1&&(n=!0);return n}function SN(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),o=r.filter(a=>!(a&1)),s=t[e.id]>>1;function l(a){let c=[];for(let u=0;u<r.length;u++){let f=Hf(a,r[u]);if(i[u]==2)for(let h of f)c.push(h);else c.push(f)}return e.combine(c)}return{create(a){for(let c of r)Wa(a,c);return a.values[s]=l(a),1},update(a,c){if(!t0(a,o))return 0;let u=l(a);return e.compare(u,a.values[s])?0:(a.values[s]=u,1)},reconfigure(a,c){let u=t0(a,r),f=c.config.facets[e.id],h=c.facet(e);if(f&&!u&&f0(n,f))return a.values[s]=h,0;let d=l(a);return e.compare(d,h)?(a.values[s]=h,0):(a.values[s]=d,1)}}}var Nf=B.define({static:!0}),ee=class t{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new t(u0++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Nf).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[n]=s,1)},reconfigure:(r,i)=>{let o=r.facet(Nf),s=i.facet(Nf),l;return(l=o.find(a=>a.field==this))&&l!=s.find(a=>a.field==this)?(r.values[n]=l.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Nf.of({field:this,create:e})]}get extension(){return this}},No={lowest:4,low:3,default:2,high:1,highest:0};function Ha(t){return e=>new zf(e,t)}var En={highest:Ha(No.highest),high:Ha(No.high),default:Ha(No.default),low:Ha(No.low),lowest:Ha(No.lowest)},zf=class{constructor(e,n){this.inner=e,this.prec=n}},Vf=class t{of(e){return new ja(this,e)}reconfigure(e){return t.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},ja=class{constructor(e,n){this.compartment=e,this.inner=n}},Uf=class t{constructor(e,n,r,i,o,s){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),s=new Map;for(let h of kN(e,n,s))h instanceof ee?i.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of i)l[h.id]=c.length<<1,c.push(d=>h.slot(d));let u=r?.config.facets;for(let h in o){let d=o[h],p=d[0].facet,x=u&&u[h]||[];if(d.every(v=>v.type==0))if(l[p.id]=a.length<<1|1,f0(x,d))a.push(r.facet(p));else{let v=p.combine(d.map(m=>m.value));a.push(r&&p.compare(v,r.facet(p))?r.facet(p):v)}else{for(let v of d)v.type==0?(l[v.id]=a.length<<1|1,a.push(v.value)):(l[v.id]=c.length<<1,c.push(m=>v.dynamicSlot(m)));l[p.id]=c.length<<1,c.push(v=>SN(v,p,d))}}let f=c.map(h=>h(l));return new t(e,s,f,l,a,o)}};function kN(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(s,l){let a=i.get(s);if(a!=null){if(a<=l)return;let c=r[a].indexOf(s);c>-1&&r[a].splice(c,1),s instanceof ja&&n.delete(s.compartment)}if(i.set(s,l),Array.isArray(s))for(let c of s)o(c,l);else if(s instanceof ja){if(n.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(s.compartment)||s.inner;n.set(s.compartment,c),o(c,l)}else if(s instanceof zf)o(s.inner,s.prec);else if(s instanceof ee)r[l].push(s),s.provides&&o(s.provides,l);else if(s instanceof $s)r[l].push(s),s.facet.extensions&&o(s.facet.extensions,No.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,l)}}return o(t,No.default),r.reduce((s,l)=>s.concat(l))}function Wa(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Hf(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}var Ew=B.define(),n0=B.define({combine:t=>t.some(e=>e),static:!0}),Tw=B.define({combine:t=>t.length?t[0]:void 0,static:!0}),Aw=B.define(),Rw=B.define(),Ow=B.define(),Iw=B.define({combine:t=>t.length?t[0]:!1}),yt=class{constructor(e,n){this.type=e,this.value=n}static define(){return new r0}},r0=class{of(e){return new yt(this,e)}},i0=class{constructor(e){this.map=e}of(e){return new H(this,e)}},H=class t{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new t(this.type,n)}is(e){return this.type==e}static define(e={}){return new i0(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}};H.reconfigure=H.define();H.appendConfig=H.define();var ct=class t{constructor(e,n,r,i,o,s){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&bw(r,n.newLength),o.some(l=>l.type==t.time)||(this.annotations=o.concat(t.time.of(Date.now())))}static create(e,n,r,i,o,s){return new t(e,n,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(t.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}};ct.time=yt.define();ct.userEvent=yt.define();ct.addToHistory=yt.define();ct.remote=yt.define();function wN(t,e){let n=[];for(let r=0,i=0;;){let o,s;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],s=t[r++];else if(i<e.length)o=e[i++],s=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Mw(t,e,n){var r;let i,o,s;return n?(i=e.changes,o=Kt.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:H.mapEffects(t.effects,i).concat(H.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function o0(t,e,n){let r=e.selection,i=Ks(e.annotations);return e.userEvent&&(i=i.concat(ct.userEvent.of(e.userEvent))),{changes:e.changes instanceof Kt?e.changes:Kt.of(e.changes||[],n,t.facet(Tw)),selection:r&&(r instanceof T?r:T.single(r.anchor,r.head)),effects:Ks(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Lw(t,e,n){let r=o0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let s=!!e[o].sequential;r=Mw(r,o0(t,e[o],s?r.changes.newLength:t.doc.length),s)}let i=ct.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return bN(n?CN(i):i)}function CN(t){let e=t.startState,n=!0;for(let i of e.facet(Aw)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:wN(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=Kt.empty(e.doc.length);else{let s=t.changes.filter(n);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}t=ct.create(e,i,t.selection&&t.selection.map(o),H.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(Rw);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof ct?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof ct?t=o[0]:t=Lw(e,Ks(o),!1)}return t}function bN(t){let e=t.startState,n=e.facet(Ow),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=Mw(r,o0(e,o,t.changes.newLength),!0))}return r==t?t:ct.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}var EN=[];function Ks(t){return t==null?EN:Array.isArray(t)?t:[t]}var he=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(he||(he={})),TN=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,s0;try{s0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function AN(t){if(s0)return s0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||TN.test(n)))return!0}return!1}function RN(t){return e=>{if(!/\S/.test(e))return he.Space;if(AN(e))return he.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return he.Word;return he.Other}}var oe=class t{constructor(e,n,r,i,o,s){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Wa(this,l<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Wa(this,r),Hf(this,r)}update(...e){return Lw(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let l of e.effects)l.is(Vf.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,c)=>i.set(c,a)),n=null),i.set(l.value.compartment,l.value.extension)):l.is(H.reconfigure)?(n=null,r=l.value):l.is(H.appendConfig)&&(n=null,r=Ks(r).concat(l.value));let o;n?o=e.startState.values.slice():(n=Uf.resolve(r,i,this),o=new t(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let s=e.startState.facet(n0)?e.newSelection:e.newSelection.asSingle();new t(n,e.newDoc,s,o,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:T.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],s=Ks(r.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),c=this.changes(a.changes),u=c.map(i);for(let h=0;h<l;h++)o[h]=o[h].map(u);let f=i.mapDesc(c,!0);o.push(a.range.map(f)),i=i.compose(u),s=H.mapEffects(s,u).concat(H.mapEffects(Ks(a.effects),f))}return{changes:i,selection:T.create(o,n.mainIndex),effects:s}}changes(e=[]){return e instanceof Kt?e:Kt.of(e,this.doc.length,this.facet(t.lineSeparator))}toText(e){return Z.of(e.split(this.facet(t.lineSeparator)||Qg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Wa(this,n),Hf(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof ee&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],l=e[o];i.push(s.init(a=>s.spec.fromJSON(l,a)))}}return t.create({doc:e.doc,selection:T.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Uf.resolve(e.extensions||[],new Map),r=e.doc instanceof Z?e.doc:Z.of((e.doc||"").split(n.staticFacet(t.lineSeparator)||Qg)),i=e.selection?e.selection instanceof T?e.selection:T.single(e.selection.anchor,e.selection.head):T.single(0);return bw(i,r.length),n.staticFacet(n0)||(i=i.asSingle()),new t(n,r,i,n.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(t.tabSize)}get lineBreak(){return this.facet(t.lineSeparator)||`
`}get readOnly(){return this.facet(Iw)}phrase(e,...n){for(let r of this.facet(t.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(Ew))for(let s of o(this,n,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return RN(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,l=e-r;for(;s>0;){let a=et(n,s,!1);if(o(n.slice(a,s))!=he.Word)break;s=a}for(;l<i;){let a=et(n,l);if(o(n.slice(l,a))!=he.Word)break;l=a}return s==l?null:T.range(s+r,l+r)}};oe.allowMultipleSelections=n0;oe.tabSize=B.define({combine:t=>t.length?t[0]:4});oe.lineSeparator=Tw;oe.readOnly=Iw;oe.phrases=B.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});oe.languageData=Ew;oe.changeFilter=Aw;oe.transactionFilter=Rw;oe.transactionExtender=Ow;Vf.reconfigure=H.define();function Ft(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let s=i[o],l=r[o];if(l===void 0)r[o]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](l,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}var ir=class{eq(e){return this==e}range(e,n=e){return Ga.create(e,n,this)}};ir.prototype.startSide=ir.prototype.endSide=0;ir.prototype.point=!1;ir.prototype.mapMode=Tt.TrackDel;var Ga=class t{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new t(e,n,r)}};function l0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}var a0=class t{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let s=i,l=o.length;;){if(s==l)return s;let a=s+l>>1,c=o[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==s)return c>=0?s:l;c>=0?l=a:s=a+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],s=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,d;if(u==f){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(h=d=p,c.startSide!=c.endSide&&(d=n.mapPos(u,c.endSide),d<h)))continue}else if(h=n.mapPos(u,c.startSide),d=n.mapPos(f,c.endSide),h>d||h==d&&c.startSide>0&&c.endSide<=0)continue;(d-h||c.endSide-c.startSide)<0||(s<0&&(s=h),c.point&&(l=Math.max(l,d-h)),r.push(c),i.push(h-s),o.push(d-s))}return{mapped:r.length?new t(i,o,r,l):null,pos:s}}},te=class t{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new t(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(n.length==0&&!s)return this;if(r&&(n=n.slice().sort(l0)),this.isEmpty)return n.length?t.of(n):this;let l=new Wf(this,null,-1).goto(0),a=0,c=[],u=new Ue;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let f=n[a++];u.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!s||i>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||i>l.to||o<l.from||s(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(Ga.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?t.empty:this.nextLayer.update({add:c,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s],c=e.touchesRange(l,l+a.length);if(c===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(f))}}let o=this.nextLayer.map(e);return n.length==0?o:new t(r,n,o||t.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(n>=o&&e<=o+s.length&&s.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return $a.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return $a.from(e).goto(n)}static compare(e,n,r,i,o=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=Sw(s,l,r),c=new Po(s,a,o),u=new Po(l,a,o);r.iterGaps((f,h,d)=>kw(c,f,u,h,d,i)),r.empty&&r.length==0&&kw(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let o=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),s=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let l=Sw(o,s),a=new Po(o,l,0).goto(r),c=new Po(s,l,0).goto(r);for(;;){if(a.to!=c.to||!c0(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>i)return!0;a.next(),c.next()}}static spans(e,n,r,i,o=-1){let s=new Po(e,null,o).goto(n),l=n,a=s.openStart;for(;;){let c=Math.min(s.to,r);if(s.point){let u=s.activeForPoint(s.to),f=s.pointFrom<n?u.length+1:s.point.startSide<0?u.length:Math.min(u.length,a);i.point(l,c,s.point,u,f,s.pointRank),a=Math.min(s.openEnd(c),u.length)}else c>l&&(i.span(l,c,s.active,a),a=s.openEnd(c));if(s.to>r)return a+(s.point&&s.to>r?1:0);l=s.to,s.next()}}static of(e,n=!1){let r=new Ue;for(let i of e instanceof Ga?[e]:n?ON(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return t.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=t.empty;i=i.nextLayer)n=new t(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}};te.empty=new te([],[],null,-1);function ON(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(l0(e,r)>0)return t.slice().sort(l0);e=r}return t}te.empty.nextLayer=te.empty;var Ue=class t{finishChunk(e){this.chunks.push(new a0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new t)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(te.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=te.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}};function Sw(t,e,n){let r=new Map;for(let o of t)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let l=r.get(o.chunk[s]);l!=null&&(n?n.mapPos(l):l)==o.chunkPos[s]&&!n?.touchesRange(l,l+o.chunk[s].length)&&i.add(o.chunk[s])}return i}var Wf=class{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},$a=class t{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new Wf(s,n,r,o));return i.length==1?i[0]:new t(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Xg(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Xg(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Xg(this.heap,0)}}};function Xg(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}var Po=class{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=$a.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Pf(this.active,e),Pf(this.activeTo,e),Pf(this.activeRank,e),this.minActive=ww(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||i-this.activeTo[n])>0;)n++;_f(this.active,n,r),_f(this.activeTo,n,i),_f(this.activeRank,n,o),e&&_f(e,n,this.cursor.from),this.minActive=ww(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Pf(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}};function kw(t,e,n,r,i,o){t.goto(e),n.goto(r);let s=r+i,l=r,a=r-e;for(;;){let c=t.to+a-n.to,u=c||t.endSide-n.endSide,f=u<0?t.to+a:n.to,h=Math.min(f,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&c0(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(l,h,t.point,n.point):h>l&&!c0(t.active,n.active)&&o.compareRange(l,h,t.active,n.active),f>s)break;(c||t.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(f),l=f,u<=0&&t.next(),u>=0&&n.next()}}function c0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Pf(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function _f(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function ww(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function ni(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=et(t,i));return r}function jf(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=et(t,i)}return r===!0?-1:t.length}var h0="\u037C",Nw=typeof Symbol>"u"?"__"+h0:Symbol.for(h0),d0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},zn=class{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,l,a,c){let u=[],f=/^@(\w+)\b/.exec(s[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(s[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))o(d.split(/,\s*/).map(x=>s.map(v=>x.replace(/&/,v))).reduce((x,v)=>x.concat(v)),p,a);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");o(i(d),p,u,h)}else p!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+p+";")}(u.length||h)&&a.push((r&&!f&&!c?s.map(r):s).join(", ")+" {"+u.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Pw[Nw]||1;return Pw[Nw]=e+1,h0+e.toString(36)}static mount(e,n,r){let i=e[d0],o=r&&r.nonce;i?o&&i.setNonce(o):i=new p0(e,o),i.mount(Array.isArray(n)?n:[n],e)}},_w=new Map,p0=class{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=_w.get(r);if(o)return e[d0]=o;this.sheet=new i.CSSStyleSheet,_w.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[d0]=this}mount(e,n){let r=this.sheet,i=0,o=0;for(let s=0;s<e.length;s++){let l=e[s],a=this.modules.indexOf(l);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),a==-1){if(this.modules.splice(o++,0,l),r)for(let c=0;c<l.rules.length;c++)r.insertRule(l.rules[c],i++)}else{for(;o<a;)i+=this.modules[o++].rules.length;i+=l.rules.length,o++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+`
`;this.styleTag.textContent=s;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var ri={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ys={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},IN=typeof navigator<"u"&&/Mac/.test(navigator.platform),MN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(tt=0;tt<10;tt++)ri[48+tt]=ri[96+tt]=String(tt);var tt;for(tt=1;tt<=24;tt++)ri[tt+111]="F"+tt;var tt;for(tt=65;tt<=90;tt++)ri[tt]=String.fromCharCode(tt+32),Ys[tt]=String.fromCharCode(tt);var tt;for(Gf in ri)Ys.hasOwnProperty(Gf)||(Ys[Gf]=ri[Gf]);var Gf;function Dw(t){var e=IN&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||MN&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ys:ri)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function se(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Fw(t,arguments[e]);return t}function Fw(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Fw(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}var qt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},w0=typeof document<"u"?document:{documentElement:{style:{}}},C0=/Edge\/(\d+)/.exec(qt.userAgent),TC=/MSIE \d/.test(qt.userAgent),b0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qt.userAgent),Ch=!!(TC||b0||C0),Bw=!Ch&&/gecko\/(\d+)/i.test(qt.userAgent),m0=!Ch&&/Chrome\/(\d+)/.exec(qt.userAgent),zw="webkitFontSmoothing"in w0.documentElement.style,E0=!Ch&&/Apple Computer/.test(qt.vendor),Vw=E0&&(/Mobile\/\w+/.test(qt.userAgent)||qt.maxTouchPoints>2),z={mac:Vw||/Mac/.test(qt.platform),windows:/Win/.test(qt.platform),linux:/Linux|X11/.test(qt.platform),ie:Ch,ie_version:TC?w0.documentMode||6:b0?+b0[1]:C0?+C0[1]:0,gecko:Bw,gecko_version:Bw?+(/Firefox\/(\d+)/.exec(qt.userAgent)||[0,0])[1]:0,chrome:!!m0,chrome_version:m0?+m0[1]:0,ios:Vw,android:/Android\b/.test(qt.userAgent),webkit:zw,webkit_version:zw?+(/\bAppleWebKit\/(\d+)/.exec(qt.userAgent)||[0,0])[1]:0,safari:E0,safari_version:E0?+(/\bVersion\/(\d+(\.\d+)?)/.exec(qt.userAgent)||[0,0])[1]:0,tabSize:w0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function sc(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function T0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function nh(t,e){if(!e.anchorNode)return!1;try{return T0(t,e.anchorNode)}catch{return!1}}function tl(t){return t.nodeType==3?Vo(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Qa(t,e,n,r){return n?Uw(t,e,n,r,-1)||Uw(t,e,n,r,1):!1}function zo(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function ah(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Uw(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:br(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=zo(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?br(t):0}else return!1}}function br(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function pc(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function LN(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function AC(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function NN(t,e,n,r,i,o,s,l){let a=t.ownerDocument,c=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let h,d=u==a.body,p=1,x=1;if(d)h=LN(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let g=u.getBoundingClientRect();({scaleX:p,scaleY:x}=AC(u,g)),h={left:g.left,right:g.left+u.clientWidth*p,top:g.top,bottom:g.top+u.clientHeight*x}}let v=0,m=0;if(i=="nearest")e.top<h.top?(m=e.top-(h.top+s),n>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+s)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+s,n<0&&e.top-m<h.top&&(m=e.top-(h.top+s)));else{let g=e.bottom-e.top,y=h.bottom-h.top;m=(i=="center"&&g<=y?e.top+g/2-y/2:i=="start"||i=="center"&&n<0?e.top-s:e.bottom-y+s)-h.top}if(r=="nearest"?e.left<h.left?(v=e.left-(h.left+o),n>0&&e.right>h.right+v&&(v=e.right-h.right+o)):e.right>h.right&&(v=e.right-h.right+o,n<0&&e.left<h.left+v&&(v=e.left-(h.left+o))):v=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==l?e.left-o:e.right-(h.right-h.left)+o)-h.left,v||m)if(d)c.scrollBy(v,m);else{let g=0,y=0;if(m){let S=u.scrollTop;u.scrollTop+=m/x,y=(u.scrollTop-S)*x}if(v){let S=u.scrollLeft;u.scrollLeft+=v/p,g=(u.scrollLeft-S)*p}e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y},g&&Math.abs(g-v)<1&&(r="nearest"),y&&Math.abs(y-m)<1&&(i="nearest")}if(d)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function PN(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}var A0=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?br(n):0),r,Math.min(e.focusOffset,r?br(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}},Fo=null;z.safari&&z.safari_version>=26&&(Fo=!1);function RC(t){if(t.setActive)return t.setActive();if(Fo)return t.focus(Fo);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Fo==null?{get preventScroll(){return Fo={preventScroll:!0},!0}}:void 0),!Fo){Fo=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}var Hw;function Vo(t,e,n=e){let r=Hw||(Hw=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function el(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function _N(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function OC(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function DN(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,br(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=br(n))}else{if(n==t)return!0;r=zo(n),n=n.parentNode}}function IC(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function MC(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=br(n)}else if(n.parentNode&&!ah(n))r=zo(n),n=n.parentNode;else return null}}function LC(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!ah(n))r=zo(n)+1,n=n.parentNode;else return null}}var Yt=class t{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new t(e.parentNode,zo(e),n)}static after(e,n){return new t(e.parentNode,zo(e)+1,n)}},fy=[],ye=class t{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=i?i.nextSibling:r.firstChild)){let l=t.get(o);(!l||!l.parent&&l.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,n),s.flags&=-8}if(o=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&o!=s.dom&&(n.written=!0),s.dom.parentNode==r)for(;o&&o!=s.dom;)o=Ww(o);else r.insertBefore(s.dom,o);i=s.dom}for(o=i?i.nextSibling:r.firstChild,o&&n&&n.node==r&&(n.written=!0);o;)o=Ww(o)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=br(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!t.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,o=-1,s=-1,l=-1;for(let a=0,c=r,u=r;a<this.children.length;a++){let f=this.children[a],h=c+f.length;if(c<e&&h>n)return f.domBoundsAround(e,n,c);if(h>=e&&i==-1&&(i=a,o=c),c>n&&f.dom.parentNode==this.dom){s=a,l=u;break}u=h,c=h+f.breakAfter}return{from:o,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=fy){this.markDirty();for(let i=e;i<n;i++){let o=this.children[i];o.parent==this&&r.indexOf(o)<0&&o.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ch(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}};ye.prototype.breakAfter=0;function Ww(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}var ch=class{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}};function NC(t,e,n,r,i,o,s,l,a){let{children:c}=t,u=c.length?c[e]:null,f=o.length?o[o.length-1]:null,h=f?f.breakAfter:s;if(!(e==r&&u&&!s&&!h&&o.length<2&&u.merge(n,i,o.length?f:null,n==0,l,a))){if(r<c.length){let d=c[r];d&&(i<d.length||d.breakAfter&&f?.breakAfter)?(e==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,a)?o[o.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),o.push(d))):d?.breakAfter&&(f?f.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,l,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,l,0),e++));e<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),a=o.length?0:l;else if(c[e].become(o[0]))e++,o.shift(),l=o.length?0:a;else break;!o.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,l,a)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function PC(t,e,n,r,i,o){let s=t.childCursor(),{i:l,off:a}=s.findPos(n,1),{i:c,off:u}=s.findPos(e,-1),f=e-n;for(let h of r)f+=h.length;t.length+=f,NC(t,c,u,l,a,r,0,i,o)}var FN=256,Er=class t extends ye{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof t)||this.length-(n-e)+r.length>FN||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Yt(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return BN(this.dom,e,n)}},zi=class t extends ye{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(OC(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,o,s){return r&&(!(r instanceof t&&r.mark.eq(this.mark))||e&&o<=0||n<this.length&&s<=0)?!1:(PC(this,e,n,r?r.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,o=0;for(let l of this.children){let a=r+l.length;a>e&&n.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=o),r=a,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new t(this.mark,n,s)}domAtPos(e){return _C(this,e)}coordsAt(e,n){return FC(this,e,n)}};function BN(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&n<0||e==r&&n>=0?z.chrome||z.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let l=Vo(t,i,o).getClientRects();if(!l.length)return null;let a=l[(s?s<0:n>=0)?0:l.length-1];return z.safari&&!s&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),s?pc(a,s<0):a||null}var nl=class t extends ye{static create(e,n,r){return new t(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=t.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,o,s){return r&&(!(r instanceof t)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof t&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Z.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Z.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Yt.before(this.dom):Yt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let l=s?i.length-1:0;o=i[l],!(e>0?l==0:l==i.length-1||o.top<o.bottom);l+=s?-1:1);return pc(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},lc=class t extends ye{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof t&&e.side==this.side}split(){return new t(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Yt.before(this.dom):Yt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Z.empty}get isHidden(){return!0}};Er.prototype.children=nl.prototype.children=lc.prototype.children=fy;function _C(t,e){let n=t.dom,{children:r}=t,i=0;for(let o=0;i<r.length;i++){let s=r[i],l=o+s.length;if(!(l==o&&s.getSide()<=0)){if(e>o&&e<l&&s.dom.parentNode==n)return s.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=i;o>0;o--){let s=r[o-1];if(s.dom.parentNode==n)return s.domAtPos(s.length)}for(let o=i;o<r.length;o++){let s=r[o];if(s.dom.parentNode==n)return s.domAtPos(0)}return new Yt(n,0)}function DC(t,e,n){let r,{children:i}=t;n>0&&e instanceof zi&&i.length&&(r=i[i.length-1])instanceof zi&&r.mark.eq(e.mark)?DC(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function FC(t,e,n){let r=null,i=-1,o=null,s=-1;function l(c,u){for(let f=0,h=0;f<c.children.length&&h<=u;f++){let d=c.children[f],p=h+d.length;p>=u&&(d.children.length?l(d,u-h):(!o||o.isHidden&&(n>0||VN(o,d)))&&(p>u||h==p&&d.getSide()>0)?(o=d,s=u-h):(h<u||h==p&&d.getSide()<0&&!d.isHidden)&&(r=d,i=u-h)),h=p}}l(t,e);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):zN(t)}function zN(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=tl(e);return n[n.length-1]||null}function VN(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function R0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}var jw=Object.create(null);function uh(t,e,n){if(t==e)return!0;t||(t=jw),e||(e=jw);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(i.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function O0(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function UN(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}var $e=class{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},Xt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Xt||(Xt={})),M=class extends ir{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ac(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Vi(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=BC(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(s?n?2e8:1:-6e8)+1}return new Vi(e,r,i,n,e.widget||null,!0)}static line(e){return new cc(e)}static set(e,n=!1){return te.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};M.none=te.empty;var ac=class t extends M{constructor(e){let{start:n,end:r}=BC(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof t&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&uh(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}};ac.prototype.point=!1;var cc=class t extends M{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof t&&this.spec.class==e.spec.class&&uh(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}};cc.prototype.mapMode=Tt.TrackBefore;cc.prototype.point=!0;var Vi=class t extends M{constructor(e,n,r,i,o,s){super(n,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?n<=0?Tt.TrackBefore:Tt.TrackAfter:Tt.TrackDel}get type(){return this.startSide!=this.endSide?Xt.WidgetRange:this.startSide<=0?Xt.WidgetBefore:Xt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof t&&HN(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}};Vi.prototype.point=!0;function BC(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function HN(t,e){return t==e||!!(t&&e&&t.compare(e))}function rh(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}var Rt=class t extends ye{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,o,s){if(r){if(!(r instanceof t))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),PC(this,e,n,r?r.children.slice():[],o,s),!0}split(e){let n=new t;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)n.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){uh(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){DC(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=R0(n,this.attrs||{})),r&&(this.attrs=R0({class:r},this.attrs||{}))}domAtPos(e){return _C(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(OC(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(O0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ye.get(i)instanceof zi;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ye.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!z.ios||!this.children.some(o=>o instanceof Er))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Er)||/[^ -~]/.test(r.text))return null;let i=tl(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=FC(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let s=(o-i.textHeight)/2;return{top:r.top+s,bottom:r.bottom-s,left:r.left,right:r.left}}}return r}become(e){return e instanceof t&&this.children.length==0&&e.children.length==0&&uh(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=n){if(o instanceof t)return o;if(s>n)break}i=s+o.breakAfter}return null}},Bo=class t extends ye{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,o,s){return r&&(!(r instanceof t)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Yt.before(this.dom):Yt.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new t(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return fy}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Z.empty}domBoundsAround(){return null}become(e){return e instanceof t&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof uc?null:pc(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}},uc=class extends $e{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},Ja=class t{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Bo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Rt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append($f(new lc(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Bo)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),o=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append($f(new Er(this.text.slice(this.textOff,this.textOff+o)),n),r),this.atCursorPos=!0,this.textOff+=o,e-=o,r=i<=o?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof Vi){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(r instanceof Vi)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Bo(r.widget||Ui.block,l,r));else{let a=nl.create(r.widget||Ui.inline,l,l?0:r.startSide),c=this.atCursorPos&&!a.isEditable&&o<=i.length&&(e<n||r.startSide>0),u=!a.isEditable&&(e<n||o>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(f.append($f(new lc(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append($f(a,i),o),this.atCursorPos=u,this.pendingBuffer=u?e<n||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(e,n,r,i,o){let s=new t(e,n,r,o);return s.openEnd=te.spans(i,n,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}};function $f(t,e){for(let n of e)t=new zi(n,[t],t.length);return t}var Ui=class extends $e{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};Ui.inline=new Ui("span");Ui.block=new Ui("div");var de=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(de||(de={})),Uo=de.LTR,hy=de.RTL;function zC(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}var WN=zC("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jN=zC("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),I0=Object.create(null),Sr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);I0[e]=n,I0[n]=-e}function VC(t){return t<=247?WN[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?jN[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}var GN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,wr=class{get dir(){return this.level%2?hy:Uo}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let o=-1;for(let s=0;s<e.length;s++){let l=e[s];if(l.from<=n&&l.to>=n){if(l.level==r)return s;(o<0||(i!=0?i<0?l.from<n:l.to>n:e[o].level>l.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}};function UC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!UC(r.inner,i.inner))return!1}return!0}var ge=[];function $N(t,e,n,r,i){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:e,l=o<r.length?r[o].from:n,a=o?256:i;for(let c=s,u=a,f=a;c<l;c++){let h=VC(t.charCodeAt(c));h==512?h=u:h==8&&f==4&&(h=16),ge[c]=h==4?2:h,h&7&&(f=h),u=h}for(let c=s,u=a,f=a;c<l;c++){let h=ge[c];if(h==128)c<l-1&&u==ge[c+1]&&u&24?h=ge[c]=u:ge[c]=256;else if(h==64){let d=c+1;for(;d<l&&ge[d]==64;)d++;let p=c&&u==8||d<n&&ge[d]==8?f==1?1:8:256;for(let x=c;x<d;x++)ge[x]=p;c=d-1}else h==8&&f==1&&(ge[c]=1);u=h,h&7&&(f=h)}}}function KN(t,e,n,r,i){let o=i==1?2:1;for(let s=0,l=0,a=0;s<=r.length;s++){let c=s?r[s-1].to:e,u=s<r.length?r[s].from:n;for(let f=c,h,d,p;f<u;f++)if(d=I0[h=t.charCodeAt(f)])if(d<0){for(let x=l-3;x>=0;x-=3)if(Sr[x+1]==-d){let v=Sr[x+2],m=v&2?i:v&4?v&1?o:i:0;m&&(ge[f]=ge[Sr[x]]=m),l=x;break}}else{if(Sr.length==189)break;Sr[l++]=f,Sr[l++]=h,Sr[l++]=a}else if((p=ge[f])==2||p==1){let x=p==i;a=x?0:1;for(let v=l-3;v>=0;v-=3){let m=Sr[v+2];if(m&2)break;if(x)Sr[v+2]|=2;else{if(m&4)break;Sr[v+2]|=4}}}}}function qN(t,e,n,r){for(let i=0,o=r;i<=n.length;i++){let s=i?n[i-1].to:t,l=i<n.length?n[i].from:e;for(let a=s;a<l;){let c=ge[a];if(c==256){let u=a+1;for(;;)if(u==l){if(i==n.length)break;u=n[i++].to,l=i<n.length?n[i].from:e}else if(ge[u]==256)u++;else break;let f=o==1,h=(u<e?ge[u]:r)==1,d=f==h?f?1:2:r;for(let p=u,x=i,v=x?n[x-1].to:t;p>a;)p==v&&(p=n[--x].from,v=x?n[x-1].to:t),ge[--p]=d;a=u}else o=c,a++}}}function M0(t,e,n,r,i,o,s){let l=r%2?2:1;if(r%2==i%2)for(let a=e,c=0;a<n;){let u=!0,f=!1;if(c==o.length||a<o[c].from){let x=ge[a];x!=l&&(u=!1,f=x==16)}let h=!u&&l==1?[]:null,d=u?r:r+1,p=a;e:for(;;)if(c<o.length&&p==o[c].from){if(f)break e;let x=o[c];if(!u)for(let v=x.to,m=c+1;;){if(v==n)break e;if(m<o.length&&o[m].from==v)v=o[m++].to;else{if(ge[v]==l)break e;break}}if(c++,h)h.push(x);else{x.from>a&&s.push(new wr(a,x.from,d));let v=x.direction==Uo!=!(d%2);L0(t,v?r+1:r,i,x.inner,x.from,x.to,s),a=x.to}p=x.to}else{if(p==n||(u?ge[p]!=l:ge[p]==l))break;p++}h?M0(t,a,p,r+1,i,h,s):a<p&&s.push(new wr(a,p,d)),a=p}else for(let a=n,c=o.length;a>e;){let u=!0,f=!1;if(!c||a>o[c-1].to){let x=ge[a-1];x!=l&&(u=!1,f=x==16)}let h=!u&&l==1?[]:null,d=u?r:r+1,p=a;e:for(;;)if(c&&p==o[c-1].to){if(f)break e;let x=o[--c];if(!u)for(let v=x.from,m=c;;){if(v==e)break e;if(m&&o[m-1].to==v)v=o[--m].from;else{if(ge[v-1]==l)break e;break}}if(h)h.push(x);else{x.to<a&&s.push(new wr(x.to,a,d));let v=x.direction==Uo!=!(d%2);L0(t,v?r+1:r,i,x.inner,x.from,x.to,s),a=x.from}p=x.from}else{if(p==e||(u?ge[p-1]!=l:ge[p-1]==l))break;p--}h?M0(t,p,a,r+1,i,h,s):p<a&&s.push(new wr(p,a,d)),a=p}}function L0(t,e,n,r,i,o,s){let l=e%2?2:1;$N(t,i,o,r,l),KN(t,i,o,r,l),qN(i,o,r,l),M0(t,i,o,e,n,r,s)}function YN(t,e,n){if(!t)return[new wr(0,0,e==hy?1:0)];if(e==Uo&&!n.length&&!GN.test(t))return HC(t.length);if(n.length)for(;t.length>ge.length;)ge[ge.length]=256;let r=[],i=e==Uo?0:1;return L0(t,i,i,n,0,t.length,r),r}function HC(t){return[new wr(0,t,0)]}var WC="";function XN(t,e,n,r,i){var o;let s=r.head-t.from,l=wr.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc),a=e[l],c=a.side(i,n);if(s==c){let h=l+=i?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],s=a.side(!i,n),c=a.side(i,n)}let u=et(t.text,s,a.forward(i,n));(u<a.from||u>a.to)&&(u=c),WC=t.text.slice(Math.min(s,u),Math.max(s,u));let f=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return f&&u==c&&f.level+(i?0:1)<a.level?T.cursor(f.side(!i,n)+t.from,f.forward(i,n)?1:-1,f.level):T.cursor(u+t.from,a.forward(i,n)?-1:1,a.level)}function ZN(t,e,n){for(let r=e;r<n;r++){let i=VC(t.charCodeAt(r));if(i==1)return Uo;if(i==2||i==4)return hy}return Uo}var jC=B.define(),GC=B.define(),$C=B.define(),KC=B.define(),N0=B.define(),qC=B.define(),YC=B.define(),dy=B.define(),py=B.define(),XC=B.define({combine:t=>t.some(e=>e)}),ZC=B.define({combine:t=>t.some(e=>e)}),QC=B.define(),ec=class t{constructor(e,n="nearest",r="nearest",i=5,o=5,s=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new t(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new t(T.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},Kf=H.define({map:(t,e)=>t.map(e)}),JC=H.define();function Ot(t,e,n){let r=t.facet(KC);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}var ii=B.define({combine:t=>t.length?t[0]:!0}),QN=0,Xs=B.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}}),Q=class t{constructor(e,n,r,i,o){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(Xs.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Xs.of({plugin:this,arg:e}))}static define(e,n){let{eventHandlers:r,eventObservers:i,provide:o,decorations:s}=n||{};return new t(QN++,e,r,i,l=>{let a=[];return s&&a.push(fc.of(c=>{let u=c.plugin(l);return u?s(u):M.none})),o&&a.push(o(l)),a})}static fromClass(e,n){return t.define((r,i)=>new e(r,i),n)}},tc=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Ot(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Ot(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Ot(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},eb=B.define(),my=B.define(),fc=B.define(),tb=B.define(),mc=B.define(),nb=B.define();function Gw(t,e){let n=t.state.facet(nb);if(!n.length)return n;let r=n.map(o=>o instanceof Function?o(t):o),i=[];return te.spans(r,e.from,e.to,{point(){},span(o,s,l,a){let c=o-e.from,u=s-e.from,f=i;for(let h=l.length-1;h>=0;h--,a--){let d=l[h].spec.bidiIsolate,p;if(d==null&&(d=ZN(e.text,c,u)),a>0&&f.length&&(p=f[f.length-1]).to==c&&p.direction==d)p.to=u,f=p.inner;else{let x={from:c,to:u,direction:d,inner:[]};f.push(x),f=x.inner}}}}),i}var rb=B.define();function gy(t){let e=0,n=0,r=0,i=0;for(let o of t.state.facet(rb)){let s=o(t);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(n=Math.max(n,s.right)),s.top!=null&&(r=Math.max(r,s.top)),s.bottom!=null&&(i=Math.max(i,s.bottom)))}return{left:e,right:n,top:r,bottom:i}}var qa=B.define(),Cr=class t{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,s=0,l=0;;i++){let a=i==e.length?null:e[i],c=s-l,u=a?a.fromB:1e9;for(;o<n.length&&n[o]<u;){let f=n[o],h=n[o+1],d=Math.max(l,f),p=Math.min(u,h);if(d<=p&&new t(d+c,p+c,d,p).addToSet(r),h>u)break;o+=2}if(!a)return r;new t(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),s=a.toA,l=a.toB}}},fh=class t{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Kt.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,s,l,a)=>i.push(new Cr(o,s,l,a))),this.changedRanges=i}static create(e,n,r){return new t(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},hh=class extends ye{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=M.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Rt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Cr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!oP(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?eP(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new Cr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(z.ie||z.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,l=this.updateDeco(),a=rP(s,l,e.changes);return r=Cr.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=z.chrome||z.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Bo&&s.widget instanceof uc&&o.push(s.dom);i.updateGaps(o)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,o=this.childCursor(n);for(let s=i.length-1;;s--){let l=s>=0?i[s]:null;if(!l)break;let{fromA:a,toA:c,fromB:u,toB:f}=l,h,d,p,x;if(r&&r.range.fromB<f&&r.range.toB>u){let S=Ja.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),k=Ja.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,p=S.openStart,x=k.openEnd;let w=this.compositionView(r);k.breakAtStart?w.breakAfter=1:k.content.length&&w.merge(w.length,w.length,k.content[0],!1,k.openStart,0)&&(w.breakAfter=k.content[0].breakAfter,k.content.shift()),S.content.length&&w.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),h=S.content.concat(w).concat(k.content)}else({content:h,breakAtStart:d,openStart:p,openEnd:x}=Ja.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:v,off:m}=o.findPos(c,1),{i:g,off:y}=o.findPos(a,-1);NC(this,g,y,v,m,h,d,p,x)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(JC)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Er(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new zi(i,[n],n.length);let r=new Rt;return r.append(n,0),r}fixCompositionDOM(e){let n=(o,s)=>{s.flags|=8|(s.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(s);let l=ye.get(o);l&&l!=s&&(l.dom=null),s.setDOM(o)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)r=i.childPos(r.off,1),i=i.children[r.i],n(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&!(this.view.state.facet(ii)||this.dom.tabIndex>-1)&&nh(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||o))return;let s=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(z.gecko&&l.empty&&!this.hasComposition&&JN(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=c=new Yt(f,0),s=!0}let u=this.view.observer.selectionRange;(s||!u.focusNode||(!Qa(a.node,a.offset,u.anchorNode,u.anchorOffset)||!Qa(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{z.android&&z.chrome&&this.dom.contains(u.focusNode)&&iP(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=sc(this.view.root);if(f)if(l.empty){if(z.gecko){let h=tP(a.node,a.offset);if(h&&h!=3){let d=(h==1?MC:LC)(a.node,a.offset);d&&(a=new Yt(d.node,d.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),h.setEnd(c.node,c.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new Yt(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Yt(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Qa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=sc(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let s=Rt.find(this,n.head);if(!s)return;let l=s.posAtStart;if(n.head==l||n.head==l+s.length)return;let a=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&r.collapse(i,o)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let o=ye.get(n.childNodes[i]);o instanceof Rt&&(r=o.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let o=ye.get(n.childNodes[i]);o instanceof Rt&&(r=o.domAtPos(o.length))}return r?new Yt(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ye.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Rt)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let l=this.children[s],a=o-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!r||l instanceof Rt&&!(r instanceof Rt&&n>=0)))r=l,i=c;else if(r&&c==e&&a==e&&l instanceof Bo&&Math.abs(n)<2){if(l.deco.startSide<0)break;s&&(r=null)}o=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Rt))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(r,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}r=a}if(!(i instanceof Er))return null;let o=et(i.text,r);if(o==r)return null;let s=Vo(i.dom,r,o).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(l==s.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==de.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],h=c+f.length;if(h>i)break;if(c>=r){let d=f.dom.getBoundingClientRect();if(n.push(d.height),s){let p=f.dom.lastChild,x=p?tl(p):[];if(x.length){let v=x[x.length-1],m=a?v.right-d.left:d.right-v.left;m>l&&(l=m,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?de.RTL:de.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Rt){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=tl(e.firstChild)[0];n=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ch(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],s=o?o.from-1:this.length;if(s>r){let l=(n.lineBlockAt(s).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(M.replace({widget:new uc(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return M.set(e)}updateDeco(){let e=1,n=this.view.state.facet(fc).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),r=!1,i=this.view.state.facet(tb).map((o,s)=>{let l=typeof o=="function";return l&&(r=!0),l?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(te.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(QC))try{if(c(this.view,e.range,e))return!0}catch(u){Ot(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=gy(this.view),s={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;NN(this.view.scrollDOM,s,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==de.LTR)}lineHasWidget(e){let{i:n}=this.childCursor().findPos(e);if(n==this.children.length)return!1;let r=i=>i instanceof nl||i.children.some(r);return r(this.children[n])}};function JN(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function ib(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=MC(n.focusNode,n.focusOffset),i=LC(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let l=ye.get(i.node);if(!l||l instanceof Er&&l.text!=i.node.nodeValue)o=i;else if(t.docView.lastCompositionAfterCursor){let a=ye.get(r.node);!a||a instanceof Er&&a.text!=r.node.nodeValue||(o=i)}}if(t.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function eP(t,e,n){let r=ib(t,n);if(!r)return null;let{node:i,from:o,to:s}=r,l=i.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(r.from,r.to)!=l)return null;let a=e.invertedDesc,c=new Cr(a.mapPos(o),a.mapPos(s),o,s),u=[];for(let f=i.parentNode;;f=f.parentNode){let h=ye.get(f);if(h instanceof zi)u.push({node:f,deco:h.mark});else{if(h instanceof Rt||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new ac({inclusive:!0,attributes:UN(f),tagName:f.tagName.toLowerCase()})});else return null}}}function tP(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}var nP=class{constructor(){this.changes=[]}compareRange(e,n){rh(e,n,this.changes)}comparePoint(e,n){rh(e,n,this.changes)}boundChange(e){rh(e,e,this.changes)}};function rP(t,e,n){let r=new nP;return te.compare(t,e,n,r),r.changes}function iP(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function oP(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function sP(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return T.cursor(e);o==0?n=1:o==i.length&&(n=-1);let s=o,l=o;n<0?s=et(i.text,o,!1):l=et(i.text,o);let a=r(i.text.slice(s,l));for(;s>0;){let c=et(i.text,s,!1);if(r(i.text.slice(c,s))!=a)break;s=c}for(;l<i.length;){let c=et(i.text,l);if(r(i.text.slice(l,c))!=a)break;l=c}return T.range(s+i.from,l+i.from)}function lP(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function aP(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function g0(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function $w(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Kw(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function P0(t,e,n){let r,i,o,s,l=!1,a,c,u,f;for(let p=t.firstChild;p;p=p.nextSibling){let x=tl(p);for(let v=0;v<x.length;v++){let m=x[v];i&&g0(i,m)&&(m=$w(Kw(m,i.bottom),i.top));let g=lP(e,m),y=aP(n,m);if(g==0&&y==0)return p.nodeType==3?qw(p,e,n):P0(p,e,n);(!r||s>y||s==y&&o>g)&&(r=p,i=m,o=g,s=y,l=g?e<m.left?v>0:v<x.length-1:!0),g==0?n>m.bottom&&(!u||u.bottom<m.bottom)?(a=p,u=m):n<m.top&&(!f||f.top>m.top)&&(c=p,f=m):u&&g0(u,m)?u=Kw(u,m.bottom):f&&g0(f,m)&&(f=$w(f,m.top))}}if(u&&u.bottom>=n?(r=a,i=u):f&&f.top<=n&&(r=c,i=f),!r)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return qw(r,h,n);if(l&&r.contentEditable!="false")return P0(r,h,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function qw(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,s=0;for(let l=0;l<r;l++){let a=Vo(t,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;s||(s=e-u.left);let f=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<o){let h=e>=(u.left+u.right)/2,d=h;if(z.chrome||z.gecko){let p=Vo(t,l).getBoundingClientRect();Math.abs(p.left-u.right)<.1&&(d=!h)}if(f<=0)return{node:t,offset:l+(d?1:0)};i=l+(d?1:0),o=f}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function ob(t,e,n,r=-1){var i,o;let s=t.contentDOM.getBoundingClientRect(),l=s.top+t.viewState.paddingTop,a,{docHeight:c}=t.viewState,{x:u,y:f}=e,h=f-l;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,k=!1;a=t.elementAtHeight(h),a.type!=Xt.Text;)for(;h=r>0?a.bottom+S:a.top-S,!(h>=0&&h<=c);){if(k)return n?null:0;k=!0,r=-r}f=l+h;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Yw(t,s,a,u,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Yw(t,s,a,u,f);let p=t.dom.ownerDocument,x=t.root.elementFromPoint?t.root:p,v=x.elementFromPoint(u,f);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(s.left+1,Math.min(s.right-1,u)),v=x.elementFromPoint(u,f),v&&!t.contentDOM.contains(v)&&(v=null));let m,g=-1;if(v&&((i=t.docView.nearest(v))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let S=p.caretPositionFromPoint(u,f);S&&({offsetNode:m,offset:g}=S)}else if(p.caretRangeFromPoint){let S=p.caretRangeFromPoint(u,f);S&&({startContainer:m,startOffset:g}=S)}m&&(!t.contentDOM.contains(m)||z.safari&&cP(m,g,u)||z.chrome&&uP(m,g,u))&&(m=void 0),m&&(g=Math.min(br(m),g))}if(!m||!t.docView.dom.contains(m)){let S=Rt.find(t.docView,d);if(!S)return h>a.top+a.height/2?a.to:a.from;({node:m,offset:g}=P0(S.dom,u,f))}let y=t.docView.nearest(m);if(!y)return null;if(y.isWidget&&((o=y.dom)===null||o===void 0?void 0:o.nodeType)==1){let S=y.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(m,g)+y.posAtStart}function Yw(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-l)*.5)/l);o+=a*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+jf(s,o,t.state.tabSize)}function sb(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let o=i.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=i.parentNode;if(!s||s.nodeName=="DIV")break;i=s}}return Vo(t,r-1,r).getBoundingClientRect().right>n}function cP(t,e,n){return sb(t,e,n)}function uP(t,e,n){if(e!=0)return sb(t,e,n);for(let i=t;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=t.nodeType==1?t.getBoundingClientRect():Vo(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function _0(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let o of r.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==Xt.Text&&(i.type!=o.type||(n<0?o.from<e:o.to>e)))&&(i=o)}}return i||r}return r}function fP(t,e,n,r){let i=_0(t,e.head,e.assoc||-1),o=!r||i.type!=Xt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let s=t.dom.getBoundingClientRect(),l=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(l==de.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(a!=null)return T.cursor(a,n?-1:1)}return T.cursor(n?i.to:i.from,n?-1:1)}function Xw(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let l=e,a=null;;){let c=XN(i,o,s,l,n),u=WC;if(!c){if(i.number==(n?t.state.doc.lines:1))return l;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(a){if(!a(u))return l}else{if(!r)return c;a=r(u)}l=c}}function hP(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let s=r(o);return i==he.Space&&(i=s),i==s}}function dP(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return T.cursor(i,e.assoc);let s=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)s==null&&(s=c.left-a.left),l=o<0?c.top:c.bottom;else{let d=t.viewState.lineBlockAt(i);s==null&&(s=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),l=(o<0?d.top:d.bottom)+u}let f=a.left+s,h=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=l+(h+d)*o,x=ob(t,{x:f,y:p},!1,o);if(p<a.top||p>a.bottom||(o<0?x<i:x>i)){let v=t.docView.coordsForChar(x),m=!v||p<v.top?-1:1;return T.cursor(x,m,void 0,s)}}}function nc(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(o,s,l)=>{if(e>o&&e<s){let a=r||n||(e-o<s-e?-1:1);e=a<0?o:s,r=a}});if(!r)return e}}function lb(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let s=nc(t,i.from,0);s!=i.from&&(o=T.cursor(s,-1))}else{let s=nc(t,i.from,-1),l=nc(t,i.to,1);(s!=i.from||l!=i.to)&&(o=T.range(i.from==i.anchor?s:l,i.from==i.head?s:l))}o&&(n||(n=e.ranges.slice()),n[r]=o)}return n?T.create(n,e.mainIndex):e}function y0(t,e,n){let r=nc(t.state.facet(mc).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:T.cursor(r,r<n.from?1:-1)}var Ya="\uFFFF",D0=class{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(oe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ya}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==n)break;let l=ye.get(i),a=ye.get(s);(l&&a?l.breakAfter:(l?l.breakAfter:ah(i))||ah(s)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&!mP(s,n)&&this.lineBreak(),i=s}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,l;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(l=i.exec(n))&&(o=l.index,s=l[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let n=ye.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(pP(e,r.node,r.offset)?n:0))}};function pP(t,e,n){for(;;){if(!e||n<br(e))return!1;if(e==t)return!0;n=zo(e)+1,e=e.parentNode}}function mP(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=ye.get(t);if(!(r?.isWidget||t.cmIgnore))return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}var dh=class{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}},F0=class{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let l=o||s?[]:yP(e),a=new D0(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=xP(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!T0(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=s&&s.node==l.anchorNode&&s.offset==l.anchorOffset||!T0(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((z.ios||z.chrome)&&e.state.selection.main.empty&&a!=c&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,c),h=Math.max(a,c),d=u.from-f,p=u.to-h;(d==0||d==1||f==0)&&(p==0||p==-1||h==e.state.doc.length)&&(a=0,c=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(T.range(c,a)):this.newSel=T.single(c,a)}}};function ab(t,e){let n,{newSel:r}=e,i=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:l}=e.bounds,a=i.from,c=null;(o===8||z.android&&e.text.length<l-s)&&(a=i.to,c="end");let u=cb(t.state.doc.sliceString(s,l,Ya),e.text,a-s,c);u&&(z.chrome&&o==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Ya+Ya&&u.toB--,n={from:s+u.from,to:s+u.toA,insert:Z.of(e.text.slice(u.from,u.toB).split(Ya))})}else r&&(!t.hasFocus&&t.state.facet(ii)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(z.mac||z.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=T.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Z.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:z.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=T.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Z.of([" "])}),n)return yy(t,n,r,o);if(r&&!r.main.eq(i)){let s=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(s=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(r=lb(t.state.facet(mc).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:s,userEvent:l}),!0}else return!1}function yy(t,e,n,r=-1){if(z.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(z.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&el(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&el(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&el(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let s,l=()=>s||(s=gP(t,e,n));return t.state.facet(qC).some(a=>a(t,e.from,e.to,o,l))||t.dispatch(l()),!0}function gP(t,e,n){let r,i=t.state,o=i.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let a=e.from<o.from?-1:1,c=a<0?o.from:o.to,u=nc(i.facet(mc).map(f=>f(t)),c,a);e.from==u&&(s=u)}if(s>-1)r={changes:e,selection:T.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=o.from<e.from?i.sliceDoc(o.from,e.from):"",c=o.to>e.to?i.sliceDoc(e.to,o.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+c))}else{let a=i.changes(e),c=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let u=t.state.sliceDoc(e.from,e.to),f,h=n&&ib(t,n.main.head);if(h){let p=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-p}}else f=t.state.doc.lineAt(o.head);let d=o.to-e.to;r=i.changeByRange(p=>{if(p.from==o.from&&p.to==o.to)return{changes:a,range:c||p.map(a)};let x=p.to-d,v=x-u.length;if(t.state.sliceDoc(v,x)!=u||x>=f.from&&v<=f.to)return{range:p};let m=i.changes({from:v,to:x,insert:e.insert}),g=p.to-o.to;return{changes:m,range:c?T.range(Math.max(0,c.anchor+g),Math.max(0,c.head+g)):p.map(m)}})}else r={changes:a,selection:c&&i.selection.replaceRange(c)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:l,scrollIntoView:!0})}function cb(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let s=t.length,l=e.length;for(;s>0&&l>0&&t.charCodeAt(s-1)==e.charCodeAt(l-1);)s--,l--;if(r=="end"){let a=Math.max(0,o-Math.min(s,l));n-=s+a-o}if(s<o&&t.length<e.length){let a=n<=o&&n>=s?o-n:0;o-=a,l=o+(l-s),s=o}else if(l<o){let a=n<=o&&n>=l?o-n:0;o-=a,s=o+(s-l),l=o}return{from:o,toA:s,toB:l}}function yP(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new dh(n,r)),(i!=n||o!=r)&&e.push(new dh(i,o))),e}function xP(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?T.single(n+e,r+e):null}var B0=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,z.safari&&e.contentDOM.addEventListener("input",()=>null),z.gecko&&NP(e.contentDOM.ownerDocument)}handleEvent(e){!EP(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=vP(e),r=this.handlers,i=this.view.contentDOM;for(let o in n)if(o!="scroll"){let s=!n[o].handlers.length,l=r[o];l&&s!=!l.handlers.length&&(i.removeEventListener(o,this.handleEvent),l=null),l||i.addEventListener(o,this.handleEvent,{passive:s})}for(let o in r)o!="scroll"&&!n[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&fb.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),z.android&&z.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return z.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=ub.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||SP.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,el(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:z.safari&&!z.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function Zw(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Ot(n.state,i)}}}function vP(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,o=i&&i.plugin.domEventHandlers,s=i&&i.plugin.domEventObservers;if(o)for(let l in o){let a=o[l];a&&n(l).handlers.push(Zw(r.value,a))}if(s)for(let l in s){let a=s[l];a&&n(l).observers.push(Zw(r.value,a))}}for(let r in or)n(r).handlers.push(or[r]);for(let r in Un)n(r).observers.push(Un[r]);return e}var ub=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],SP="dthko",fb=[16,17,18,20,91,92,224,225],qf=6;function Yf(t){return Math.max(0,t)*.7+8}function kP(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}var z0=class{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=PN(e.contentDOM),this.atoms=e.state.facet(mc).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(oe.allowMultipleSelections)&&wP(e,n),this.dragging=bP(e,n)&&pb(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&kP(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,o=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=gy(this.view);e.clientX-a.left<=i+qf?n=-Yf(i-e.clientX):e.clientX+a.right>=s-qf&&(n=Yf(e.clientX-s)),e.clientY-a.top<=o+qf?r=-Yf(o-e.clientY):e.clientY+a.bottom>=l-qf&&(r=Yf(e.clientY-l)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=lb(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function wP(t,e){let n=t.state.facet(jC);return n.length?n[0](e):z.mac?e.metaKey:e.ctrlKey}function CP(t,e){let n=t.state.facet(GC);return n.length?n[0](e):z.mac?!e.altKey:!e.ctrlKey}function bP(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=sc(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function EP(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ye.get(n))&&r.ignoreEvent(e))return!1;return!0}var or=Object.create(null),Un=Object.create(null),hb=z.ie&&z.ie_version<15||z.ios&&z.webkit_version<604;function TP(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),db(t,n.value)},50)}function bh(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function db(t,e){e=bh(t.state,dy,e);let{state:n}=t,r,i=1,o=n.toText(e),s=o.lines==n.selection.ranges.length;if(V0!=null&&n.selection.ranges.every(a=>a.empty)&&V0==o.toString()){let a=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let f=n.toText((s?o.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:f},range:T.cursor(c.from+f.length)}})}else s?r=n.changeByRange(a=>{let c=o.line(i++);return{changes:{from:a.from,to:a.to,insert:c.text},range:T.cursor(a.from+c.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Un.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};or.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Un.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Un.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};or.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet($C))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=OP(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new z0(t,e,n,r)),r&&t.observer.ignore(()=>{RC(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Qw(t,e,n,r){if(r==1)return T.cursor(e,n);if(r==2)return sP(t.state,e,n);{let i=Rt.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,l=i?i.posAtEnd:o.to;return l<t.state.doc.length&&l==o.to&&l++,T.range(s,l)}}var Jw=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function AP(t,e,n,r){let i=Rt.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&Jw(n,r,s))return-1;let l=i.coordsAt(o,1);return l&&Jw(n,r,l)?1:s&&s.bottom>=r?-1:1}function eC(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:AP(t,n,e.clientX,e.clientY)}}var RP=z.ie&&z.ie_version<=11,tC=null,nC=0,rC=0;function pb(t){if(!RP)return t.detail;let e=tC,n=rC;return tC=t,rC=Date.now(),nC=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(nC+1)%3:1}function OP(t,e){let n=eC(t,e),r=pb(e),i=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),i=i.map(o.changes))},get(o,s,l){let a=eC(t,o),c,u=Qw(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!s){let f=Qw(t,n.pos,n.bias,r),h=Math.min(f.from,u.from),d=Math.max(f.to,u.to);u=h<u.from?T.range(h,d):T.range(d,h)}return s?i.replaceRange(i.main.extend(u.from,u.to)):l&&r==1&&i.ranges.length>1&&(c=IP(i,a.pos))?c:l?i.addRange(u):T.create([u])}}}function IP(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return T.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}or.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let o=i.posAtStart,s=o+i.length;(o>=n.to||s<=n.from)&&(n=T.range(o,s))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",bh(t.state,py,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};or.dragend=t=>(t.inputState.draggedContent=null,!1);function iC(t,e,n,r){if(n=bh(t.state,dy,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=r&&o&&CP(t,e)?{from:o.from,to:o.to}:null,l={from:i,insert:n},a=t.state.changes(s?[s,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}or.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&iC(t,e,r.filter(s=>s!=null).join(t.state.lineBreak),!1)};for(let s=0;s<n.length;s++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[s]=l.result),o()},l.readAsText(n[s])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return iC(t,e,r,!0),!0}return!1};or.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=hb?null:e.clipboardData;return n?(db(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(TP(t),!1)};function MP(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function LP(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let s=t.doc.lineAt(o);s.number>i&&(e.push(s.text),n.push({from:s.from,to:Math.min(t.doc.length,s.to+1)})),i=s.number}r=!0}return{text:bh(t,py,e.join(t.lineBreak)),ranges:n,linewise:r}}var V0=null;or.copy=or.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=LP(t.state);if(!n&&!i)return!1;V0=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=hb?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(MP(t,n),!1)};var mb=yt.define();function gb(t,e){let n=[];for(let r of t.facet(YC)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:mb.of(!0)}):null}function yb(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=gb(t.state,e);n?t.dispatch(n):t.update([])}},10)}Un.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),yb(t)};Un.blur=t=>{t.observer.clearSelectionRange(),yb(t)};Un.compositionstart=Un.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Un.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,z.chrome&&z.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Un.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};or.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let l=s[0],a=t.posAtDOM(l.startContainer,l.startOffset),c=t.posAtDOM(l.endContainer,l.endOffset);return yy(t,{from:a,to:c,insert:t.state.toText(o)},null),!0}}let i;if(z.chrome&&z.android&&(i=ub.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return z.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),z.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Un.compositionend(t,e),20),!1};var oC=new Set;function NP(t){oC.has(t)||(oC.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}var sC=["pre-wrap","normal","pre-line","break-spaces"],rl=!1;function lC(){rl=!1}var U0=class{constructor(e){this.lineWrapping=e,this.doc=Z.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sC.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o,s){let l=sC.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=o,a){this.heightSamples={};for(let c=0;c<s.length;c++){let u=s[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return a}},H0=class{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}},kr=class t{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?Xt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Vi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new t(this.from,this.length+e.length,this.top,this.height+e.height,n)}},Ae=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Ae||(Ae={})),ih=.001,Tn=class t{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ih&&(rl=!0),this.height=e)}replace(e,n,r){return t.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this,s=r.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:f}=i[l],h=o.lineAt(a,Ae.ByPosNoHeight,r.setDoc(n),0,0),d=h.to>=c?h:o.lineAt(c,Ae.ByPosNoHeight,r,0,0);for(f+=d.to-c,c=d.to;l>0&&h.from<=i[l-1].toA;)a=i[l-1].fromA,u=i[l-1].fromB,l--,a<h.from&&(h=o.lineAt(a,Ae.ByPosNoHeight,r,0,0));u+=h.from-a,a=h.from;let p=j0.build(r.setDoc(s),e,u,f);o=ph(o,o.replace(a,c,p))}return o.updateHeight(r,0)}static empty(){return new Vn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(o>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,o-=l.size}else break;else if(i<o){let l=e[n++];l&&(i+=l.size)}else{let l=e[--r];l&&(o+=l.size)}let s=0;return e[n-1]==null?(s=1,n--):e[n]==null&&(s=1,r++),new W0(t.of(e.slice(0,n)),s,t.of(e.slice(r)))}};function ph(t,e){return t==e?t:(t.constructor!=e.constructor&&(rl=!0),e)}Tn.prototype.size=1;var mh=class extends Tn{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new kr(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,n,r,i,o,s){e<=o+this.length&&n>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},Vn=class t extends mh{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new kr(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof t||i instanceof Bi&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Bi?i=new t(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Tn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Bi=class t extends Tn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,o=i-r+1,s,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*o);s=a/o,this.length>o+1&&(l=(this.height-a)/(this.length-o-1))}else s=this.height/o;return{firstLine:r,lastLine:i,perLine:s,perChar:l}}blockAt(e,n,r,i){let{firstLine:o,lastLine:s,perLine:l,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),f=l+u.length*a,h=Math.max(r,e-f/2);return new kr(u.from,u.length,h,f,0)}else{let c=Math.max(0,Math.min(s-o,Math.floor((e-r)/l))),{from:u,length:f}=n.doc.line(o+c);return new kr(u,f,r+l*c,l,0)}}lineAt(e,n,r,i,o){if(n==Ae.ByHeight)return this.blockAt(e,r,i,o);if(n==Ae.ByPosNoHeight){let{from:d,to:p}=r.doc.lineAt(e);return new kr(d,p-d,0,0,0)}let{firstLine:s,perLine:l,perChar:a}=this.heightMetrics(r,o),c=r.doc.lineAt(e),u=l+c.length*a,f=c.number-s,h=i+l*f+a*(c.from-o-f);return new kr(c.from,c.length,Math.max(i,Math.min(h,i+this.height-u)),u,0)}forEachLine(e,n,r,i,o,s){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(r,o);for(let u=e,f=i;u<=n;){let h=r.doc.lineAt(u);if(u==e){let p=h.number-l;f+=a*p+c*(e-o-p)}let d=a+c*h.length;s(new kr(h.from,h.length,f,d,0)),f+=d,u=h.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof t?r[r.length-1]=new t(o.length+i):r.push(null,new t(i-1))}if(e>0){let o=r[0];o instanceof t?r[0]=new t(e+o.length):r.unshift(new t(e-1),null)}return Tn.of(r)}decomposeLeft(e,n){n.push(new t(e-1),null)}decomposeRight(e,n){n.push(null,new t(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let s=[],l=Math.max(n,i.from),a=-1;for(i.from>n&&s.push(new t(i.from-n-1).updateHeight(e,n));l<=o&&i.more;){let u=e.doc.lineAt(l).length;s.length&&s.push(null);let f=i.heights[i.index++];a==-1?a=f:Math.abs(f-a)>=ih&&(a=-2);let h=new Vn(u,f);h.outdated=!1,s.push(h),l+=u+1}l<=o&&s.push(null,new t(o-l).updateHeight(e,l));let c=Tn.of(s);return(a<0||Math.abs(c.height-this.height)>=ih||Math.abs(a-this.heightMetrics(e,n).perLine)>=ih)&&(rl=!0),ph(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},W0=class extends Tn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let s=i+this.left.height,l=o+this.left.length+this.break,a=n==Ae.ByHeight?e<s:e<l,c=a?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,s,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=n==Ae.ByPosNoHeight?Ae.ByPosNoHeight:Ae.ByPos;return a?c.join(this.right.lineAt(l,u,r,s,l)):this.left.lineAt(l,u,r,i,o).join(c)}forEachLine(e,n,r,i,o,s){let l=i+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,o,s),n>=a&&this.right.forEachLine(e,n,r,l,a,s);else{let c=this.lineAt(a,Ae.ByPos,r,i,o);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,o,s),c.to>=e&&c.from<=n&&s(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,l,a,s)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let l of r)o.push(l);if(e>0&&aC(o,s-1),n<this.length){let l=o.length;this.decomposeRight(n,o),aC(o,l)}return Tn.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Tn.of(this.break?[e,null,n]:[e,n]):(this.left=ph(this.left,e),this.right=ph(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:s}=this,l=n+o.length+this.break,a=null;return i&&i.from<=n+o.length&&i.more?a=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=l+s.length&&i.more?a=s=s.updateHeight(e,l,r,i):s.updateHeight(e,l,r),a?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function aC(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Bi&&(r=t[e+1])instanceof Bi&&t.splice(e-1,3,new Bi(n.length+1+r.length))}var PP=5,j0=class t{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Vn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Vn(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=n-e;r.block?this.addBlock(new mh(s,i,r)):(s||o||i>=PP)&&this.addLineDeco(i,o,s)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Bi(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vn)return e;let n=new Vn(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Vn)&&!this.isCovered?this.nodes.push(new Vn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Vn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new t(r,e);return te.spans(n,r,i,o,0),o.finish(r)}};function _P(t,e,n){let r=new G0;return te.compare(t,e,n,r,0),r.changes}var G0=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&rh(e,n,this.changes,5)}};function DP(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();o=Math.max(o,h.left),s=Math.min(s,h.right),l=Math.max(l,h.top),a=Math.min(c==t.parentNode?i.innerHeight:a,h.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-n.left,right:Math.max(o,s)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function FP(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function BP(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}var rc=class{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,n){return M.replace({widget:new $0(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}},$0=class extends $e{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},gh=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=cC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=de.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(my).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new U0(n),this.stateDeco=e.facet(fc).filter(r=>typeof r!="function"),this.heightMap=Tn.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle.setDoc(e.doc),[new Cr(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=M.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new Zs(o,s))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?cC:new K0(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Xa(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(fc).filter(u=>typeof u!="function");let i=e.changedRanges,o=Cr.extendWithRanges(i,_P(r,this.stateDeco,e?e.changes:Kt.empty(this.state.doc.length))),s=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);lC(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||rl)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ZC)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?de.RTL:de.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),l=n.getBoundingClientRect(),a=s||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:S,scaleY:k}=AC(n,l);(S>.005&&Math.abs(this.scaleX-S)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=S,this.scaleY=k,c|=16,s=a=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,h=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=IC(e.scrollDOM);let p=(this.printing?BP:DP)(n,this.paddingTop),x=p.top-this.pixelViewport.top,v=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!FP(e.dom))return 0;let g=l.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(s=!0),s||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:k,charWidth:w,textHeight:C}=e.docView.measureTextSize();s=k>0&&i.refresh(o,k,w,C,Math.max(5,g/w),S),s&&(e.docView.minWidth=0,c|=16)}x>0&&v>0?u=Math.max(x,v):x<0&&v<0&&(u=Math.min(x,v)),lC();for(let k of this.viewports){let w=k.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(k);this.heightMap=(s?Tn.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle,[new Cr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new H0(k.from,w))}rl&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:l}=this,a=new Zs(i.lineAt(s-r*1e3,Ae.ByHeight,o,0,0).from,i.lineAt(l+(1-r)*1e3,Ae.ByHeight,o,0,0).to);if(n){let{head:c}=n.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(c,Ae.ByPos,o,0,0),h;n.y=="center"?h=(f.top+f.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<a.from?h=f.top:h=f.bottom-u,a=new Zs(i.lineAt(h-1e3/2,Ae.ByHeight,o,0,0).from,i.lineAt(h+u+1e3/2,Ae.ByHeight,o,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Zs(this.heightMap.lineAt(r,Ae.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Ae.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Ae.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,Ae.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:l}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=l+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new rc(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,s=i<<1;if(this.defaultTextDirection!=de.LTR&&!r)return[];let l=[],a=(u,f,h,d)=>{if(f-u<o)return;let p=this.state.selection.main,x=[p.from];p.empty||x.push(p.to);for(let m of x)if(m>u&&m<f){a(u,m-10,h,d),a(m+10,f,h,d);return}let v=VP(e,m=>m.from>=h.from&&m.to<=h.to&&Math.abs(m.from-u)<o&&Math.abs(m.to-f)<o&&!x.some(g=>m.from<g&&m.to>g));if(!v){if(f<h.to&&n&&r&&n.visibleRanges.some(y=>y.from<=f&&y.to>=f)){let y=n.moveToLineBoundary(T.cursor(f),!1,!0).head;y>u&&(f=y)}let m=this.gapSize(h,u,f,d),g=r||m<2e6?m:2e6;v=new rc(u,f,m,g)}l.push(v)},c=u=>{if(u.length<s||u.type!=Xt.Text)return;let f=zP(u.from,u.to,this.stateDeco);if(f.total<s)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(r){let x=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,m;if(h!=null){let g=Zf(f,h),y=((this.visibleBottom-this.visibleTop)/2+x)/u.height;v=g-y,m=g+y}else v=(this.visibleTop-u.top-x)/u.height,m=(this.visibleBottom-u.top+x)/u.height;d=Xf(f,v),p=Xf(f,m)}else{let x=f.total*this.heightOracle.charWidth,v=i*this.heightOracle.charWidth,m=0;if(x>2e6)for(let w of e)w.from>=u.from&&w.from<u.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=w.size-w.displaySize);let g=this.pixelViewport.left+m,y=this.pixelViewport.right+m,S,k;if(h!=null){let w=Zf(f,h),C=((y-g)/2+v)/x;S=w-C,k=w+C}else S=(g-v)/x,k=(y+v)/x;d=Xf(f,S),p=Xf(f,k)}d>u.from&&a(u.from,d,u,f),p<u.to&&a(p,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return l}gapSize(e,n,r,i){let o=Zf(i,r)-Zf(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){rc.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=M.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];te.spans(n,this.viewport.from,this.viewport.to,{span(o,s){r.push({from:o,to:s})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let o=0;o<r.length&&!(i&8);o++){let s=this.visibleRanges[o],l=r[o];(s.from!=l.from||s.to!=l.to)&&(i|=4,e&&e.mapPos(s.from,-1)==l.from&&e.mapPos(s.to,1)==l.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Xa(this.heightMap.lineAt(e,Ae.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Xa(this.heightMap.lineAt(this.scaler.fromDOM(e),Ae.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Xa(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},Zs=class{constructor(e,n){this.from=e,this.to=n}};function zP(t,e,n){let r=[],i=t,o=0;return te.spans(n,t,e,{span(){},point(s,l){s>i&&(r.push({from:i,to:s}),o+=s-i),i=l}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function Xf({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:s}=e[i],l=s-o;if(r<=l)return o+r;r-=l}}function Zf(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function VP(t,e){for(let n of t)if(e(n))return n}var cC={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}},K0=class t{constructor(e,n,r){let i=0,o=0,s=0;this.viewports=r.map(({from:l,to:a})=>{let c=n.lineAt(l,Ae.ByPos,e,0,0).top,u=n.lineAt(a,Ae.ByPos,e,0,0).bottom;return i+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let l of this.viewports)l.domTop=s+(l.top-o)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}eq(e){return e instanceof t?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}};function Xa(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new kr(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Xa(i,e)):t._content)}var Qf=B.define({combine:t=>t.join(" ")}),q0=B.define({combine:t=>t.indexOf(!0)>-1}),Y0=zn.newName(),xb=zn.newName(),vb=zn.newName(),Sb={"&light":"."+xb,"&dark":"."+vb};function X0(t,e,n){return new zn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}var UP=X0("."+Y0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Sb),HP={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},x0=z.ie&&z.ie_version<=11,Z0=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new A0,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(z.ie&&z.ie_version<=11||z.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&z.android&&e.constructor.EDIT_CONTEXT!==!1&&!(z.chrome&&z.chrome_version<126)&&(this.editContext=new Q0(e),e.state.facet(ii)&&(e.contentDOM.editContext=this.editContext.editContext)),x0&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(ii)?r.root.activeElement!=this.dom:!nh(this.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(z.ie&&z.ie_version<=11||z.android&&z.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Qa(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=sc(e.root);if(!n)return!1;let r=z.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&WP(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=nh(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&DN(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,HP),x0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),x0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&el(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(i=!0),n==-1?{from:n,to:r}=s:(n=Math.min(s.from,n),r=Math.max(s.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&nh(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new F0(this.view,e,n,r);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=ab(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=uC(n,e.previousSibling||e.target.previousSibling,-1),i=uC(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ii)!=e.state.facet(ii)&&(e.view.contentDOM.editContext=e.state.facet(ii)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function uC(t,e,n){for(;e;){let r=ye.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function fC(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return Qa(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function WP(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return fC(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?fC(t,n):null}var Q0=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:o,head:s}=i,l=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let c=a-l>r.text.length;l==this.from&&o<this.from?l=o:a==this.to&&o>this.to&&(a=o);let u=cb(e.state.sliceDoc(l,a),r.text,(c?i.from:i.to)-l,c?"end":null);if(!u){let h=T.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:u.from+l,to:u.toA+l,insert:Z.of(r.text.slice(u.from,u.toB).split(`
`))};if((z.mac||z.android)&&f.from==s-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:Z.of([r.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);yy(e,f,T.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],o=null;for(let s=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);s<l;s++){let a=e.coordsForChar(s);o=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||o||new DOMRect,i.push(o)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let o of r.getTextFormats()){let s=o.underlineStyle,l=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(l)){let a=this.toEditorPos(o.rangeStart),c=this.toEditorPos(o.rangeEnd);if(a<c){let u=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;i.push(M.mark({attributes:{style:u}}).range(a,c))}}}e.dispatch({effects:JC.of(M.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=sc(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,s,l,a,c)=>{if(r)return;let u=c.length-(s-o);if(i&&s>=i.to)if(i.from==o&&i.to==s&&i.insert.eq(c)){i=this.pendingContextChange=null,n+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(o+=n,s+=n,s<=this.from)this.from+=u,this.to+=u;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),c.toString()),this.to+=u}n+=u}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},R=class t{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(o=>r(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||_N(e.parent)||document,this.viewState=new gh(e.state||oe.create(e)),e.scrollTo&&e.scrollTo.is(Kf)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Xs).map(i=>new tc(i));for(let i of this.plugins)i.update(this);this.observer=new Z0(this),this.inputState=new B0(this),this.inputState.ensureHandlers(this.plugins),this.docView=new hh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof ct?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(mb))?(this.inputState.notifiedFocused=s,l=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,a=gb(o,s),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(u=null)):this.observer.clear(),o.facet(oe.phrases)!=this.state.facet(oe.phrases))return this.setState(o);i=fh.create(this,o,e),i.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new ec(d.empty?d:T.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(Kf)&&(f=d.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=yh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(qa)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Qf)!=i.state.facet(Qf)&&(this.viewState.mustMeasureContent=!0),(n||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(N0))try{h(i)}catch(d){Ot(this.state,d,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!ab(this,u)&&c.force&&el(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new gh(e),this.plugins=e.facet(Xs).map(r=>new tc(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new hh(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Xs),r=e.state.facet(Xs);if(n!=r){let i=[];for(let o of r){let s=n.indexOf(o);if(s<0)i.push(new tc(o));else{let l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Ot(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(s<0)if(IC(r))o=-1,s=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);o=d.from,s=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(d=>{try{return d.read(this)}catch(p){return Ot(this.state,p),hC}}),f=fh.create(this,this.state,[]),h=!1;f.flags|=a,n?n.flags|=a:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(u[d]!=hC)try{let p=c[d];p.write&&p.write(u[d],this)}catch(p){Ot(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let p=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(N0))l(n)}get themeClasses(){return Y0+" "+(this.state.facet(q0)?vb:xb)+" "+this.state.facet(Qf)}updateAttrs(){let e=dC(this,eb,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ii)?"true":"false",class:"cm-content",style:`${z.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),dC(this,my,n);let r=this.observer.ignore(()=>{let i=O0(this.contentDOM,this.contentAttrs,n),o=O0(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(t.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(qa);let e=this.state.facet(t.cspNonce);zn.mount(this.root,this.styleModules.concat(UP).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return y0(this,e,Xw(this,e,n,r))}moveByGroup(e,n){return y0(this,e,Xw(this,e,n,r=>hP(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=r[n?r.length-1:0];return T.cursor(o.side(n,i)+e.from,o.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return fP(this,e,n,r)}moveVertically(e,n,r){return y0(this,e,dP(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),ob(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[wr.find(o,e-i.from,-1,n)];return pc(r,s.dir==de.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(XC)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>jP)return HC(e.length);let n=this.textDirectionAt(e.from),r;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||UC(o.isolates,r=Gw(this,e))))return o.order;r||(r=Gw(this,e));let i=YN(e.text,n,r);return this.bidiCache.push(new yh(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||z.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{RC(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Kf.of(new ec(typeof e=="number"?T.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Kf.of(new ec(T.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Q.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Q.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=zn.newName(),i=[Qf.of(r),qa.of(X0(`.${r}`,e))];return n&&n.dark&&i.push(q0.of(!0)),i}static baseTheme(e){return En.lowest(qa.of(X0("."+Y0,e,Sb)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ye.get(r)||ye.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}};R.styleModule=qa;R.inputHandler=qC;R.clipboardInputFilter=dy;R.clipboardOutputFilter=py;R.scrollHandler=QC;R.focusChangeEffect=YC;R.perLineTextDirection=XC;R.exceptionSink=KC;R.updateListener=N0;R.editable=ii;R.mouseSelectionStyle=$C;R.dragMovesSelection=GC;R.clickAddsSelectionRange=jC;R.decorations=fc;R.outerDecorations=tb;R.atomicRanges=mc;R.bidiIsolatedRanges=nb;R.scrollMargins=rb;R.darkTheme=q0;R.cspNonce=B.define({combine:t=>t.length?t[0]:""});R.contentAttributes=my;R.editorAttributes=eb;R.lineWrapping=R.contentAttributes.of({class:"cm-lineWrapping"});R.announce=H.define();var jP=4096,hC={},yh=class t{constructor(e,n,r,i,o,s){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=o,this.order=s}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:de.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!n.touchesRange(s.from,s.to)&&r.push(new t(n.mapPos(s.from,1),n.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return r}};function dC(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(t):o;s&&R0(s,n)}return n}var GP=z.mac?"mac":z.windows?"win":z.linux?"linux":"key";function $P(t,e){let n=t.split(/-(?!$)/),r=n[n.length-1];r=="Space"&&(r=" ");let i,o,s,l;for(let a=0;a<n.length-1;++a){let c=n[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),l&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Jf(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}var KP=En.default(R.domEventHandlers({keydown(t,e){return Cb(kb(e.state),t,e,"editor")}})),Wo=B.define({enables:KP}),pC=new WeakMap;function kb(t){let e=t.facet(Wo),n=pC.get(e);return n||pC.set(e,n=YP(e.reduce((r,i)=>r.concat(i),[]))),n}function wb(t,e,n){return Cb(kb(t.state),e,t,n)}var Fi=null,qP=4e3;function YP(t,e=GP){let n=Object.create(null),r=Object.create(null),i=(s,l)=>{let a=r[s];if(a==null)r[s]=l;else if(a!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,l,a,c,u)=>{var f,h;let d=n[s]||(n[s]=Object.create(null)),p=l.split(/ (?!$)/).map(m=>$P(m,e));for(let m=1;m<p.length;m++){let g=p.slice(0,m).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[y=>{let S=Fi={view:y,prefix:g,scope:s};return setTimeout(()=>{Fi==S&&(Fi=null)},qP),!0}]})}let x=p.join(" ");i(x,!1);let v=d[x]||(d[x]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&v.run.push(a),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let s of t){let l=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let c of l){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=s;for(let h in u)u[h].run.push(d=>f(d,J0))}let a=s[e]||s.key;if(a)for(let c of l)o(c,a,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(c,"Shift-"+a,s.shift,s.preventDefault,s.stopPropagation)}return n}var J0=null;function Cb(t,e,n,r){J0=e;let i=Dw(e),o=At(i,0),s=bn(o)==i.length&&i!=" ",l="",a=!1,c=!1,u=!1;Fi&&Fi.view==n&&Fi.scope==r&&(l=Fi.prefix+" ",fb.indexOf(e.keyCode)<0&&(c=!0,Fi=null));let f=new Set,h=v=>{if(v){for(let m of v.run)if(!f.has(m)&&(f.add(m),m(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},d=t[r],p,x;return d&&(h(d[l+Jf(i,e,!s)])?a=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(z.windows&&e.ctrlKey&&e.altKey)&&!(z.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(p=ri[e.keyCode])&&p!=i?(h(d[l+Jf(p,e,!0)])||e.shiftKey&&(x=Ys[e.keyCode])!=i&&x!=p&&h(d[l+Jf(x,e,!1)]))&&(a=!0):s&&e.shiftKey&&h(d[l+Jf(i,e,!0)])&&(a=!0),!a&&h(d._any)&&(a=!0)),c&&(a=!0),a&&u&&e.stopPropagation(),J0=null,a}var hc=class t{constructor(e,n,r,i,o){this.className=e,this.left=n,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=bb(e);return[new t(n,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return XP(e,n,r)}};function bb(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==de.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function mC(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let o=t.dom.getBoundingClientRect(),s=(i.top+i.bottom)/2,l=t.posAtCoords({x:o.left+1,y:s}),a=t.posAtCoords({x:o.right-1,y:s});return l==null||a==null?r:{from:Math.max(r.from,Math.min(l,a)),to:Math.min(r.to,Math.max(l,a))}}function XP(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==de.LTR,s=t.contentDOM,l=s.getBoundingClientRect(),a=bb(t),c=s.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),d=_0(t,r,1),p=_0(t,i,-1),x=d.type==Xt.Text?d:null,v=p.type==Xt.Text?p:null;if(x&&(t.lineWrapping||d.widgetLineBreaks)&&(x=mC(t,r,1,x)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=mC(t,i,-1,v)),x&&v&&x.from==v.from&&x.to==v.to)return g(y(n.from,n.to,x));{let k=x?y(n.from,null,x):S(d,!1),w=v?y(null,n.to,v):S(p,!0),C=[];return(x||d).to<(v||p).from-(x&&v?1:0)||d.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<w.top?C.push(m(f,k.bottom,h,w.top)):k.bottom<w.top&&t.elementAtHeight((k.bottom+w.top)/2).type==Xt.Text&&(k.bottom=w.top=(k.bottom+w.top)/2),g(k).concat(C).concat(g(w))}function m(k,w,C,A){return new hc(e,k-a.left,w-a.top,C-k,A-w)}function g({top:k,bottom:w,horizontal:C}){let A=[];for(let P=0;P<C.length;P+=2)A.push(m(C[P],k,C[P+1],w));return A}function y(k,w,C){let A=1e9,P=-1e9,E=[];function _(I,F,K,le,be){let ne=t.coordsAtPos(I,I==C.to?-2:2),ie=t.coordsAtPos(K,K==C.from?2:-2);!ne||!ie||(A=Math.min(ne.top,ie.top,A),P=Math.max(ne.bottom,ie.bottom,P),be==de.LTR?E.push(o&&F?f:ne.left,o&&le?h:ie.right):E.push(!o&&le?f:ie.left,!o&&F?h:ne.right))}let N=k??C.from,L=w??C.to;for(let I of t.visibleRanges)if(I.to>N&&I.from<L)for(let F=Math.max(I.from,N),K=Math.min(I.to,L);;){let le=t.state.doc.lineAt(F);for(let be of t.bidiSpans(le)){let ne=be.from+le.from,ie=be.to+le.from;if(ne>=K)break;ie>F&&_(Math.max(ne,F),k==null&&ne<=N,Math.min(ie,K),w==null&&ie>=L,be.dir)}if(F=le.to+1,F>=K)break}return E.length==0&&_(N,k==null,L,w==null,t.textDirection),{top:A,bottom:P,horizontal:E}}function S(k,w){let C=l.top+(w?k.top:k.bottom);return{top:C,bottom:C,horizontal:[]}}}function ZP(t,e){return t.constructor==e.constructor&&t.eq(e)}var ey=class{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(oh)!=e.state.facet(oh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(oh);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!ZP(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,z.safari&&z.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},oh=B.define();function Eb(t){return[Q.define(e=>new ey(e,t)),oh.of(t)]}var dc=B.define({combine(t){return Ft(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Tb(t={}){return[dc.of(t),QP,JP,e3,ZC.of(!0)]}function Ab(t){return t.startState.facet(dc)!=t.state.facet(dc)}var QP=Eb({above:!0,markers(t){let{state:e}=t,n=e.facet(dc),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty||n.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:T.cursor(i.head,i.head>i.anchor?-1:1);for(let a of hc.forRange(t,s,l))r.push(a)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Ab(t);return n&&gC(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){gC(e.state,t)},class:"cm-cursorLayer"});function gC(t,e){e.style.animationDuration=t.facet(dc).cursorBlinkRate+"ms"}var JP=Eb({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:hc.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Ab(t)},class:"cm-selectionLayer"}),e3=En.highest(R.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Rb=H.define({map(t,e){return t==null?null:e.mapPos(t)}}),Za=ee.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(Rb)?r.value:n,t)}}),t3=Q.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Za);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Za)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Za),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Za)!=t&&this.view.dispatch({effects:Rb.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Ob(){return[Za,t3]}function yC(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),s=n,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)i(s+l.index,l)}function n3(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}var ty=class{constructor(e){let{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(l,a,c,u)=>i(u,c,c+l[0].length,l,a);else if(typeof r=="function")this.addMatch=(l,a,c,u)=>{let f=r(l,a,c);f&&u(c,c+l[0].length,f)};else if(r)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let n=new Ue,r=n.add.bind(n);for(let{from:i,to:o}of n3(e,this.maxLength))yC(e.state.doc,this.regexp,i,o,(s,l)=>this.addMatch(l,e,s,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(r=Math.min(l,r),i=Math.max(a,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),l=Math.min(o.to,i);if(l>=s){let a=e.state.doc.lineAt(s),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(o.from,a.from),f=Math.min(o.to,c.to);if(this.boundary){for(;s>a.from;s--)if(this.boundary.test(a.text[s-1-a.from])){u=s;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let h=[],d,p=(x,v,m)=>h.push(m.range(x,v));if(a==c)for(this.regexp.lastIndex=u-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,p);else yC(e.state.doc,this.regexp,u,f,(x,v)=>this.addMatch(v,e,x,p));n=n.update({filterFrom:u,filterTo:f,filter:(x,v)=>x<u||v>f,add:h})}}return n}},ny=/x/.unicode!=null?"gu":"g",r3=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,ny),i3={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},v0=null;function o3(){var t;if(v0==null&&typeof document<"u"&&document.body){let e=document.body.style;v0=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return v0||!1}var sh=B.define({combine(t){let e=Ft(t,{render:null,specialChars:r3,addSpecialChars:null});return(e.replaceTabs=!o3())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ny)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ny)),e}});function Ib(t={}){return[sh.of(t),s3()]}var xC=null;function s3(){return xC||(xC=Q.fromClass(class{constructor(t){this.view=t,this.decorations=M.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(sh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new ty({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=At(e[0],0);if(o==9){let s=i.lineAt(r),l=n.state.tabSize,a=ni(s.text,l,r-s.from);return M.replace({widget:new iy((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=M.replace({widget:new ry(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(sh);t.startState.facet(sh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}var l3="\u2022";function a3(t){return t>=32?l3:t==10?"\u2424":String.fromCharCode(9216+t)}var ry=class extends $e{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=a3(this.code),r=e.state.phrase("Control character")+" "+(i3[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}},iy=class extends $e{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};function Mb(){return u3}var c3=M.line({class:"cm-activeLine"}),u3=Q.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(c3.range(i.from)),e=i.from)}return M.set(n)}},{decorations:t=>t.decorations}),oy=class extends $e{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?tl(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=pc(n[0],r.direction!="rtl"),o=parseInt(r.lineHeight);return i.bottom-i.top>o*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+o}:i}ignoreEvent(){return!1}};function Lb(t){let e=Q.fromClass(class{constructor(n){this.view=n,this.placeholder=t?M.set([M.widget({widget:new oy(t),side:1}).range(0)]):M.none}get decorations(){return this.view.state.doc.length?M.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,R.contentAttributes.of({"aria-placeholder":t})]:e}var sy=2e3;function f3(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>sy||n.off>sy||e.col<0||n.col<0){let s=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=r;a<=i;a++){let c=t.doc.line(a);c.length<=l&&o.push(T.range(c.from+s,c.to+l))}}else{let s=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=r;a<=i;a++){let c=t.doc.line(a),u=jf(c.text,s,t.tabSize,!0);if(u<0)o.push(T.cursor(c.to));else{let f=jf(c.text,l,t.tabSize);o.push(T.range(c.from+u,c.from+f))}}}return o}function h3(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function vC(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>sy?-1:i==r.length?h3(t,e.clientX):ni(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function d3(t,e){let n=vC(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),s=i.state.doc.lineAt(o);n={line:s.number,col:n.col,off:Math.min(n.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let l=vC(t,i);if(!l)return r;let a=f3(t.state,n,l);return a.length?s?T.create(a.concat(r.ranges)):T.create(a):r}}:null}function Nb(t){let e=t?.eventFilter||(n=>n.altKey&&n.button==0);return R.mouseSelectionStyle.of((n,r)=>e(r)?d3(n,r):null)}var p3={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},m3={style:"cursor: crosshair"};function Pb(t={}){let[e,n]=p3[t.key||"Alt"],r=Q.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,R.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?m3:null})]}var eh="-10000px",xh=class{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=r(s,o))}update(e,n){var r;let i=e.state.facet(this.facet),o=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let s=[],l=n?[]:null;for(let a=0;a<o.length;a++){let c=o[a],u=-1;if(c){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==c.create&&(u=f)}if(u<0)s[a]=this.createTooltipView(c,a?s[a-1]:null),l&&(l[a]=!!c.above);else{let f=s[a]=this.tooltipViews[u];l&&(l[a]=n[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(this.removeTooltipView(a),(r=a.destroy)===null||r===void 0||r.call(a));return n&&(l.forEach((a,c)=>n[c]=a),n.length=l.length),this.input=i,this.tooltips=o,this.tooltipViews=s,!0}};function g3(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}var S0=B.define({combine:t=>{var e,n,r;return{position:z.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||g3}}}),SC=new WeakMap,xy=Q.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(S0);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new xh(t,gc,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(S0);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=eh,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(z.safari){let s=o.getBoundingClientRect();n=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}else n=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=gy(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let l=this.manager.tooltipViews[s];return l.getCoords?l.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(S0).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:o}=t,s=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(n.top,r.top)||f.top>=Math.min(n.bottom,r.bottom)||f.right<Math.max(n.left,r.left)-.1||f.left>Math.min(n.right,r.right)+.1)){u.style.top=eh;continue}let d=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,x=h.right-h.left,v=(e=SC.get(c))!==null&&e!==void 0?e:h.bottom-h.top,m=c.offset||x3,g=this.view.textDirection==de.LTR,y=h.width>r.right-r.left?g?r.left:r.right-h.width:g?Math.max(r.left,Math.min(f.left-(d?14:0)+m.x,r.right-x)):Math.min(Math.max(r.left,f.left-x+(d?14:0)-m.x),r.right-x),S=this.above[l];!a.strictSide&&(S?f.top-v-p-m.y<r.top:f.bottom+v+p+m.y>r.bottom)&&S==r.bottom-f.bottom>f.top-r.top&&(S=this.above[l]=!S);let k=(S?f.top-r.top:r.bottom-f.bottom)-p;if(k<v&&c.resize!==!1){if(k<this.view.defaultLineHeight){u.style.top=eh;continue}SC.set(c,v),u.style.height=(v=k)/o+"px"}else u.style.height&&(u.style.height="");let w=S?f.top-v-p-m.y:f.bottom+p+m.y,C=y+x;if(c.overlap!==!0)for(let A of s)A.left<C&&A.right>y&&A.top<w+v&&A.bottom>w&&(w=S?A.top-v-2-p:A.bottom+p+2);if(this.position=="absolute"?(u.style.top=(w-t.parent.top)/o+"px",kC(u,(y-t.parent.left)/i)):(u.style.top=w/o+"px",kC(u,y/i)),d){let A=f.left+(g?m.x:-m.x)-(y+14-7);d.style.left=A/i+"px"}c.overlap!==!0&&s.push({left:y,top:w,right:C,bottom:w+v}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=eh}},{eventObservers:{scroll(){this.maybeMeasure()}}});function kC(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}var y3=R.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),x3={x:0,y:0},gc=B.define({enables:[xy,y3]}),vh=B.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])}),Sh=class t{static create(e){return new t(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new xh(e,vh,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},v3=gc.compute([vh],t=>{let e=t.facet(vh);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:Sh.create,above:e[0].above,arrow:e.some(n=>n.arrow)}}),ly=class{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,o=1;if(r instanceof nl)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let l=e.coordsAtPos(i);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=a&&a.dir==de.RTL?-1:1;o=n.x<l.left?-c:c}let s=this.source(e,i,o);if(s?.then){let l=this.pending={pos:i};s.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Ot(e.state,a,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(xy),n=e?e.manager.tooltips.findIndex(r=>r.create==Sh.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:o}=this;if(i.length&&o&&!S3(o.dom,e)||this.pending){let{pos:s}=i[0]||this.pending,l=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:s;(s==l?this.view.posAtCoords(this.lastMove)!=s:!k3(this.view,s,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},th=4;function S3(t,e){let{left:n,right:r,top:i,bottom:o}=t.getBoundingClientRect(),s;if(s=t.querySelector(".cm-tooltip-arrow")){let l=s.getBoundingClientRect();i=Math.min(l.top,i),o=Math.max(l.bottom,o)}return e.clientX>=n-th&&e.clientX<=r+th&&e.clientY>=i-th&&e.clientY<=o+th}function k3(t,e,n,r,i,o){let s=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,l)<i)return!1;let a=t.posAtCoords({x:r,y:i},!1);return a>=e&&a<=n}function _b(t,e={}){let n=H.define(),r=ee.define({create(){return[]},update(i,o){if(i.length&&(e.hideOnChange&&(o.docChanged||o.selection)?i=[]:e.hideOn&&(i=i.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let l of i){let a=o.changes.mapPos(l.pos,-1,Tt.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=o.changes.mapPos(c.end)),s.push(c)}}i=s}for(let s of o.effects)s.is(n)&&(i=s.value),s.is(w3)&&(i=[]);return i},provide:i=>vh.from(i)});return{active:r,extension:[r,Q.define(i=>new ly(i,t,r,n,e.hoverTime||300)),v3]}}function vy(t,e){let n=t.plugin(xy);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}var w3=H.define();var wC=B.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function jo(t,e){let n=t.plugin(Db),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}var Db=Q.fromClass(class{constructor(t){this.input=t.state.facet(Ho),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(wC);this.top=new Qs(t,!0,e.topContainer),this.bottom=new Qs(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(wC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Qs(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Qs(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Ho);if(n!=this.input){let r=n.filter(a=>a),i=[],o=[],s=[],l=[];for(let a of r){let c=this.specs.indexOf(a),u;c<0?(u=a(t.view),l.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?o:s).push(u)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>R.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})}),Qs=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=CC(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=CC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function CC(t){let e=t.nextSibling;return t.remove(),e}var Ho=B.define({enables:Db});var He=class extends ir{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};He.prototype.elementClass="";He.prototype.toDOM=void 0;He.prototype.mapMode=Tt.TrackBefore;He.prototype.startSide=He.prototype.endSide=-1;He.prototype.point=!0;var lh=B.define(),C3=B.define(),b3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>te.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ic=B.define();function Go(t){return[Fb(),ic.of({...b3,...t})]}var ay=B.define({combine:t=>t.some(e=>e)});function Fb(t){let e=[E3];return t&&t.fixed===!1&&e.push(ay.of(!0)),e}var E3=Q.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ic).map(e=>new kh(t,e)),this.fixed=!t.state.facet(ay);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(ay)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=te.iter(this.view.state.facet(lh),this.view.viewport.from),r=[],i=this.gutters.map(o=>new uy(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let s=!0;for(let l of o.type)if(l.type==Xt.Text&&s){cy(n,r,l.from);for(let a of i)a.line(this.view,l,r);s=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(o.type==Xt.Text){cy(n,r,o.from);for(let s of i)s.line(this.view,o,r)}else if(o.widget)for(let s of i)s.widget(this.view,o);for(let o of i)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ic),n=t.state.facet(ic),r=t.docChanged||t.heightChanged||t.viewportChanged||!te.eq(t.startState.facet(lh),t.state.facet(lh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let s=e.indexOf(o);s<0?i.push(new kh(this.view,o)):(this.gutters[s].update(t),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>R.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==de.LTR?{left:r,right:i}:{right:r,left:i}})});function bC(t){return Array.isArray(t)?t:[t]}function cy(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}var uy=class{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=te.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,o=(n.top-this.height)/e.scaleY,s=n.height/e.scaleY;if(this.i==i.elements.length){let l=new wh(e,s,o,r);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,s,o,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];cy(this.cursor,i,n.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let s=this.gutter;i.length==0&&!s.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let o of e.state.facet(C3)){let s=o(e,n.widget,n);s&&(i||(i=[])).push(s)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}},kh=class{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let a=o.getBoundingClientRect();s=(a.top+a.bottom)/2}else s=i.clientY;let l=e.lineBlockAtHeight(s-e.documentTop);n.domEventHandlers[r](e,l,i)&&i.preventDefault()});this.markers=bC(n.markers(e)),n.initialSpacer&&(this.spacer=new wh(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=bC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!te.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},wh=class{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),T3(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let l=s,a=o<n.length?n[o++]:null,c=!1;if(a){let u=a.elementClass;u&&(r+=" "+u);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,c=!0;break}}else l=this.markers.length;for(;s<l;){let u=this.markers[s++];if(u.toDOM){u.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!a)break;a.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),c&&s++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}};function T3(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}var A3=B.define(),R3=B.define(),Js=B.define({combine(t){return Ft(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],s=n[i];r[i]=o?(l,a,c)=>o(l,a,c)||s(l,a,c):s}return r}})}}),oc=class extends He{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function k0(t,e){return t.state.facet(Js).formatNumber(e,t.state)}var O3=ic.compute([Js],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(A3)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new oc(k0(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(R3)){let o=i(e,n,r);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Js)!=e.state.facet(Js),initialSpacer(e){return new oc(k0(e,EC(e.state.doc.lines)))},updateSpacer(e,n){let r=k0(n.view,EC(n.view.state.doc.lines));return r==e.number?e:new oc(r)},domEventHandlers:t.facet(Js).domEventHandlers,side:"before"}));function Bb(t={}){return[Js.of(t),Fb(),O3]}function EC(t){let e=9;for(;e<t;)e=e*10+9;return e}var I3=new class extends He{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},M3=lh.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(I3.range(i)))}return te.of(e)});function zb(){return M3}var L3=0,yc=class{constructor(e,n){this.from=e,this.to=n}},q=class{constructor(e={}){this.id=L3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=An.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}};q.closedBy=new q({deserialize:t=>t.split(" ")});q.openedBy=new q({deserialize:t=>t.split(" ")});q.group=new q({deserialize:t=>t.split(" ")});q.isolate=new q({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});q.contextHash=new q({perNode:!0});q.lookAhead=new q({perNode:!0});q.mounted=new q({perNode:!0});var il=class{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[q.mounted.id]}},N3=Object.create(null),An=class t{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):N3,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new t(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(q.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(q.group),o=-1;o<(i?i.length:0);o++){let s=n[o<0?r.name:i[o]];if(s)return s}}}};An.none=new An("",Object.create(null),0,8);var Eh=new WeakMap,Vb=new WeakMap,xt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(xt||(xt={}));var Bt=class t{constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let e=il.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Sc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Eh.get(this)||this.topNode,o=new Sc(i);return o.moveTo(e,n),Eh.set(this,o._tree),o}get topNode(){return new Tr(this,0,0,null)}resolve(e,n=0){let r=xc(Eh.get(this)||this.topNode,e,n,!1);return Eh.set(this,r),r}resolveInner(e,n=0){let r=xc(Vb.get(this)||this.topNode,e,n,!0);return Vb.set(this,r),r}resolveStack(e,n=0){return P3(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e,s=e.mode||0,l=(s&xt.IncludeAnonymous)>0;for(let a=this.cursor(s|xt.IncludeAnonymous);;){let c=!1;if(a.from<=o&&a.to>=i&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Ty(An.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new t(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new t(An.none,n,r,i)))}static build(e){return _3(e)}};Bt.empty=new Bt(An.none,[],[],0);var Sy=class t{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new t(this.buffer,this.index)}},Hi=class t{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return An.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,n,r,i,o){let{buffer:s}=this,l=-1;for(let a=e;a!=n&&!(Wb(o,i,s[a+1],s[a+2])&&(l=a,r>0));a=s[a+3]);return l}slice(e,n,r){let i=this.buffer,o=new Uint16Array(n-e),s=0;for(let l=e,a=0;l<n;){o[a++]=i[l++],o[a++]=i[l++]-r;let c=o[a++]=i[l++]-r;o[a++]=i[l++]-e,s=Math.max(s,c)}return new t(o,s,this.set)}};function Wb(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function xc(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let s=!r&&t instanceof Tr&&t.index<0?null:t.parent;if(!s)return t;t=s}let o=r?0:xt.IgnoreOverlays;if(r)for(let s=t,l=s.parent;l;s=l,l=s.parent)s instanceof Tr&&s.index<0&&((i=l.enter(e,n,o))===null||i===void 0?void 0:i.from)!=s.from&&(t=l);for(;;){let s=t.enter(e,n,o);if(!s)return t;t=s}}var Ah=class{cursor(e=0){return new Sc(this,e)}getChild(e,n=null,r=null){let i=Ub(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Ub(this,e,n,r)}resolve(e,n=0){return xc(this,e,n,!1)}resolveInner(e,n=0){return xc(this,e,n,!0)}matchContext(e){return ky(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}},Tr=class t extends Ah{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){for(let s=this;;){for(let{children:l,positions:a}=s._tree,c=n>0?l.length:-1;e!=c;e+=n){let u=l[e],f=a[e]+s.from;if(Wb(i,r,f,f+u.length)){if(u instanceof Hi){if(o&xt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,n,r-f,i);if(h>-1)return new vc(new wy(s,u,e,f),null,h)}else if(o&xt.IncludeAnonymous||!u.type.isAnonymous||Ey(u)){let h;if(!(o&xt.IgnoreMounts)&&(h=il.get(u))&&!h.overlay)return new t(h.tree,f,e,s);let d=new t(u,f,e,s);return o&xt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(o&xt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+n:e=n<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&xt.IgnoreOverlays)&&(i=il.get(this._tree))&&i.overlay){let o=e-this.from;for(let{from:s,to:l}of i.overlay)if((n>0?s<=o:s<o)&&(n<0?l>=o:l>o))return new t(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Ub(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(let s=!1;!s;)if(s=i.type.is(n),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function ky(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}var wy=class{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}},vc=class t extends Ah{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new t(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&xt.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new t(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new t(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new t(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1];e.push(r.slice(i,o,s)),n.push(0)}return new Bt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function jb(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let s=t[o];(s.from>n.from||s.to<n.to)&&(n=s,e=o)}let r=n instanceof Tr&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new Cy(i,n)}var Cy=class{constructor(e,n){this.heads=e,this.node=n}get next(){return jb(this.heads)}};function P3(t,e,n){let r=t.resolveInner(e,n),i=null;for(let o=r instanceof Tr?r:r.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(i||(i=[r])).push(s.resolve(e,n)),o=s}else{let s=il.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let l=new Tr(s.tree,s.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(xc(l,e,n,!1))}}return i?jb(i):r}var Sc=class{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Tr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&xt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&xt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&xt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let l=r._tree.children[o];if(this.mode&xt.IncludeAnonymous||l instanceof Hi||!l.type.isAnonymous||Ey(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;n=s,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)n=new vc(this.buffer,n,this.stack[i]);return this.bufferNode=new vc(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return ky(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return ky(this._tree,e,i);let s=r[n.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}};function Ey(t){return t.children.some(e=>e instanceof Hi||!e.type.isAnonymous||Ey(e))}function _3(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=1024,reused:o=[],minRepeatType:s=r.types.length}=t,l=Array.isArray(n)?new Sy(n,n.length):n,a=r.types,c=0,u=0;function f(k,w,C,A,P,E){let{id:_,start:N,end:L,size:I}=l,F=u,K=c;if(I<0)if(l.next(),I==-1){let ue=o[_];C.push(ue),A.push(N-k);return}else if(I==-3){c=_;return}else if(I==-4){u=_;return}else throw new RangeError(`Unrecognized record size: ${I}`);let le=a[_],be,ne,ie=N-k;if(L-N<=i&&(ne=v(l.pos-w,P))){let ue=new Uint16Array(ne.size-ne.skip),fe=l.pos-ne.size,Qe=ue.length;for(;l.pos>fe;)Qe=m(ne.start,ue,Qe);be=new Hi(ue,L-ne.start,r),ie=ne.start-k}else{let ue=l.pos-I;l.next();let fe=[],Qe=[],Yn=_>=s?_:-1,pt=0,go=L;for(;l.pos>ue;)Yn>=0&&l.id==Yn&&l.size>=0?(l.end<=go-i&&(p(fe,Qe,N,pt,l.end,go,Yn,F,K),pt=fe.length,go=l.end),l.next()):E>2500?h(N,ue,fe,Qe):f(N,ue,fe,Qe,Yn,E+1);if(Yn>=0&&pt>0&&pt<fe.length&&p(fe,Qe,N,pt,N,go,Yn,F,K),fe.reverse(),Qe.reverse(),Yn>-1&&pt>0){let st=d(le,K);be=Ty(le,fe,Qe,0,fe.length,0,L-N,st,st)}else be=x(le,fe,Qe,L-N,F-L,K)}C.push(be),A.push(ie)}function h(k,w,C,A){let P=[],E=0,_=-1;for(;l.pos>w;){let{id:N,start:L,end:I,size:F}=l;if(F>4)l.next();else{if(_>-1&&L<_)break;_<0&&(_=I-i),P.push(N,L,I),E++,l.next()}}if(E){let N=new Uint16Array(E*4),L=P[P.length-2];for(let I=P.length-3,F=0;I>=0;I-=3)N[F++]=P[I],N[F++]=P[I+1]-L,N[F++]=P[I+2]-L,N[F++]=F;C.push(new Hi(N,P[2]-L,r)),A.push(L-k)}}function d(k,w){return(C,A,P)=>{let E=0,_=C.length-1,N,L;if(_>=0&&(N=C[_])instanceof Bt){if(!_&&N.type==k&&N.length==P)return N;(L=N.prop(q.lookAhead))&&(E=A[_]+N.length+L)}return x(k,C,A,P,E,w)}}function p(k,w,C,A,P,E,_,N,L){let I=[],F=[];for(;k.length>A;)I.push(k.pop()),F.push(w.pop()+C-P);k.push(x(r.types[_],I,F,E-P,N-E,L)),w.push(P-C)}function x(k,w,C,A,P,E,_){if(E){let N=[q.contextHash,E];_=_?[N].concat(_):[N]}if(P>25){let N=[q.lookAhead,P];_=_?[N].concat(_):[N]}return new Bt(k,w,C,A,_)}function v(k,w){let C=l.fork(),A=0,P=0,E=0,_=C.end-i,N={size:0,start:0,skip:0};e:for(let L=C.pos-k;C.pos>L;){let I=C.size;if(C.id==w&&I>=0){N.size=A,N.start=P,N.skip=E,E+=4,A+=4,C.next();continue}let F=C.pos-I;if(I<0||F<L||C.start<_)break;let K=C.id>=s?4:0,le=C.start;for(C.next();C.pos>F;){if(C.size<0)if(C.size==-3)K+=4;else break e;else C.id>=s&&(K+=4);C.next()}P=le,A+=I,E+=K}return(w<0||A==k)&&(N.size=A,N.start=P,N.skip=E),N.size>4?N:void 0}function m(k,w,C){let{id:A,start:P,end:E,size:_}=l;if(l.next(),_>=0&&A<s){let N=C;if(_>4){let L=l.pos-(_-4);for(;l.pos>L;)C=m(k,w,C)}w[--C]=N,w[--C]=E-k,w[--C]=P-k,w[--C]=A}else _==-3?c=A:_==-4&&(u=A);return C}let g=[],y=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,g,y,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new Bt(a[t.topID],g.reverse(),y.reverse(),S)}var Hb=new WeakMap;function Th(t,e){if(!t.isAnonymous||e instanceof Hi||e.type!=t)return 1;let n=Hb.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Bt)){n=1;break}n+=Th(t,r)}Hb.set(e,n)}return n}function Ty(t,e,n,r,i,o,s,l,a){let c=0;for(let p=r;p<i;p++)c+=Th(t,e[p]);let u=Math.ceil(c*1.5/8),f=[],h=[];function d(p,x,v,m,g){for(let y=v;y<m;){let S=y,k=x[y],w=Th(t,p[y]);for(y++;y<m;y++){let C=Th(t,p[y]);if(w+C>=u)break;w+=C}if(y==S+1){if(w>u){let C=p[S];d(C.children,C.positions,0,C.children.length,x[S]+g);continue}f.push(p[S])}else{let C=x[y-1]+p[y-1].length-k;f.push(Ty(t,p,x,S,y,k,C,null,a))}h.push(k+g-o)}}return d(e,n,r,i,0),(l||a)(f,h,s)}var $o=class t{constructor(e,n,r,i,o=!1,s=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new t(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<n.length?n[l]:null,f=u?u.fromA:1e9;if(f-a>=r)for(;s&&s.from<f;){let h=s;if(a>=h.from||f<=h.to||c){let d=Math.max(h.from,a)-c,p=Math.min(h.to,f)-c;h=d>=p?null:new t(d,p,h.tree,h.offset+c,l>0,!!u)}if(h&&i.push(h),s.to>f)break;s=o<e.length?e[o++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return i}},Rh=class{startParse(e,n,r){return typeof e=="string"&&(e=new by(e)),r=r?r.length?r.map(i=>new yc(i.from,i.to)):[new yc(0,0)]:[new yc(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}},by=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}};var wH=new q({perNode:!0});var D3=0,sr=class t{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=D3++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof t&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new t(r,[],null,[]);if(i.set.push(i),n)for(let o of n.set)i.set.push(o);return i}static defineModifier(e){let n=new Lh(e);return r=>r.modified.indexOf(n)>-1?r:Lh.get(r.base||r,r.modified.concat(n).sort((i,o)=>i.id-o.id))}},F3=0,Lh=class t{constructor(e){this.name=e,this.instances=[],this.id=F3++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(l=>l.base==e&&B3(n,l.modified));if(r)return r;let i=[],o=new sr(e.name,i,e,n);for(let l of n)l.instances.push(o);let s=z3(n);for(let l of e.set)if(!l.modified.length)for(let a of s)i.push(t.get(l,a));return o}};function B3(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function z3(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function Kb(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],s=2,l=i;for(let f=0;;){if(l=="..."&&f>0&&f+3==i.length){s=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+i);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){s=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);l=i.slice(f)}let a=o.length-1,c=o[a];if(!c)throw new RangeError("Invalid path: "+i);let u=new qo(r,s,a>0?o.slice(0,a):null);e[c]=u.sort(e[c])}}return qb.add(e)}var qb=new q({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let o=new qo(i.tags,i.mode,i.context);n?n.next=o:r=o,n=o}return r}}),qo=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};qo.empty=new qo([],2,null);function Iy(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let s of o.tag)n[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let l of o)for(let a of l.set){let c=n[a.id];if(c){s=s?s+" "+c:c;break}}return s},scope:r}}function V3(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function Yb(t,e,n,r=0,i=t.length){let o=new Ry(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}var Ry=class{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:s,from:l,to:a}=e;if(l>=r||a<=n)return;s.isTop&&(o=this.highlighters.filter(d=>!d.scope||d.scope(s)));let c=i,u=U3(e)||qo.empty,f=V3(o,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(n,l),c),u.opaque)return;let h=e.tree&&e.tree.prop(q.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),x=e.firstChild();for(let v=0,m=l;;v++){let g=v<h.overlay.length?h.overlay[v]:null,y=g?g.from+l:a,S=Math.max(n,m),k=Math.min(r,y);if(S<k&&x)for(;e.from<k&&(this.highlightRange(e,S,k,i,o),this.startSpan(Math.min(k,e.to),c),!(e.to>=y||!e.nextSibling())););if(!g||y>r)break;m=g.to+l,m>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+l),Math.min(r,m),"",p),this.startSpan(Math.min(r,m),c))}x&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}};function U3(t){let e=t.type.prop(qb);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}var D=sr.define,Oh=D(),Wi=D(),Gb=D(Wi),$b=D(Wi),ji=D(),Ih=D(ji),Ay=D(ji),Or=D(),Ko=D(Or),Ar=D(),Rr=D(),Oy=D(),kc=D(Oy),Mh=D(),b={comment:Oh,lineComment:D(Oh),blockComment:D(Oh),docComment:D(Oh),name:Wi,variableName:D(Wi),typeName:Gb,tagName:D(Gb),propertyName:$b,attributeName:D($b),className:D(Wi),labelName:D(Wi),namespace:D(Wi),macroName:D(Wi),literal:ji,string:Ih,docString:D(Ih),character:D(Ih),attributeValue:D(Ih),number:Ay,integer:D(Ay),float:D(Ay),bool:D(ji),regexp:D(ji),escape:D(ji),color:D(ji),url:D(ji),keyword:Ar,self:D(Ar),null:D(Ar),atom:D(Ar),unit:D(Ar),modifier:D(Ar),operatorKeyword:D(Ar),controlKeyword:D(Ar),definitionKeyword:D(Ar),moduleKeyword:D(Ar),operator:Rr,derefOperator:D(Rr),arithmeticOperator:D(Rr),logicOperator:D(Rr),bitwiseOperator:D(Rr),compareOperator:D(Rr),updateOperator:D(Rr),definitionOperator:D(Rr),typeOperator:D(Rr),controlOperator:D(Rr),punctuation:Oy,separator:D(Oy),bracket:kc,angleBracket:D(kc),squareBracket:D(kc),paren:D(kc),brace:D(kc),content:Or,heading:Ko,heading1:D(Ko),heading2:D(Ko),heading3:D(Ko),heading4:D(Ko),heading5:D(Ko),heading6:D(Ko),contentSeparator:D(Or),list:D(Or),quote:D(Or),emphasis:D(Or),strong:D(Or),link:D(Or),monospace:D(Or),strikethrough:D(Or),inserted:D(),deleted:D(),changed:D(),invalid:D(),meta:Mh,documentMeta:D(Mh),annotation:D(Mh),processingInstruction:D(Mh),definition:sr.defineModifier("definition"),constant:sr.defineModifier("constant"),function:sr.defineModifier("function"),standard:sr.defineModifier("standard"),local:sr.defineModifier("local"),special:sr.defineModifier("special")};for(let t in b){let e=b[t];e instanceof sr&&(e.name=t)}var EH=Iy([{tag:b.link,class:"tok-link"},{tag:b.heading,class:"tok-heading"},{tag:b.emphasis,class:"tok-emphasis"},{tag:b.strong,class:"tok-strong"},{tag:b.keyword,class:"tok-keyword"},{tag:b.atom,class:"tok-atom"},{tag:b.bool,class:"tok-bool"},{tag:b.url,class:"tok-url"},{tag:b.labelName,class:"tok-labelName"},{tag:b.inserted,class:"tok-inserted"},{tag:b.deleted,class:"tok-deleted"},{tag:b.literal,class:"tok-literal"},{tag:b.string,class:"tok-string"},{tag:b.number,class:"tok-number"},{tag:[b.regexp,b.escape,b.special(b.string)],class:"tok-string2"},{tag:b.variableName,class:"tok-variableName"},{tag:b.local(b.variableName),class:"tok-variableName tok-local"},{tag:b.definition(b.variableName),class:"tok-variableName tok-definition"},{tag:b.special(b.variableName),class:"tok-variableName2"},{tag:b.definition(b.propertyName),class:"tok-propertyName tok-definition"},{tag:b.typeName,class:"tok-typeName"},{tag:b.namespace,class:"tok-namespace"},{tag:b.className,class:"tok-className"},{tag:b.macroName,class:"tok-macroName"},{tag:b.propertyName,class:"tok-propertyName"},{tag:b.operator,class:"tok-operator"},{tag:b.comment,class:"tok-comment"},{tag:b.meta,class:"tok-meta"},{tag:b.invalid,class:"tok-invalid"},{tag:b.punctuation,class:"tok-punctuation"}]);var My,Cc=new q;var H3=new q,Hn=class{constructor(e,n,r=[],i=""){this.data=e,this.name=i,oe.prototype.hasOwnProperty("tree")||Object.defineProperty(oe.prototype,"tree",{get(){return vt(this)}}),this.parser=n,this.extension=[Gi.of(this),oe.languageData.of((o,s,l)=>{let a=Xb(o,s,l),c=a.type.prop(Cc);if(!c)return[];let u=o.facet(c),f=a.type.prop(H3);if(f){let h=a.resolve(s-a.from,l);for(let d of f)if(d.test(h,o)){let p=o.facet(d.facet);return d.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return Xb(e,n,r).type.prop(Cc)==this.data}findRegions(e){let n=e.facet(Gi);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(Cc)==this.data){r.push({from:s,to:s+o.length});return}let l=o.prop(q.mounted);if(l){if(l.tree.prop(Cc)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+s,to:a.to+s});else r.push({from:s,to:s+o.length});return}else if(l.overlay){let a=r.length;if(i(l.tree,l.overlay[0].from+s),r.length>a)return}}for(let a=0;a<o.children.length;a++){let c=o.children[a];c instanceof Bt&&i(c,o.positions[a]+s)}};return i(vt(e),0),r}get allowsNesting(){return!0}};Hn.setState=H.define();function Xb(t,e,n){let r=t.facet(Gi),i=vt(t).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,n,xt.ExcludeBuffers))o.type.isTop&&(i=o);return i}function vt(t){let e=t.field(Hn.state,!1);return e?e.tree:Bt.empty}var _y=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}},wc=null,Dy=class t{constructor(e,n,r=[],i,o,s,l,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new t(e,n,[],Bt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new _y(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Bt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped($o.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped($o.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=wc;wc=this;try{return e()}finally{wc=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Zb(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,f,h)=>a.push({fromA:c,toA:u,fromB:f,toB:h})),r=$o.applyChanges(r,a),i=Bt.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&l.push({from:u,to:f})}}}return new t(this.parser,n,r,i,o,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=Zb(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Rh{createParse(n,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let a=wc;if(a){for(let c of i)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=s,new Bt(An.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return wc}};function Zb(t,e,n){return $o.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}var Ec=class t{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new t(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Dy.create(e.facet(Gi).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new t(r)}};Hn.state=ee.define({create:Ec.init,update(t,e){for(let n of e.effects)if(n.is(Hn.setState))return n.value;return e.startState.facet(Gi)!=e.state.facet(Gi)?Ec.init(e.state):t.apply(e)}});var rE=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(rE=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});var Ly=typeof navigator<"u"&&(!((My=navigator.scheduling)===null||My===void 0)&&My.isInputPending)?()=>navigator.scheduling.isInputPending():null,W3=Q.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Hn.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Hn.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=rE(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(Hn.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Ly?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<i&&r.doc.length>i+1e3,a=o.context.work(()=>Ly&&Ly()||Date.now()>s,i+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Hn.setState.of(new Ec(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Ot(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Gi=B.define({combine(t){return t.length?t[0]:null},enables:t=>[Hn.state,W3,R.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});var j3=B.define(),Zo=B.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Tc(t){let e=t.facet(Zo);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function sl(t,e){let n="",r=t.tabSize,i=t.facet(Zo)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let o=0;o<e;o++)n+=i;return n}function _h(t,e){t instanceof oe&&(t=new Yo(t));for(let r of t.state.facet(j3)){let i=r(t,e);if(i!==void 0)return i}let n=vt(t.state);return n.length>=e?$3(t,n,e):null}var Yo=class{constructor(e,n={}){this.state=e,this.options=n,this.unit=Tc(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return ni(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},G3=new q;function $3(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let o=[];for(let s=i;s&&!(s.from<r.node.from||s.to>r.node.to||s.from==r.node.from&&s.type==r.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)r={node:o[s],next:r}}return iE(r,t,n)}function iE(t,e,n){for(let r=t;r;r=r.next){let i=q3(r.node);if(i)return i(Fy.create(e,n,r))}return 0}function K3(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function q3(t){let e=t.type.prop(G3);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(q.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>Q3(s,!0,1,void 0,o&&!K3(s)?i.from:void 0)}return t.parent==null?Y3:null}function Y3(){return 0}var Fy=class t extends Yo{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new t(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(X3(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return iE(this.context.next,this.base,this.pos)}};function X3(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Z3(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=s)return null;let c=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+c}}l=a.to}}function Q3(t,e,n,r,i){let o=t.textAfter,s=o.match(/^\s*/)[0].length,l=r&&o.slice(s,s+r.length)==r||i==t.pos+s,a=e?Z3(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}var J3=200;function oE(){return oe.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+J3)return t;let o=n.sliceString(i.from,r);if(!e.some(c=>c.test(o)))return t;let{state:s}=t,l=-1,a=[];for(let{head:c}of s.selection.ranges){let u=s.doc.lineAt(c);if(u.from==l)continue;l=u.from;let f=_h(s,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],d=sl(s,f);h!=d&&a.push({from:u.from,to:u.from+h.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}var Wy=B.define(),e_=new q;function t_(t,e,n){let r=vt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),o=null;for(let s=i;s;s=s.next){let l=s.node;if(l.to<=n||l.from>n)continue;if(o&&l.from<e)break;let a=l.type.prop(e_);if(a&&(l.to<r.length-50||r.length==t.doc.length||!n_(l))){let c=a(l,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(o=c)}}return o}function n_(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Nh(t,e,n){for(let r of t.facet(Wy)){let i=r(t,e,n);if(i)return i}return t_(t,e,n)}function sE(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}var ll=H.define({map:sE}),Qo=H.define({map:sE});function lE(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}var Xo=ee.define({create(){return M.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Qb(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(ll)&&!r_(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(jy),i=r?M.replace({widget:new By(r(e.state,n.value))}):Jb;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Qo)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Qb(t,e.selection.main.head)),t},provide:t=>R.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Jb.range(r,i))}return M.set(e,!0)}});function Qb(t,e,n=e){let r=!1;return t.between(e,n,(i,o)=>{i<n&&o>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,o)=>i>=n||o<=e}):t}function Ph(t,e,n){var r;let i=null;return(r=t.field(Xo,!1))===null||r===void 0||r.between(e,n,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function r_(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function aE(t,e){return t.field(Xo,!1)?e:e.concat(H.appendConfig.of(fE()))}var i_=t=>{for(let e of lE(t)){let n=Nh(t.state,e.from,e.to);if(n)return t.dispatch({effects:aE(t.state,[ll.of(n),cE(t,n)])}),!0}return!1},o_=t=>{if(!t.state.field(Xo,!1))return!1;let e=[];for(let n of lE(t)){let r=Ph(t.state,n.from,n.to);r&&e.push(Qo.of(r),cE(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function cE(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return R.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}var s_=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=Nh(e,i.from,i.to);o&&n.push(ll.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:aE(t.state,n)}),!!n.length},l_=t=>{let e=t.state.field(Xo,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Qo.of({from:r,to:i}))}),t.dispatch({effects:n}),!0};var uE=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:i_},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:o_},{key:"Ctrl-Alt-[",run:s_},{key:"Ctrl-Alt-]",run:l_}],a_={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},jy=B.define({combine(t){return Ft(t,a_)}});function fE(t){let e=[Xo,u_];return t&&e.push(jy.of(t)),e}function hE(t,e){let{state:n}=t,r=n.facet(jy),i=s=>{let l=t.lineBlockAt(t.posAtDOM(s.target)),a=Ph(t.state,l.from,l.to);a&&t.dispatch({effects:Qo.of(a)}),s.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}var Jb=M.replace({widget:new class extends $e{toDOM(t){return hE(t,null)}}}),By=class extends $e{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return hE(e,this.value)}},c_={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1},bc=class extends He{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}};function dE(t={}){let e={...c_,...t},n=new bc(e,!0),r=new bc(e,!1),i=Q.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Gi)!=s.state.facet(Gi)||s.startState.field(Xo,!1)!=s.state.field(Xo,!1)||vt(s.startState)!=vt(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new Ue;for(let a of s.viewportLineBlocks){let c=Ph(s.state,a.from,a.to)?r:Nh(s.state,a.from,a.to)?n:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:o}=e;return[i,Go({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(i))===null||l===void 0?void 0:l.markers)||te.empty},initialSpacer(){return new bc(e,!1)},domEventHandlers:{...o,click:(s,l,a)=>{if(o.click&&o.click(s,l,a))return!0;let c=Ph(s.state,l.from,l.to);if(c)return s.dispatch({effects:Qo.of(c)}),!0;let u=Nh(s.state,l.from,l.to);return u?(s.dispatch({effects:ll.of(u)}),!0):!1}}}),fE()]}var u_=R.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),ol=class t{constructor(e,n){this.specs=e;let r;function i(l){let a=zn.newName();return(r||(r=Object.create(null)))["."+a]=l,a}let o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,s=n.scope;this.scope=s instanceof Hn?l=>l.prop(Cc)==s.data:s?l=>l==s:void 0,this.style=Iy(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=r?new zn(r):null,this.themeType=n.themeType}static define(e,n){return new t(e,n||{})}},zy=B.define(),pE=B.define({combine(t){return t.length?[t[0]]:null}});function Ny(t){let e=t.facet(zy);return e.length?e:t.facet(pE)}function Dh(t,e){let n=[f_],r;return t instanceof ol&&(t.module&&n.push(R.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(pE.of(t)):r?n.push(zy.computeN([R.darkTheme],i=>i.facet(R.darkTheme)==(r=="dark")?[t]:[])):n.push(zy.of(t)),n}var Vy=class{constructor(e){this.markCache=Object.create(null),this.tree=vt(e.state),this.decorations=this.buildDeco(e,Ny(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=vt(e.state),r=Ny(e.state),i=r!=Ny(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!i&&n.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return M.none;let r=new Ue;for(let{from:i,to:o}of e.visibleRanges)Yb(this.tree,n,(s,l,a)=>{r.add(s,l,this.markCache[a]||(this.markCache[a]=M.mark({class:a})))},i,o);return r.finish()}},f_=En.high(Q.fromClass(Vy,{decorations:t=>t.decorations})),mE=ol.define([{tag:b.meta,color:"#404740"},{tag:b.link,textDecoration:"underline"},{tag:b.heading,textDecoration:"underline",fontWeight:"bold"},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strong,fontWeight:"bold"},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.keyword,color:"#708"},{tag:[b.atom,b.bool,b.url,b.contentSeparator,b.labelName],color:"#219"},{tag:[b.literal,b.inserted],color:"#164"},{tag:[b.string,b.deleted],color:"#a11"},{tag:[b.regexp,b.escape,b.special(b.string)],color:"#e40"},{tag:b.definition(b.variableName),color:"#00f"},{tag:b.local(b.variableName),color:"#30a"},{tag:[b.typeName,b.namespace],color:"#085"},{tag:b.className,color:"#167"},{tag:[b.special(b.variableName),b.macroName],color:"#256"},{tag:b.definition(b.propertyName),color:"#00c"},{tag:b.comment,color:"#940"},{tag:b.invalid,color:"#f00"}]),h_=R.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),gE=1e4,yE="()[]{}",xE=B.define({combine(t){return Ft(t,{afterCursor:!0,brackets:yE,maxScanDistance:gE,renderMatch:m_})}}),d_=M.mark({class:"cm-matchingBracket"}),p_=M.mark({class:"cm-nonmatchingBracket"});function m_(t){let e=[],n=t.matched?d_:p_;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}var g_=ee.define({create(){return M.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(xE);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=lr(e.state,i.head,-1,r)||i.head>0&&lr(e.state,i.head-1,1,r)||r.afterCursor&&(lr(e.state,i.head,1,r)||i.head<e.state.doc.length&&lr(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return M.set(n,!0)},provide:t=>R.decorations.from(t)}),y_=[g_,h_];function vE(t={}){return[xE.of(t),y_]}var x_=new q;function Uy(t,e,n){let r=t.prop(e<0?q.openedBy:q.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Hy(t){let e=t.type.prop(x_);return e?e(t.node):t}function lr(t,e,n,r={}){let i=r.maxScanDistance||gE,o=r.brackets||yE,s=vt(t),l=s.resolveInner(e,n);for(let a=l;a;a=a.parent){let c=Uy(a.type,n,o);if(c&&a.from<a.to){let u=Hy(a);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return v_(t,e,n,a,u,c,o)}}return S_(t,e,n,s,l.type,i,o)}function v_(t,e,n,r,i,o,s){let l=r.parent,a={from:i.from,to:i.to},c=0,u=l?.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&o.indexOf(u.type.name)>-1&&u.from<u.to){let f=Hy(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Uy(u.type,n,s))c++;else if(Uy(u.type,-n,s)){if(c==0){let f=Hy(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function S_(t,e,n,r,i,o,s){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=s.indexOf(l);if(a<0||a%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=o;){let d=u.value;n<0&&(h+=d.length);let p=e+h*n;for(let x=n>0?0:d.length-1,v=n>0?d.length:-1;x!=v;x+=n){let m=s.indexOf(d[x]);if(!(m<0||r.resolveInner(p+x,1).type!=i))if(m%2==0==n>0)f++;else{if(f==1)return{start:c,end:{from:p+x,to:p+x+1},matched:m>>1==a>>1};f--}}n>0&&(h+=d.length)}return u.done?{start:c,matched:!1}:null}var k_=Object.create(null),eE=[An.none];var tE=[],nE=Object.create(null),w_=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])w_[t]=C_(k_,e);function Py(t,e){tE.indexOf(t)>-1||(tE.push(t),console.warn(e))}function C_(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let u=t[c]||b[c];u?typeof u=="function"?a.length?a=a.map(u):Py(c,`Modifier ${c} used at start of tag`):a.length?Py(c,`Tag ${c} used as modifier`):a=Array.isArray(u)?u:[u]:Py(c,`Unknown highlighting tag ${c}`)}for(let c of a)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(l=>l.id),o=nE[i];if(o)return o.id;let s=nE[i]=An.define({id:eE.length,name:r,props:[Kb({[r]:n})]});return eE.push(s),s.id}var PH={rtl:M.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:de.RTL}),ltr:M.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:de.LTR}),auto:M.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var b_=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Zy(t.state,n.from);return r.line?E_(t):r.block?A_(t):!1};function Xy(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}var E_=Xy(I_,0);var T_=Xy(RE,0);var A_=Xy((t,e)=>RE(t,e,O_(e)),0);function Zy(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}var Ac=50;function R_(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-Ac,r),s=t.sliceDoc(i,i+Ac),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(s)[0].length,c=o.length-l;if(o.slice(c-e.length,c)==e&&s.slice(a,a+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let u,f;i-r<=2*Ac?u=f=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+Ac),f=t.sliceDoc(i-Ac,i));let h=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-n.length;return u.slice(h,h+e.length)==e&&f.slice(p,p+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function O_(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function RE(t,e,n=e.selection.ranges){let r=n.map(o=>Zy(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,s)=>R_(e,r[s],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let s=0,l;s<i.length;s++)if(l=i[s]){let a=r[s],{open:c,close:u}=l;o.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:o}}return null}function I_(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of n){let l=r.length,a=1e9,c=Zy(e,o).line;if(c){for(let u=o;u<=s;){let f=e.doc.lineAt(u);if(f.from>i&&(o==s||s>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+c.length)==c?h:-1;h<f.text.length&&h<a&&(a=h),r.push({line:f,comment:p,token:c,indent:h,empty:d,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=a);r.length==l+1&&(r[l].single=!0)}}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:c,empty:u,single:f}of r)(f||!u)&&o.push({from:l.from+c,insert:a+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:a}of r)if(l>=0){let c=s.from+l,u=c+a.length;s.text[u-s.from]==" "&&u++,o.push({from:c,to:u})}return{changes:o}}return null}var $y=yt.define(),M_=yt.define(),L_=B.define(),OE=B.define({combine(t){return Ft(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),IE=ee.define({create(){return Jo.empty},update(t,e){let n=e.state.facet(OE),r=e.annotation($y);if(r){let a=ar.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return a?u=Bh(u,u.length,n.minDepth,a):u=PE(u,e.startState.selection),new Jo(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(M_);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(ct.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=ar.fromTransaction(e),s=e.annotation(ct.time),l=e.annotation(ct.userEvent);return o?t=t.addChanges(o,s,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Jo(t.done.map(ar.fromJSON),t.undone.map(ar.fromJSON))}});function ME(t={}){return[IE,OE.of(t),R.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?LE:e.inputType=="historyRedo"?Ky:null;return r?(e.preventDefault(),r(n)):!1}})]}function zh(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(IE,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}var LE=zh(0,!1),Ky=zh(1,!1),N_=zh(0,!0),P_=zh(1,!0);var ar=class t{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new t(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new t(e.changes&&Kt.fromJSON(e.changes),[],e.mapped&&ti.fromJSON(e.mapped),e.startSelection&&T.fromJSON(e.startSelection),e.selectionsAfter.map(T.fromJSON))}static fromTransaction(e,n){let r=Wn;for(let i of e.startState.facet(L_)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new t(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Wn)}static selection(e){return new t(void 0,Wn,void 0,void 0,e)}};function Bh(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function __(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,s,l)=>{for(let a=0;a<n.length;){let c=n[a++],u=n[a++];l>=c&&s<=u&&(r=!0)}}),r}function D_(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function NE(t,e){return t.length?e.length?t.concat(e):t:e}var Wn=[],F_=200;function PE(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-F_));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Bh(t,t.length-1,1e9,n.setSelAfter(r)))}else return[ar.selection([e])]}function B_(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Gy(t,e){if(!t.length)return t;let n=t.length,r=Wn;for(;n;){let i=z_(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[ar.selection(r)]:Wn}function z_(t,e,n){let r=NE(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Wn,n);if(!t.changes)return ar.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new ar(i,H.mapEffects(t.effects,e),s,t.startSelection.map(o),r)}var V_=/^(input\.type|delete)($|\.)/,Jo=class t{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new t(this.done,this.undone):this}addChanges(e,n,r,i,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||V_.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,__(l.changes,e.changes))||r=="input.type.compose")?s=Bh(s,s.length-1,i.minDepth,new ar(e.changes.compose(l.changes),NE(H.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Wn)):s=Bh(s,s.length,i.minDepth,e),new t(s,Wn,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Wn;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&D_(o[o.length-1],e)?this:new t(PE(this.done,e),this.undone,n,r)}addMapping(e){return new t(Gy(this.done,e),Gy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],s=o.selectionsAfter[0]||n.selection;if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:$y.of({side:e,rest:B_(i),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=i.length==1?Wn:i.slice(0,i.length-1);return o.mapped&&(l=Gy(l,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:$y.of({side:e,rest:l,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};Jo.empty=new Jo(Wn,Wn);var _E=[{key:"Mod-z",run:LE,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ky,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ky,preventDefault:!0},{key:"Mod-u",run:N_,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:P_,preventDefault:!0}];function al(t,e){return T.create(t.ranges.map(e),t.mainIndex)}function cr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ur({state:t,dispatch:e},n){let r=al(t.selection,n);return r.eq(t.selection,!0)?!1:(e(cr(t,r)),!0)}function Vh(t,e){return T.cursor(e?t.to:t.from)}function DE(t,e){return ur(t,n=>n.empty?t.moveByChar(n,e):Vh(n,e))}function zt(t){return t.textDirectionAt(t.state.selection.main.head)==de.LTR}var FE=t=>DE(t,!zt(t)),BE=t=>DE(t,zt(t));function zE(t,e){return ur(t,n=>n.empty?t.moveByGroup(n,e):Vh(n,e))}var U_=t=>zE(t,!zt(t)),H_=t=>zE(t,zt(t));var WH=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function W_(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Uh(t,e,n){let r=vt(t).resolveInner(e.head),i=n?q.closedBy:q.openedBy;for(let a=e.head;;){let c=n?r.childAfter(a):r.childBefore(a);if(!c)break;W_(t,c,i)?r=c:a=n?c.to:c.from}let o=r.type.prop(i),s,l;return o&&(s=n?lr(t,r.from,1):lr(t,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,T.cursor(l,n?-1:1)}var j_=t=>ur(t,e=>Uh(t.state,e,!zt(t))),G_=t=>ur(t,e=>Uh(t.state,e,zt(t)));function VE(t,e){return ur(t,n=>{if(!n.empty)return Vh(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}var UE=t=>VE(t,!1),HE=t=>VE(t,!0);function WE(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let o of t.state.facet(R.scrollMargins)){let s=o(t);s?.top&&(n=Math.max(s?.top,n)),s?.bottom&&(r=Math.max(s?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function jE(t,e){let n=WE(t),{state:r}=t,i=al(r.selection,s=>s.empty?t.moveVertically(s,e,n.height):Vh(s,e));if(i.eq(r.selection))return!1;let o;if(n.selfScroll){let s=t.coordsAtPos(r.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,c=l.bottom-n.marginBottom;s&&s.top>a&&s.bottom<c&&(o=R.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-a}))}return t.dispatch(cr(r,i),{effects:o}),!0}var SE=t=>jE(t,!1),qy=t=>jE(t,!0);function $i(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=T.cursor(r.from+o))}return i}var $_=t=>ur(t,e=>$i(t,e,!0)),K_=t=>ur(t,e=>$i(t,e,!1)),q_=t=>ur(t,e=>$i(t,e,!zt(t))),Y_=t=>ur(t,e=>$i(t,e,zt(t))),X_=t=>ur(t,e=>T.cursor(t.lineBlockAt(e.head).from,1)),Z_=t=>ur(t,e=>T.cursor(t.lineBlockAt(e.head).to,-1));function Q_(t,e,n){let r=!1,i=al(t.selection,o=>{let s=lr(t,o.head,-1)||lr(t,o.head,1)||o.head>0&&lr(t,o.head-1,1)||o.head<t.doc.length&&lr(t,o.head+1,-1);if(!s||!s.end)return o;r=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return n?T.range(o.anchor,l):T.cursor(l)});return r?(e(cr(t,i)),!0):!1}var J_=({state:t,dispatch:e})=>Q_(t,e,!1);function jn(t,e){let n=al(t.state.selection,r=>{let i=e(r);return T.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(cr(t.state,n)),!0)}function GE(t,e){return jn(t,n=>t.moveByChar(n,e))}var $E=t=>GE(t,!zt(t)),KE=t=>GE(t,zt(t));function qE(t,e){return jn(t,n=>t.moveByGroup(n,e))}var eD=t=>qE(t,!zt(t)),tD=t=>qE(t,zt(t));var nD=t=>jn(t,e=>Uh(t.state,e,!zt(t))),rD=t=>jn(t,e=>Uh(t.state,e,zt(t)));function YE(t,e){return jn(t,n=>t.moveVertically(n,e))}var XE=t=>YE(t,!1),ZE=t=>YE(t,!0);function QE(t,e){return jn(t,n=>t.moveVertically(n,e,WE(t).height))}var kE=t=>QE(t,!1),wE=t=>QE(t,!0),iD=t=>jn(t,e=>$i(t,e,!0)),oD=t=>jn(t,e=>$i(t,e,!1)),sD=t=>jn(t,e=>$i(t,e,!zt(t))),lD=t=>jn(t,e=>$i(t,e,zt(t))),aD=t=>jn(t,e=>T.cursor(t.lineBlockAt(e.head).from)),cD=t=>jn(t,e=>T.cursor(t.lineBlockAt(e.head).to)),CE=({state:t,dispatch:e})=>(e(cr(t,{anchor:0})),!0),bE=({state:t,dispatch:e})=>(e(cr(t,{anchor:t.doc.length})),!0),EE=({state:t,dispatch:e})=>(e(cr(t,{anchor:t.selection.main.anchor,head:0})),!0),TE=({state:t,dispatch:e})=>(e(cr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),uD=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),fD=({state:t,dispatch:e})=>{let n=Hh(t).map(({from:r,to:i})=>T.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:T.create(n),userEvent:"select"})),!0},hD=({state:t,dispatch:e})=>{let n=al(t.selection,r=>{let i=vt(t),o=i.resolveStack(r.from,1);if(r.empty){let s=i.resolveStack(r.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:l}=s;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&s.next)return T.range(l.to,l.from)}return r});return n.eq(t.selection)?!1:(e(cr(t,n)),!0)};function JE(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let o of n.selection.ranges){let s=n.doc.lineAt(o.head);if(e?s.to<t.state.doc.length:s.from>0)for(let l=o;;){let a=t.moveVertically(l,e);if(a.head<s.from||a.head>s.to){i.some(c=>c.head==a.head)||i.push(a);break}else{if(a.head==l.head)break;l=a}}}return i.length==r.ranges.length?!1:(t.dispatch(cr(n,T.create(i,i.length-1))),!0)}var dD=t=>JE(t,!1),pD=t=>JE(t,!0),mD=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=T.create([n.main]):n.main.empty||(r=T.create([T.cursor(n.main.head)])),r?(e(cr(t,r)),!0):!1};function Rc(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let a=e(o);a<s?(n="delete.backward",a=Fh(t,a,!1)):a>s&&(n="delete.forward",a=Fh(t,a,!0)),s=Math.min(s,a),l=Math.max(l,a)}else s=Fh(t,s,!1),l=Fh(t,l,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:T.cursor(s,s<o.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?R.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Fh(t,e,n){if(t instanceof R)for(let r of t.state.facet(R.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}var eT=(t,e,n)=>Rc(t,r=>{let i=r.from,{state:o}=t,s=o.doc.lineAt(i),l,a;if(n&&!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,i-s.from))){if(l[l.length-1]=="	")return i-1;let c=ni(l,o.tabSize),u=c%Tc(o)||Tc(o);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)i--;a=i}else a=et(s.text,i-s.from,e,e)+s.from,a==i&&s.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,i-s.from))&&(a=et(s.text,a-s.from,!1,!1)+s.from);return a}),Yy=t=>eT(t,!1,!0);var tT=t=>eT(t,!0,!1),nT=(t,e)=>Rc(t,n=>{let r=n.head,{state:i}=t,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let l=null;;){if(r==(e?o.to:o.from)){r==n.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=et(o.text,r-o.from,e)+o.from,c=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),u=s(c);if(l!=null&&u!=l)break;(c!=" "||r!=n.head)&&(l=u),r=a}return r}),rT=t=>nT(t,!1),gD=t=>nT(t,!0);var yD=t=>Rc(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)});var xD=t=>Rc(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),vD=t=>Rc(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)});var SD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Z.of(["",""])},range:T.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},kD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),s=i==o.from?i-1:et(o.text,i-o.from,!1)+o.from,l=i==o.to?i+1:et(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:t.doc.slice(i,l).append(t.doc.slice(s,i))},range:T.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Hh(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function iT(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of Hh(t)){if(n?o.to==t.doc.length:o.from==0)continue;let s=t.doc.lineAt(n?o.to+1:o.from-1),l=s.length+1;if(n){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+t.lineBreak});for(let a of o.ranges)i.push(T.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:t.lineBreak+s.text});for(let a of o.ranges)i.push(T.range(a.anchor-l,a.head-l))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:T.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}var wD=({state:t,dispatch:e})=>iT(t,e,!1),CD=({state:t,dispatch:e})=>iT(t,e,!0);function oT(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Hh(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var bD=({state:t,dispatch:e})=>oT(t,e,!1),ED=({state:t,dispatch:e})=>oT(t,e,!0),TD=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Hh(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=al(e.selection,i=>{let o;if(t.lineWrapping){let s=t.lineBlockAt(i.head),l=t.coordsAtPos(i.head,i.assoc||1);l&&(o=s.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,o)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function AD(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=vt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(q.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}var AE=sT(!1),RD=sT(!0);function sT(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,l=e.doc.lineAt(o),a=!t&&o==s&&AD(e,o);t&&(o=s=(s<=l.to?l:e.doc.lineAt(s)).to);let c=new Yo(e,{simulateBreak:o,simulateDoubleBreak:!!a}),u=_h(c,o);for(u==null&&(u=ni(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;a?{from:o,to:s}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",sl(e,u)];return a&&f.push(sl(e,c.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:Z.of(f)},range:T.cursor(o+1+f[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Qy(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let l=t.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(e(l,i,r),n=l.number),s=l.to+1}let o=t.changes(i);return{changes:i,range:T.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}var OD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Yo(t,{overrideIndentation:o=>{let s=n[o];return s??-1}}),i=Qy(t,(o,s,l)=>{let a=_h(r,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let c=/^\s*/.exec(o.text)[0],u=sl(t,a);(c!=u||l.from<o.from+c.length)&&(n[o.from]=a,s.push({from:o.from,to:o.from+c.length,insert:u}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},lT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Qy(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Zo)})}),{userEvent:"input.indent"})),!0),aT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Qy(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=ni(i,t.tabSize),s=0,l=sl(t,Math.max(0,o-Tc(t)));for(;s<i.length&&s<l.length&&i.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+i.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),ID=t=>(t.setTabFocusMode(),!0);var MD=[{key:"Ctrl-b",run:FE,shift:$E,preventDefault:!0},{key:"Ctrl-f",run:BE,shift:KE},{key:"Ctrl-p",run:UE,shift:XE},{key:"Ctrl-n",run:HE,shift:ZE},{key:"Ctrl-a",run:X_,shift:aD},{key:"Ctrl-e",run:Z_,shift:cD},{key:"Ctrl-d",run:tT},{key:"Ctrl-h",run:Yy},{key:"Ctrl-k",run:yD},{key:"Ctrl-Alt-h",run:rT},{key:"Ctrl-o",run:SD},{key:"Ctrl-t",run:kD},{key:"Ctrl-v",run:qy}],LD=[{key:"ArrowLeft",run:FE,shift:$E,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:U_,shift:eD,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:q_,shift:sD,preventDefault:!0},{key:"ArrowRight",run:BE,shift:KE,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:H_,shift:tD,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Y_,shift:lD,preventDefault:!0},{key:"ArrowUp",run:UE,shift:XE,preventDefault:!0},{mac:"Cmd-ArrowUp",run:CE,shift:EE},{mac:"Ctrl-ArrowUp",run:SE,shift:kE},{key:"ArrowDown",run:HE,shift:ZE,preventDefault:!0},{mac:"Cmd-ArrowDown",run:bE,shift:TE},{mac:"Ctrl-ArrowDown",run:qy,shift:wE},{key:"PageUp",run:SE,shift:kE},{key:"PageDown",run:qy,shift:wE},{key:"Home",run:K_,shift:oD,preventDefault:!0},{key:"Mod-Home",run:CE,shift:EE},{key:"End",run:$_,shift:iD,preventDefault:!0},{key:"Mod-End",run:bE,shift:TE},{key:"Enter",run:AE,shift:AE},{key:"Mod-a",run:uD},{key:"Backspace",run:Yy,shift:Yy,preventDefault:!0},{key:"Delete",run:tT,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:rT,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:gD,preventDefault:!0},{mac:"Mod-Backspace",run:xD,preventDefault:!0},{mac:"Mod-Delete",run:vD,preventDefault:!0}].concat(MD.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),cT=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:j_,shift:nD},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:G_,shift:rD},{key:"Alt-ArrowUp",run:wD},{key:"Shift-Alt-ArrowUp",run:bD},{key:"Alt-ArrowDown",run:CD},{key:"Shift-Alt-ArrowDown",run:ED},{key:"Mod-Alt-ArrowUp",run:dD},{key:"Mod-Alt-ArrowDown",run:pD},{key:"Escape",run:mD},{key:"Mod-Enter",run:RD},{key:"Alt-l",mac:"Ctrl-l",run:fD},{key:"Mod-i",run:hD,preventDefault:!0},{key:"Mod-[",run:aT},{key:"Mod-]",run:lT},{key:"Mod-Alt-\\",run:OD},{key:"Shift-Mod-k",run:TD},{key:"Shift-Mod-\\",run:J_},{key:"Mod-/",run:b_},{key:"Alt-A",run:T_},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ID}].concat(LD),uT={key:"Tab",run:lT,shift:aT};var fT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t,qi=class{constructor(e,n,r=0,i=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?l=>o(fT(l)):fT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return At(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Ka(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=bn(e);let i=this.normalize(n);if(i.length)for(let o=0,s=r;;o++){let l=i.charCodeAt(o),a=this.match(l,s,this.bufferPos+this.bufferStart);if(o==i.length-1){if(a)return this.value=a,this;break}s==r&&o<n.length&&n.charCodeAt(o)==l&&s++}}}match(e,n,r){let i=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],l=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[o+1],to:r}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}};typeof Symbol<"u"&&(qi.prototype[Symbol.iterator]=function(){return this});var mT={from:-1,to:-1,match:/.*/.exec("")},o1="gm"+(/x/.unicode==null?"":"u"),Gh=class{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=mT,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Kh(e,n,r,i,o);this.re=new RegExp(n,o1+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=qh(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=qh(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},Jy=new WeakMap,$h=class t{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Jy.get(e);if(!i||i.from>=r||i.to<=n){let l=new t(n,e.sliceString(n,r));return Jy.set(e,l),l}if(i.from==n&&i.to==r)return i;let{text:o,from:s}=i;return s>n&&(o=e.sliceString(n,s)+o,s=n),i.to<r&&(o+=e.sliceString(i.to,r)),Jy.set(e,new t(s,o)),new t(n,o.slice(n-s,r-s))}},Kh=class{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=mT,this.matchPos=qh(e,i),this.re=new RegExp(n,o1+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=$h.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=qh(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=$h.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(Gh.prototype[Symbol.iterator]=Kh.prototype[Symbol.iterator]=function(){return this});function ND(t){try{return new RegExp(t,o1),!0}catch{return!1}}function qh(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function e1(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=se("input",{class:"cm-textfield",name:"line",value:e}),r=se("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:Oc.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},se("label",t.state.phrase("Go to line"),": ",n)," ",se("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),se("button",{name:"close",onclick:()=>{t.dispatch({effects:Oc.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["\xD7"]));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!o)return;let{state:s}=t,l=s.doc.lineAt(s.selection.main.head),[,a,c,u,f]=o,h=u?+u.slice(1):0,d=c?+c:l.number;if(c&&f){let v=d/100;a&&(v=v*(a=="-"?-1:1)+l.number/s.doc.lines),d=Math.round(s.doc.lines*v)}else c&&a&&(d=d*(a=="-"?-1:1)+l.number);let p=s.doc.line(Math.max(1,Math.min(s.doc.lines,d))),x=T.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[Oc.of(!1),R.scrollIntoView(x.from,{y:"center"})],selection:x}),t.focus()}return{dom:r}}var Oc=H.define(),hT=ee.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Oc)&&(t=n.value);return t},provide:t=>Ho.from(t,e=>e?e1:null)}),PD=t=>{let e=jo(t,e1);if(!e){let n=[Oc.of(!0)];t.state.field(hT,!1)==null&&n.push(H.appendConfig.of([hT,_D])),t.dispatch({effects:n}),e=jo(t,e1)}return e&&e.dom.querySelector("input").select(),!0},_D=R.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),DD={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},gT=B.define({combine(t){return Ft(t,DD,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function yT(t){let e=[UD,VD];return t&&e.push(gT.of(t)),e}var FD=M.mark({class:"cm-selectionMatch"}),BD=M.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function dT(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=he.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=he.Word)}function zD(t,e,n,r){return t(e.sliceDoc(n,n+1))==he.Word&&t(e.sliceDoc(r-1,r))==he.Word}var VD=Q.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(gT),{state:n}=t,r=n.selection;if(r.ranges.length>1)return M.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return M.none;let a=n.wordAt(i.head);if(!a)return M.none;s=n.charCategorizer(i.head),o=n.sliceDoc(a.from,a.to)}else{let a=i.to-i.from;if(a<e.minSelectionLength||a>200)return M.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),s=n.charCategorizer(i.head),!(dT(s,n,i.from,i.to)&&zD(s,n,i.from,i.to)))return M.none}else if(o=n.sliceDoc(i.from,i.to),!o)return M.none}let l=[];for(let a of t.visibleRanges){let c=new qi(n.doc,o,a.from,a.to);for(;!c.next().done;){let{from:u,to:f}=c.value;if((!s||dT(s,n,u,f))&&(i.empty&&u<=i.from&&f>=i.to?l.push(BD.range(u,f)):(u>=i.to||f<=i.from)&&l.push(FD.range(u,f)),l.length>e.maxMatches))return M.none}}return M.set(l)}},{decorations:t=>t.decorations}),UD=R.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),HD=({state:t,dispatch:e})=>{let{selection:n}=t,r=T.create(n.ranges.map(i=>t.wordAt(i.head)||T.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function WD(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,l=new qi(t.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new qi(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(a=>a.from==l.value.from))continue;if(o){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}var jD=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return HD({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=WD(t,r);return i?(e(t.update({selection:t.selection.addRange(T.range(i.from,i.to),!1),effects:R.scrollIntoView(i.to)})),!0):!1},fl=B.define({combine(t){return Ft(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new i1(e),scrollToMatch:e=>R.scrollIntoView(e)})}});var Yh=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||ND(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new n1(this):new t1(this)}getCursor(e,n=0,r){let i=e.doc?e:oe.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?ul(this,i,n,r):cl(this,i,n,r)}},Xh=class{constructor(e){this.spec=e}};function cl(t,e,n,r){return new qi(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?GD(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function GD(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(Zh(i,n-o))!=he.Word||e(Qh(i,n-o))!=he.Word)&&(e(Qh(i,r-o))!=he.Word||e(Zh(i,r-o))!=he.Word))}var t1=class extends Xh{constructor(e){super(e)}nextMatch(e,n,r){let i=cl(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,n+this.spec.unquoted.length);i=cl(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),s=cl(this.spec,e,o,i),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=cl(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=cl(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}};function ul(t,e,n,r){return new Gh(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?$D(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Zh(t,e){return t.slice(et(t,e,!1),e)}function Qh(t,e){return t.slice(e,et(t,e))}function $D(t){return(e,n,r)=>!r[0].length||(t(Zh(r.input,r.index))!=he.Word||t(Qh(r.input,r.index))!=he.Word)&&(t(Qh(r.input,r.index+r[0].length))!=he.Word||t(Zh(r.input,r.index+r[0].length))!=he.Word)}var n1=class extends Xh{nextMatch(e,n,r){let i=ul(this.spec,e,r,e.doc.length).next();return i.done&&(i=ul(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),s=ul(this.spec,e,o,r),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==n||l.from>o+10))return l;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let o=+r.slice(0,i);if(o>0&&o<e.match.length)return e.match[o]+r.slice(i)}return n})}matchAll(e,n){let r=ul(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=ul(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}},Mc=H.define(),s1=H.define(),Ki=ee.define({create(t){return new Ic(r1(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Mc)?t=new Ic(n.value.create(),t.panel):n.is(s1)&&(t=new Ic(t.query,n.value?l1:null));return t},provide:t=>Ho.from(t,e=>e.panel)});var Ic=class{constructor(e,n){this.query=e,this.panel=n}},KD=M.mark({class:"cm-searchMatch"}),qD=M.mark({class:"cm-searchMatch cm-searchMatch-selected"}),YD=Q.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Ki))}update(t){let e=t.state.field(Ki);(e!=t.startState.field(Ki)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return M.none;let{view:n}=this,r=new Ue;for(let i=0,o=n.visibleRanges,s=o.length;i<s;i++){let{from:l,to:a}=o[i];for(;i<s-1&&a>o[i+1].from-2*250;)a=o[++i].to;t.highlight(n.state,l,a,(c,u)=>{let f=n.state.selection.ranges.some(h=>h.from==c&&h.to==u);r.add(c,u,f?qD:KD)})}return r.finish()}},{decorations:t=>t.decorations});function Lc(t){return e=>{let n=e.state.field(Ki,!1);return n&&n.query.spec.valid?t(e,n):ST(e)}}var Jh=Lc((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=T.single(r.from,r.to),o=t.state.facet(fl);return t.dispatch({selection:i,effects:[a1(t,r),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),vT(t),!0}),ed=Lc((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let o=T.single(i.from,i.to),s=t.state.facet(fl);return t.dispatch({selection:o,effects:[a1(t,i),s.scrollToMatch(o.main,t)],userEvent:"select.search"}),vT(t),!0}),XD=Lc((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:T.create(n.map(r=>T.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),ZD=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let l=new qi(t.doc,t.sliceDoc(r,i));!l.next().done;){if(o.length>1e3)return!1;l.value.from==r&&(s=o.length),o.push(T.range(l.value.from,l.value.to))}return e(t.update({selection:T.create(o,s),userEvent:"select.search.matches"})),!0},pT=Lc((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let s=o,l=[],a,c,u=[];s.from==r&&s.to==i&&(c=n.toText(e.getReplacement(s)),l.push({from:s.from,to:s.to,insert:c}),s=e.nextMatch(n,s.from,s.to),u.push(R.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let f=t.state.changes(l);return s&&(a=T.single(s.from,s.to).map(f),u.push(a1(t,s)),u.push(n.facet(fl).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:u,userEvent:"input.replace"}),!0}),QD=Lc((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:R.announce.of(r),userEvent:"input.replace.all"}),!0});function l1(t){return t.state.facet(fl).createPanel(t)}function r1(t,e){var n,r,i,o,s;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=t.facet(fl);return new Yh({search:((n=e?.literal)!==null&&n!==void 0?n:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:c.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:c.wholeWord})}function xT(t){let e=jo(t,l1);return e&&e.dom.querySelector("[main-field]")}function vT(t){let e=xT(t);e&&e==t.root.activeElement&&e.select()}var ST=t=>{let e=t.state.field(Ki,!1);if(e&&e.panel){let n=xT(t);if(n&&n!=t.root.activeElement){let r=r1(t.state,e.query.spec);r.valid&&t.dispatch({effects:Mc.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[s1.of(!0),e?Mc.of(r1(t.state,e.query.spec)):H.appendConfig.of(e4)]});return!0},kT=t=>{let e=t.state.field(Ki,!1);if(!e||!e.panel)return!1;let n=jo(t,l1);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:s1.of(!1)}),!0},wT=[{key:"Mod-f",run:ST,scope:"editor search-panel"},{key:"F3",run:Jh,shift:ed,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Jh,shift:ed,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kT,scope:"editor search-panel"},{key:"Mod-Shift-l",run:ZD},{key:"Mod-Alt-g",run:PD},{key:"Mod-d",run:jD,preventDefault:!0}],i1=class{constructor(e){this.view=e;let n=this.query=e.state.field(Ki).query.spec;this.commit=this.commit.bind(this),this.searchField=se("input",{value:n.search,placeholder:Rn(e,"Find"),"aria-label":Rn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=se("input",{value:n.replace,placeholder:Rn(e,"Replace"),"aria-label":Rn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=se("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=se("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=se("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,s){return se("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=se("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Jh(e),[Rn(e,"next")]),r("prev",()=>ed(e),[Rn(e,"previous")]),r("select",()=>XD(e),[Rn(e,"all")]),se("label",null,[this.caseField,Rn(e,"match case")]),se("label",null,[this.reField,Rn(e,"regexp")]),se("label",null,[this.wordField,Rn(e,"by word")]),...e.state.readOnly?[]:[se("br"),this.replaceField,r("replace",()=>pT(e),[Rn(e,"replace")]),r("replaceAll",()=>QD(e),[Rn(e,"replace all")])],se("button",{name:"close",onclick:()=>kT(e),"aria-label":Rn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Yh({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Mc.of(e)}))}keydown(e){wb(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ed:Jh)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),pT(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Mc)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(fl).top}};function Rn(t,e){return t.state.phrase(e)}var Wh=30,jh=/[\s\.,:;?!]/;function a1(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-Wh),s=Math.min(i,n+Wh),l=t.state.sliceDoc(o,s);if(o!=r.from){for(let a=0;a<Wh;a++)if(!jh.test(l[a+1])&&jh.test(l[a])){l=l.slice(a);break}}if(s!=i){for(let a=l.length-1;a>l.length-Wh;a--)if(!jh.test(l[a-1])&&jh.test(l[a])){l=l.slice(0,a);break}}return R.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`)}var JD=R.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),e4=[Ki,En.low(YD),JD];var nd=class{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=vt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(IT(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}};function CT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function t4(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=CT(e)+CT(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function n4(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:t4(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}var rd=class{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}};function ts(t){return t.selection.main.from}function IT(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}var MT=yt.define();function r4(t,e,n,r){let{main:i}=t.selection,o=n-i.from,s=r-i.from;return{...t.changeByRange(l=>{if(l!=i&&n!=r&&t.sliceDoc(l.from+o,l.from+s)!=t.sliceDoc(n,r))return{range:l};let a=t.toText(e);return{changes:{from:l.from+o,to:r==i.from?l.to:l.from+s,insert:a},range:T.cursor(l.from+o+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}var bT=new WeakMap;function i4(t){if(!Array.isArray(t))return t;let e=bT.get(t);return e||bT.set(t,e=n4(t)),e}var id=H.define(),Nc=H.define(),h1=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=At(e,n),i=bn(r);this.chars.push(r);let o=e.slice(n,n+i),s=o.toUpperCase();this.folded.push(At(s==o?o.toLowerCase():s,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:s}=this;if(n.length==1){let g=At(e,0),y=bn(g),S=y==e.length?0:-100;if(g!=n[0])if(g==r[0])S+=-200;else return null;return this.ret(S,[0,y])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,c=0;if(l<0){for(let g=0,y=Math.min(e.length,200);g<y&&c<a;){let S=At(e,g);(S==n[c]||S==r[c])&&(i[c++]=g),g+=bn(S)}if(c<a)return null}let u=0,f=0,h=!1,d=0,p=-1,x=-1,v=/[a-z]/.test(e),m=!0;for(let g=0,y=Math.min(e.length,200),S=0;g<y&&f<a;){let k=At(e,g);l<0&&(u<a&&k==n[u]&&(o[u++]=g),d<a&&(k==n[d]||k==r[d]?(d==0&&(p=g),x=g+1,d++):d=0));let w,C=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(w=Ka(k))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!g||C==1&&v||S==0&&C!=0)&&(n[f]==k||r[f]==k&&(h=!0)?s[f++]=g:s.length&&(m=!1)),S=C,g+=bn(k)}return f==a&&s[0]==0&&m?this.result(-100+(h?-200:0),s,e):d==a&&p==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-900-e.length,[p,x]):f==a?this.result(-100+(h?-200:0)+-700+(m?0:-1100),s,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],o=0;for(let s of n){let l=s+(this.astral?bn(At(r,s)):1);o&&i[o-1]==s?i[o-1]=l:(i[o++]=s,i[o++]=l)}return this.ret(e-r.length,i)}},d1=class{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}},St=B.define({combine(t){return Ft(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:o4,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>ET(e(r),n(r)),optionClass:(e,n)=>r=>ET(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function ET(t,e){return t?e?t+" "+e:t:e}function o4(t,e,n,r,i,o){let s=t.textDirection==de.RTL,l=s,a=!1,c="top",u,f,h=e.left-i.left,d=i.right-e.right,p=r.right-r.left,x=r.bottom-r.top;if(l&&h<Math.min(p,d)?l=!1:!l&&d<Math.min(p,h)&&(l=!0),p<=(l?h:d))u=Math.max(i.top,Math.min(n.top,i.bottom-x))-e.top,f=Math.min(400,l?h:d);else{a=!0,f=Math.min(400,(s?e.right:i.right-e.left)-30);let g=i.bottom-e.bottom;g>=x||g>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/o.offsetHeight,m=(e.right-e.left)/o.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${f/m}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":l?"left":"right")}}function s4(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,o){let s=document.createElement("span");s.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let c=0;c<o.length;){let u=o[c++],f=o[c++];u>a&&s.appendChild(document.createTextNode(l.slice(a,u)));let h=s.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&s.appendChild(document.createTextNode(l.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function c1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}var p1=class{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:o,selected:s}=i.open,l=e.state.facet(St);this.optionContent=s4(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=c1(o.length,s,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(n).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<c.length){this.applyCompletion(e,c[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(St).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Nc.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:s,disabled:l}=r.open;(!i.open||i.open.options!=o)&&(this.range=c1(o.length,s,e.state.facet(St).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),l!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=c1(n.options.length,n.selected,this.view.state.facet(St).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:o}=i;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(i);if(!s)return;"then"in s?s.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,i)}).catch(l=>Ot(this.view.state,l,"completion info")):(this.addInfoPane(s,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&a4(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return i.top>Math.min(o.bottom,n.bottom)-10||i.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(St).positionInfo(this.view,n,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){let i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",s=>{s.target==i&&s.preventDefault()});let o=null;for(let s=r.from;s<r.to;s++){let{completion:l,match:a}=e[s],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=o&&(s>r.from||r.from==0))if(o=h,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}let u=i.appendChild(document.createElement("li"));u.id=n+"-"+s,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let h of this.optionContent){let d=h(l,this.view.state,this.view,a);d&&u.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function l4(t,e){return n=>new p1(n,t,e)}function a4(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function TT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function c4(t,e){let n=[],r=null,i=null,o=u=>{n.push(u);let{section:f}=u.completion;if(f){r||(r=[]);let h=typeof f=="string"?f:f.name;r.some(d=>d.name==h)||r.push(typeof f=="string"?{name:h}:f)}},s=e.facet(St);for(let u of t)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)o(new rd(h,u.source,f?f(h):[],1e9-n.length));else{let h=e.sliceDoc(u.from,u.to),d,p=s.filterStrict?new d1(h):new h1(h);for(let x of u.result.options)if(d=p.match(x.label)){let v=x.displayLabel?f?f(x,d.matched):[]:d.matched,m=d.score+(x.boost||0);if(o(new rd(x,u.source,v,m)),typeof x.section=="object"&&x.section.rank==="dynamic"){let{name:g}=x.section;i||(i=Object.create(null)),i[g]=Math.max(m,i[g]||-1e9)}}}}if(r){let u=Object.create(null),f=0,h=(d,p)=>(d.rank==="dynamic"&&p.rank==="dynamic"?i[p.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof p.rank=="number"?p.rank:1e9)||(d.name<p.name?-1:1);for(let d of r.sort(h))f-=1e5,u[d.name]=f;for(let d of n){let{section:p}=d.completion;p&&(d.score+=u[typeof p=="string"?p:p.name])}}let l=[],a=null,c=s.compareCompletions;for(let u of n.sort((f,h)=>h.score-f.score||c(f.completion,h.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(u):TT(u.completion)>TT(a)&&(l[l.length-1]=u),a=u.completion}return l}var m1=class t{constructor(e,n,r,i,o,s){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=s}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new t(this.options,AT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,o,s){if(i&&!s&&e.some(c=>c.isPending))return i.setDisabled();let l=c4(e,n);if(!l.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let a=n.facet(St).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==c){a=u;break}}return new t(l,AT(r,a),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:m4,above:o.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new t(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new t(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},g1=class t{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new t(d4,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(St),o=(r.override||n.languageDataAt("autocomplete",ts(n)).map(i4)).map(a=>(this.active.find(u=>u.source==a)||new oi(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((a,c)=>a==this.active[c])&&(o=this.active);let s=this.open,l=e.effects.some(a=>a.is(x1));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!u4(o,this.active)||l?s=m1.build(o,n,this.id,s,r,l):s&&s.disabled&&!o.some(a=>a.isPending)&&(s=null),!s&&o.every(a=>!a.isPending)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new oi(a.source,0):a));for(let a of e.effects)a.is(NT)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new t(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?f4:h4}};function u4(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}var f4={"aria-autocomplete":"list"},h4={};function AT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}var d4=[];function LT(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(MT);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}var oi=class t{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=LT(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new t(i.source,0)),r&4&&i.state==0&&(i=new t(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(id))i=new t(i.source,1,o.value);else if(o.is(Nc))i=new t(i.source,0);else if(o.is(x1))for(let s of o.value)s.source==i.source&&(i=s);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(ts(e.state))}},od=class t extends oi{constructor(e,n,r,i,o,s){super(e,3,n),this.limit=r,this.result=i,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=ts(e.state);if(l>s||!i||n&2&&(ts(e.startState)==this.from||l<this.limit))return new oi(this.source,n&4?1:0);let a=e.changes.mapPos(this.limit);return p4(i.validFor,e.state,o,s)?new t(this.source,this.explicit,a,i,o,s):i.update&&(i=i.update(i,o,s,new nd(e.state,l,!1)))?new t(this.source,this.explicit,a,i,i.from,(r=i.to)!==null&&r!==void 0?r:ts(e.state)):new oi(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new t(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new oi(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}};function p4(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):IT(t,!0).test(i)}var x1=H.define({map(t,e){return t.map(n=>n.map(e))}}),NT=H.define(),an=ee.define({create(){return g1.start()},update(t,e){return t.update(e)},provide:t=>[gc.from(t,e=>e.tooltip),R.contentAttributes.from(t,e=>e.attrs)]});function v1(t,e){let n=e.completion.apply||e.completion.label,r=t.state.field(an).active.find(i=>i.source==e.source);return r instanceof od?(typeof n=="string"?t.dispatch({...r4(t.state,n,r.from,r.to),annotations:MT.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}var m4=l4(an,v1);function td(t,e="option"){return n=>{let r=n.state.field(an,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(St).interactionDelay)return!1;let i=1,o;e=="page"&&(o=vy(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),n.dispatch({effects:NT.of(l)}),!0}}var g4=t=>{let e=t.state.field(an,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(St).interactionDelay?!1:v1(t,e.open.options[e.open.selected])},u1=t=>t.state.field(an,!1)?(t.dispatch({effects:id.of(!0)}),!0):!1,y4=t=>{let e=t.state.field(an,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Nc.of(null)}),!0)},y1=class{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}},x4=50,v4=1e3,S4=Q.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(an).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(an),n=t.state.facet(St);if(!t.selectionSet&&!t.docChanged&&t.startState.field(an)==e)return;let r=t.transactions.some(o=>{let s=LT(o,n);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(r||s.context.abortOnDocChange&&t.docChanged||s.updates.length+t.transactions.length>x4&&Date.now()-s.time>v4){for(let l of s.context.abortListeners)try{l()}catch(a){Ot(this.view.state,a)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(s=>s.is(id)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(an);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(St).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=ts(e),r=new nd(e,n,t.explicit,this.view),i=new y1(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Nc.of(null)}),Ot(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(St).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(St),r=this.view.state.field(an);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let l=ts(o.updates.length?o.updates[0].startState:this.view.state),a=Math.min(l,o.done.from+(o.active.explicit?0:1)),c=new od(o.active.source,o.active.explicit,a,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:l);for(let u of o.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let s=r.active.find(l=>l.source==o.active.source);if(s&&s.isPending)if(o.done==null){let l=new oi(o.active.source,0);for(let a of o.updates)l=l.update(a,n);l.isPending||e.push(l)}else this.startQuery(s)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:x1.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(an,!1);if(e&&e.tooltip&&this.view.state.facet(St).closeOnBlur){let n=e.open&&vy(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Nc.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:id.of(!1)}),20),this.composing=0}}}),k4=typeof navigator=="object"&&/Win/.test(navigator.platform),w4=En.highest(R.domEventHandlers({keydown(t,e){let n=e.state.field(an,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(k4&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(s=>s.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&v1(e,r),!1}})),C4=R.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var Pc={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},es=H.define({map(t,e){let n=e.mapPos(t,-1,Tt.TrackAfter);return n??void 0}}),S1=new class extends ir{};S1.startSide=1;S1.endSide=-1;var PT=ee.define({create(){return te.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(es)&&(t=t.update({add:[S1.range(n.value,n.value+1)]}));return t}});function _T(){return[E4,PT]}var f1="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function DT(t){for(let e=0;e<f1.length;e+=2)if(f1.charCodeAt(e)==t)return f1.charAt(e+1);return Ka(t<128?t:t+1)}function FT(t,e){return t.languageDataAt("closeBrackets",e)[0]||Pc}var b4=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),E4=R.inputHandler.of((t,e,n,r)=>{if((b4?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&bn(At(r,0))==1||e!=i.from||n!=i.to)return!1;let o=A4(t.state,r);return o?(t.dispatch(o),!0):!1}),T4=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=FT(t,t.selection.main.head).brackets||Pc.brackets,i=null,o=t.changeByRange(s=>{if(s.empty){let l=R4(t.doc,s.head);for(let a of r)if(a==l&&sd(t.doc,s.head)==DT(At(a,0)))return{changes:{from:s.head-a.length,to:s.head+a.length},range:T.cursor(s.head-a.length)}}return{range:i=s}});return i||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},BT=[{key:"Backspace",run:T4}];function A4(t,e){let n=FT(t,t.selection.main.head),r=n.brackets||Pc.brackets;for(let i of r){let o=DT(At(i,0));if(e==i)return o==i?M4(t,i,r.indexOf(i+i+i)>-1,n):O4(t,i,o,n.before||Pc.before);if(e==o&&zT(t,t.selection.main.from))return I4(t,i,o)}return null}function zT(t,e){let n=!1;return t.field(PT).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function sd(t,e){let n=t.sliceString(e,e+2);return n.slice(0,bn(At(n,0)))}function R4(t,e){let n=t.sliceString(e-2,e);return bn(At(n,0))==n.length?n:n.slice(1)}function O4(t,e,n,r){let i=null,o=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:n,from:s.to}],effects:es.of(s.to+e.length),range:T.range(s.anchor+e.length,s.head+e.length)};let l=sd(t.doc,s.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+n,from:s.head},effects:es.of(s.head+e.length),range:T.cursor(s.head+e.length)}:{range:i=s}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function I4(t,e,n){let r=null,i=t.changeByRange(o=>o.empty&&sd(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:T.cursor(o.head+n.length)}:r={range:o});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function M4(t,e,n,r){let i=r.stringPrefixes||Pc.stringPrefixes,o=null,s=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:es.of(l.to+e.length),range:T.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=sd(t.doc,a),u;if(c==e){if(RT(t,a))return{changes:{insert:e+e,from:a},effects:es.of(a+e.length),range:T.cursor(a+e.length)};if(zT(t,a)){let h=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:T.cursor(a+h.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=OT(t,a-2*e.length,i))>-1&&RT(t,u))return{changes:{insert:e+e+e+e,from:a},effects:es.of(a+e.length),range:T.cursor(a+e.length)};if(t.charCategorizer(a)(c)!=he.Word&&OT(t,a,i)>-1&&!L4(t,a,e,i))return{changes:{insert:e+e,from:a},effects:es.of(a+e.length),range:T.cursor(a+e.length)}}return{range:o=l}});return o?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function RT(t,e){let n=vt(t).resolveInner(e+1);return n.parent&&n.from==e}function L4(t,e,n,r){let i=vt(t).resolveInner(e,-1),o=r.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=l.indexOf(n);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>n.length+a;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function OT(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=he.Word)return e;for(let i of n){let o=e-i.length;if(t.sliceDoc(o,e)==i&&r(t.sliceDoc(o-1,o))!=he.Word)return o}return-1}function VT(t={}){return[w4,an,St.of(t),S4,N4,C4]}var k1=[{key:"Ctrl-Space",run:u1},{mac:"Alt-`",run:u1},{mac:"Alt-i",run:u1},{key:"Escape",run:y4},{key:"ArrowDown",run:td(!0)},{key:"ArrowUp",run:td(!1)},{key:"PageDown",run:td(!0,"page")},{key:"PageUp",run:td(!1,"page")},{key:"Enter",run:g4}],N4=En.highest(Wo.computeN([St],t=>t.facet(St).defaultKeymap?[k1]:[]));var ad=class{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}},ns=class t{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(_c).markerFilter;i&&(e=i(e,r));let o=e.slice().sort((d,p)=>d.from-p.from||d.to-p.to),s=new Ue,l=[],a=0,c=r.doc.iter(),u=0,f=r.doc.length;for(let d=0;;){let p=d==o.length?null:o[d];if(!p&&!l.length)break;let x,v;if(l.length)x=a,v=l.reduce((y,S)=>Math.min(y,S.to),p&&p.from>x?p.from:1e8);else{if(x=p.from,x>f)break;v=p.to,l.push(p),d++}for(;d<o.length;){let y=o[d];if(y.from==x&&(y.to>y.from||y.to==x))l.push(y),d++,v=Math.min(y.to,v);else{v=Math.min(y.from,v);break}}v=Math.min(v,f);let m=!1;if(l.some(y=>y.from==x&&(y.to==v||v==f))&&(m=x==v,!m&&v-x<10)){let y=x-(u+c.value.length);y>0&&(c.next(y),u=x);for(let S=x;;){if(S>=v){m=!0;break}if(!c.lineBreak&&u+c.value.length>S)break;S=u+c.value.length,u+=c.value.length,c.next()}}let g=j4(l);if(m)s.add(x,x,M.widget({widget:new w1(g),diagnostics:l.slice()}));else{let y=l.reduce((S,k)=>k.markClass?S+" "+k.markClass:S,"");s.add(x,v,M.mark({class:"cm-lintRange cm-lintRange-"+g+y,diagnostics:l.slice(),inclusiveEnd:l.some(S=>S.to>v)}))}if(a=v,a==f)break;for(let y=0;y<l.length;y++)l[y].to<=a&&l.splice(y--,1)}let h=s.finish();return new t(h,n,hl(h))}};function hl(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!r)r=new ad(i,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new ad(r.from,o,r.diagnostic)}}),r}function P4(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(_c).hideOn(t,n,r);if(i!=null)return i;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(s=>s.is(WT))||t.changes.touchesRange(o.from,Math.max(o.to,r)))}function _4(t,e){return t.field(On,!1)?e:e.concat(H.appendConfig.of(G4))}var WT=H.define(),C1=H.define(),jT=H.define(),On=ee.define({create(){return new ns(M.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);r=hl(n,t.selected.diagnostic,o)||hl(n,null,o)}!n.size&&i&&e.state.facet(_c).autoPanel&&(i=null),t=new ns(n,i,r)}for(let n of e.effects)if(n.is(WT)){let r=e.state.facet(_c).autoPanel?n.value.length?Dc.open:null:t.panel;t=ns.init(n.value,r,e.state)}else n.is(C1)?t=new ns(t.diagnostics,n.value?Dc.open:null,t.selected):n.is(jT)&&(t=new ns(t.diagnostics,t.panel,n.value));return t},provide:t=>[Ho.from(t,e=>e.panel),R.decorations.from(t,e=>e.diagnostics)]});var D4=M.mark({class:"cm-lintRange cm-lintRange-active"});function F4(t,e,n){let{diagnostics:r}=t.state.field(On),i,o=-1,s=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(a,c,{spec:u})=>{if(e>=a&&e<=c&&(a==c||(e>a||n>0)&&(e<c||n<0)))return i=u.diagnostics,o=a,s=c,!1});let l=t.state.facet(_c).tooltipFilter;return i&&l&&(i=l(i,t.state)),i?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create(){return{dom:B4(t,i)}}}:null}function B4(t,e){return se("ul",{class:"cm-tooltip-lint"},e.map(n=>KT(t,n,!1)))}var z4=t=>{let e=t.state.field(On,!1);(!e||!e.panel)&&t.dispatch({effects:_4(t.state,[C1.of(!0)])});let n=jo(t,Dc.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},UT=t=>{let e=t.state.field(On,!1);return!e||!e.panel?!1:(t.dispatch({effects:C1.of(!1)}),!0)},V4=t=>{let e=t.state.field(On,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)};var GT=[{key:"Mod-Shift-m",run:z4,preventDefault:!0},{key:"F8",run:V4}];var _c=B.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Ft(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:HT,tooltipFilter:HT,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,o)=>e(r,i,o)||n(r,i,o):e:n,autoPanel:(e,n)=>e||n})}}});function HT(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function $T(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function KT(t,e,n){var r;let i=n?$T(e.actions):[];return se("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},se("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let l=!1,a=d=>{if(d.preventDefault(),l)return;l=!0;let p=hl(t.state.field(On).diagnostics,e);p&&o.apply(t,p.from,p.to)},{name:c}=o,u=i[s]?c.indexOf(i[s]):-1,f=u<0?c:[c.slice(0,u),se("u",c.slice(u,u+1)),c.slice(u+1)],h=o.markClass?" "+o.markClass:"";return se("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[s]})"`}.`},f)}),e.source&&se("div",{class:"cm-diagnosticSource"},e.source))}var w1=class extends $e{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return se("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}},cd=class{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=KT(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},Dc=class t{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)UT(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=$T(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==i.keyCode){let a=hl(this.view.state.field(On).diagnostics,o);a&&o.actions[l].apply(e,a.from,a.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=se("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=se("div",{class:"cm-panel-lint"},this.list,se("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>UT(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(On).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(On),r=0,i=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:c})=>{for(let u of c.diagnostics){if(s.has(u))continue;s.add(u);let f=-1,h;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==u){f=d;break}f<0?(h=new cd(this.view,u),this.items.splice(r,0,h),i=!0):(h=this.items[f],f>r&&(this.items.splice(r,f-r),i=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new cd(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let c=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/c:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(On),r=hl(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:jT.of(r)})}static open(e){return new t(e)}};function U4(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function ld(t){return U4(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var H4=R.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ld("#d11")},".cm-lintRange-warning":{backgroundImage:ld("orange")},".cm-lintRange-info":{backgroundImage:ld("#999")},".cm-lintRange-hint":{backgroundImage:ld("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function W4(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function j4(t){let e="hint",n=1;for(let r of t){let i=W4(r.severity);i>n&&(n=i,e=r.severity)}return e}var G4=[On,R.decorations.compute([On],t=>{let{selected:e,panel:n}=t.field(On);return!e||!n||e.from==e.to?M.none:M.set([D4.range(e.from,e.to)])}),_b(F4,{hideOn:P4}),H4];var b1=function(e){e===void 0&&(e={});var{crosshairCursor:n=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(BT)),e.defaultKeymap!==!1&&(r=r.concat(cT)),e.searchKeymap!==!1&&(r=r.concat(wT)),e.historyKeymap!==!1&&(r=r.concat(_E)),e.foldKeymap!==!1&&(r=r.concat(uE)),e.completionKeymap!==!1&&(r=r.concat(k1)),e.lintKeymap!==!1&&(r=r.concat(GT));var i=[];return e.lineNumbers!==!1&&i.push(Bb()),e.highlightActiveLineGutter!==!1&&i.push(zb()),e.highlightSpecialChars!==!1&&i.push(Ib()),e.history!==!1&&i.push(ME()),e.foldGutter!==!1&&i.push(dE()),e.drawSelection!==!1&&i.push(Tb()),e.dropCursor!==!1&&i.push(Ob()),e.allowMultipleSelections!==!1&&i.push(oe.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(oE()),e.syntaxHighlighting!==!1&&i.push(Dh(mE,{fallback:!0})),e.bracketMatching!==!1&&i.push(vE()),e.closeBrackets!==!1&&i.push(_T()),e.autocompletion!==!1&&i.push(VT()),e.rectangularSelection!==!1&&i.push(Nb()),n!==!1&&i.push(Pb()),e.highlightActiveLine!==!1&&i.push(Mb()),e.highlightSelectionMatches!==!1&&i.push(yT()),e.tabSize&&typeof e.tabSize=="number"&&i.push(Zo.of(" ".repeat(e.tabSize))),i.concat([Wo.of(r.flat())]).filter(Boolean)};var $4="#e5c07b",qT="#e06c75",K4="#56b6c2",q4="#ffffff",ud="#abb2bf",T1="#7d8799",Y4="#61afef",X4="#98c379",YT="#d19a66",Z4="#c678dd",Q4="#21252b",XT="#2c313a",ZT="#282c34",E1="#353a42",J4="#3E4451",QT="#528bff";var e6=R.theme({"&":{color:ud,backgroundColor:ZT},".cm-content":{caretColor:QT},".cm-cursor, .cm-dropCursor":{borderLeftColor:QT},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:J4},".cm-panels":{backgroundColor:Q4,color:ud},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:ZT,color:T1,border:"none"},".cm-activeLineGutter":{backgroundColor:XT},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:E1},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:E1,borderBottomColor:E1},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:XT,color:ud}}},{dark:!0}),t6=ol.define([{tag:b.keyword,color:Z4},{tag:[b.name,b.deleted,b.character,b.propertyName,b.macroName],color:qT},{tag:[b.function(b.variableName),b.labelName],color:Y4},{tag:[b.color,b.constant(b.name),b.standard(b.name)],color:YT},{tag:[b.definition(b.name),b.separator],color:ud},{tag:[b.typeName,b.className,b.number,b.changed,b.annotation,b.modifier,b.self,b.namespace],color:$4},{tag:[b.operator,b.operatorKeyword,b.url,b.escape,b.regexp,b.link,b.special(b.string)],color:K4},{tag:[b.meta,b.comment],color:T1},{tag:b.strong,fontWeight:"bold"},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.link,color:T1,textDecoration:"underline"},{tag:b.heading,fontWeight:"bold",color:qT},{tag:[b.atom,b.bool,b.special(b.variableName)],color:YT},{tag:[b.processingInstruction,b.string,b.inserted],color:X4},{tag:b.invalid,color:q4}]),JT=[e6,Dh(t6)];var eA=R.theme({"&":{backgroundColor:"#fff"}},{dark:!1});var tA=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:r=!0,readOnly:i=!1,theme:o="light",placeholder:s="",basicSetup:l=!0}=e,a=[];switch(n&&a.unshift(Wo.of([uT])),l&&(typeof l=="boolean"?a.unshift(b1()):a.unshift(b1(l))),s&&a.unshift(Lb(s)),o){case"light":a.push(eA);break;case"dark":a.push(JT);break;case"none":break;default:a.push(o);break}return r===!1&&a.push(R.editable.of(!1)),i&&a.push(oe.readOnly.of(!0)),[...a]};var nA=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});var fd=class{constructor(e,n){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=n,this.timeoutMS=n,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(n=>{try{n()}catch(r){console.error("TimeoutLatch callback error:",r)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}},hd=class{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}},A1=null,rA=()=>typeof window>"u"?new hd:(A1||(A1=new hd),A1);var iA=yt.define(),n6=200,r6=[];function oA(t){var{value:e,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:l=r6,autoFocus:a,theme:c="light",height:u=null,minHeight:f=null,maxHeight:h=null,width:d=null,minWidth:p=null,maxWidth:x=null,placeholder:v="",editable:m=!0,readOnly:g=!1,indentWithTab:y=!0,basicSetup:S=!0,root:k,initialState:w}=t,[C,A]=(0,cn.useState)(),[P,E]=(0,cn.useState)(),[_,N]=(0,cn.useState)(),L=(0,cn.useState)(()=>({current:null}))[0],I=(0,cn.useState)(()=>({current:null}))[0],F=R.theme({"&":{height:u,minHeight:f,maxHeight:h,width:d,minWidth:p,maxWidth:x},"& .cm-scroller":{height:"100% !important"}}),K=R.updateListener.of(ne=>{if(ne.docChanged&&typeof r=="function"&&!ne.transactions.some(fe=>fe.annotation(iA))){L.current?L.current.reset():(L.current=new fd(()=>{if(I.current){var fe=I.current;I.current=null,fe()}L.current=null},n6),rA().add(L.current));var ie=ne.state.doc,ue=ie.toString();r(ue,ne)}i&&i(nA(ne))}),le=tA({theme:c,editable:m,readOnly:g,placeholder:v,indentWithTab:y,basicSetup:S}),be=[K,F,...le];return s&&typeof s=="function"&&be.push(R.updateListener.of(s)),be=be.concat(l),(0,cn.useLayoutEffect)(()=>{if(C&&!_){var ne={doc:e,selection:n,extensions:be},ie=w?oe.fromJSON(w.json,ne,w.fields):oe.create(ne);if(N(ie),!P){var ue=new R({state:ie,parent:C,root:k});E(ue),o&&o(ue,ie)}}return()=>{P&&(N(void 0),E(void 0))}},[C,_]),(0,cn.useEffect)(()=>{t.container&&A(t.container)},[t.container]),(0,cn.useEffect)(()=>()=>{P&&(P.destroy(),E(void 0)),L.current&&(L.current.cancel(),L.current=null)},[P]),(0,cn.useEffect)(()=>{a&&P&&P.focus()},[a,P]),(0,cn.useEffect)(()=>{P&&P.dispatch({effects:H.reconfigure.of(be)})},[c,l,u,f,h,d,p,x,v,m,g,y,S,r,s]),(0,cn.useEffect)(()=>{if(e!==void 0){var ne=P?P.state.doc.toString():"";if(P&&e!==ne){var ie=L.current&&!L.current.isDone,ue=()=>{P&&e!==P.state.doc.toString()&&P.dispatch({changes:{from:0,to:P.state.doc.toString().length,insert:e||""},annotations:[iA.of(!0)]})};ie?I.current=ue:ue()}}},[e,P]),{state:_,setState:N,view:P,setView:E,container:C,setContainer:A}}var cA=gn(Yi(),1),u6=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],uA=(0,Xi.forwardRef)((t,e)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:c,autoFocus:u,theme:f="light",height:h,minHeight:d,maxHeight:p,width:x,minWidth:v,maxWidth:m,basicSetup:g,placeholder:y,indentWithTab:S,editable:k,readOnly:w,root:C,initialState:A}=t,P=cw(t,u6),E=(0,Xi.useRef)(null),{state:_,view:N,container:L,setContainer:I}=oA({root:C,value:r,autoFocus:u,theme:f,height:h,minHeight:d,maxHeight:p,width:x,minWidth:v,maxWidth:m,basicSetup:g,placeholder:y,indentWithTab:S,editable:k,readOnly:w,selection:i,onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:c,extensions:o,initialState:A});(0,Xi.useImperativeHandle)(e,()=>({editor:E.current,state:_,view:N}),[E,L,_,N]);var F=(0,Xi.useCallback)(le=>{E.current=le,I(le)},[I]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var K=typeof f=="string"?"cm-theme-"+f:"cm-theme";return(0,cA.jsx)("div",Lf({ref:F,className:""+K+(n?" "+n:"")},P))});uA.displayName="CodeMirror";var fA=uA;var f6=typeof window=="object"&&window&&window.Object===Object&&window,pd=f6;var h6=typeof self=="object"&&self&&self.Object===Object&&self,d6=pd||h6||Function("return this")(),nt=d6;var p6=nt.Symbol,kt=p6;var hA=Object.prototype,m6=hA.hasOwnProperty,g6=hA.toString,Fc=kt?kt.toStringTag:void 0;function y6(t){var e=m6.call(t,Fc),n=t[Fc];try{t[Fc]=void 0;var r=!0}catch{}var i=g6.call(t);return r&&(e?t[Fc]=n:delete t[Fc]),i}var dA=y6;var x6=Object.prototype,v6=x6.toString;function S6(t){return v6.call(t)}var pA=S6;var k6="[object Null]",w6="[object Undefined]",mA=kt?kt.toStringTag:void 0;function C6(t){return t==null?t===void 0?w6:k6:mA&&mA in Object(t)?dA(t):pA(t)}var Zt=C6;function b6(t){return t!=null&&typeof t=="object"}var Ke=b6;var E6="[object Symbol]";function T6(t){return typeof t=="symbol"||Ke(t)&&Zt(t)==E6}var Zi=T6;function A6(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Ir=A6;var R6=Array.isArray,G=R6;var O6=1/0,gA=kt?kt.prototype:void 0,yA=gA?gA.toString:void 0;function xA(t){if(typeof t=="string")return t;if(G(t))return Ir(t,xA)+"";if(Zi(t))return yA?yA.call(t):"";var e=t+"";return e=="0"&&1/t==-O6?"-0":e}var vA=xA;var I6=/\s/;function M6(t){for(var e=t.length;e--&&I6.test(t.charAt(e)););return e}var SA=M6;var L6=/^\s+/;function N6(t){return t&&t.slice(0,SA(t)+1).replace(L6,"")}var kA=N6;function P6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Fe=P6;var wA=NaN,_6=/^[-+]0x[0-9a-f]+$/i,D6=/^0b[01]+$/i,F6=/^0o[0-7]+$/i,B6=parseInt;function z6(t){if(typeof t=="number")return t;if(Zi(t))return wA;if(Fe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Fe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=kA(t);var n=D6.test(t);return n||F6.test(t)?B6(t.slice(2),n?2:8):_6.test(t)?wA:+t}var CA=z6;var bA=1/0,V6=17976931348623157e292;function U6(t){if(!t)return t===0?t:0;if(t=CA(t),t===bA||t===-bA){var e=t<0?-1:1;return e*V6}return t===t?t:0}var EA=U6;function H6(t){var e=EA(t),n=e%1;return e===e?n?e-n:e:0}var Mr=H6;function W6(t){return t}var Gn=W6;var j6="[object AsyncFunction]",G6="[object Function]",$6="[object GeneratorFunction]",K6="[object Proxy]";function q6(t){if(!Fe(t))return!1;var e=Zt(t);return e==G6||e==$6||e==j6||e==K6}var Qt=q6;var Y6=nt["__core-js_shared__"],md=Y6;var TA=function(){var t=/[^.]+$/.exec(md&&md.keys&&md.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function X6(t){return!!TA&&TA in t}var AA=X6;var Z6=Function.prototype,Q6=Z6.toString;function J6(t){if(t!=null){try{return Q6.call(t)}catch{}try{return t+""}catch{}}return""}var si=J6;var e5=/[\\^$.*+?()[\]{}|]/g,t5=/^\[object .+?Constructor\]$/,n5=Function.prototype,r5=Object.prototype,i5=n5.toString,o5=r5.hasOwnProperty,s5=RegExp("^"+i5.call(o5).replace(e5,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l5(t){if(!Fe(t)||AA(t))return!1;var e=Qt(t)?s5:t5;return e.test(si(t))}var RA=l5;function a5(t,e){return t?.[e]}var OA=a5;function c5(t,e){var n=OA(t,e);return RA(n)?n:void 0}var un=c5;var u5=un(nt,"WeakMap"),gd=u5;var IA=Object.create,f5=function(){function t(){}return function(e){if(!Fe(e))return{};if(IA)return IA(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),MA=f5;function h5(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var LA=h5;function d5(){}var Be=d5;function p5(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var NA=p5;var m5=800,g5=16,y5=Date.now;function x5(t){var e=0,n=0;return function(){var r=y5(),i=g5-(r-n);if(n=r,i>0){if(++e>=m5)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var PA=x5;function v5(t){return function(){return t}}var _A=v5;var S5=function(){try{var t=un(Object,"defineProperty");return t({},"",{}),t}catch{}}(),dl=S5;var k5=dl?function(t,e){return dl(t,"toString",{configurable:!0,enumerable:!1,value:_A(e),writable:!0})}:Gn,DA=k5;var w5=PA(DA),FA=w5;function C5(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var yd=C5;function b5(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var xd=b5;function E5(t){return t!==t}var BA=E5;function T5(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var zA=T5;function A5(t,e,n){return e===e?zA(t,e,n):xd(t,BA,n)}var pl=A5;function R5(t,e){var n=t==null?0:t.length;return!!n&&pl(t,e,0)>-1}var vd=R5;var O5=9007199254740991,I5=/^(?:0|[1-9]\d*)$/;function M5(t,e){var n=typeof t;return e=e??O5,!!e&&(n=="number"||n!="symbol"&&I5.test(t))&&t>-1&&t%1==0&&t<e}var Qi=M5;function L5(t,e,n){e=="__proto__"&&dl?dl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var ml=L5;function N5(t,e){return t===e||t!==t&&e!==e}var Lr=N5;var P5=Object.prototype,_5=P5.hasOwnProperty;function D5(t,e,n){var r=t[e];(!(_5.call(t,e)&&Lr(r,n))||n===void 0&&!(e in t))&&ml(t,e,n)}var Ji=D5;function F5(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],a=r?r(n[l],t[l],l,n,t):void 0;a===void 0&&(a=t[l]),i?ml(n,l,a):Ji(n,l,a)}return n}var Nr=F5;var VA=Math.max;function B5(t,e,n){return e=VA(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=VA(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(s),LA(t,this,l)}}var UA=B5;function z5(t,e){return FA(UA(t,e,Gn),t+"")}var gl=z5;var V5=9007199254740991;function U5(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=V5}var yl=U5;function H5(t){return t!=null&&yl(t.length)&&!Qt(t)}var rt=H5;function W5(t,e,n){if(!Fe(n))return!1;var r=typeof e;return(r=="number"?rt(n)&&Qi(e,n.length):r=="string"&&e in n)?Lr(n[e],t):!1}var eo=W5;function j5(t){return gl(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&eo(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,o)}return e})}var HA=j5;var G5=Object.prototype;function $5(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||G5;return t===n}var Pr=$5;function K5(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var WA=K5;var q5="[object Arguments]";function Y5(t){return Ke(t)&&Zt(t)==q5}var R1=Y5;var jA=Object.prototype,X5=jA.hasOwnProperty,Z5=jA.propertyIsEnumerable,Q5=R1(function(){return arguments}())?R1:function(t){return Ke(t)&&X5.call(t,"callee")&&!Z5.call(t,"callee")},to=Q5;function J5(){return!1}var GA=J5;var qA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$A=qA&&typeof module=="object"&&module&&!module.nodeType&&module,e8=$A&&$A.exports===qA,KA=e8?nt.Buffer:void 0,t8=KA?KA.isBuffer:void 0,n8=t8||GA,li=n8;var r8="[object Arguments]",i8="[object Array]",o8="[object Boolean]",s8="[object Date]",l8="[object Error]",a8="[object Function]",c8="[object Map]",u8="[object Number]",f8="[object Object]",h8="[object RegExp]",d8="[object Set]",p8="[object String]",m8="[object WeakMap]",g8="[object ArrayBuffer]",y8="[object DataView]",x8="[object Float32Array]",v8="[object Float64Array]",S8="[object Int8Array]",k8="[object Int16Array]",w8="[object Int32Array]",C8="[object Uint8Array]",b8="[object Uint8ClampedArray]",E8="[object Uint16Array]",T8="[object Uint32Array]",Re={};Re[x8]=Re[v8]=Re[S8]=Re[k8]=Re[w8]=Re[C8]=Re[b8]=Re[E8]=Re[T8]=!0;Re[r8]=Re[i8]=Re[g8]=Re[o8]=Re[y8]=Re[s8]=Re[l8]=Re[a8]=Re[c8]=Re[u8]=Re[f8]=Re[h8]=Re[d8]=Re[p8]=Re[m8]=!1;function A8(t){return Ke(t)&&yl(t.length)&&!!Re[Zt(t)]}var YA=A8;function R8(t){return function(e){return t(e)}}var _r=R8;var XA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bc=XA&&typeof module=="object"&&module&&!module.nodeType&&module,O8=Bc&&Bc.exports===XA,O1=O8&&pd.process,I8=function(){try{var t=Bc&&Bc.require&&Bc.require("util").types;return t||O1&&O1.binding&&O1.binding("util")}catch{}}(),$n=I8;var ZA=$n&&$n.isTypedArray,M8=ZA?_r(ZA):YA,xl=M8;var L8=Object.prototype,N8=L8.hasOwnProperty;function P8(t,e){var n=G(t),r=!n&&to(t),i=!n&&!r&&li(t),o=!n&&!r&&!i&&xl(t),s=n||r||i||o,l=s?WA(t.length,String):[],a=l.length;for(var c in t)(e||N8.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Qi(c,a)))&&l.push(c);return l}var Sd=P8;function _8(t,e){return function(n){return t(e(n))}}var kd=_8;var D8=kd(Object.keys,Object),QA=D8;var F8=Object.prototype,B8=F8.hasOwnProperty;function z8(t){if(!Pr(t))return QA(t);var e=[];for(var n in Object(t))B8.call(t,n)&&n!="constructor"&&e.push(n);return e}var wd=z8;function V8(t){return rt(t)?Sd(t):wd(t)}var Se=V8;var U8=Object.prototype,H8=U8.hasOwnProperty,W8=HA(function(t,e){if(Pr(e)||rt(e)){Nr(e,Se(e),t);return}for(var n in e)H8.call(e,n)&&Ji(t,n,e[n])}),It=W8;function j8(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var JA=j8;var G8=Object.prototype,$8=G8.hasOwnProperty;function K8(t){if(!Fe(t))return JA(t);var e=Pr(t),n=[];for(var r in t)r=="constructor"&&(e||!$8.call(t,r))||n.push(r);return n}var e2=K8;function q8(t){return rt(t)?Sd(t,!0):e2(t)}var no=q8;var Y8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X8=/^\w*$/;function Z8(t,e){if(G(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Zi(t)?!0:X8.test(t)||!Y8.test(t)||e!=null&&t in Object(e)}var vl=Z8;var Q8=un(Object,"create"),ai=Q8;function J8(){this.__data__=ai?ai(null):{},this.size=0}var t2=J8;function eF(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var n2=eF;var tF="__lodash_hash_undefined__",nF=Object.prototype,rF=nF.hasOwnProperty;function iF(t){var e=this.__data__;if(ai){var n=e[t];return n===tF?void 0:n}return rF.call(e,t)?e[t]:void 0}var r2=iF;var oF=Object.prototype,sF=oF.hasOwnProperty;function lF(t){var e=this.__data__;return ai?e[t]!==void 0:sF.call(e,t)}var i2=lF;var aF="__lodash_hash_undefined__";function cF(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ai&&e===void 0?aF:e,this}var o2=cF;function Sl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Sl.prototype.clear=t2;Sl.prototype.delete=n2;Sl.prototype.get=r2;Sl.prototype.has=i2;Sl.prototype.set=o2;var I1=Sl;function uF(){this.__data__=[],this.size=0}var s2=uF;function fF(t,e){for(var n=t.length;n--;)if(Lr(t[n][0],e))return n;return-1}var ro=fF;var hF=Array.prototype,dF=hF.splice;function pF(t){var e=this.__data__,n=ro(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dF.call(e,n,1),--this.size,!0}var l2=pF;function mF(t){var e=this.__data__,n=ro(e,t);return n<0?void 0:e[n][1]}var a2=mF;function gF(t){return ro(this.__data__,t)>-1}var c2=gF;function yF(t,e){var n=this.__data__,r=ro(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var u2=yF;function kl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}kl.prototype.clear=s2;kl.prototype.delete=l2;kl.prototype.get=a2;kl.prototype.has=c2;kl.prototype.set=u2;var io=kl;var xF=un(nt,"Map"),oo=xF;function vF(){this.size=0,this.__data__={hash:new I1,map:new(oo||io),string:new I1}}var f2=vF;function SF(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var h2=SF;function kF(t,e){var n=t.__data__;return h2(e)?n[typeof e=="string"?"string":"hash"]:n.map}var so=kF;function wF(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e}var d2=wF;function CF(t){return so(this,t).get(t)}var p2=CF;function bF(t){return so(this,t).has(t)}var m2=bF;function EF(t,e){var n=so(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var g2=EF;function wl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}wl.prototype.clear=f2;wl.prototype.delete=d2;wl.prototype.get=p2;wl.prototype.has=m2;wl.prototype.set=g2;var rs=wl;var TF="Expected a function";function M1(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(TF);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(M1.Cache||rs),n}M1.Cache=rs;var y2=M1;var AF=500;function RF(t){var e=y2(t,function(r){return n.size===AF&&n.clear(),r}),n=e.cache;return e}var x2=RF;var OF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IF=/\\(\\)?/g,MF=x2(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(OF,function(n,r,i,o){e.push(i?o.replace(IF,"$1"):r||n)}),e}),v2=MF;function LF(t){return t==null?"":vA(t)}var S2=LF;function NF(t,e){return G(t)?t:vl(t,e)?[t]:v2(S2(t))}var lo=NF;var PF=1/0;function _F(t){if(typeof t=="string"||Zi(t))return t;var e=t+"";return e=="0"&&1/t==-PF?"-0":e}var Dr=_F;function DF(t,e){e=lo(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Dr(e[n++])];return n&&n==r?t:void 0}var Cl=DF;function FF(t,e,n){var r=t==null?void 0:Cl(t,e);return r===void 0?n:r}var k2=FF;function BF(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var bl=BF;var w2=kt?kt.isConcatSpreadable:void 0;function zF(t){return G(t)||to(t)||!!(w2&&t&&t[w2])}var C2=zF;function b2(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=C2),i||(i=[]);++o<s;){var l=t[o];e>0&&n(l)?e>1?b2(l,e-1,n,r,i):bl(i,l):r||(i[i.length]=l)}return i}var El=b2;function VF(t){var e=t==null?0:t.length;return e?El(t,1):[]}var ut=VF;var UF=kd(Object.getPrototypeOf,Object),Cd=UF;function HF(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var bd=HF;function WF(t,e,n,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}var E2=WF;function jF(){this.__data__=new io,this.size=0}var T2=jF;function GF(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var A2=GF;function $F(t){return this.__data__.get(t)}var R2=$F;function KF(t){return this.__data__.has(t)}var O2=KF;var qF=200;function YF(t,e){var n=this.__data__;if(n instanceof io){var r=n.__data__;if(!oo||r.length<qF-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new rs(r)}return n.set(t,e),this.size=n.size,this}var I2=YF;function Tl(t){var e=this.__data__=new io(t);this.size=e.size}Tl.prototype.clear=T2;Tl.prototype.delete=A2;Tl.prototype.get=R2;Tl.prototype.has=O2;Tl.prototype.set=I2;var ao=Tl;function XF(t,e){return t&&Nr(e,Se(e),t)}var M2=XF;function ZF(t,e){return t&&Nr(e,no(e),t)}var L2=ZF;var D2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,N2=D2&&typeof module=="object"&&module&&!module.nodeType&&module,QF=N2&&N2.exports===D2,P2=QF?nt.Buffer:void 0,_2=P2?P2.allocUnsafe:void 0;function JF(t,e){if(e)return t.slice();var n=t.length,r=_2?_2(n):new t.constructor(n);return t.copy(r),r}var F2=JF;function eB(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var Al=eB;function tB(){return[]}var Ed=tB;var nB=Object.prototype,rB=nB.propertyIsEnumerable,B2=Object.getOwnPropertySymbols,iB=B2?function(t){return t==null?[]:(t=Object(t),Al(B2(t),function(e){return rB.call(t,e)}))}:Ed,Rl=iB;function oB(t,e){return Nr(t,Rl(t),e)}var z2=oB;var sB=Object.getOwnPropertySymbols,lB=sB?function(t){for(var e=[];t;)bl(e,Rl(t)),t=Cd(t);return e}:Ed,Td=lB;function aB(t,e){return Nr(t,Td(t),e)}var V2=aB;function cB(t,e,n){var r=e(t);return G(t)?r:bl(r,n(t))}var Ad=cB;function uB(t){return Ad(t,Se,Rl)}var zc=uB;function fB(t){return Ad(t,no,Td)}var Rd=fB;var hB=un(nt,"DataView"),Od=hB;var dB=un(nt,"Promise"),Id=dB;var pB=un(nt,"Set"),co=pB;var U2="[object Map]",mB="[object Object]",H2="[object Promise]",W2="[object Set]",j2="[object WeakMap]",G2="[object DataView]",gB=si(Od),yB=si(oo),xB=si(Id),vB=si(co),SB=si(gd),is=Zt;(Od&&is(new Od(new ArrayBuffer(1)))!=G2||oo&&is(new oo)!=U2||Id&&is(Id.resolve())!=H2||co&&is(new co)!=W2||gd&&is(new gd)!=j2)&&(is=function(t){var e=Zt(t),n=e==mB?t.constructor:void 0,r=n?si(n):"";if(r)switch(r){case gB:return G2;case yB:return U2;case xB:return H2;case vB:return W2;case SB:return j2}return e});var fr=is;var kB=Object.prototype,wB=kB.hasOwnProperty;function CB(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&wB.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var $2=CB;var bB=nt.Uint8Array,Ol=bB;function EB(t){var e=new t.constructor(t.byteLength);return new Ol(e).set(new Ol(t)),e}var Il=EB;function TB(t,e){var n=e?Il(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var K2=TB;var AB=/\w*$/;function RB(t){var e=new t.constructor(t.source,AB.exec(t));return e.lastIndex=t.lastIndex,e}var q2=RB;var Y2=kt?kt.prototype:void 0,X2=Y2?Y2.valueOf:void 0;function OB(t){return X2?Object(X2.call(t)):{}}var Z2=OB;function IB(t,e){var n=e?Il(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Q2=IB;var MB="[object Boolean]",LB="[object Date]",NB="[object Map]",PB="[object Number]",_B="[object RegExp]",DB="[object Set]",FB="[object String]",BB="[object Symbol]",zB="[object ArrayBuffer]",VB="[object DataView]",UB="[object Float32Array]",HB="[object Float64Array]",WB="[object Int8Array]",jB="[object Int16Array]",GB="[object Int32Array]",$B="[object Uint8Array]",KB="[object Uint8ClampedArray]",qB="[object Uint16Array]",YB="[object Uint32Array]";function XB(t,e,n){var r=t.constructor;switch(e){case zB:return Il(t);case MB:case LB:return new r(+t);case VB:return K2(t,n);case UB:case HB:case WB:case jB:case GB:case $B:case KB:case qB:case YB:return Q2(t,n);case NB:return new r;case PB:case FB:return new r(t);case _B:return q2(t);case DB:return new r;case BB:return Z2(t)}}var J2=XB;function ZB(t){return typeof t.constructor=="function"&&!Pr(t)?MA(Cd(t)):{}}var eR=ZB;var QB="[object Map]";function JB(t){return Ke(t)&&fr(t)==QB}var tR=JB;var nR=$n&&$n.isMap,e9=nR?_r(nR):tR,rR=e9;var t9="[object Set]";function n9(t){return Ke(t)&&fr(t)==t9}var iR=n9;var oR=$n&&$n.isSet,r9=oR?_r(oR):iR,sR=r9;var i9=1,o9=2,s9=4,lR="[object Arguments]",l9="[object Array]",a9="[object Boolean]",c9="[object Date]",u9="[object Error]",aR="[object Function]",f9="[object GeneratorFunction]",h9="[object Map]",d9="[object Number]",cR="[object Object]",p9="[object RegExp]",m9="[object Set]",g9="[object String]",y9="[object Symbol]",x9="[object WeakMap]",v9="[object ArrayBuffer]",S9="[object DataView]",k9="[object Float32Array]",w9="[object Float64Array]",C9="[object Int8Array]",b9="[object Int16Array]",E9="[object Int32Array]",T9="[object Uint8Array]",A9="[object Uint8ClampedArray]",R9="[object Uint16Array]",O9="[object Uint32Array]",ke={};ke[lR]=ke[l9]=ke[v9]=ke[S9]=ke[a9]=ke[c9]=ke[k9]=ke[w9]=ke[C9]=ke[b9]=ke[E9]=ke[h9]=ke[d9]=ke[cR]=ke[p9]=ke[m9]=ke[g9]=ke[y9]=ke[T9]=ke[A9]=ke[R9]=ke[O9]=!0;ke[u9]=ke[aR]=ke[x9]=!1;function Md(t,e,n,r,i,o){var s,l=e&i9,a=e&o9,c=e&s9;if(n&&(s=i?n(t,r,i,o):n(t)),s!==void 0)return s;if(!Fe(t))return t;var u=G(t);if(u){if(s=$2(t),!l)return NA(t,s)}else{var f=fr(t),h=f==aR||f==f9;if(li(t))return F2(t,l);if(f==cR||f==lR||h&&!i){if(s=a||h?{}:eR(t),!l)return a?V2(t,L2(s,t)):z2(t,M2(s,t))}else{if(!ke[f])return i?t:{};s=J2(t,f,l)}}o||(o=new ao);var d=o.get(t);if(d)return d;o.set(t,s),sR(t)?t.forEach(function(v){s.add(Md(v,e,n,v,t,o))}):rR(t)&&t.forEach(function(v,m){s.set(m,Md(v,e,n,m,t,o))});var p=c?a?Rd:zc:a?no:Se,x=u?void 0:p(t);return yd(x||t,function(v,m){x&&(m=v,v=t[m]),Ji(s,m,Md(v,e,n,m,t,o))}),s}var uR=Md;var I9=4;function M9(t){return uR(t,I9)}var Oe=M9;function L9(t){for(var e=-1,n=t==null?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}var Fr=L9;var N9="__lodash_hash_undefined__";function P9(t){return this.__data__.set(t,N9),this}var fR=P9;function _9(t){return this.__data__.has(t)}var hR=_9;function Ld(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new rs;++e<n;)this.add(t[e])}Ld.prototype.add=Ld.prototype.push=fR;Ld.prototype.has=hR;var Ml=Ld;function D9(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Nd=D9;function F9(t,e){return t.has(e)}var Ll=F9;var B9=1,z9=2;function V9(t,e,n,r,i,o){var s=n&B9,l=t.length,a=e.length;if(l!=a&&!(s&&a>l))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,d=n&z9?new Ml:void 0;for(o.set(t,e),o.set(e,t);++f<l;){var p=t[f],x=e[f];if(r)var v=s?r(x,p,f,e,t,o):r(p,x,f,t,e,o);if(v!==void 0){if(v)continue;h=!1;break}if(d){if(!Nd(e,function(m,g){if(!Ll(d,g)&&(p===m||i(p,m,n,r,o)))return d.push(g)})){h=!1;break}}else if(!(p===x||i(p,x,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var Pd=V9;function U9(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var dR=U9;function H9(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Nl=H9;var W9=1,j9=2,G9="[object Boolean]",$9="[object Date]",K9="[object Error]",q9="[object Map]",Y9="[object Number]",X9="[object RegExp]",Z9="[object Set]",Q9="[object String]",J9="[object Symbol]",e7="[object ArrayBuffer]",t7="[object DataView]",pR=kt?kt.prototype:void 0,L1=pR?pR.valueOf:void 0;function n7(t,e,n,r,i,o,s){switch(n){case t7:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case e7:return!(t.byteLength!=e.byteLength||!o(new Ol(t),new Ol(e)));case G9:case $9:case Y9:return Lr(+t,+e);case K9:return t.name==e.name&&t.message==e.message;case X9:case Q9:return t==e+"";case q9:var l=dR;case Z9:var a=r&W9;if(l||(l=Nl),t.size!=e.size&&!a)return!1;var c=s.get(t);if(c)return c==e;r|=j9,s.set(t,e);var u=Pd(l(t),l(e),r,i,o,s);return s.delete(t),u;case J9:if(L1)return L1.call(t)==L1.call(e)}return!1}var mR=n7;var r7=1,i7=Object.prototype,o7=i7.hasOwnProperty;function s7(t,e,n,r,i,o){var s=n&r7,l=zc(t),a=l.length,c=zc(e),u=c.length;if(a!=u&&!s)return!1;for(var f=a;f--;){var h=l[f];if(!(s?h in e:o7.call(e,h)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var x=!0;o.set(t,e),o.set(e,t);for(var v=s;++f<a;){h=l[f];var m=t[h],g=e[h];if(r)var y=s?r(g,m,h,e,t,o):r(m,g,h,t,e,o);if(!(y===void 0?m===g||i(m,g,n,r,o):y)){x=!1;break}v||(v=h=="constructor")}if(x&&!v){var S=t.constructor,k=e.constructor;S!=k&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(x=!1)}return o.delete(t),o.delete(e),x}var gR=s7;var l7=1,yR="[object Arguments]",xR="[object Array]",_d="[object Object]",a7=Object.prototype,vR=a7.hasOwnProperty;function c7(t,e,n,r,i,o){var s=G(t),l=G(e),a=s?xR:fr(t),c=l?xR:fr(e);a=a==yR?_d:a,c=c==yR?_d:c;var u=a==_d,f=c==_d,h=a==c;if(h&&li(t)){if(!li(e))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new ao),s||xl(t)?Pd(t,e,n,r,i,o):mR(t,e,a,n,r,i,o);if(!(n&l7)){var d=u&&vR.call(t,"__wrapped__"),p=f&&vR.call(e,"__wrapped__");if(d||p){var x=d?t.value():t,v=p?e.value():e;return o||(o=new ao),i(x,v,n,r,o)}}return h?(o||(o=new ao),gR(t,e,n,r,i,o)):!1}var SR=c7;function kR(t,e,n,r,i){return t===e?!0:t==null||e==null||!Ke(t)&&!Ke(e)?t!==t&&e!==e:SR(t,e,n,r,kR,i)}var Dd=kR;var u7=1,f7=2;function h7(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var l=n[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=n[i];var a=l[0],c=t[a],u=l[1];if(s&&l[2]){if(c===void 0&&!(a in t))return!1}else{var f=new ao;if(r)var h=r(c,u,a,t,e,f);if(!(h===void 0?Dd(u,c,u7|f7,r,f):h))return!1}}return!0}var wR=h7;function d7(t){return t===t&&!Fe(t)}var Fd=d7;function p7(t){for(var e=Se(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Fd(i)]}return e}var CR=p7;function m7(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Bd=m7;function g7(t){var e=CR(t);return e.length==1&&e[0][2]?Bd(e[0][0],e[0][1]):function(n){return n===t||wR(n,t,e)}}var bR=g7;function y7(t,e){return t!=null&&e in Object(t)}var ER=y7;function x7(t,e,n){e=lo(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=Dr(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&yl(i)&&Qi(s,i)&&(G(t)||to(t)))}var zd=x7;function v7(t,e){return t!=null&&zd(t,e,ER)}var TR=v7;var S7=1,k7=2;function w7(t,e){return vl(t)&&Fd(e)?Bd(Dr(t),e):function(n){var r=k2(n,t);return r===void 0&&r===e?TR(n,t):Dd(e,r,S7|k7)}}var AR=w7;function C7(t){return function(e){return e?.[t]}}var RR=C7;function b7(t){return function(e){return Cl(e,t)}}var OR=b7;function E7(t){return vl(t)?RR(Dr(t)):OR(t)}var IR=E7;function T7(t){return typeof t=="function"?t:t==null?Gn:typeof t=="object"?G(t)?AR(t[0],t[1]):bR(t):IR(t)}var it=T7;function A7(t,e,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}var MR=A7;function R7(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),l=s.length;l--;){var a=s[t?l:++i];if(n(o[a],a,o)===!1)break}return e}}var LR=R7;var O7=LR(),NR=O7;function I7(t,e){return t&&NR(t,e,Se)}var PR=I7;function M7(t,e){return function(n,r){if(n==null)return n;if(!rt(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var _R=M7;var L7=_R(PR),fn=L7;function N7(t,e,n,r){return fn(t,function(i,o,s){e(r,i,n(i),s)}),r}var DR=N7;function P7(t,e){return function(n,r){var i=G(n)?MR:DR,o=e?e():{};return i(n,t,it(r,2),o)}}var FR=P7;var BR=Object.prototype,_7=BR.hasOwnProperty,D7=gl(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&eo(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=no(o),l=-1,a=s.length;++l<a;){var c=s[l],u=t[c];(u===void 0||Lr(u,BR[c])&&!_7.call(t,c))&&(t[c]=o[c])}return t}),Pl=D7;function F7(t){return Ke(t)&&rt(t)}var N1=F7;function B7(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Vd=B7;var z7=200;function V7(t,e,n,r){var i=-1,o=vd,s=!0,l=t.length,a=[],c=e.length;if(!l)return a;n&&(e=Ir(e,_r(n))),r?(o=Vd,s=!1):e.length>=z7&&(o=Ll,s=!1,e=new Ml(e));e:for(;++i<l;){var u=t[i],f=n==null?u:n(u);if(u=r||u!==0?u:0,s&&f===f){for(var h=c;h--;)if(e[h]===f)continue e;a.push(u)}else o(e,f,r)||a.push(u)}return a}var zR=V7;var U7=gl(function(t,e){return N1(t)?zR(t,El(e,1,N1,!0)):[]}),uo=U7;function H7(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Br=H7;function W7(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:Mr(e),bd(t,e<0?0:e,r)):[]}var qe=W7;function j7(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:Mr(e),e=r-e,bd(t,0,e<0?0:e)):[]}var ci=j7;function G7(t){return typeof t=="function"?t:Gn}var VR=G7;function $7(t,e){var n=G(t)?yd:fn;return n(t,VR(e))}var W=$7;function K7(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var UR=K7;function q7(t,e){var n=!0;return fn(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var HR=q7;function Y7(t,e,n){var r=G(t)?UR:HR;return n&&eo(t,e,n)&&(e=void 0),r(t,it(e,3))}var Vt=Y7;function X7(t,e){var n=[];return fn(t,function(r,i,o){e(r,i,o)&&n.push(r)}),n}var Ud=X7;function Z7(t,e){var n=G(t)?Al:Ud;return n(t,it(e,3))}var Ut=Z7;function Q7(t){return function(e,n,r){var i=Object(e);if(!rt(e)){var o=it(n,3);e=Se(e),n=function(l){return o(i[l],l,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var WR=Q7;var J7=Math.max;function ez(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Mr(n);return i<0&&(i=J7(r+i,0)),xd(t,it(e,3),i)}var jR=ez;var tz=WR(jR),zr=tz;function nz(t){return t&&t.length?t[0]:void 0}var wt=nz;function rz(t,e){var n=-1,r=rt(t)?Array(t.length):[];return fn(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var GR=rz;function iz(t,e){var n=G(t)?Ir:GR;return n(t,it(e,3))}var V=iz;function oz(t,e){return El(V(t,e),1)}var Jt=oz;var sz=Object.prototype,lz=sz.hasOwnProperty,az=FR(function(t,e,n){lz.call(t,n)?t[n].push(e):ml(t,n,[e])}),P1=az;var cz=Object.prototype,uz=cz.hasOwnProperty;function fz(t,e){return t!=null&&uz.call(t,e)}var $R=fz;function hz(t,e){return t!=null&&zd(t,e,$R)}var j=hz;var dz="[object String]";function pz(t){return typeof t=="string"||!G(t)&&Ke(t)&&Zt(t)==dz}var ft=pz;function mz(t,e){return Ir(e,function(n){return t[n]})}var KR=mz;function gz(t){return t==null?[]:KR(t,Se(t))}var pe=gz;var yz=Math.max;function xz(t,e,n,r){t=rt(t)?t:pe(t),n=n&&!r?Mr(n):0;var i=t.length;return n<0&&(n=yz(i+n,0)),ft(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&pl(t,e,n)>-1}var Le=xz;var vz=Math.max;function Sz(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Mr(n);return i<0&&(i=vz(r+i,0)),pl(t,e,i)}var Hd=Sz;var kz="[object Map]",wz="[object Set]",Cz=Object.prototype,bz=Cz.hasOwnProperty;function Ez(t){if(t==null)return!0;if(rt(t)&&(G(t)||typeof t=="string"||typeof t.splice=="function"||li(t)||xl(t)||to(t)))return!t.length;var e=fr(t);if(e==kz||e==wz)return!t.size;if(Pr(t))return!wd(t).length;for(var n in t)if(bz.call(t,n))return!1;return!0}var Y=Ez;var Tz="[object RegExp]";function Az(t){return Ke(t)&&Zt(t)==Tz}var qR=Az;var YR=$n&&$n.isRegExp,Rz=YR?_r(YR):qR,Kn=Rz;function Oz(t){return t===void 0}var Ht=Oz;var Iz="Expected a function";function Mz(t){if(typeof t!="function")throw new TypeError(Iz);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var XR=Mz;function Lz(t,e,n,r){if(!Fe(t))return t;e=lo(e,t);for(var i=-1,o=e.length,s=o-1,l=t;l!=null&&++i<o;){var a=Dr(e[i]),c=n;if(a==="__proto__"||a==="constructor"||a==="prototype")return t;if(i!=s){var u=l[a];c=r?r(u,a,l):void 0,c===void 0&&(c=Fe(u)?u:Qi(e[i+1])?[]:{})}Ji(l,a,c),l=l[a]}return t}var ZR=Lz;function Nz(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],l=Cl(t,s);n(l,s)&&ZR(o,lo(s,t),l)}return o}var QR=Nz;function Pz(t,e){if(t==null)return{};var n=Ir(Rd(t),function(r){return[r]});return e=it(e),QR(t,n,function(r,i){return e(r,i[0])})}var hn=Pz;function _z(t,e,n,r,i){return i(t,function(o,s,l){n=r?(r=!1,o):e(n,o,s,l)}),n}var JR=_z;function Dz(t,e,n){var r=G(t)?E2:JR,i=arguments.length<3;return r(t,it(e,4),n,i,fn)}var ot=Dz;function Fz(t,e){var n=G(t)?Al:Ud;return n(t,XR(it(e,3)))}var fo=Fz;function Bz(t,e){var n;return fn(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var eO=Bz;function zz(t,e,n){var r=G(t)?Nd:eO;return n&&eo(t,e,n)&&(e=void 0),r(t,it(e,3))}var Vc=zz;var Vz=1/0,Uz=co&&1/Nl(new co([,-0]))[1]==Vz?function(t){return new co(t)}:Be,tO=Uz;var Hz=200;function Wz(t,e,n){var r=-1,i=vd,o=t.length,s=!0,l=[],a=l;if(n)s=!1,i=Vd;else if(o>=Hz){var c=e?null:tO(t);if(c)return Nl(c);s=!1,i=Ll,a=new Ml}else a=e?[]:l;e:for(;++r<o;){var u=t[r],f=e?e(u):u;if(u=n||u!==0?u:0,s&&f===f){for(var h=a.length;h--;)if(a[h]===f)continue e;e&&a.push(f),l.push(u)}else i(a,f,n)||(a!==l&&a.push(f),l.push(u))}return l}var nO=Wz;function jz(t){return t&&t.length?nO(t):[]}var _l=jz;function Dl(t){console&&console.error&&console.error(`Error: ${t}`)}function Uc(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Hc(t){let e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function Wc(t){function e(){}e.prototype=t;let n=new e;function r(){return typeof n.bar}return r(),r(),t;(0,eval)(t)}function Gz(t){return $z(t)?t.LABEL:t.name}function $z(t){return ft(t.LABEL)&&t.LABEL!==""}var In=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),W(this.definition,n=>{n.accept(e)})}},we=class extends In{constructor(e){super([]),this.idx=1,It(this,hn(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},en=class extends In{constructor(e){super(e.definition),this.orgText="",It(this,hn(e,n=>n!==void 0))}},Ce=class extends In{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,It(this,hn(e,n=>n!==void 0))}},Ie=class extends In{constructor(e){super(e.definition),this.idx=1,It(this,hn(e,n=>n!==void 0))}},Ye=class extends In{constructor(e){super(e.definition),this.idx=1,It(this,hn(e,n=>n!==void 0))}},Xe=class extends In{constructor(e){super(e.definition),this.idx=1,It(this,hn(e,n=>n!==void 0))}},ae=class extends In{constructor(e){super(e.definition),this.idx=1,It(this,hn(e,n=>n!==void 0))}},We=class extends In{constructor(e){super(e.definition),this.idx=1,It(this,hn(e,n=>n!==void 0))}},je=class extends In{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,It(this,hn(e,n=>n!==void 0))}},J=class{constructor(e){this.idx=1,It(this,hn(e,n=>n!==void 0))}accept(e){e.visit(this)}};function Wd(t){return V(t,Fl)}function Fl(t){function e(n){return V(n,Fl)}if(t instanceof we){let n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return ft(t.label)&&(n.label=t.label),n}else{if(t instanceof Ce)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Ie)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Ye)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Xe)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Fl(new J({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof We)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Fl(new J({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ae)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof je)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof J){let n={type:"Terminal",name:t.terminalType.name,label:Gz(t.terminalType),idx:t.idx};ft(t.label)&&(n.terminalLabel=t.label);let r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=Kn(r)?r.source:r),n}else{if(t instanceof en)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}var tn=class{visit(e){let n=e;switch(n.constructor){case we:return this.visitNonTerminal(n);case Ce:return this.visitAlternative(n);case Ie:return this.visitOption(n);case Ye:return this.visitRepetitionMandatory(n);case Xe:return this.visitRepetitionMandatoryWithSeparator(n);case We:return this.visitRepetitionWithSeparator(n);case ae:return this.visitRepetition(n);case je:return this.visitAlternation(n);case J:return this.visitTerminal(n);case en:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function _1(t){return t instanceof Ce||t instanceof Ie||t instanceof ae||t instanceof Ye||t instanceof Xe||t instanceof We||t instanceof J||t instanceof en}function os(t,e=[]){return t instanceof Ie||t instanceof ae||t instanceof We?!0:t instanceof je?Vc(t.definition,r=>os(r,e)):t instanceof we&&Le(e,t)?!1:t instanceof In?(t instanceof we&&e.push(t),Vt(t.definition,r=>os(r,e))):!1}function D1(t){return t instanceof je}function dn(t){if(t instanceof we)return"SUBRULE";if(t instanceof Ie)return"OPTION";if(t instanceof je)return"OR";if(t instanceof Ye)return"AT_LEAST_ONE";if(t instanceof Xe)return"AT_LEAST_ONE_SEP";if(t instanceof We)return"MANY_SEP";if(t instanceof ae)return"MANY";if(t instanceof J)return"CONSUME";throw Error("non exhaustive match")}var ui=class{walk(e,n=[]){W(e.definition,(r,i)=>{let o=qe(e.definition,i+1);if(r instanceof we)this.walkProdRef(r,o,n);else if(r instanceof J)this.walkTerminal(r,o,n);else if(r instanceof Ce)this.walkFlat(r,o,n);else if(r instanceof Ie)this.walkOption(r,o,n);else if(r instanceof Ye)this.walkAtLeastOne(r,o,n);else if(r instanceof Xe)this.walkAtLeastOneSep(r,o,n);else if(r instanceof We)this.walkManySep(r,o,n);else if(r instanceof ae)this.walkMany(r,o,n);else if(r instanceof je)this.walkOr(r,o,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){let i=n.concat(r);this.walk(e,i)}walkOption(e,n,r){let i=n.concat(r);this.walk(e,i)}walkAtLeastOne(e,n,r){let i=[new Ie({definition:e.definition})].concat(n,r);this.walk(e,i)}walkAtLeastOneSep(e,n,r){let i=rO(e,n,r);this.walk(e,i)}walkMany(e,n,r){let i=[new Ie({definition:e.definition})].concat(n,r);this.walk(e,i)}walkManySep(e,n,r){let i=rO(e,n,r);this.walk(e,i)}walkOr(e,n,r){let i=n.concat(r);W(e.definition,o=>{let s=new Ce({definition:[o]});this.walk(s,i)})}};function rO(t,e,n){return[new Ie({definition:[new J({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function ss(t){if(t instanceof we)return ss(t.referencedRule);if(t instanceof J)return Yz(t);if(_1(t))return Kz(t);if(D1(t))return qz(t);throw Error("non exhaustive match")}function Kz(t){let e=[],n=t.definition,r=0,i=n.length>r,o,s=!0;for(;i&&s;)o=n[r],s=os(o),e=e.concat(ss(o)),r=r+1,i=n.length>r;return _l(e)}function qz(t){let e=V(t.definition,n=>ss(n));return _l(ut(e))}function Yz(t){return[t.terminalType]}var jd="_~IN~_";var F1=class extends ui{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){let i=Xz(e.referencedRule,e.idx)+this.topProd.name,o=n.concat(r),s=new Ce({definition:o}),l=ss(s);this.follows[i]=l}};function iO(t){let e={};return W(t,n=>{let r=new F1(n).startWalking();It(e,r)}),e}function Xz(t,e){return t.name+e+jd}function $(t){return t.charCodeAt(0)}function Gd(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function Bl(t,e){if(t[e]===!0)throw"duplicate flag "+e;let n=t[e];t[e]=!0}function ls(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function jc(){throw Error("Internal Error - Should never get here!")}function B1(t){return t.type==="Character"}var Gc=[];for(let t=$("0");t<=$("9");t++)Gc.push(t);var $c=[$("_")].concat(Gc);for(let t=$("a");t<=$("z");t++)$c.push(t);for(let t=$("A");t<=$("Z");t++)$c.push(t);var z1=[$(" "),$("\f"),$(`
`),$("\r"),$("	"),$("\v"),$("	"),$("\xA0"),$("\u1680"),$("\u2000"),$("\u2001"),$("\u2002"),$("\u2003"),$("\u2004"),$("\u2005"),$("\u2006"),$("\u2007"),$("\u2008"),$("\u2009"),$("\u200A"),$("\u2028"),$("\u2029"),$("\u202F"),$("\u205F"),$("\u3000"),$("\uFEFF")];var Zz=/[0-9a-fA-F]/,$d=/[0-9]/,Qz=/[1-9]/,Kc=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let n=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Bl(r,"global");break;case"i":Bl(r,"ignoreCase");break;case"m":Bl(r,"multiLine");break;case"u":Bl(r,"unicode");break;case"y":Bl(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){let e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){let e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}ls(n);let r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return jc()}quantifier(e=!1){let n,r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let o;this.isDigit()?(o=this.integerIncludingZero(),n={atLeast:i,atMost:o}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;ls(n);break}if(!(e===!0&&n===void 0)&&ls(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e,n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),ls(e)?(e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):jc()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[$(`
`),$("\r"),$("\u2028"),$("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=Gc;break;case"D":e=Gc,n=!0;break;case"s":e=z1;break;case"S":e=z1,n=!0;break;case"w":e=$c;break;case"W":e=$c,n=!0;break}return ls(e)?{type:"Set",value:e,complement:n}:jc()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=$("\f");break;case"n":e=$(`
`);break;case"r":e=$("\r");break;case"t":e=$("	");break;case"v":e=$("\v");break}return ls(e)?{type:"Character",value:e}:jc()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:$("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:$(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:$(e)}}}characterClass(){let e=[],n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){let r=this.classAtom(),i=r.type==="Character";if(B1(r)&&this.isRangeDash()){this.consumeChar("-");let o=this.classAtom(),s=o.type==="Character";if(B1(o)){if(o.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:o.value})}else Gd(r.value,e),e.push($("-")),Gd(o.value,e)}else Gd(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:$("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}let n=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(Qz.test(e)===!1)throw Error("Expecting a positive integer");for(;$d.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if($d.test(e)===!1)throw Error("Expecting an integer");for(;$d.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:$(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return $d.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let i=0;i<e;i++){let o=this.popChar();if(Zz.test(o)===!1)throw Error("Expecting a HexDecimal digits");n+=o}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var ho=class{visitChildren(e){for(let n in e){let r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var Kd={},Jz=new Kc;function zl(t){let e=t.toString();if(Kd.hasOwnProperty(e))return Kd[e];{let n=Jz.pattern(e);return Kd[e]=n,n}}function oO(){Kd={}}var lO="Complement Sets are not supported for first char optimization",qc=`Unable to use "first char" lexer optimizations:
`;function aO(t,e=!1){try{let n=zl(t);return V1(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===lO)e&&Uc(`${qc}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Dl(`${qc}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function V1(t,e,n){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)V1(t.value[i],e,n);break;case"Alternative":let r=t.value;for(let i=0;i<r.length;i++){let o=r[i];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=o;switch(s.type){case"Character":qd(s.value,e,n);break;case"Set":if(s.complement===!0)throw Error(lO);W(s.value,a=>{if(typeof a=="number")qd(a,e,n);else{let c=a;if(n===!0)for(let u=c.from;u<=c.to;u++)qd(u,e,n);else{for(let u=c.from;u<=c.to&&u<Vl;u++)qd(u,e,n);if(c.to>=Vl){let u=c.from>=Vl?c.from:Vl,f=c.to,h=Vr(u),d=Vr(f);for(let p=h;p<=d;p++)e[p]=p}}}});break;case"Group":V1(s.value,e,n);break;default:throw Error("Non Exhaustive Match")}let l=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&U1(s)===!1||s.type!=="Group"&&l===!1)break}break;default:throw Error("non exhaustive match!")}return pe(e)}function qd(t,e,n){let r=Vr(t);e[r]=r,n===!0&&eV(t,e)}function eV(t,e){let n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){let i=Vr(r.charCodeAt(0));e[i]=i}else{let i=n.toLowerCase();if(i!==n){let o=Vr(i.charCodeAt(0));e[o]=o}}}function sO(t,e){return zr(t.value,n=>{if(typeof n=="number")return Le(e,n);{let r=n;return zr(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function U1(t){let e=t.quantifier;return e&&e.atLeast===0?!0:t.value?G(t.value)?Vt(t.value,U1):U1(t.value):!1}var H1=class extends ho{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){Le(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?sO(e,this.targetCharCodes)===void 0&&(this.found=!0):sO(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Yd(t,e){if(e instanceof RegExp){let n=zl(e),r=new H1(t);return r.visit(n),r.found}else return zr(e,n=>Le(t,n.charCodeAt(0)))!==void 0}var as="PATTERN",Ul="defaultMode",Xd="modes",j1=typeof new RegExp("(?:)").sticky=="boolean";function fO(t,e){e=Pl(e,{useSticky:j1,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(g,y)=>y()});let n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{xV()});let r;n("Reject Lexer.NA",()=>{r=fo(t,g=>g[as]===Ze.NA)});let i=!1,o;n("Transform Patterns",()=>{i=!1,o=V(r,g=>{let y=g[as];if(Kn(y)){let S=y.source;return S.length===1&&S!=="^"&&S!=="$"&&S!=="."&&!y.ignoreCase?S:S.length===2&&S[0]==="\\"&&!Le(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],S[1])?S[1]:e.useSticky?uO(y):cO(y)}else{if(Qt(y))return i=!0,{exec:y};if(typeof y=="object")return i=!0,y;if(typeof y=="string"){if(y.length===1)return y;{let S=y.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),k=new RegExp(S);return e.useSticky?uO(k):cO(k)}}else throw Error("non exhaustive match")}})});let s,l,a,c,u;n("misc mapping",()=>{s=V(r,g=>g.tokenTypeIdx),l=V(r,g=>{let y=g.GROUP;if(y!==Ze.SKIPPED){if(ft(y))return y;if(Ht(y))return!1;throw Error("non exhaustive match")}}),a=V(r,g=>{let y=g.LONGER_ALT;if(y)return G(y)?V(y,k=>Hd(r,k)):[Hd(r,y)]}),c=V(r,g=>g.PUSH_MODE),u=V(r,g=>j(g,"POP_MODE"))});let f;n("Line Terminator Handling",()=>{let g=vO(e.lineTerminatorCharacters);f=V(r,y=>!1),e.positionTracking!=="onlyOffset"&&(f=V(r,y=>j(y,"LINE_BREAKS")?!!y.LINE_BREAKS:xO(y,g)===!1&&Yd(g,y.PATTERN)))});let h,d,p,x;n("Misc Mapping #2",()=>{h=V(r,gO),d=V(o,gV),p=ot(r,(g,y)=>{let S=y.GROUP;return ft(S)&&S!==Ze.SKIPPED&&(g[S]=[]),g},{}),x=V(o,(g,y)=>({pattern:o[y],longerAlt:a[y],canLineTerminator:f[y],isCustom:h[y],short:d[y],group:l[y],push:c[y],pop:u[y],tokenTypeIdx:s[y],tokenType:r[y]}))});let v=!0,m=[];return e.safeMode||n("First Char Optimization",()=>{m=ot(r,(g,y,S)=>{if(typeof y.PATTERN=="string"){let k=y.PATTERN.charCodeAt(0),w=Vr(k);W1(g,w,x[S])}else if(G(y.START_CHARS_HINT)){let k;W(y.START_CHARS_HINT,w=>{let C=typeof w=="string"?w.charCodeAt(0):w,A=Vr(C);k!==A&&(k=A,W1(g,A,x[S]))})}else if(Kn(y.PATTERN))if(y.PATTERN.unicode)v=!1,e.ensureOptimizations&&Dl(`${qc}	Unable to analyze < ${y.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let k=aO(y.PATTERN,e.ensureOptimizations);Y(k)&&(v=!1),W(k,w=>{W1(g,w,x[S])})}else e.ensureOptimizations&&Dl(`${qc}	TokenType: <${y.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),v=!1;return g},[])}),{emptyGroups:p,patternIdxToConfig:x,charCodeToPatternIdxToConfig:m,hasCustom:i,canBeOptimized:v}}function hO(t,e){let n=[],r=nV(t);n=n.concat(r.errors);let i=rV(r.valid),o=i.valid;return n=n.concat(i.errors),n=n.concat(tV(o)),n=n.concat(fV(o)),n=n.concat(hV(o,e)),n=n.concat(dV(o)),n}function tV(t){let e=[],n=Ut(t,r=>Kn(r[as]));return e=e.concat(oV(n)),e=e.concat(aV(n)),e=e.concat(cV(n)),e=e.concat(uV(n)),e=e.concat(sV(n)),e}function nV(t){let e=Ut(t,i=>!j(i,as)),n=V(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:Ne.MISSING_PATTERN,tokenTypes:[i]})),r=uo(t,e);return{errors:n,valid:r}}function rV(t){let e=Ut(t,i=>{let o=i[as];return!Kn(o)&&!Qt(o)&&!j(o,"exec")&&!ft(o)}),n=V(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Ne.INVALID_PATTERN,tokenTypes:[i]})),r=uo(t,e);return{errors:n,valid:r}}var iV=/[^\\][$]/;function oV(t){class e extends ho{constructor(){super(...arguments),this.found=!1}visitEndAnchor(o){this.found=!0}}let n=Ut(t,i=>{let o=i.PATTERN;try{let s=zl(o),l=new e;return l.visit(s),l.found}catch{return iV.test(o.source)}});return V(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ne.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function sV(t){let e=Ut(t,r=>r.PATTERN.test(""));return V(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:Ne.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}var lV=/[^\\[][\^]|^\^/;function aV(t){class e extends ho{constructor(){super(...arguments),this.found=!1}visitStartAnchor(o){this.found=!0}}let n=Ut(t,i=>{let o=i.PATTERN;try{let s=zl(o),l=new e;return l.visit(s),l.found}catch{return lV.test(o.source)}});return V(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ne.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function cV(t){let e=Ut(t,r=>{let i=r[as];return i instanceof RegExp&&(i.multiline||i.global)});return V(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Ne.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function uV(t){let e=[],n=V(t,o=>ot(t,(s,l)=>(o.PATTERN.source===l.PATTERN.source&&!Le(e,l)&&l.PATTERN!==Ze.NA&&(e.push(l),s.push(l)),s),[]));n=Fr(n);let r=Ut(n,o=>o.length>1);return V(r,o=>{let s=V(o,a=>a.name);return{message:`The same RegExp pattern ->${wt(o).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:Ne.DUPLICATE_PATTERNS_FOUND,tokenTypes:o}})}function fV(t){let e=Ut(t,r=>{if(!j(r,"GROUP"))return!1;let i=r.GROUP;return i!==Ze.SKIPPED&&i!==Ze.NA&&!ft(i)});return V(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Ne.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function hV(t,e){let n=Ut(t,i=>i.PUSH_MODE!==void 0&&!Le(e,i.PUSH_MODE));return V(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:Ne.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function dV(t){let e=[],n=ot(t,(r,i,o)=>{let s=i.PATTERN;return s===Ze.NA||(ft(s)?r.push({str:s,idx:o,tokenType:i}):Kn(s)&&mV(s)&&r.push({str:s.source,idx:o,tokenType:i})),r},[]);return W(t,(r,i)=>{W(n,({str:o,idx:s,tokenType:l})=>{if(i<s&&pV(o,r.PATTERN)){let a=`Token: ->${l.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:a,type:Ne.UNREACHABLE_PATTERN,tokenTypes:[r,l]})}})}),e}function pV(t,e){if(Kn(e)){let n=e.exec(t);return n!==null&&n.index===0}else{if(Qt(e))return e(t,0,[],{});if(j(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function mV(t){return zr([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function cO(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function uO(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function dO(t,e,n){let r=[];return j(t,Ul)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ul+`> property in its definition
`,type:Ne.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),j(t,Xd)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Xd+`> property in its definition
`,type:Ne.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),j(t,Xd)&&j(t,Ul)&&!j(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${Ul}: <${t.defaultMode}>which does not exist
`,type:Ne.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),j(t,Xd)&&W(t.modes,(i,o)=>{W(i,(s,l)=>{if(Ht(s))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${o}> at index: <${l}>
`,type:Ne.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(j(s,"LONGER_ALT")){let a=G(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];W(a,c=>{!Ht(c)&&!Le(i,c)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${c.name}> on token <${s.name}> outside of mode <${o}>
`,type:Ne.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function pO(t,e,n){let r=[],i=!1,o=Fr(ut(pe(t.modes))),s=fo(o,a=>a[as]===Ze.NA),l=vO(n);return e&&W(s,a=>{let c=xO(a,l);if(c!==!1){let f={message:yV(a,c),type:c.issue,tokenType:a};r.push(f)}else j(a,"LINE_BREAKS")?a.LINE_BREAKS===!0&&(i=!0):Yd(l,a.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Ne.NO_LINE_BREAKS_FLAGS}),r}function mO(t){let e={},n=Se(t);return W(n,r=>{let i=t[r];if(G(i))e[r]=[];else throw Error("non exhaustive match")}),e}function gO(t){let e=t.PATTERN;if(Kn(e))return!1;if(Qt(e))return!0;if(j(e,"exec"))return!0;if(ft(e))return!1;throw Error("non exhaustive match")}function gV(t){return ft(t)&&t.length===1?t.charCodeAt(0):!1}var yO={test:function(t){let e=t.length;for(let n=this.lastIndex;n<e;n++){let r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function xO(t,e){if(j(t,"LINE_BREAKS"))return!1;if(Kn(t.PATTERN)){try{Yd(e,t.PATTERN)}catch(n){return{issue:Ne.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(ft(t.PATTERN))return!1;if(gO(t))return{issue:Ne.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function yV(t,e){if(e.issue===Ne.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===Ne.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function vO(t){return V(t,n=>ft(n)?n.charCodeAt(0):n)}function W1(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}var Vl=256,Zd=[];function Vr(t){return t<Vl?t:Zd[t]}function xV(){if(Y(Zd)){Zd=new Array(65536);for(let t=0;t<65536;t++)Zd[t]=t>255?255+~~(t/255):t}}function fi(t,e){let n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function Hl(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var SO=1,wO={};function hi(t){let e=vV(t);SV(e),wV(e),kV(e),W(e,n=>{n.isParent=n.categoryMatches.length>0})}function vV(t){let e=Oe(t),n=t,r=!0;for(;r;){n=Fr(ut(V(n,o=>o.CATEGORIES)));let i=uo(n,e);e=e.concat(i),Y(i)?r=!1:n=i}return e}function SV(t){W(t,e=>{G1(e)||(wO[SO]=e,e.tokenTypeIdx=SO++),kO(e)&&!G(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),kO(e)||(e.CATEGORIES=[]),CV(e)||(e.categoryMatches=[]),bV(e)||(e.categoryMatchesMap={})})}function kV(t){W(t,e=>{e.categoryMatches=[],W(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(wO[r].tokenTypeIdx)})})}function wV(t){W(t,e=>{CO([],e)})}function CO(t,e){W(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),W(e.CATEGORIES,n=>{let r=t.concat(e);Le(r,n)||CO(r,n)})}function G1(t){return j(t,"tokenTypeIdx")}function kO(t){return j(t,"CATEGORIES")}function CV(t){return j(t,"categoryMatches")}function bV(t){return j(t,"categoryMatchesMap")}function bO(t){return j(t,"tokenTypeIdx")}var $1={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var Ne;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Ne||(Ne={}));var Yc={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:$1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Yc);var Ze=class{constructor(e,n=Yc){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,o)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${i}>`);let{time:l,value:a}=Hc(o),c=l>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${s}<-- <${i}> time: ${l}ms`),this.traceInitIndent--,a}else return o()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=It({},Yc,n);let r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,o=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Yc.lineTerminatorsPattern)this.config.lineTerminatorsPattern=yO;else if(this.config.lineTerminatorCharacters===Yc.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),G(e)?i={modes:{defaultMode:Oe(e)},defaultMode:Ul}:(o=!1,i=Oe(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(dO(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(pO(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},W(i.modes,(l,a)=>{i.modes[a]=fo(l,c=>Ht(c))});let s=Se(i.modes);if(W(i.modes,(l,a)=>{this.TRACE_INIT(`Mode: <${a}> processing`,()=>{if(this.modes.push(a),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(hO(l,s))}),Y(this.lexerDefinitionErrors)){hi(l);let c;this.TRACE_INIT("analyzeTokenTypes",()=>{c=fO(l,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[a]=c.patternIdxToConfig,this.charCodeToPatternIdxToConfig[a]=c.charCodeToPatternIdxToConfig,this.emptyGroups=It({},this.emptyGroups,c.emptyGroups),this.hasCustom=c.hasCustom||this.hasCustom,this.canModeBeOptimized[a]=c.canBeOptimized}})}),this.defaultMode=i.defaultMode,!Y(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let a=V(this.lexerDefinitionErrors,c=>c.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+a)}W(this.lexerDefinitionWarning,l=>{Uc(l.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(j1?(this.chopInput=Gn,this.match=this.matchWithTest):(this.updateLastIndex=Be,this.match=this.matchWithExec),o&&(this.handleModes=Be),this.trackStartLines===!1&&(this.computeNewColumn=Gn),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Be),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let l=ot(this.canModeBeOptimized,(a,c,u)=>(c===!1&&a.push(u),a),[]);if(n.ensureOptimizations&&!Y(l))throw Error(`Lexer Modes: < ${l.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{oO()}),this.TRACE_INIT("toFastProperties",()=>{Wc(this)})})}tokenize(e,n=this.defaultMode){if(!Y(this.lexerDefinitionErrors)){let i=V(this.lexerDefinitionErrors,o=>o.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,i,o,s,l,a,c,u,f,h,d,p,x,v,m,g,y=e,S=y.length,k=0,w=0,C=this.hasCustom?0:Math.floor(e.length/10),A=new Array(C),P=[],E=this.trackStartLines?1:void 0,_=this.trackStartLines?1:void 0,N=mO(this.emptyGroups),L=this.trackStartLines,I=this.config.lineTerminatorsPattern,F=0,K=[],le=[],be=[],ne=[];Object.freeze(ne);let ie;function ue(){return K}function fe(st){let Mn=Vr(st),ds=le[Mn];return ds===void 0?ne:ds}let Qe=st=>{if(be.length===1&&st.tokenType.PUSH_MODE===void 0){let Mn=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(st);P.push({offset:st.startOffset,line:st.startLine,column:st.startColumn,length:st.image.length,message:Mn})}else{be.pop();let Mn=Br(be);K=this.patternIdxToConfig[Mn],le=this.charCodeToPatternIdxToConfig[Mn],F=K.length;let ds=this.canModeBeOptimized[Mn]&&this.config.safeMode===!1;le&&ds?ie=fe:ie=ue}};function Yn(st){be.push(st),le=this.charCodeToPatternIdxToConfig[st],K=this.patternIdxToConfig[st],F=K.length,F=K.length;let Mn=this.canModeBeOptimized[st]&&this.config.safeMode===!1;le&&Mn?ie=fe:ie=ue}Yn.call(this,n);let pt,go=this.config.recoveryEnabled;for(;k<S;){a=null;let st=y.charCodeAt(k),Mn=ie(st),ds=Mn.length;for(r=0;r<ds;r++){pt=Mn[r];let mn=pt.pattern;c=null;let Hr=pt.short;if(Hr!==!1?st===Hr&&(a=mn):pt.isCustom===!0?(g=mn.exec(y,k,A,N),g!==null?(a=g[0],g.payload!==void 0&&(c=g.payload)):a=null):(this.updateLastIndex(mn,k),a=this.match(mn,e,k)),a!==null){if(l=pt.longerAlt,l!==void 0){let di=l.length;for(o=0;o<di;o++){let Wr=K[l[o]],yo=Wr.pattern;if(u=null,Wr.isCustom===!0?(g=yo.exec(y,k,A,N),g!==null?(s=g[0],g.payload!==void 0&&(u=g.payload)):s=null):(this.updateLastIndex(yo,k),s=this.match(yo,e,k)),s&&s.length>a.length){a=s,c=u,pt=Wr;break}}}break}}if(a!==null){if(f=a.length,h=pt.group,h!==void 0&&(d=pt.tokenTypeIdx,p=this.createTokenInstance(a,k,d,pt.tokenType,E,_,f),this.handlePayload(p,c),h===!1?w=this.addToken(A,w,p):N[h].push(p)),e=this.chopInput(e,f),k=k+f,_=this.computeNewColumn(_,f),L===!0&&pt.canLineTerminator===!0){let mn=0,Hr,di;I.lastIndex=0;do Hr=I.test(a),Hr===!0&&(di=I.lastIndex-1,mn++);while(Hr===!0);mn!==0&&(E=E+mn,_=f-di,this.updateTokenEndLineColumnLocation(p,h,di,mn,E,_,f))}this.handleModes(pt,Qe,Yn,p)}else{let mn=k,Hr=E,di=_,Wr=go===!1;for(;Wr===!1&&k<S;)for(e=this.chopInput(e,1),k++,i=0;i<F;i++){let yo=K[i],Rp=yo.pattern,Ax=yo.short;if(Ax!==!1?y.charCodeAt(k)===Ax&&(Wr=!0):yo.isCustom===!0?Wr=Rp.exec(y,k,A,N)!==null:(this.updateLastIndex(Rp,k),Wr=Rp.exec(e)!==null),Wr===!0)break}if(x=k-mn,_=this.computeNewColumn(_,x),m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y,mn,x,Hr,di),P.push({offset:mn,line:Hr,column:di,length:x,message:m}),go===!1)break}}return this.hasCustom||(A.length=w),{tokens:A,groups:N,errors:P}}handleModes(e,n,r,i){if(e.pop===!0){let o=e.push;n(i),o!==void 0&&r.call(this,o)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,i,o,s,l){let a,c;n!==void 0&&(a=r===l-1,c=a?-1:0,i===1&&a===!0||(e.endLine=o+c,e.endColumn=s-1+-c))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,n,r,i,o,s){return{image:e,startOffset:n,startLine:o,startColumn:s,tokenTypeIdx:r,tokenType:i}}createFullToken(e,n,r,i,o,s,l){return{image:e,startOffset:n,endOffset:n+l-1,startLine:o,endLine:o,startColumn:s,endColumn:s+l-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){let r=e.exec(n);return r!==null?r[0]:null}};Ze.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Ze.NA=/NOT_APPLICABLE/;function cs(t){return K1(t)?t.LABEL:t.name}function K1(t){return ft(t.LABEL)&&t.LABEL!==""}var EV="parent",EO="categories",TO="label",AO="group",RO="push_mode",OO="pop_mode",IO="longer_alt",MO="line_breaks",LO="start_chars_hint";function ht(t){return TV(t)}function TV(t){let e=t.pattern,n={};if(n.name=t.name,Ht(e)||(n.PATTERN=e),j(t,EV))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return j(t,EO)&&(n.CATEGORIES=t[EO]),hi([n]),j(t,TO)&&(n.LABEL=t[TO]),j(t,AO)&&(n.GROUP=t[AO]),j(t,OO)&&(n.POP_MODE=t[OO]),j(t,RO)&&(n.PUSH_MODE=t[RO]),j(t,IO)&&(n.LONGER_ALT=t[IO]),j(t,MO)&&(n.LINE_BREAKS=t[MO]),j(t,LO)&&(n.START_CHARS_HINT=t[LO]),n}var hr=ht({name:"EOF",pattern:Ze.NA});hi([hr]);function us(t,e,n,r,i,o,s,l){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:s,endColumn:l,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function q1(t,e){return fi(t,e)}var Qd={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${K1(t)?`--> ${cs(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){let o="Expecting: ",l=`
but found: '`+wt(e).image+"'";if(r)return o+r+l;{let a=ot(t,(h,d)=>h.concat(d),[]),c=V(a,h=>`[${V(h,d=>cs(d)).join(", ")}]`),f=`one of these possible Token sequences:
${V(c,(h,d)=>`  ${d+1}. ${h}`).join(`
`)}`;return o+f+l}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){let i="Expecting: ",s=`
but found: '`+wt(e).image+"'";if(n)return i+n+s;{let a=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${V(t,c=>`[${V(c,u=>cs(u)).join(",")}]`).join(" ,")}>`;return i+a+s}}};Object.freeze(Qd);var NO={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},dr={buildDuplicateFoundError(t,e){function n(u){return u instanceof J?u.terminalType.name:u instanceof we?u.nonTerminalName:""}let r=t.name,i=wt(e),o=i.idx,s=dn(i),l=n(i),a=o>0,c=`->${s}${a?o:""}<- ${l?`with argument: ->${l}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,`
`),c},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){let e=V(t.prefixPath,i=>cs(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){let e=V(t.prefixPath,i=>cs(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx,r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=dn(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){let e=t.topLevelRule.name,n=V(t.leftRecursionPath,o=>o.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof en?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function PO(t,e){let n=new Y1(t,e);return n.resolveRefs(),n.errors}var Y1=class extends tn{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){W(pe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{let r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:dt.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var X1=class extends ui{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Oe(this.path.ruleStack).reverse(),this.occurrenceStack=Oe(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let i=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){Y(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Jd=class extends X1{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let i=n.concat(r),o=new Ce({definition:i});this.possibleTokTypes=ss(o),this.found=!0}}},Wl=class extends ui{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},ep=class extends Wl{walkMany(e,n,r){if(e.idx===this.occurrence){let i=wt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof J&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,n,r)}},Xc=class extends Wl{walkManySep(e,n,r){if(e.idx===this.occurrence){let i=wt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof J&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,n,r)}},tp=class extends Wl{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){let i=wt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof J&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,n,r)}},Zc=class extends Wl{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){let i=wt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof J&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,n,r)}};function np(t,e,n=[]){n=Oe(n);let r=[],i=0;function o(l){return l.concat(qe(t,i+1))}function s(l){let a=np(o(l),e,n);return r.concat(a)}for(;n.length<e&&i<t.length;){let l=t[i];if(l instanceof Ce)return s(l.definition);if(l instanceof we)return s(l.definition);if(l instanceof Ie)r=s(l.definition);else if(l instanceof Ye){let a=l.definition.concat([new ae({definition:l.definition})]);return s(a)}else if(l instanceof Xe){let a=[new Ce({definition:l.definition}),new ae({definition:[new J({terminalType:l.separator})].concat(l.definition)})];return s(a)}else if(l instanceof We){let a=l.definition.concat([new ae({definition:[new J({terminalType:l.separator})].concat(l.definition)})]);r=s(a)}else if(l instanceof ae){let a=l.definition.concat([new ae({definition:l.definition})]);r=s(a)}else{if(l instanceof je)return W(l.definition,a=>{Y(a.definition)===!1&&(r=s(a.definition))}),r;if(l instanceof J)n.push(l.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:qe(t,i)}),r}function rp(t,e,n,r){let i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE",l=!1,a=e.length,c=a-r-1,u=[],f=[];for(f.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Y(f);){let h=f.pop();if(h===s){l&&Br(f).idx<=c&&f.pop();continue}let d=h.def,p=h.idx,x=h.ruleStack,v=h.occurrenceStack;if(Y(d))continue;let m=d[0];if(m===i){let g={idx:p,def:qe(d),ruleStack:ci(x),occurrenceStack:ci(v)};f.push(g)}else if(m instanceof J)if(p<a-1){let g=p+1,y=e[g];if(n(y,m.terminalType)){let S={idx:g,def:qe(d),ruleStack:x,occurrenceStack:v};f.push(S)}}else if(p===a-1)u.push({nextTokenType:m.terminalType,nextTokenOccurrence:m.idx,ruleStack:x,occurrenceStack:v}),l=!0;else throw Error("non exhaustive match");else if(m instanceof we){let g=Oe(x);g.push(m.nonTerminalName);let y=Oe(v);y.push(m.idx);let S={idx:p,def:m.definition.concat(o,qe(d)),ruleStack:g,occurrenceStack:y};f.push(S)}else if(m instanceof Ie){let g={idx:p,def:qe(d),ruleStack:x,occurrenceStack:v};f.push(g),f.push(s);let y={idx:p,def:m.definition.concat(qe(d)),ruleStack:x,occurrenceStack:v};f.push(y)}else if(m instanceof Ye){let g=new ae({definition:m.definition,idx:m.idx}),y=m.definition.concat([g],qe(d)),S={idx:p,def:y,ruleStack:x,occurrenceStack:v};f.push(S)}else if(m instanceof Xe){let g=new J({terminalType:m.separator}),y=new ae({definition:[g].concat(m.definition),idx:m.idx}),S=m.definition.concat([y],qe(d)),k={idx:p,def:S,ruleStack:x,occurrenceStack:v};f.push(k)}else if(m instanceof We){let g={idx:p,def:qe(d),ruleStack:x,occurrenceStack:v};f.push(g),f.push(s);let y=new J({terminalType:m.separator}),S=new ae({definition:[y].concat(m.definition),idx:m.idx}),k=m.definition.concat([S],qe(d)),w={idx:p,def:k,ruleStack:x,occurrenceStack:v};f.push(w)}else if(m instanceof ae){let g={idx:p,def:qe(d),ruleStack:x,occurrenceStack:v};f.push(g),f.push(s);let y=new ae({definition:m.definition,idx:m.idx}),S=m.definition.concat([y],qe(d)),k={idx:p,def:S,ruleStack:x,occurrenceStack:v};f.push(k)}else if(m instanceof je)for(let g=m.definition.length-1;g>=0;g--){let y=m.definition[g],S={idx:p,def:y.definition.concat(qe(d)),ruleStack:x,occurrenceStack:v};f.push(S),f.push(s)}else if(m instanceof Ce)f.push({idx:p,def:m.definition.concat(qe(d)),ruleStack:x,occurrenceStack:v});else if(m instanceof en)f.push(AV(m,p,x,v));else throw Error("non exhaustive match")}return u}function AV(t,e,n,r){let i=Oe(n);i.push(t.name);let o=Oe(r);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}var ze;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(ze||(ze={}));function op(t){if(t instanceof Ie||t==="Option")return ze.OPTION;if(t instanceof ae||t==="Repetition")return ze.REPETITION;if(t instanceof Ye||t==="RepetitionMandatory")return ze.REPETITION_MANDATORY;if(t instanceof Xe||t==="RepetitionMandatoryWithSeparator")return ze.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof We||t==="RepetitionWithSeparator")return ze.REPETITION_WITH_SEPARATOR;if(t instanceof je||t==="Alternation")return ze.ALTERNATION;throw Error("non exhaustive match")}function DO(t,e,n,r,i,o){let s=Qc(t,e,n),l=HO(s)?Hl:fi;return o(s,r,l,i)}function FO(t,e,n,r,i,o){let s=Jc(t,e,i,n),l=HO(s)?Hl:fi;return o(s[0],l,r)}function BO(t,e,n,r){let i=t.length,o=Vt(t,s=>Vt(s,l=>l.length===1));if(e)return function(s){let l=V(s,a=>a.GATE);for(let a=0;a<i;a++){let c=t[a],u=c.length,f=l[a];if(!(f!==void 0&&f.call(this)===!1))e:for(let h=0;h<u;h++){let d=c[h],p=d.length;for(let x=0;x<p;x++){let v=this.LA(x+1);if(n(v,d[x])===!1)continue e}return a}}};if(o&&!r){let s=V(t,a=>ut(a)),l=ot(s,(a,c,u)=>(W(c,f=>{j(a,f.tokenTypeIdx)||(a[f.tokenTypeIdx]=u),W(f.categoryMatches,h=>{j(a,h)||(a[h]=u)})}),a),{});return function(){let a=this.LA(1);return l[a.tokenTypeIdx]}}else return function(){for(let s=0;s<i;s++){let l=t[s],a=l.length;e:for(let c=0;c<a;c++){let u=l[c],f=u.length;for(let h=0;h<f;h++){let d=this.LA(h+1);if(n(d,u[h])===!1)continue e}return s}}}}function zO(t,e,n){let r=Vt(t,o=>o.length===1),i=t.length;if(r&&!n){let o=ut(t);if(o.length===1&&Y(o[0].categoryMatches)){let l=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===l}}else{let s=ot(o,(l,a,c)=>(l[a.tokenTypeIdx]=!0,W(a.categoryMatches,u=>{l[u]=!0}),l),[]);return function(){let l=this.LA(1);return s[l.tokenTypeIdx]===!0}}}else return function(){e:for(let o=0;o<i;o++){let s=t[o],l=s.length;for(let a=0;a<l;a++){let c=this.LA(a+1);if(e(c,s[a])===!1)continue e}return!0}return!1}}var Q1=class extends ui{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,ze.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,ze.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,ze.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,ze.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,ze.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}},ip=class extends tn{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,ze.OPTION)}visitRepetition(e){this.checkIsTarget(e,ze.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,ze.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,ze.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,ze.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,ze.ALTERNATION)}};function _O(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function Z1(t){let e=[""];for(let n=0;n<t.length;n++){let r=t[n],i=[];for(let o=0;o<e.length;o++){let s=e[o];i.push(s+"_"+r.tokenTypeIdx);for(let l=0;l<r.categoryMatches.length;l++){let a="_"+r.categoryMatches[l];i.push(s+a)}}e=i}return e}function RV(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;let i=t[r];for(let o=0;o<e.length;o++){let s=e[o];if(i[s]===!0)return!1}}return!0}function VO(t,e){let n=V(t,s=>np([s],1)),r=_O(n.length),i=V(n,s=>{let l={};return W(s,a=>{let c=Z1(a.partialPath);W(c,u=>{l[u]=!0})}),l}),o=n;for(let s=1;s<=e;s++){let l=o;o=_O(l.length);for(let a=0;a<l.length;a++){let c=l[a];for(let u=0;u<c.length;u++){let f=c[u].partialPath,h=c[u].suffixDef,d=Z1(f);if(RV(i,d,a)||Y(h)||f.length===e){let x=r[a];if(sp(x,f)===!1){x.push(f);for(let v=0;v<d.length;v++){let m=d[v];i[a][m]=!0}}}else{let x=np(h,s+1,f);o[a]=o[a].concat(x),W(x,v=>{let m=Z1(v.partialPath);W(m,g=>{i[a][g]=!0})})}}}}return r}function Qc(t,e,n,r){let i=new ip(t,ze.ALTERNATION,r);return e.accept(i),VO(i.result,n)}function Jc(t,e,n,r){let i=new ip(t,n);e.accept(i);let o=i.result,l=new Q1(e,t,n).startWalking(),a=new Ce({definition:o}),c=new Ce({definition:l});return VO([a,c],r)}function sp(t,e){e:for(let n=0;n<t.length;n++){let r=t[n];if(r.length===e.length){for(let i=0;i<r.length;i++){let o=e[i],s=r[i];if((o===s||s.categoryMatchesMap[o.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function UO(t,e){return t.length<e.length&&Vt(t,(n,r)=>{let i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function HO(t){return Vt(t,e=>Vt(e,n=>Vt(n,r=>Y(r.categoryMatches))))}function WO(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return V(e,n=>Object.assign({type:dt.CUSTOM_LOOKAHEAD_VALIDATION},n))}function jO(t,e,n,r){let i=Jt(t,a=>OV(a,n)),o=_V(t,e,n),s=Jt(t,a=>LV(a,n)),l=Jt(t,a=>MV(a,t,r,n));return i.concat(o,s,l)}function OV(t,e){let n=new J1;t.accept(n);let r=n.allProductions,i=P1(r,IV),o=hn(i,l=>l.length>1);return V(pe(o),l=>{let a=wt(l),c=e.buildDuplicateFoundError(t,l),u=dn(a),f={message:c,type:dt.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:u,occurrence:a.idx},h=GO(a);return h&&(f.parameter=h),f})}function IV(t){return`${dn(t)}_#_${t.idx}_#_${GO(t)}`}function GO(t){return t instanceof J?t.terminalType.name:t instanceof we?t.nonTerminalName:""}var J1=class extends tn{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function MV(t,e,n,r){let i=[];if(ot(e,(s,l)=>l.name===t.name?s+1:s,0)>1){let s=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:s,type:dt.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function $O(t,e,n){let r=[],i;return Le(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:dt.INVALID_RULE_OVERRIDE,ruleName:t})),r}function tx(t,e,n,r=[]){let i=[],o=lp(e.definition);if(Y(o))return[];{let s=t.name;Le(o,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:dt.LEFT_RECURSION,ruleName:s});let a=uo(o,r.concat([t])),c=Jt(a,u=>{let f=Oe(r);return f.push(u),tx(t,u,n,f)});return i.concat(c)}}function lp(t){let e=[];if(Y(t))return e;let n=wt(t);if(n instanceof we)e.push(n.referencedRule);else if(n instanceof Ce||n instanceof Ie||n instanceof Ye||n instanceof Xe||n instanceof We||n instanceof ae)e=e.concat(lp(n.definition));else if(n instanceof je)e=ut(V(n.definition,o=>lp(o.definition)));else if(!(n instanceof J))throw Error("non exhaustive match");let r=os(n),i=t.length>1;if(r&&i){let o=qe(t);return e.concat(lp(o))}else return e}var eu=class extends tn{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function KO(t,e){let n=new eu;t.accept(n);let r=n.alternations;return Jt(r,o=>{let s=ci(o.definition);return Jt(s,(l,a)=>{let c=rp([l],[],fi,1);return Y(c)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:o,emptyChoiceIdx:a}),type:dt.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:o.idx,alternative:a+1}]:[]})})}function qO(t,e,n){let r=new eu;t.accept(r);let i=r.alternations;return i=fo(i,s=>s.ignoreAmbiguities===!0),Jt(i,s=>{let l=s.idx,a=s.maxLookahead||e,c=Qc(l,t,a,s),u=NV(c,s,t,n),f=PV(c,s,t,n);return u.concat(f)})}var ex=class extends tn{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function LV(t,e){let n=new eu;t.accept(n);let r=n.alternations;return Jt(r,o=>o.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:o}),type:dt.TOO_MANY_ALTS,ruleName:t.name,occurrence:o.idx}]:[])}function YO(t,e,n){let r=[];return W(t,i=>{let o=new ex;i.accept(o);let s=o.allProductions;W(s,l=>{let a=op(l),c=l.maxLookahead||e,u=l.idx,h=Jc(u,i,a,c)[0];if(Y(ut(h))){let d=n.buildEmptyRepetitionError({topLevelRule:i,repetition:l});r.push({message:d,type:dt.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function NV(t,e,n,r){let i=[],o=ot(t,(l,a,c)=>(e.definition[c].ignoreAmbiguities===!0||W(a,u=>{let f=[c];W(t,(h,d)=>{c!==d&&sp(h,u)&&e.definition[d].ignoreAmbiguities!==!0&&f.push(d)}),f.length>1&&!sp(i,u)&&(i.push(u),l.push({alts:f,path:u}))}),l),[]);return V(o,l=>{let a=V(l.alts,u=>u+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:a,prefixPath:l.path}),type:dt.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:l.alts}})}function PV(t,e,n,r){let i=ot(t,(s,l,a)=>{let c=V(l,u=>({idx:a,path:u}));return s.concat(c)},[]);return Fr(Jt(i,s=>{if(e.definition[s.idx].ignoreAmbiguities===!0)return[];let a=s.idx,c=s.path,u=Ut(i,h=>e.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<a&&UO(h.path,c));return V(u,h=>{let d=[h.idx+1,a+1],p=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:d,prefixPath:h.path}),type:dt.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:p,alternatives:d}})}))}function _V(t,e,n){let r=[],i=V(e,o=>o.name);return W(t,o=>{let s=o.name;if(Le(i,s)){let l=n.buildNamespaceConflictError(o);r.push({message:l,type:dt.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),r}function XO(t){let e=Pl(t,{errMsgProvider:NO}),n={};return W(t.rules,r=>{n[r.name]=r}),PO(n,e.errMsgProvider)}function ZO(t){return t=Pl(t,{errMsgProvider:dr}),jO(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var QO="MismatchedTokenException",JO="NoViableAltException",eI="EarlyExitException",tI="NotAllInputParsedException",nI=[QO,JO,eI,tI];Object.freeze(nI);function po(t){return Le(nI,t.name)}var jl=class extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},fs=class extends jl{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=QO}},tu=class extends jl{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=JO}},nu=class extends jl{constructor(e,n){super(e,n),this.name=tI}},ru=class extends jl{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=eI}};var nx={},ix="InRuleRecoveryException",rx=class extends Error{constructor(e){super(e),this.name=ix}},ap=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=j(e,"recoveryEnabled")?e.recoveryEnabled:pn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=DV)}getTokenToInsert(e){let n=us(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,i){let o=this.findReSyncTokenType(),s=this.exportLexerState(),l=[],a=!1,c=this.LA(1),u=this.LA(1),f=()=>{let h=this.LA(0),d=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:c,previous:h,ruleName:this.getCurrRuleFullName()}),p=new fs(d,c,this.LA(0));p.resyncedTokens=ci(l),this.SAVE_ERROR(p)};for(;!a;)if(this.tokenMatcher(u,i)){f();return}else if(r.call(this)){f(),e.apply(this,n);return}else this.tokenMatcher(u,o)?a=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,l));this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){let r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new rx("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||Y(n))return!1;let r=this.LA(1);return zr(n,o=>this.tokenMatcher(r,o))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return Le(r,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),n=this.LA(1),r=2;for(;;){let i=zr(e,o=>q1(n,o));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return nx;let e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return V(e,(r,i)=>i===0?nx:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){let e=V(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return ut(e)}getFollowSetFromFollowKey(e){if(e===nx)return[hr];let n=e.ruleName+e.idxInCallingRule+jd+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,hr)||n.push(e),n}reSyncTo(e){let n=[],r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return ci(n)}attemptInRepetitionRecovery(e,n,r,i,o,s,l){}getCurrentGrammarPath(e,n){let r=this.getHumanReadableRuleStack(),i=Oe(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return V(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function DV(t,e,n,r,i,o,s){let l=this.getKeyForAutomaticLookahead(r,i),a=this.firstAfterRepMap[l];if(a===void 0){let h=this.getCurrRuleFullName(),d=this.getGAstProductions()[h];a=new o(d,i).startWalking(),this.firstAfterRepMap[l]=a}let c=a.token,u=a.occurrence,f=a.isEndOfRule;this.RULE_STACK.length===1&&f&&c===void 0&&(c=hr,u=1),!(c===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(c,u,s)&&this.tryInRepetitionRecovery(t,e,n,c)}function cp(t,e,n){return n|e|t}var iu=class{constructor(e){var n;this.maxLookahead=(n=e?.maxLookahead)!==null&&n!==void 0?n:pn.maxLookahead}validate(e){let n=this.validateNoLeftRecursion(e.rules);if(Y(n)){let r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),o=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...i,...o]}return n}validateNoLeftRecursion(e){return Jt(e,n=>tx(n,n,dr))}validateEmptyOrAlternatives(e){return Jt(e,n=>KO(n,dr))}validateAmbiguousAlternationAlternatives(e,n){return Jt(e,r=>qO(r,n,dr))}validateSomeNonEmptyLookaheadPath(e,n){return YO(e,n,dr)}buildLookaheadForAlternation(e){return DO(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,BO)}buildLookaheadForOptional(e){return FO(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,op(e.prodType),zO)}};var fp=class{initLooksAhead(e){this.dynamicTokensEnabled=j(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:pn.dynamicTokensEnabled,this.maxLookahead=j(e,"maxLookahead")?e.maxLookahead:pn.maxLookahead,this.lookaheadStrategy=j(e,"lookaheadStrategy")?e.lookaheadStrategy:new iu({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){W(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{let{alternation:r,repetition:i,option:o,repetitionMandatory:s,repetitionMandatoryWithSeparator:l,repetitionWithSeparator:a}=FV(n);W(r,c=>{let u=c.idx===0?"":c.idx;this.TRACE_INIT(`${dn(c)}${u}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:c.idx,rule:n,maxLookahead:c.maxLookahead||this.maxLookahead,hasPredicates:c.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=cp(this.fullRuleNameToShort[n.name],256,c.idx);this.setLaFuncCache(h,f)})}),W(i,c=>{this.computeLookaheadFunc(n,c.idx,768,"Repetition",c.maxLookahead,dn(c))}),W(o,c=>{this.computeLookaheadFunc(n,c.idx,512,"Option",c.maxLookahead,dn(c))}),W(s,c=>{this.computeLookaheadFunc(n,c.idx,1024,"RepetitionMandatory",c.maxLookahead,dn(c))}),W(l,c=>{this.computeLookaheadFunc(n,c.idx,1536,"RepetitionMandatoryWithSeparator",c.maxLookahead,dn(c))}),W(a,c=>{this.computeLookaheadFunc(n,c.idx,1280,"RepetitionWithSeparator",c.maxLookahead,dn(c))})})})}computeLookaheadFunc(e,n,r,i,o,s){this.TRACE_INIT(`${s}${n===0?"":n}`,()=>{let l=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:o||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),a=cp(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(a,l)})}getKeyForAutomaticLookahead(e,n){let r=this.getLastExplicitRuleShortName();return cp(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}},ox=class extends tn{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},up=new ox;function FV(t){up.reset(),t.accept(up);let e=up.dslMethods;return up.reset(),e}function ax(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function cx(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function rI(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function iI(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}var BV="name";function ux(t,e){Object.defineProperty(t,BV,{enumerable:!1,configurable:!0,writable:!1,value:e})}function zV(t,e){let n=Se(t),r=n.length;for(let i=0;i<r;i++){let o=n[i],s=t[o],l=s.length;for(let a=0;a<l;a++){let c=s[a];c.tokenTypeIdx===void 0&&this[c.name](c.children,e)}}}function oI(t,e){let n=function(){};ux(n,t+"BaseSemantics");let r={visit:function(i,o){if(G(i)&&(i=i[0]),!Ht(i))return this[i.name](i.children,o)},validateVisitor:function(){let i=VV(this,e);if(!Y(i)){let o=V(i,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${o.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function sI(t,e,n){let r=function(){};ux(r,t+"BaseSemanticsWithDefaults");let i=Object.create(n.prototype);return W(e,o=>{i[o]=zV}),r.prototype=i,r.prototype.constructor=r,r}var fx;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(fx||(fx={}));function VV(t,e){return UV(t,e)}function UV(t,e){let n=Ut(e,i=>Qt(t[i])===!1),r=V(n,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:fx.MISSING_METHOD,methodName:i}));return Fr(r)}var mp=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=j(e,"nodeLocationTracking")?e.nodeLocationTracking:pn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Be,this.cstFinallyStateUpdate=Be,this.cstPostTerminal=Be,this.cstPostNonTerminal=Be,this.cstPostRule=Be;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=cx,this.setNodeLocationFromNode=cx,this.cstPostRule=Be,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Be,this.setNodeLocationFromNode=Be,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=ax,this.setNodeLocationFromNode=ax,this.cstPostRule=Be,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Be,this.setNodeLocationFromNode=Be,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Be,this.setNodeLocationFromNode=Be,this.cstPostRule=Be,this.setInitialNodeLocation=Be;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){let n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){let r=this.CST_STACK[this.CST_STACK.length-1];rI(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){let r=this.CST_STACK[this.CST_STACK.length-1];iI(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(Ht(this.baseCstVisitorConstructor)){let e=oI(this.className,Se(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Ht(this.baseCstVisitorWithDefaultsConstructor)){let e=sI(this.className,Se(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var gp=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Gl}LA(e){let n=this.currIdx+e;return n<0||this.tokVectorLength<=n?Gl:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var yp=class{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=$l){if(Le(this.definedRulesNames,e)){let s={message:dr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:dt.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);let i=this.defineRule(e,n,r);return this[e]=i,i}OVERRIDE_RULE(e,n,r=$l){let i=$O(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let o=this.defineRule(e,n,r);return this[e]=o,o}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(po(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Wd(pe(this.gastProductionsCache))}};var xp=class{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Hl,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},j(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(G(e)){if(Y(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(G(e))this.tokensMap=ot(e,(o,s)=>(o[s.name]=s,o),{});else if(j(e,"modes")&&Vt(ut(pe(e.modes)),bO)){let o=ut(pe(e.modes)),s=_l(o);this.tokensMap=ot(s,(l,a)=>(l[a.name]=a,l),{})}else if(Fe(e))this.tokensMap=Oe(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=hr;let r=j(e,"modes")?ut(pe(e.modes)):pe(e),i=Vt(r,o=>Y(o.categoryMatches));this.tokenMatcher=i?Hl:fi,hi(pe(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=j(r,"resyncEnabled")?r.resyncEnabled:$l.resyncEnabled,o=j(r,"recoveryValueFunc")?r.recoveryValueFunc:$l.recoveryValueFunc,s=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;let l;return this.outputCst===!0?l=function(...u){try{this.ruleInvocationStateUpdate(s,e,this.subruleIdx),n.apply(this,u);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}}:l=function(...u){try{return this.ruleInvocationStateUpdate(s,e,this.subruleIdx),n.apply(this,u)}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}},Object.assign(l,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){let i=this.RULE_STACK.length===1,o=n&&!this.isBackTracking()&&this.recoveryEnabled;if(po(e)){let s=e;if(o){let l=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(l))if(s.resyncedTokens=this.reSyncTo(l),this.outputCst){let a=this.CST_STACK[this.CST_STACK.length-1];return a.recoveredNode=!0,a}else return r(e);else{if(this.outputCst){let a=this.CST_STACK[this.CST_STACK.length-1];a.recoveredNode=!0,s.partialCstResult=a}throw s}}else{if(i)return this.moveToTerminatedState(),r(e);throw s}}else throw e}optionInternal(e,n){let r=this.getKeyForAutomaticLookahead(512,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof e!="function"){o=e.DEF;let s=e.GATE;if(s!==void 0){let l=i;i=()=>s.call(this)&&l.call(this)}}else o=e;if(i.call(this)===!0)return o.call(this)}atLeastOneInternal(e,n){let r=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;let s=n.GATE;if(s!==void 0){let l=i;i=()=>s.call(this)&&l.call(this)}}else o=n;if(i.call(this)===!0){let s=this.doSingleRepetition(o);for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o)}else throw this.raiseEarlyExitException(e,ze.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],i,1024,e,tp)}atLeastOneSepFirstInternal(e,n){let r=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){let i=n.DEF,o=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let l=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,i,Zc],l,1536,e,Zc)}else throw this.raiseEarlyExitException(e,ze.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){let r=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;let l=n.GATE;if(l!==void 0){let a=i;i=()=>l.call(this)&&a.call(this)}}else o=n;let s=!0;for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],i,768,e,ep,s)}manySepFirstInternal(e,n){let r=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){let i=n.DEF,o=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let l=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,i,Xc],l,1280,e,Xc)}}repetitionSepSecondInternal(e,n,r,i,o){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,o],r,1536,e,o)}doSingleRepetition(e){let n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){let r=this.getKeyForAutomaticLookahead(256,n),i=G(e)?e:e.DEF,s=this.getLaFuncFromCache(r).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new nu(n,e))}}subruleInternal(e,n,r){let i;try{let o=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=e.apply(this,o),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(o){throw this.subruleInternalError(o,r,e.ruleName)}}subruleInternalError(e,n,r){throw po(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let i;try{let o=this.LA(1);this.tokenMatcher(o,e)===!0?(this.consumeToken(),i=o):this.consumeInternalError(e,o,r)}catch(o){i=this.consumeInternalRecovery(e,n,o)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,n,r){let i,o=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:o,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new fs(i,n,o))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(o){throw o.name===ix?r:o}}else throw r}saveRecogState(){let e=this.errors,n=Oe(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),hr)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var vp=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=j(e,"errorMessageProvider")?e.errorMessageProvider:pn.errorMessageProvider}SAVE_ERROR(e){if(po(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Oe(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Oe(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){let i=this.getCurrRuleFullName(),o=this.getGAstProductions()[i],l=Jc(e,o,n,this.maxLookahead)[0],a=[];for(let u=1;u<=this.maxLookahead;u++)a.push(this.LA(u));let c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:l,actual:a,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new ru(c,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){let r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],o=Qc(e,i,this.maxLookahead),s=[];for(let c=1;c<=this.maxLookahead;c++)s.push(this.LA(c));let l=this.LA(0),a=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:s,previous:l,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new tu(a,this.LA(1),l))}};var Sp=class{initContentAssist(){}computeContentAssist(e,n){let r=this.gastProductionsCache[e];if(Ht(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return rp([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let n=wt(e.ruleStack),i=this.getGAstProductions()[n];return new Jd(i,e).startWalking()}};var Cp={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Cp);var lI=!0,aI=Math.pow(2,8)-1,uI=ht({name:"RECORDING_PHASE_TOKEN",pattern:Ze.NA});hi([uI]);var fI=us(uI,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(fI);var WV={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},kp=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let n=e>0?e:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let n=0;n<10;n++){let r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return Gl}topLevelRuleRecord(e,n){try{let r=new en({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return su.call(this,Ie,e,n)}atLeastOneInternalRecord(e,n){su.call(this,Ye,n,e)}atLeastOneSepFirstInternalRecord(e,n){su.call(this,Xe,n,e,lI)}manyInternalRecord(e,n){su.call(this,ae,n,e)}manySepFirstInternalRecord(e,n){su.call(this,We,n,e,lI)}orInternalRecord(e,n){return jV.call(this,e,n)}subruleInternalRecord(e,n,r){if(wp(n),!e||j(e,"ruleName")===!1){let l=new Error(`<SUBRULE${cI(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw l.KNOWN_RECORDER_ERROR=!0,l}let i=Br(this.recordingProdStack),o=e.ruleName,s=new we({idx:n,nonTerminalName:o,label:r?.LABEL,referencedRule:void 0});return i.definition.push(s),this.outputCst?WV:Cp}consumeInternalRecord(e,n,r){if(wp(n),!G1(e)){let s=new Error(`<CONSUME${cI(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let i=Br(this.recordingProdStack),o=new J({idx:n,terminalType:e,label:r?.LABEL});return i.definition.push(o),fI}};function su(t,e,n,r=!1){wp(n);let i=Br(this.recordingProdStack),o=Qt(e)?e:e.DEF,s=new t({definition:[],idx:n});return r&&(s.separator=e.SEP),j(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),i.definition.push(s),this.recordingProdStack.pop(),Cp}function jV(t,e){wp(e);let n=Br(this.recordingProdStack),r=G(t)===!1,i=r===!1?t:t.DEF,o=new je({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});j(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD);let s=Vc(i,l=>Qt(l.GATE));return o.hasPredicates=s,n.definition.push(o),W(i,l=>{let a=new Ce({definition:[]});o.definition.push(a),j(l,"IGNORE_AMBIGUITIES")?a.ignoreAmbiguities=l.IGNORE_AMBIGUITIES:j(l,"GATE")&&(a.ignoreAmbiguities=!0),this.recordingProdStack.push(a),l.ALT.call(this),this.recordingProdStack.pop()}),Cp}function cI(t){return t===0?"":`${t}`}function wp(t){if(t<0||t>aI){let e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${aI+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var bp=class{initPerformanceTracer(e){if(j(e,"traceInitPerf")){let n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=pn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);let{time:i,value:o}=Hc(n),s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,o}else return n()}};function hI(t,e){e.forEach(n=>{let r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;let o=Object.getOwnPropertyDescriptor(r,i);o&&(o.get||o.set)?Object.defineProperty(t.prototype,i,o):t.prototype[i]=n.prototype[i]})})}var Gl=us(hr,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Gl);var pn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Qd,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),$l=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),dt;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(dt||(dt={}));var Ep=class t{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;let n=this.className;this.TRACE_INIT("toFastProps",()=>{Wc(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),W(this.definedRulesNames,i=>{let s=this[i].originalGrammarAction,l;this.TRACE_INIT(`${i} Rule`,()=>{l=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=l})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=XO({rules:pe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(Y(r)&&this.skipValidations===!1){let i=ZO({rules:pe(this.gastProductionsCache),tokenTypes:pe(this.tokensMap),errMsgProvider:dr,grammarName:n}),o=WO({lookaheadStrategy:this.lookaheadStrategy,rules:pe(this.gastProductionsCache),tokenTypes:pe(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,o)}}),Y(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let i=iO(pe(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,o;(o=(i=this.lookaheadStrategy).initialize)===null||o===void 0||o.call(i,{rules:pe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(pe(this.gastProductionsCache))})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!Y(this.definitionErrors))throw e=V(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;let r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),j(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=j(n,"skipValidations")?n.skipValidations:pn.skipValidations}};Ep.DEFER_DEFINITION_ERRORS_HANDLING=!1;hI(Ep,[ap,fp,mp,gp,xp,yp,vp,Sp,kp,bp]);var $V=ht({name:"NewLine",pattern:/\n/}),KV=ht({name:"DirectoryStart",pattern:/\//}),qV=ht({name:"FileExtension",pattern:/\.(tsx|jsx|ts|js|json|css|scss|html|md|py|java|cpp|c|go|rs|rb|php|yaml|yml|xml|sql|sh|bash)/}),YV=ht({name:"Component",pattern:/%[a-zA-Z][a-zA-Z0-9_]*/}),XV=ht({name:"FunctionToken",pattern:/\$[a-zA-Z][a-zA-Z0-9_]*\(\)/}),ZV=ht({name:"Reference",pattern:/@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*/}),QV=ht({name:"Variable",pattern:/var[a-zA-Z][a-zA-Z0-9_]*/}),JV=ht({name:"UserNote",pattern:/#/}),eU=ht({name:"StringLiteral",pattern:/"[^"]*"/}),tU=ht({name:"NumberLiteral",pattern:/\d+(\.\d+)?/}),nU=ht({name:"Equals",pattern:/=/}),rU=ht({name:"Identifier",pattern:/[a-zA-Z][a-zA-Z0-9_\-]*/}),iU=ht({name:"Content",pattern:/[^\n\r]+/}),oU=ht({name:"WhiteSpace",pattern:/[ \t]+/,group:Ze.SKIPPED}),sU=[oU,JV,eU,tU,YV,QV,ZV,XV,qV,KV,nU,rU,iU,$V],dI=new Ze(sU);function lU(t){switch(t){case"DirectoryStart":return"cm-directoryStart";case"Reference":return"cm-reference";case"FunctionToken":return"cm-function";case"Component":return"cm-component";case"Variable":return"cm-variable";case"FileExtension":return"cm-fileExtension";case"Identifier":return"cm-identifier";case"Comment":return"cm-comment";case"StringLiteral":return"cm-string";case"NumberLiteral":return"cm-number";case"BooleanLiteral":return"cm-boolean";case"SuggestionPrefix":return"cm-suggestion-prefix";case"FeedbackPrefix":return"cm-feedback-prefix";case"UserNote":return"cm-user-note";case"ToolTrigger":return"cm-tool-trigger";case"Content":return"cm-content-token";default:return"cm-defaultToken"}}var aU=Q.fromClass(class{constructor(t){this.decorations=this.buildDecorations(t.state.doc.toString())}update(t){t.docChanged&&(this.decorations=this.buildDecorations(t.state.doc.toString()))}buildDecorations(t){let e=t.split(`
`),n=[],r=0;for(let o=0;o<e.length;o++){let s=e[o];if(s.trim()){let a=dI.tokenize(s);for(let c of a.tokens){let u=lU(c.tokenType.name),f=M.mark({class:u}),h=r+c.startOffset,d=r+(c.endOffset??c.startOffset+c.image.length-1)+1;h!=null&&d!=null&&h<d&&n.push({from:h,to:d,decoration:f})}this.collectStructuralDecorations(n,s,r,o)}r+=s.length+1}n.sort((o,s)=>o.from-s.from);let i=new Ue;for(let{from:o,to:s,decoration:l}of n)i.add(o,s,l);return i.finish()}collectStructuralDecorations(t,e,n,r){let i=e.match(/^(\s*)/),o=i?i[1]:"",s=Math.floor(o.length/2),l=e.trim();if(!l)return;if(this.isStructuralLine(l)&&s>0){let c=M.mark({class:"cm-structure-connection",attributes:{style:`--parent-indent: ${s-1};`}});t.push({from:n,to:n+e.length,decoration:c})}}isStructuralLine(t){return t.startsWith("/")&&!t.includes(".")||!!t.match(/^[a-zA-Z][a-zA-Z0-9_]*\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)||!!t.match(/^\$[a-zA-Z][a-zA-Z0-9_]*\(\)$/)||!!t.match(/^%[a-zA-Z][a-zA-Z0-9_]*$/)||t.startsWith("#")||!!t.match(/^@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*$/)}},{decorations:t=>t.decorations});function pI(){return aU}function dx(t){let e=t.match(/^(\s*)/);return e?Math.floor(e[1].length/2):0}function mI(t){let e=[],n=t.toString().split(`
`);for(let r=0;r<n.length;r++){let i=n[r],o=i.trim(),s=dx(i);if(!o)continue;let l=null;if(o.startsWith("/")&&!o.includes(".")?l="directory":o.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md|vue|py|java|cpp|c|go|rs|php|rb|swift|kt|dart)$/)?l="file":o.startsWith("%")?l="component":o.startsWith("$")&&o.includes("()")&&(l="function"),l){let a=cU(n,r,s);if(a>r){let c=t.line(r+1).from,u=t.line(a+1).to;e.push({from:c,to:u,type:l,indentLevel:s})}}}return e}function cU(t,e,n){let r=e;for(let i=e+1;i<t.length;i++){let o=t[i];if(!o.trim())continue;if(dx(o)<=n)break;r=i}return r}var yI=ee.define({create(t){return mI(t.doc)},update(t,e){return e.docChanged?mI(e.state.doc):t}});function gI(t,e,n){let r=t.field(yI,!1);if(!r)return null;let o=t.doc.lineAt(e),s=o.text,l=s.trim(),a=dx(s);if(!(l.startsWith("/")&&!l.includes(".")||l.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md|vue|py|java|cpp|c|go|rs|php|rb|swift|kt|dart)$/)||l.startsWith("%")||l.startsWith("$")&&l.includes("()")))return null;let u=r.find(f=>f.from<=e&&f.to>=n&&f.indentLevel===a);return u&&u.to>u.from?{from:o.to,to:u.to}:null}function xI(){return[yI,Wy.of(gI),Q.fromClass(class{constructor(t){this.view=t}update(t){}}),R.domEventHandlers({keydown(t,e){if(t.ctrlKey&&t.shiftKey&&t.key==="["){t.preventDefault();let{state:n}=e,{selection:r}=n,i=n.doc.lineAt(r.main.head),o=gI(n,i.from,i.to);return o&&e.dispatch({effects:ll.of(o)}),!0}if(t.ctrlKey&&t.shiftKey&&t.key==="]"){t.preventDefault();let{state:n}=e,{selection:r}=n,i=n.doc.lineAt(r.main.head);return e.dispatch({effects:Qo.of({from:i.from,to:i.to})}),!0}return!1}})]}var px=class extends $e{constructor(n,r=0){super();this.iconType=n;this.level=r}toDOM(){let n=document.createElement("span");switch(n.className=`cm-file-structure-icon cm-${this.iconType}-icon`,n.style.marginLeft=`${this.level*16}px`,n.style.display="inline-block",n.style.width="16px",n.style.height="16px",n.style.marginRight="6px",n.style.verticalAlign="text-top",this.iconType){case"directory":n.innerHTML='<svg viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M853.333333 256H469.333333l-85.333333-85.333333H170.666667c-46.933333 0-85.333333 38.4-85.333334 85.333333v170.666667h853.333334v-85.333334c0-46.933333-38.4-85.333333-85.333334-85.333333z" fill="#FFA000"></path><path d="M853.333333 256H170.666667c-46.933333 0-85.333333 38.4-85.333334 85.333333v426.666667c0 46.933333 38.4 85.333333 85.333334 85.333333h682.666666c46.933333 0 85.333333-38.4 85.333334-85.333333V341.333333c0-46.933333-38.4-85.333333-85.333334-85.333333z" fill="#FFCA28"></path></g></svg>',n.style.color="#f59e0b";break;case"file-jsx":case"file-tsx":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M18.6789 15.9759C18.6789 14.5415 17.4796 13.3785 16 13.3785C14.5206 13.3785 13.3211 14.5415 13.3211 15.9759C13.3211 17.4105 14.5206 18.5734 16 18.5734C17.4796 18.5734 18.6789 17.4105 18.6789 15.9759Z" fill="#53C1DE"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M24.7004 11.1537C25.2661 8.92478 25.9772 4.79148 23.4704 3.39016C20.9753 1.99495 17.7284 4.66843 16.0139 6.27318C14.3044 4.68442 10.9663 2.02237 8.46163 3.42814C5.96751 4.82803 6.73664 8.8928 7.3149 11.1357C4.98831 11.7764 1 13.1564 1 15.9759C1 18.7874 4.98416 20.2888 7.29698 20.9289C6.71658 23.1842 5.98596 27.1909 8.48327 28.5877C10.9973 29.9932 14.325 27.3945 16.0554 25.7722C17.7809 27.3864 20.9966 30.0021 23.4922 28.6014C25.9956 27.1963 25.3436 23.1184 24.7653 20.8625C27.0073 20.221 31 18.7523 31 15.9759C31 13.1835 26.9903 11.7923 24.7004 11.1537ZM24.4162 19.667C24.0365 18.5016 23.524 17.2623 22.8971 15.9821C23.4955 14.7321 23.9881 13.5088 24.3572 12.3509C26.0359 12.8228 29.7185 13.9013 29.7185 15.9759C29.7185 18.07 26.1846 19.1587 24.4162 19.667ZM22.85 27.526C20.988 28.571 18.2221 26.0696 16.9478 24.8809C17.7932 23.9844 18.638 22.9422 19.4625 21.7849C20.9129 21.6602 22.283 21.4562 23.5256 21.1777C23.9326 22.7734 24.7202 26.4763 22.85 27.526ZM9.12362 27.5111C7.26143 26.47 8.11258 22.8946 8.53957 21.2333C9.76834 21.4969 11.1286 21.6865 12.5824 21.8008C13.4123 22.9332 14.2816 23.9741 15.1576 24.8857C14.0753 25.9008 10.9945 28.557 9.12362 27.5111ZM2.28149 15.9759C2.28149 13.874 5.94207 12.8033 7.65904 12.3326C8.03451 13.5165 8.52695 14.7544 9.12123 16.0062C8.51925 17.2766 8.01977 18.5341 7.64085 19.732C6.00369 19.2776 2.28149 18.0791 2.28149 15.9759ZM9.1037 4.50354C10.9735 3.45416 13.8747 6.00983 15.1159 7.16013C14.2444 8.06754 13.3831 9.1006 12.5603 10.2265C11.1494 10.3533 9.79875 10.5569 8.55709 10.8297C8.09125 9.02071 7.23592 5.55179 9.1037 4.50354ZM20.3793 11.5771C21.3365 11.6942 22.2536 11.85 23.1147 12.0406C22.8562 12.844 22.534 13.6841 22.1545 14.5453C21.6044 13.5333 21.0139 12.5416 20.3793 11.5771ZM16.0143 8.0481C16.6054 8.66897 17.1974 9.3623 17.7798 10.1145C16.5985 10.0603 15.4153 10.0601 14.234 10.1137C14.8169 9.36848 15.414 8.67618 16.0143 8.0481ZM9.8565 14.5444C9.48329 13.6862 9.16398 12.8424 8.90322 12.0275C9.75918 11.8418 10.672 11.69 11.623 11.5748C10.9866 12.5372 10.3971 13.5285 9.8565 14.5444ZM11.6503 20.4657C10.6679 20.3594 9.74126 20.2153 8.88556 20.0347C9.15044 19.2055 9.47678 18.3435 9.85796 17.4668C10.406 18.4933 11.0045 19.4942 11.6503 20.4657ZM16.0498 23.9915C15.4424 23.356 14.8365 22.6531 14.2448 21.8971C15.4328 21.9423 16.6231 21.9424 17.811 21.891C17.2268 22.6608 16.6369 23.3647 16.0498 23.9915ZM22.1667 17.4222C22.5677 18.3084 22.9057 19.1657 23.1742 19.9809C22.3043 20.1734 21.3652 20.3284 20.3757 20.4435C21.015 19.4607 21.6149 18.4536 22.1667 17.4222ZM18.7473 20.5941C16.9301 20.72 15.1016 20.7186 13.2838 20.6044C12.2509 19.1415 11.3314 17.603 10.5377 16.0058C11.3276 14.4119 12.2404 12.8764 13.2684 11.4158C15.0875 11.2825 16.9178 11.2821 18.7369 11.4166C19.7561 12.8771 20.6675 14.4086 21.4757 15.9881C20.6771 17.5812 19.7595 19.1198 18.7473 20.5941ZM22.8303 4.4666C24.7006 5.51254 23.8681 9.22726 23.4595 10.8426C22.2149 10.5641 20.8633 10.3569 19.4483 10.2281C18.6239 9.09004 17.7698 8.05518 16.9124 7.15949C18.1695 5.98441 20.9781 3.43089 22.8303 4.4666Z" fill="#53C1DE"></path> </g></svg>',n.style.color="#3b82f6";break;case"file-js":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_js</title><path d="M18.774,19.7a3.727,3.727,0,0,0,3.376,2.078c1.418,0,2.324-.709,2.324-1.688,0-1.173-.931-1.589-2.491-2.272l-.856-.367c-2.469-1.052-4.11-2.37-4.11-5.156,0-2.567,1.956-4.52,5.012-4.52A5.058,5.058,0,0,1,26.9,10.52l-2.665,1.711a2.327,2.327,0,0,0-2.2-1.467,1.489,1.489,0,0,0-1.638,1.467c0,1.027.636,1.442,2.1,2.078l.856.366c2.908,1.247,4.549,2.518,4.549,5.376,0,3.081-2.42,4.769-5.671,4.769a6.575,6.575,0,0,1-6.236-3.5ZM6.686,20c.538.954,1.027,1.76,2.2,1.76,1.124,0,1.834-.44,1.834-2.15V7.975h3.422V19.658c0,3.543-2.078,5.156-5.11,5.156A5.312,5.312,0,0,1,3.9,21.688Z" style="fill:#f5de19"></path></g></svg>',n.style.color="#f59e0b";break;case"file-ts":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_typescript</title><path d="M23.827,8.243A4.424,4.424,0,0,1,26.05,9.524a5.853,5.853,0,0,1,.852,1.143c.011.045-1.534,1.083-2.471,1.662-.034.023-.169-.124-.322-.35a2.014,2.014,0,0,0-1.67-1c-1.077-.074-1.771.49-1.766,1.433a1.3,1.3,0,0,0,.153.666c.237.49.677.784,2.059,1.383,2.544,1.095,3.636,1.817,4.31,2.843a5.158,5.158,0,0,1,.416,4.333,4.764,4.764,0,0,1-3.932,2.815,10.9,10.9,0,0,1-2.708-.028,6.531,6.531,0,0,1-3.616-1.884,6.278,6.278,0,0,1-.926-1.371,2.655,2.655,0,0,1,.327-.208c.158-.09.756-.434,1.32-.761L19.1,19.6l.214.312a4.771,4.771,0,0,0,1.35,1.292,3.3,3.3,0,0,0,3.458-.175,1.545,1.545,0,0,0,.2-1.974c-.276-.395-.84-.727-2.443-1.422a8.8,8.8,0,0,1-3.349-2.055,4.687,4.687,0,0,1-.976-1.777,7.116,7.116,0,0,1-.062-2.268,4.332,4.332,0,0,1,3.644-3.374A9,9,0,0,1,23.827,8.243ZM15.484,9.726l.011,1.454h-4.63V24.328H7.6V11.183H2.97V9.755A13.986,13.986,0,0,1,3.01,8.289c.017-.023,2.832-.034,6.245-.028l6.211.017Z" style="fill:#007acc"></path></g></svg>';break;case"file-css":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 28L4 3H28L26 28L16 31L6 28Z" fill="#1172B8"></path> <path d="M26 5H16V29.5L24 27L26 5Z" fill="#33AADD"></path> <path d="M19.5 17.5H9.5L9 14L17 11.5H9L8.5 8.5H24L23.5 12L17 14.5H23L22 24L16 26L10 24L9.5 19H12.5L13 21.5L16 22.5L19 21.5L19.5 17.5Z" fill="white"></path> </g></svg>',n.style.color="#1172B8";break;case"file-html":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 28L4 3H28L26 28L16 31L6 28Z" fill="#E44D26"></path> <path d="M26 5H16V29.5L24 27L26 5Z" fill="#F16529"></path> <path d="M9.5 17.5L8.5 8H24L23.5 11H11.5L12 14.5H23L22 24L16 26L10 24L9.5 19H12.5L13 21.5L16 22.5L19 21.5L19.5 17.5H9.5Z" fill="white"></path> </g></svg>',n.style.color="#F16529";break;case"file-md":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_markdown</title><rect x="2.5" y="7.955" width="27" height="16.091" style="fill:none;stroke:#755838"></rect><polygon points="5.909 20.636 5.909 11.364 8.636 11.364 11.364 14.773 14.091 11.364 16.818 11.364 16.818 20.636 14.091 20.636 14.091 15.318 11.364 18.727 8.636 15.318 8.636 20.636 5.909 20.636" style="fill:#755838"></polygon><polygon points="22.955 20.636 18.864 16.136 21.591 16.136 21.591 11.364 24.318 11.364 24.318 16.136 27.045 16.136 22.955 20.636" style="fill:#755838"></polygon></g></svg>',n.style.color="#3b82f6";break;case"file-json":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_json</title><path d="M4.014,14.976a2.51,2.51,0,0,0,1.567-.518A2.377,2.377,0,0,0,6.386,13.1,15.261,15.261,0,0,0,6.6,10.156q.012-2.085.075-2.747a5.236,5.236,0,0,1,.418-1.686,3.025,3.025,0,0,1,.755-1.018A3.046,3.046,0,0,1,9,4.125,6.762,6.762,0,0,1,10.544,4h.7V5.96h-.387a2.338,2.338,0,0,0-1.723.468A3.4,3.4,0,0,0,8.709,8.52a36.054,36.054,0,0,1-.137,4.133,4.734,4.734,0,0,1-.768,2.06A4.567,4.567,0,0,1,6.1,16a3.809,3.809,0,0,1,1.992,1.754,8.861,8.861,0,0,1,.618,3.865q0,2.435.05,2.9A1.755,1.755,0,0,0,9.264,25.7a2.639,2.639,0,0,0,1.592.337h.387V28h-.7a5.655,5.655,0,0,1-1.773-.2,2.97,2.97,0,0,1-1.324-.93,3.353,3.353,0,0,1-.681-1.63A24.175,24.175,0,0,1,6.6,22.006,16.469,16.469,0,0,0,6.386,18.9a2.408,2.408,0,0,0-.805-1.361,2.489,2.489,0,0,0-1.567-.524Z" style="fill:#f5de19"></path><path d="M27.986,17.011a2.489,2.489,0,0,0-1.567.524,2.408,2.408,0,0,0-.805,1.361,16.469,16.469,0,0,0-.212,3.109,24.175,24.175,0,0,1-.169,3.234,3.353,3.353,0,0,1-.681,1.63,2.97,2.97,0,0,1-1.324.93,5.655,5.655,0,0,1-1.773.2h-.7V26.04h.387a2.639,2.639,0,0,0,1.592-.337,1.755,1.755,0,0,0,.506-1.186q.05-.462.05-2.9a8.861,8.861,0,0,1,.618-3.865A3.809,3.809,0,0,1,25.9,16a4.567,4.567,0,0,1-1.7-1.286,4.734,4.734,0,0,1-.768-2.06,36.054,36.054,0,0,1-.137-4.133,3.4,3.4,0,0,0-.425-2.092,2.338,2.338,0,0,0-1.723-.468h-.387V4h.7A6.762,6.762,0,0,1,23,4.125a3.046,3.046,0,0,1,1.149.581,3.025,3.025,0,0,1,.755,1.018,5.236,5.236,0,0,1,.418,1.686q.062.662.075,2.747a15.261,15.261,0,0,0,.212,2.947,2.377,2.377,0,0,0,.805,1.355,2.51,2.51,0,0,0,1.567.518Z" style="fill:#f5de19"></path></g></svg>',n.style.color="#3b82f6";break;case"function":n.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.576"></g><g id="SVGRepo_iconCarrier"> <path d="M13.5 4.50012C10.5 3.50012 9.5 7.00012 9.5 7.00012L7 16.0001C7 16.0001 5.5 20.0001 2.5 19.0001M5.5 9.00007H14L16 15.0001C16 15.0001 17 17.0001 18.5 15.5001M11 15.5C13.5 16.5 16.5 8.50001 19 9.00001" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',n.style.color="#10b981";break;case"component":n.innerHTML='<svg viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>function-block</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Combined-Shape" fill="#8b5cf6"> <path d="M362.666667,85.3333333 L362.666333,234.666333 L426.666667,234.666667 L426.666667,277.333333 L362.666333,277.333333 L362.666667,426.666667 L149.333333,426.666667 L149.333333,341.333333 L85.3333333,341.333333 L85.3333333,298.666667 L149.333333,298.666333 L149.333333,213.333333 L85.3333333,213.333333 L85.3333333,170.666667 L149.333333,170.666333 L149.333333,85.3333333 L362.666667,85.3333333 Z M320,128 L192,128 L192,384 L320,384 L320,128 Z"> </path> </g> </g> </g></svg>',n.style.color="#8b5cf6";break;case"reference":n.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M13.0607 8.11097L14.4749 9.52518C17.2086 12.2589 17.2086 16.691 14.4749 19.4247L14.1214 19.7782C11.3877 22.5119 6.95555 22.5119 4.22188 19.7782C1.48821 17.0446 1.48821 12.6124 4.22188 9.87874L5.6361 11.293C3.68348 13.2456 3.68348 16.4114 5.6361 18.364C7.58872 20.3166 10.7545 20.3166 12.7071 18.364L13.0607 18.0104C15.0133 16.0578 15.0133 12.892 13.0607 10.9394L11.6465 9.52518L13.0607 8.11097Z" fill="#f59e0b"></path> <path d="M10.9393 15.8891L9.52513 14.4749C6.79146 11.7412 6.79146 7.309 9.52513 4.57534L9.87868 4.22179C12.6124 1.48812 17.0445 1.48812 19.7782 4.22179C22.5119 6.95546 22.5119 11.3876 19.7782 14.1213L18.364 12.7071C20.3166 10.7544 20.3166 7.58861 18.364 5.63599C16.4114 3.68337 13.2456 3.68337 11.293 5.63599L10.9393 5.98954C8.98670 7.94216 8.98670 11.1080 10.9393 13.0606L12.3535 14.4749L10.9393 15.8891Z" fill="#f59e0b"></path> </g></svg>',n.style.color="#f59e0b";break;case"user_note":n.innerHTML='<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" fill="#000000" transform="matrix(-1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>comment-3</title> <desc>Created with Sketch Beta.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="Icon-Set" sketch:type="MSLayerGroup" transform="translate(-204.000000, -255.000000)" fill="#000000"> <path d="M228,267 C226.896,267 226,267.896 226,269 C226,270.104 226.896,271 228,271 C229.104,271 230,270.104 230,269 C230,267.896 229.104,267 228,267 L228,267 Z M220,281 C218.832,281 217.704,280.864 216.62,280.633 L211.912,283.463 L211.975,278.824 C208.366,276.654 206,273.066 206,269 C206,262.373 212.268,257 220,257 C227.732,257 234,262.373 234,269 C234,275.628 227.732,281 220,281 L220,281 Z M220,255 C211.164,255 204,261.269 204,269 C204,273.419 206.345,277.354 210,279.919 L210,287 L217.009,282.747 C217.979,282.907 218.977,283 220,283 C228.836,283 236,276.732 236,269 C236,261.269 228.836,255 220,255 L220,255 Z M212,267 C210.896,267 210,267.896 210,269 C210,270.104 210.896,271 212,271 C213.104,271 214,270.104 214,269 C214,267.896 213.104,267 212,267 L212,267 Z M220,267 C218.896,267 218,267.896 218,269 C218,270.104 218.896,271 220,271 C221.104,271 222,270.104 222,269 C222,267.896 221.104,267 220,267 L220,267 Z" id="comment-3" sketch:type="MSShapeGroup"> </path> </g> </g> </g></svg>',n.style.color="#6b7280";break;default:n.innerHTML="",n.style.color="#6b7280"}return n}};function uU(t){let e=t.match(/^(\s*)/);return e?Math.floor(e[1].length/2):0}function fU(t){let e=t.toLowerCase();return e.includes(".ts")||e.includes(".tsx")?"file-ts":e.includes(".js")||e.includes(".jsx")?"file-js":e.includes(".css")||e.includes(".scss")?"file-css":e.includes(".html")?"file-html":e.includes(".md")?"file-md":e.includes(".json")?"file-json":e.includes(".txt")?"file-txt":e.includes(".yml")?"file-yml":e.includes(".yaml")?"file-yaml":"file"}function hU(t,e){let n=[],r=t.trim(),i=uU(t);if(!r)return n;let o="",s=!1;if(r.startsWith("/")&&!r.includes("."))o="directory",s=!0;else if(r.match(/^[a-zA-Z][a-zA-Z0-9_]*\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)){let l=r.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)?.[0]||"";o=fU(l),s=!0}else r.match(/^\$[a-zA-Z][a-zA-Z0-9_]*\(\)$/)?(o="function",s=!0):r.match(/^%[a-zA-Z][a-zA-Z0-9_]*$/)?(o="component",s=!0):r.startsWith("#")?(o="user_note",s=!0):r.match(/^@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*$/)&&(o="reference",s=!0);if(s){let l=M.widget({widget:new px(o,i),side:-1}),a=t.match(/^(\s*)/),c=a?a[1].length:0;n.push(l)}return n}var dU=Q.fromClass(class{constructor(t){this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){let e=new Ue,n=t.state.doc;for(let r=1;r<=n.lines;r++){let i=n.line(r),o=hU(i.text,r);for(let s of o){let l=i.text.match(/^(\s*)/),a=l?l[1].length:0,c=i.from+a;e.add(c,c,s)}}return e.finish()}},{decorations:t=>t.decorations});function vI(){return dU}var gx=H.define(),yx=H.define(),xx=H.define(),kI=ee.define({create(){return[]},update(t,e){for(let n of e.effects){if(n.is(gx))return n.value.map((r,i)=>({...r,id:r.id||`change-${Date.now()}-${i}`}));if(n.is(yx))return[];if(n.is(xx))return console.log("rejecting change",t.find(r=>r.id===n.value.changeId)),t.filter(r=>r.id!==n.value.changeId)}return t}}),pU=M.line({class:"cm-feedbackAddedLine",attributes:{"data-feedback-type":"added"}}),mU=M.line({class:"cm-feedbackModifiedLine",attributes:{"data-feedback-type":"modified"}}),gU=M.line({class:"cm-feedbackRenamedLine",attributes:{"data-feedback-type":"renamed"}}),yU=M.line({class:"cm-feedbackMovedLine",attributes:{"data-feedback-type":"moved"}}),xU=M.line({class:"cm-feedbackRefactoredLine",attributes:{"data-feedback-type":"refactored"}}),vU=new class extends He{constructor(){super(...arguments);this.elementClass="cm-feedbackAddedGutter"}},SU=new class extends He{constructor(){super(...arguments);this.elementClass="cm-feedbackModifiedGutter"}},kU=new class extends He{constructor(){super(...arguments);this.elementClass="cm-feedbackRemovedGutter"}},wU=new class extends He{constructor(){super(...arguments);this.elementClass="cm-feedbackRenamedGutter"}},CU=new class extends He{constructor(){super(...arguments);this.elementClass="cm-feedbackMovedGutter"}},bU=new class extends He{constructor(){super(...arguments);this.elementClass="cm-feedbackRefactoredGutter"}},mx=class extends $e{constructor(n,r){super();this.change=n;this.view=r}toDOM(n){let r=document.createElement("div");r.className="cm-feedbackDeletedChunk";let i=this.change.indentLevel||0,o=(this.change.content||"").split(`
`)[0]||this.change.element.name,s="  ".repeat(i),l=r.appendChild(document.createElement("span"));l.className="cm-feedbackButtonContainer cm-feedbackDeletedButton";let a=l.appendChild(document.createElement("button"));if(a.className="cm-feedbackRejectButton",a.textContent="\u2715",a.title="Restore this content",a.onclick=c=>{c.preventDefault(),c.stopPropagation();let u=this.change.id||"unknown";this.view.dispatch({effects:xx.of({changeId:u})});let f={...this.change,element:{...this.change.element}};window.dispatchEvent(new CustomEvent("feedbackChangeRejected",{detail:{change:f}}))},o.trim()){let c=r.appendChild(document.createElement("span"));c.className="cm-feedbackDeletedText",c.textContent=s+o.trim()}return r}get estimatedHeight(){return 18}},hs=class extends $e{constructor(n,r){super();this.change=n;this.view=r}toDOM(n){let r=document.createElement("div");r.className="cm-feedbackHoverButton";let i=r.appendChild(document.createElement("button"));switch(i.className="cm-feedbackRejectButton",this.change.type){case"add":i.textContent="\u2715",i.title="Remove this addition";break;case"modify":i.textContent="\u21B6",i.title="Revert this change";break;case"rename":i.textContent="\u21B6",i.title=`Revert rename (was: ${this.change.fromName||this.change.originalContent||"unknown"})`;break;case"move":i.textContent="\u21B6",i.title=`Revert move (from: ${this.change.fromPath||this.change.originalContent||"unknown"})`;break;case"refactor":i.textContent="\u21B6",i.title=`Revert refactor (${this.change.refactorType||this.change.originalContent||"refactor"})`;break}return i.onclick=o=>{o.preventDefault(),o.stopPropagation();let s=this.change.id||"unknown";this.view.dispatch({effects:xx.of({changeId:s})});let l={...this.change,element:{...this.change.element}};window.dispatchEvent(new CustomEvent("feedbackChangeRejected",{detail:{change:l}}))},r}get estimatedHeight(){return 0}};function EU(t,e){let n=t.toString().split(`
`);if(e.lineNumber&&e.lineNumber>0&&e.lineNumber<=n.length)return e.lineNumber;let r=e.element,i=[];switch(r.type){case"component":i.push(`%${r.name}`);break;case"function":i.push(`$${r.name}()`);break;case"file":if(i.push(r.name),r.path){let o=r.path.split("/"),s=o[o.length-1];s!==r.name&&i.push(s)}break;case"directory":if(i.push(`/${r.name}`),r.path){let o=r.path.split("/").pop();o&&o!==r.name&&i.push(`/${o}`)}break;case"reference":i.push(`@${r.name}`),r.path&&i.push(`@${r.path}`);break;default:i.push(r.name)}if(e.indentLevel!==void 0){for(let o=0;o<n.length;o++){let s=n[o],l=s.match(/^(\s*)/)?.[1]||"",a=s.trim();if(Math.floor(l.length/2)===e.indentLevel){for(let u of i)if(a===u)return o+1}}for(let o=0;o<n.length;o++){let s=n[o],l=s.match(/^(\s*)/)?.[1]||"",a=s.trim();if(Math.floor(l.length/2)===e.indentLevel){for(let u of i)if(a.includes(u))return o+1}}}for(let o=0;o<n.length;o++){let s=n[o].trim();for(let l of i)if(s===l)return o+1}for(let o=0;o<n.length;o++){let s=n[o].trim();for(let l of i)if(s.includes(l))return o+1}return-1}function SI(t){let e=t.state.field(kI),n=t.state.doc,r=new Ue,i=new Ue,o=new Map;for(let c of e){let u=EU(n,c);u>0&&(o.has(u)||o.set(u,[]),o.get(u).push(c))}let s=Array.from(o.keys()).sort((c,u)=>c-u);for(let c of s){let u=o.get(c),f;c<=n.lines?f=n.line(c):f=n.line(n.lines);let d=u.sort((p,x)=>{let v={remove:6,refactor:5,move:4,rename:3,modify:2,add:1};return(v[x.type]||0)-(v[p.type]||0)})[0];switch(d.type){case"add":r.add(f.from,f.from,pU),i.add(f.from,f.from,vU);let p=M.widget({widget:new hs(d,t),side:1});r.add(f.to,f.to,p);break;case"modify":r.add(f.from,f.from,mU),i.add(f.from,f.from,SU);let x=M.widget({widget:new hs(d,t),side:1});r.add(f.to,f.to,x);break;case"rename":r.add(f.from,f.from,gU),i.add(f.from,f.from,wU);let v=M.widget({widget:new hs(d,t),side:1});r.add(f.to,f.to,v);break;case"move":r.add(f.from,f.from,yU),i.add(f.from,f.from,CU);let m=M.widget({widget:new hs(d,t),side:1});r.add(f.to,f.to,m);break;case"refactor":r.add(f.from,f.from,xU),i.add(f.from,f.from,bU);let g=M.widget({widget:new hs(d,t),side:1});r.add(f.to,f.to,g);break;case"remove":let y=M.widget({widget:new mx(d,t),side:1});r.add(f.from,f.from,y),i.add(f.from,f.from,kU);break}}let l=r.finish(),a=i.finish();return{deco:l,gutter:a}}var wI=Q.fromClass(class{constructor(t){let e=SI(t);this.deco=e.deco,this.gutter=e.gutter}update(t){if(t.transactions.some(n=>n.effects.some(r=>r.is(gx)||r.is(yx)))){let n=SI(t.view);this.deco=n.deco,this.gutter=n.gutter}else t.docChanged&&(this.deco=this.deco.map(t.changes),this.gutter=this.gutter.map(t.changes))}},{decorations:t=>t.deco}),TU=En.low(Go({class:"cm-feedbackGutter",markers:t=>t.plugin(wI)?.gutter||te.empty})),AU=R.baseTheme({".cm-feedbackAddedLine":{backgroundColor:"rgba(34, 187, 34, 0.15)",paddingLeft:"4px",position:"relative"},".cm-feedbackModifiedLine":{backgroundColor:"rgba(255, 165, 0, 0.15)",borderLeft:"3px solid rgba(255, 165, 0, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackRenamedLine":{backgroundColor:"rgba(58, 150, 221, 0.15)",borderLeft:"3px solid rgba(58, 150, 221, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackMovedLine":{backgroundColor:"rgba(147, 112, 219, 0.15)",borderLeft:"3px solid rgba(147, 112, 219, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackRefactoredLine":{backgroundColor:"rgba(0, 150, 136, 0.15)",borderLeft:"3px solid rgba(0, 150, 136, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackRemovedLine":{},".cm-feedbackDeletedChunk":{display:"flex",alignItems:"center",gap:"8px",paddingLeft:"4px",borderLeft:"3px solid rgba(238, 68, 51, 0.6)",margin:"2px 0",whiteSpace:"pre"},".cm-feedbackDeletedText":{textDecoration:"line-through",color:"#888",fontSize:"0.85em",fontFamily:"monospace",opacity:.7},".cm-feedbackDeletedButton":{opacity:"0",transition:"opacity 0.2s ease"},".cm-feedbackDeletedChunk:hover .cm-feedbackDeletedButton":{opacity:"1"},".cm-feedbackGutter":{width:"4px",paddingLeft:"1px"},".cm-feedbackAddedGutter":{background:"#22bb22",borderRadius:"2px"},".cm-feedbackModifiedGutter":{background:"#ffa500",borderRadius:"2px"},".cm-feedbackRenamedGutter":{background:"#3a96dd",borderRadius:"2px"},".cm-feedbackMovedGutter":{background:"#9370db",borderRadius:"2px"},".cm-feedbackRefactoredGutter":{background:"#009688",borderRadius:"2px"},".cm-feedbackRemovedGutter":{background:"#ee4433",borderRadius:"2px"},".cm-feedbackHoverButton":{display:"inline-block",marginLeft:"8px",opacity:"0",transition:"opacity 0.2s ease",pointerEvents:"none",position:"relative",zIndex:"10"},".cm-line:hover .cm-feedbackHoverButton":{opacity:"1",pointerEvents:"auto"},".cm-feedbackAddedLine:hover .cm-feedbackHoverButton, .cm-feedbackModifiedLine:hover .cm-feedbackHoverButton, .cm-feedbackRenamedLine:hover .cm-feedbackHoverButton, .cm-feedbackMovedLine:hover .cm-feedbackHoverButton, .cm-feedbackRefactoredLine:hover .cm-feedbackHoverButton":{opacity:"1",pointerEvents:"auto"},".cm-feedbackRejectButton":{background:"rgba(238, 68, 51, 0.8)",color:"white",border:"none",borderRadius:"3px",padding:"2px 6px",fontSize:"12px",cursor:"pointer",fontWeight:"bold",transition:"background-color 0.2s ease"},".cm-feedbackRejectButton:hover":{background:"rgba(238, 68, 51, 1)"},".cm-feedbackButtonContainer":{position:"absolute",right:"8px",top:"4px",zIndex:"10"},"&dark .cm-feedbackAddedLine":{backgroundColor:"rgba(34, 187, 34, 0.2)"},"&dark .cm-feedbackModifiedLine":{backgroundColor:"rgba(255, 165, 0, 0.2)",borderLeft:"3px solid rgba(255, 165, 0, 0.8)"},"&dark .cm-feedbackRenamedLine":{backgroundColor:"rgba(58, 150, 221, 0.2)",borderLeft:"3px solid rgba(58, 150, 221, 0.8)"},"&dark .cm-feedbackMovedLine":{backgroundColor:"rgba(147, 112, 219, 0.2)",borderLeft:"3px solid rgba(147, 112, 219, 0.8)"},"&dark .cm-feedbackRefactoredLine":{backgroundColor:"rgba(0, 150, 136, 0.2)",borderLeft:"3px solid rgba(0, 150, 136, 0.8)"},"&dark .cm-feedbackRemovedLine":{},"&dark .cm-feedbackDeletedChunk":{borderLeft:"3px solid rgba(255, 102, 85, 0.8)"},"&dark .cm-feedbackDeletedText":{color:"#999",opacity:.6},"&dark .cm-feedbackAddedGutter":{background:"#44dd44"},"&dark .cm-feedbackModifiedGutter":{background:"#ffbb33"},"&dark .cm-feedbackRenamedGutter":{background:"#5ab4f5"},"&dark .cm-feedbackMovedGutter":{background:"#b399e3"},"&dark .cm-feedbackRefactoredGutter":{background:"#00bfa5"},"&dark .cm-feedbackRemovedGutter":{background:"#ff6655"},"&dark .cm-feedbackRejectButton":{background:"rgba(255, 102, 85, 0.8)"},"&dark .cm-feedbackRejectButton:hover":{background:"rgba(255, 102, 85, 1)"}});function CI(){return[kI,wI,TU,AU]}function vx(t,e){t.dispatch({effects:gx.of(e)})}function Kl(t){t.dispatch({effects:yx.of()})}var bI=yt.define(),wx=H.define(),au=H.define(),Sx=H.define(),lu=H.define(),Tp=H.define(),ql=ee.define({create:()=>({suggestions:[],acceptedSuggestions:new Set,highlightedSuggestion:null,isNavigating:!1,rejectedPatterns:new Set}),update(t,e){let n={...t};for(let r of e.effects)r.is(wx)?(n.suggestions=r.value.suggestions,n.acceptedSuggestions=new Set,n.highlightedSuggestion=null,n.isNavigating=!1):r.is(au)?(n.suggestions=[],n.acceptedSuggestions=new Set,n.highlightedSuggestion=null,n.isNavigating=!1):r.is(Sx)?(n.acceptedSuggestions=new Set(n.acceptedSuggestions),n.acceptedSuggestions.add(r.value)):r.is(lu)?n.highlightedSuggestion=r.value:r.is(Tp)&&(n.isNavigating=r.value);return e.annotation(bI),n}}),kx=class extends $e{constructor(n,r,i,o){super();this.suggestion=n;this.isHighlighted=r;this.isAccepted=i;this.isVisible=o}toDOM(){let n=document.createElement("div");n.className="cm-feedforwardSuggestion",this.isVisible||(n.style.display="none"),this.isAccepted?(n.style.backgroundColor="rgba(34, 197, 94, 0.2)",n.style.borderLeft="3px solid rgba(34, 197, 94, 0.6)",n.style.opacity="0.7"):this.isHighlighted?(n.style.backgroundColor="rgba(14, 165, 233, 0.25)",n.style.borderLeft="3px solid rgba(14, 165, 233, 0.8)"):(n.style.backgroundColor="rgba(156, 163, 175, 0.15)",n.style.borderLeft="3px solid rgba(156, 163, 175, 0.4)");let r="  ".repeat(Math.max(0,this.suggestion.indentLevel)),i=document.createElement("pre");return i.className="cm-feedforwardSuggestionCode",i.textContent=r+this.suggestion.text.trim(),n.appendChild(i),n}eq(n){return this.suggestion.id===n.suggestion.id&&this.isHighlighted===n.isHighlighted&&this.isAccepted===n.isAccepted&&this.isVisible===n.isVisible}get estimatedHeight(){return 24}};function RU(t,e){let n=t.doc,r=Math.min(Math.max(e,1),n.lines);return r<=n.lines?n.line(r).to:n.length}function OU(t){let e="  ".repeat(Math.max(0,t.indentLevel));return t.groupItems&&t.groupItems.length>1?`
`+t.groupItems.map(n=>{let r=n.trim();return e+r}).join(`
`):`
`+e+t.text.trim()}var IU=Q.fromClass(class{constructor(t){this.ctrlShiftPressed=!1;this.decorations=M.none,this.setupEventListeners(t),this.buildDecorations(t)}setupEventListeners(t){let e=r=>{if(this.ctrlShiftPressed&&r.preventDefault(),r.altKey&&!this.ctrlShiftPressed)r.preventDefault(),this.ctrlShiftPressed=!0,t.dispatch({effects:Tp.of(!0)}),this.buildDecorations(t),this.updateHighlight(t);else if(this.ctrlShiftPressed&&r.key==="Tab"){r.preventDefault();let i=t.state.field(ql);if(!i.highlightedSuggestion)return!1;let o=i.suggestions.find(s=>s.id===i.highlightedSuggestion);return o?(t.dispatch({effects:[Sx.of(o.id)]}),this.updateHighlight(t),!0):!1}else if(this.ctrlShiftPressed&&r.key==="ArrowRight"){r.preventDefault();let i=t.state.field(ql);if(!i.isNavigating||i.suggestions.length===0)return!1;let o=i.suggestions.filter(c=>!i.acceptedSuggestions.has(c.id));if(o.length===0)return!1;let l=((i.highlightedSuggestion?o.findIndex(c=>c.id===i.highlightedSuggestion):-1)+1)%o.length,a=o[l];return a&&(t.dispatch({effects:lu.of(null)}),setTimeout(()=>{t.dispatch({effects:lu.of(a.id)})},10)),!0}},n=r=>{if(!r.altKey&&this.ctrlShiftPressed){r.preventDefault(),this.ctrlShiftPressed=!1;let i=t.state.field(ql);i.acceptedSuggestions.size>0?this.insertAllAcceptedSuggestions(t,i):t.dispatch({effects:Tp.of(!1)}),this.buildDecorations(t)}};this.handleKeyDown=e,this.handleKeyUp=n,window.addEventListener("keydown",e),window.addEventListener("keyup",n)}findClosestSuggestion(t,e,n){let r=t.filter(s=>!e.has(s.id));if(r.length===0)return null;let i=r[0],o=Math.abs(i.insertLine-n);for(let s of r){let l=Math.abs(s.insertLine-n);l<o&&(o=l,i=s)}return i}insertAllAcceptedSuggestions(t,e){let n=Array.from(e.acceptedSuggestions).map(o=>e.suggestions.find(s=>s.id===o)).filter(Boolean);if(n.length===0)return;let r=[...n].sort((o,s)=>s.insertLine!==o.insertLine?s.insertLine-o.insertLine:s.sequence!==void 0&&o.sequence!==void 0?o.sequence-s.sequence:s.indentLevel-o.indentLevel),i=null;for(let o of r){let s=RU(t.state,o.insertLine),l=OU(o);t.dispatch({changes:{from:s,to:s,insert:l},annotations:[bI.of(!0)]});let a=s+l.length;i=i===null?a:Math.max(i,a)}i!==null?t.dispatch({selection:T.cursor(i),effects:[au.of()]}):t.dispatch({effects:[au.of()]})}updateHighlight(t){let e=t.state.field(ql);if(e.suggestions.length===0)return;let n=t.state.doc.lineAt(t.state.selection.main.head).number-1,r=this.findClosestSuggestion(e.suggestions,e.acceptedSuggestions,n);r&&t.dispatch({effects:lu.of(r.id)})}update(t){let e=!1;for(let n of t.transactions){for(let r of n.effects)if(r.is(wx)||r.is(au)||r.is(Sx)||r.is(lu)||r.is(Tp)){e=!0;break}if(e)break}(e||t.docChanged)&&this.buildDecorations(t.view)}buildDecorations(t,e){if(!e)try{e=t.state.field(ql)}catch{this.decorations=M.none;return}if(e.suggestions.length===0){this.decorations=M.none;return}let n=[];for(let r of e.suggestions){let i=e.acceptedSuggestions.has(r.id),o=e.highlightedSuggestion===r.id,s=!e.isNavigating||o||this.ctrlShiftPressed||i,l=t.state.doc,a=r.insertLine;a=Math.min(Math.max(a,1),l.lines);let c=l.line(a),u=new kx(r,o,i,s),f=M.widget({widget:u,side:1});n.push({decoration:f.range(c.to),position:c.to})}n.sort((r,i)=>r.position-i.position),this.decorations=M.set(n.map(r=>r.decoration))}destroy(){this.handleKeyDown&&window.removeEventListener("keydown",this.handleKeyDown),this.handleKeyUp&&window.removeEventListener("keyup",this.handleKeyUp)}},{decorations:t=>t.decorations}),MU=R.baseTheme({".cm-feedforwardSuggestion":{margin:"2px 0",padding:"4px 8px",borderRadius:"3px",fontFamily:"inherit",fontSize:"0.95em",lineHeight:"1.3",color:"inherit",position:"relative",transition:"all 0.2s ease"},".cm-feedforwardSuggestionCode":{margin:"0",whiteSpace:"pre",fontFamily:"inherit"},"&dark .cm-feedforwardSuggestion":{color:"rgba(209, 213, 219, 0.9)"}});function EI(){return[ql,IU,MU]}function LU(t,e){t.dispatch({effects:wx.of({suggestions:e,doc:t.state.doc})})}function TI(t){t.dispatch({effects:au.of()})}function AI(t,e){console.log("[FRONTEND] Applying feedforward suggestions:",e);let n=e.filter(r=>r.id&&r.text&&typeof r.insertLine=="number"&&typeof r.indentLevel=="number");n.length!==e.length&&console.warn("[FRONTEND] Some suggestions were invalid and filtered out"),LU(t,n)}var Cx=H.define(),Ap=H.define(),MI=ee.define({create(){return{nodes:{},edges:[]}},update(t,e){for(let n of e.effects)if(n.is(Cx))return n.value;return t}}),LI=ee.define({create(){return new Set},update(t,e){for(let n of e.effects)if(n.is(Ap)){let r=new Set(n.value.nodeIds);return setTimeout(()=>{},n.value.duration),r}return t}});function RI(t,e){if(e<1||e>t.lines)return{type:null,name:null};let r=t.line(e).text.trim();return r.startsWith("%")?{type:"component",name:r.substring(1)}:r.startsWith("$")&&r.includes("()")?{type:"function",name:r.substring(1,r.indexOf("()"))}:r.match(/^\w+\.\w+$/)?{type:"file",name:r}:r.startsWith("/")?{type:"directory",name:r.substring(1)}:{type:null,name:null}}function OI(t,e,n){for(let r=e;r>=1;r--){let o=t.line(r).text.trim();if(o.match(/^\w+\.\w+$/)){for(let s of Object.keys(n.nodes))if(n.nodes[s].type==="file"&&s.endsWith(o))return s;return o}}return null}function NU(t,e,n,r){let i=new Set,o=n?`${n}:${t}`:t;i.add(o);let s=r.nodes[o];if(!s){for(let[a,c]of Object.entries(r.nodes))if(c.name===t&&c.type===e){i.add(a),c.upstream.forEach(u=>i.add(u)),c.downstream.forEach(u=>i.add(u));break}return i}s.upstream.forEach(a=>i.add(a)),s.downstream.forEach(a=>i.add(a));let l=(a,c)=>{if(c>2)return;let u=r.nodes[a];u&&(u.upstream.forEach(f=>{i.has(f)||(i.add(f),l(f,c+1))}),u.downstream.forEach(f=>{i.has(f)||(i.add(f),l(f,c+1))}))};if(l(o,1),n&&(e==="function"||e==="component")){i.add(n);let a=n.split("/");for(let c=1;c<a.length;c++)i.add(a.slice(0,c).join("/"))}return i}function II(t){let e=t.state.doc,n=t.state.field(MI),r=t.state.field(LI),i=t.state.selection.main.head,o=e.lineAt(i).number,s=RI(e,o);if(!s.type||!s.name)return M.none;if(Object.keys(n.nodes).length===0)return M.none;let l=OI(e,o,n),a=NU(s.name,s.type,l,n),c=new Ue,u=0,f=0;for(let h=1;h<=e.lines;h++){let d=e.line(h),p=RI(e,h);if(!p.type||!p.name)continue;let x=!1,v=!1,m=OI(e,h,n),g=[m?`${m}:${p.name}`:p.name,m||"",p.name];for(let y of g){if(y&&a.has(y)){x=!0,f++;break}y&&r.has(y)&&(v=!0)}v?c.add(d.from,d.from,M.line({class:"cm-affectedLine",attributes:{"data-affected":"true"}})):!x&&h!==o&&(c.add(d.from,d.from,M.line({class:"cm-dimmedLine",attributes:{"data-dependency-dimmed":"true"}})),u++)}return c.finish()}var PU=Q.fromClass(class{constructor(t){this.decorations=II(t)}update(t){(t.selectionSet||t.transactions.some(e=>e.effects.some(n=>n.is(Cx)||n.is(Ap))))&&(this.decorations=II(t.view))}},{decorations:t=>t.decorations}),_U=R.baseTheme({".cm-dimmedLine":{opacity:"0.6",transition:"opacity 0.2s ease"},".cm-affectedLine":{backgroundColor:"rgba(255, 165, 0, 0.25)",transition:"background-color 0.3s ease",animation:"fadeOut 1.5s ease-in-out forwards"},"@keyframes fadeOut":{"0%":{backgroundColor:"rgba(255, 165, 0, 0.35)"},"100%":{backgroundColor:"rgba(255, 165, 0, 0)"}}});function NI(){return[MI,LI,PU,_U]}function bx(t,e){t.dispatch({effects:Cx.of(e)})}function PI(t,e,n=1500){t.dispatch({effects:Ap.of({nodeIds:e,duration:n})}),setTimeout(()=>{t.dispatch({effects:Ap.of({nodeIds:[],duration:0})})},n)}var _I=H.define(),DU=H.define(),DI=H.define(),Ex=class t extends He{constructor(n,r,i,o){super();this.iconType=n;this.tooltip=r;this.additions=i;this.deletions=o}eq(n){return n instanceof t&&n.iconType===this.iconType&&n.tooltip===this.tooltip}toDOM(){let n=document.createElement("div");n.className=`activity-gutter-marker activity-${this.iconType}`,n.title=this.tooltip,n.style.cssText=`
      display: flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 100%;
      cursor: pointer;
      font-size: 11px;
    `;let r=document.createElement("span");switch(this.iconType){case"read":r.textContent="\u{1F440}",r.title="AI read this file";break;case"edit":r.textContent="\u270E",r.title=this.tooltip;break;case"create":r.textContent="+",r.title="AI created this";break;case"delete":r.textContent="\u232B",r.title="AI removed this";break}if(n.appendChild(r),this.iconType==="edit"&&(this.additions||this.deletions)){let i=document.createElement("span");i.className="activity-stats-badge",i.style.cssText=`
        position: absolute;
        right: -2px;
        top: -2px;
        font-size: 7px;
        line-height: 1;
        padding: 1px;
        color: var(--vscode-badge-background);
      `;let o=[];this.additions&&this.additions>0&&o.push(`+${this.additions}`),this.deletions&&this.deletions>0&&o.push(`-${this.deletions}`),i.textContent=o.join(" "),n.appendChild(i)}return n}},FI=ee.define({create(){return{decorations:new Map}},update(t,e){let n=t.decorations;for(let r of e.effects)r.is(_I)?(n=new Map(n),n.set(r.value.id,r.value)):r.is(DU)?(n=new Map(n),n.delete(r.value)):r.is(DI)&&(n=new Map);return{decorations:n}}});function FU(t){let e=new Map,n=t.state.field(FI);for(let r of n.decorations.values())r.lineNumber>0&&r.lineNumber<=t.state.doc.lines&&e.set(r.lineNumber,new Ex(r.iconType,r.tooltip,r.additions,r.deletions));return e}var BU=Go({class:"cm-activity-gutter",markers:t=>{let e=FU(t),n=[];return e.forEach((r,i)=>{let o=t.state.doc.line(i);n.push(r.range(o.from))}),te.of(n,!0)}}),zU=R.baseTheme({".cm-activity-gutter":{width:"22px",backgroundColor:"transparent"},".cm-activity-gutter .cm-gutterElement":{padding:"0 2px",display:"flex",alignItems:"center",justifyContent:"center"},".activity-gutter-marker":{position:"relative",opacity:"0.9",transition:"opacity 0.2s, transform 0.2s"},".activity-gutter-marker:hover":{opacity:"1",transform:"scale(1.1)"},".activity-read":{color:"var(--vscode-charts-blue)"},".activity-edit":{color:"var(--vscode-charts-yellow)"},".activity-create":{color:"var(--vscode-charts-green)"},".activity-delete":{color:"var(--vscode-errorForeground)"}});function BI(){return[FI,BU,zU]}function zI(t,e){t.dispatch({effects:_I.of(e)})}function VI(t){t.dispatch({effects:DI.of(void 0)})}function UI(t,e,n){let r=t.state.doc,i=e.split("/").pop()||"";for(let o=1;o<=r.lines;o++){let l=r.line(o).text.trim();if(l.endsWith(i)||l.includes(i)||n&&(l===`%${n}`||l===`$${n}()`||l.includes(n)))return o}return null}var Yl=gn(pi()),qn=gn(Yi());function VU(t){switch(t){case"thinking":return"\u{1F4AD}";case"reading":return"\u{1F440}";case"editing":return"\u270E";case"creating":return"+";case"diff":return"\u2260";case"complete":return"\u2713";case"error":return"\u232B";default:return""}}function UU(t){switch(t){case"thinking":return"var(--vscode-foreground)";case"reading":return"var(--vscode-charts-blue)";case"editing":return"var(--vscode-charts-yellow)";case"creating":return"var(--vscode-charts-green)";case"diff":return"var(--vscode-charts-purple)";case"complete":return"var(--vscode-charts-green)";case"error":return"var(--vscode-errorForeground)";default:return"var(--vscode-foreground)"}}function HU(t){switch(console.log("Formatting message for activity item:",t),t.type){case"thinking":return t.message.replace("Thinking: ","");case"reading":return`Reading ${t.filePath?.split("/").pop()||"file"}...`;case"editing":let e=t.filePath?.split("/").pop()||"file";return t.additions!==void 0||t.deletions!==void 0?`Editing ${e} (+${t.additions||0} -${t.deletions||0})`:`Editing ${e}...`;case"creating":return`Creating ${t.filePath?.split("/").pop()||"file"}`;case"diff":return t.message;case"complete":return"Complete";case"error":return t.message;default:return t.message}}var HI=({activities:t,maxVisible:e=3})=>{let n=(0,Yl.useRef)(null),[r,i]=(0,Yl.useState)(!1);(0,Yl.useEffect)(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[t]);let o=r?t:t.slice(-e);return t.length===0?null:(0,qn.jsxs)("div",{style:{position:"relative",borderTop:"1px solid var(--vscode-panel-border)",backgroundColor:"var(--vscode-editor-background)",maxHeight:r?"200px":"80px",overflow:"hidden",transition:"max-height 0.2s ease-out"},children:[(0,qn.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"20px",background:"linear-gradient(to bottom, var(--vscode-editor-background), transparent)",pointerEvents:"none",zIndex:1,opacity:o.length>2?1:0}}),(0,qn.jsx)("div",{ref:n,style:{padding:"4px 8px",overflowY:"auto",maxHeight:r?"180px":"72px",scrollBehavior:"smooth"},children:o.map((s,l)=>{let a=o.length-1-l,c=1;return r||(a===2?c=.4:a===1?c=.7:a===0?c=1:c=0),(0,qn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"2px 0",fontSize:"12px",lineHeight:"1.4",opacity:c,transition:"opacity 0.3s ease-out",color:UU(s.type)},children:[(0,qn.jsx)("span",{style:{fontSize:"10px",width:"14px",flexShrink:0},children:VU(s.type)}),(0,qn.jsx)("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"var(--vscode-foreground)"},title:s.message,children:HU(s)}),(s.additions!==void 0||s.deletions!==void 0)&&(0,qn.jsxs)("span",{style:{display:"inline-flex",gap:"4px",fontSize:"10px",opacity:.8},children:[s.additions!==void 0&&s.additions>0&&(0,qn.jsxs)("span",{style:{color:"var(--vscode-gitDecoration-addedResourceForeground)"},children:["+",s.additions]}),s.deletions!==void 0&&s.deletions>0&&(0,qn.jsxs)("span",{style:{color:"var(--vscode-gitDecoration-deletedResourceForeground)"},children:["-",s.deletions]})]})]},s.id)})}),t.length>e&&(0,qn.jsx)("button",{onClick:()=>i(!r),style:{position:"absolute",bottom:"2px",right:"4px",background:"none",border:"none",color:"var(--vscode-textLink-foreground)",fontSize:"10px",cursor:"pointer",padding:"2px 4px",opacity:.7},children:r?"\u25BC Less":`\u25B2 ${t.length-e} more`})]})};var Ur=gn(Yi()),mo=acquireVsCodeApi();var WI=()=>{let[t,e]=(0,me.useState)(""),[n,r]=(0,me.useState)([]),[i,o]=(0,me.useState)([]),[s,l]=(0,me.useState)(null),[a,c]=(0,me.useState)([]),u=(0,me.useRef)(null),f=(0,me.useRef)(null),h=(0,me.useRef)(null),d=(0,me.useRef)(-1),p=(0,me.useRef)(null),x=()=>u.current?.view??null,v=(0,me.useCallback)(E=>{f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{mo.postMessage({type:"requestFeedforward",content:E,cursorLine:d.current,cursorColumn:0,parsedSchema:n})},500)},[n]),m=(0,me.useCallback)(E=>{let _=x();if(!_)return;let N=_.state.doc,L=N.lines,I=-1;E.lineNumber&&E.lineNumber>0&&E.lineNumber<=L&&(I=E.lineNumber-1);let F=E.element?.name||E.element?.path||E.id;if(I===-1){let ue=N.toString().split(`
`);for(let fe=0;fe<ue.length;fe++){let Qe=ue[fe].trim();if(Qe&&(Qe===`$${F}()`||Qe===`%${F}`||Qe===`/${F}`||Qe.endsWith(F)||Qe===`@${F}`)){I=fe;break}}}if(I===-1){console.warn("Could not find element to remove:",F);return}let K=N.line(I+1),le=K.text.length-K.text.trimStart().length,be=I;for(let ue=I+1;ue<L;ue++){let fe=N.line(ue+1);if(!fe.text.trim())continue;if(fe.text.length-fe.text.trimStart().length<=le)break;be=ue}let ne=K.from,ie=N.line(be+1).to;ie<N.length&&N.sliceString(ie,ie+1)===`
`&&(ie+=1),_.dispatch({changes:{from:ne,to:ie,insert:""}}),console.log(`Rejected addition: removed ${F} from CoDoc`)},[]),g=(0,me.useCallback)(E=>{let _=x();if(!_)return;let N=_.state.doc,L=E.content||"";if(!L.trim()){console.warn("No content to restore for removal change",E.id);return}let I=L.endsWith(`
`)?L:`${L}
`,F;E.lineNumber&&E.lineNumber>0&&E.lineNumber<=N.lines?F=N.line(E.lineNumber).from:F=N.length;let le=`${F>0&&N.sliceString(F-1,F)!==`
`?`
`:""}${I}`;_.dispatch({changes:{from:F,insert:le}}),console.log(`Rejected removal: restored change ${E.id}`)},[]);(0,me.useEffect)(()=>{let E=N=>{let L=N.data,I=x();switch(L.type){case"contentUpdate":if(L.preserveCursor&&I&&(h.current=I.state.selection.main.head),e(L.content),L.newCursorLine!==void 0&&I){let F=L.newCursorLine-1,K=I.state.doc.line(Math.max(1,Math.min(F+1,I.state.doc.lines)));h.current=K.from}break;case"codebaseScanned":if(r(L.parsedSchema||[]),o(L.snapshot?.files||[]),L.snapshot?.dependencyGraph){l(L.snapshot.dependencyGraph);let F=x();F&&bx(F,L.snapshot.dependencyGraph)}break;case"feedbackChanges":if(I&&L.changes){let F=L.changes;vx(I,F)}break;case"showFeedbackDecorations":if(I&&L.changes){let F=L.changes;vx(I,F)}break;case"clearFeedbackDecorations":I&&Kl(I);break;case"clearFeedback":I&&Kl(I);break;case"highlightAffectedNodes":I&&L.nodeIds&&PI(I,L.nodeIds,L.duration||1500);break;case"feedforwardSuggestions":if(I&&L.suggestions){let F=L.suggestions;AI(I,F)}break;case"clearSuggestions":I&&TI(I);break;case"generationProgress":console.log(`[Generation] ${L.stage}: ${L.message}`);break;case"generationComplete":console.log(`[Generation Complete] ${L.summary||"Done"}`),L.fileChanges&&L.fileChanges.length>0&&console.log("Files modified:",L.fileChanges);break;case"activityEvent":if(L.event){let F=L.event,K={id:F.id||`activity-${Date.now()}`,type:F.eventType,message:F.message,timestamp:F.timestamp||Date.now(),filePath:F.filePath,componentName:F.componentName,additions:F.additions,deletions:F.deletions};c(le=>[...le,K].slice(-50))}break;case"gutterDecoration":if(I&&L.decoration){let F=L.decoration,K=UI(I,F.filePath||"",F.componentName);K&&zI(I,{...F,lineNumber:K})}break;case"clearActivityStream":c([]);break;case"clearGutterDecorations":I&&VI(I);break}},_=N=>{let I=N.detail?.change;I&&(I.type==="add"?m(I):I.type==="remove"?g(I):mo.postMessage({type:"rejectFeedbackChange",changeId:I.id,changeType:I.type,content:I.content}))};return window.addEventListener("message",E),window.addEventListener("feedbackChangeRejected",_),()=>{window.removeEventListener("message",E),window.removeEventListener("feedbackChangeRejected",_),f.current&&clearTimeout(f.current),p.current&&clearTimeout(p.current)}},[n,i]),(0,me.useEffect)(()=>{if(s){let E=x();E&&bx(E,s)}},[s]),(0,me.useEffect)(()=>{if(h.current!==null){let E=x();if(E){let _=Math.min(h.current,t.length);E.dispatch({selection:{anchor:_,head:_},scrollIntoView:!0}),h.current=null}}},[t]);let y=(0,me.useCallback)(()=>{mo.postMessage({type:"syncCodebase"})},[]),S=(0,me.useCallback)(()=>{let E=x();E&&Kl(E),mo.postMessage({type:"generateCode"})},[]),k=(0,me.useCallback)(()=>{let E=x();E&&Kl(E),mo.postMessage({type:"mockGenerateCode"})},[]),w=(0,me.useCallback)(()=>{let E=x();E&&Kl(E),mo.postMessage({type:"clearAllFeedback"})},[]),C=(0,me.useCallback)(E=>{e(E),mo.postMessage({type:"contentChanged",content:E})},[v]),A=(0,me.useCallback)(E=>{E!==d.current&&(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{n.some(N=>{let L=I=>I.lineNumber===E+1?!0:I.children?I.children.some(L):!1;return L(N)})&&(d.current=E,mo.postMessage({type:"cursorPositionChanged",lineNumber:E+1,parsedSchema:n}))},300))},[n]),P=me.default.useMemo(()=>[vI(),pI(),...xI(),...CI(),...EI(),...NI(),BI(),R.updateListener.of(E=>{if(E.selectionSet){let _=E.state.selection.main.head,N=E.state.doc.lineAt(_).number-1;A(N)}})],[A]);return(0,Ur.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-editor-background)"},children:[(0,Ur.jsxs)("div",{style:{padding:"4px 8px",borderBottom:"1px solid var(--vscode-panel-border)",display:"flex",gap:"8px",alignItems:"center"},children:[(0,Ur.jsx)("button",{onClick:y,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Sync"}),(0,Ur.jsx)("button",{onClick:S,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Generate"}),(0,Ur.jsx)("button",{onClick:k,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},title:"Mock generation for testing (no OpenCode)",children:"Mock Gen"}),(0,Ur.jsx)("button",{onClick:w,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"1px solid var(--vscode-button-border)",borderRadius:"2px",cursor:"pointer"},title:"Clear all feedback decorations",children:"Clear Feedback"})]}),(0,Ur.jsx)(fA,{ref:u,value:t,onChange:C,extensions:P,style:{flex:1,fontSize:"14px",lineHeight:"1.6",height:"100%",minHeight:0},basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!1,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,searchKeymap:!0,foldKeymap:!0,completionKeymap:!1,lintKeymap:!0}}),(0,Ur.jsx)(HI,{activities:a,maxVisible:3})]})};var Tx=gn(Yi()),WU=GI.default.createRoot(document.getElementById("root"));WU.render((0,Tx.jsx)(jI.default.StrictMode,{children:(0,Tx.jsx)(WI,{})}));})();
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
