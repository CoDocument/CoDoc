"use strict";(()=>{var LI=Object.create;var bx=Object.defineProperty;var NI=Object.getOwnPropertyDescriptor;var PI=Object.getOwnPropertyNames;var _I=Object.getPrototypeOf,DI=Object.prototype.hasOwnProperty;var Hr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var FI=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PI(e))!DI.call(t,i)&&i!==n&&bx(t,i,{get:()=>e[i],enumerable:!(r=NI(e,i))||r.enumerable});return t};var hr=(t,e,n)=>(n=t!=null?LI(_I(t)):{},FI(e||!t||!t.__esModule?bx(n,"default",{value:t,enumerable:!0}):n,t));var Dx=Hr(q=>{"use strict";var Kl=Symbol.for("react.element"),BI=Symbol.for("react.portal"),zI=Symbol.for("react.fragment"),UI=Symbol.for("react.strict_mode"),VI=Symbol.for("react.profiler"),HI=Symbol.for("react.provider"),WI=Symbol.for("react.context"),jI=Symbol.for("react.forward_ref"),GI=Symbol.for("react.suspense"),$I=Symbol.for("react.memo"),KI=Symbol.for("react.lazy"),Ex=Symbol.iterator;function qI(t){return t===null||typeof t!="object"?null:(t=Ex&&t[Ex]||t["@@iterator"],typeof t=="function"?t:null)}var Rx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ox=Object.assign,Ix={};function fs(t,e,n){this.props=t,this.context=e,this.refs=Ix,this.updater=n||Rx}fs.prototype.isReactComponent={};fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mx(){}Mx.prototype=fs.prototype;function Ap(t,e,n){this.props=t,this.context=e,this.refs=Ix,this.updater=n||Rx}var Rp=Ap.prototype=new Mx;Rp.constructor=Ap;Ox(Rp,fs.prototype);Rp.isPureReactComponent=!0;var Tx=Array.isArray,Lx=Object.prototype.hasOwnProperty,Op={current:null},Nx={key:!0,ref:!0,__self:!0,__source:!0};function Px(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Lx.call(e,r)&&!Nx.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Kl,type:t,key:o,ref:s,props:i,_owner:Op.current}}function YI(t,e){return{$$typeof:Kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kl}function XI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ax=/\/+/g;function Tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XI(""+t.key):e.toString(36)}function ac(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Kl:case BI:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Tp(s,0):r,Tx(i)?(n="",t!=null&&(n=t.replace(Ax,"$&/")+"/"),ac(i,e,n,"",function(u){return u})):i!=null&&(Ip(i)&&(i=YI(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ax,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Tx(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Tp(o,l);s+=ac(o,e,n,a,i)}else if(a=qI(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Tp(o,l++),s+=ac(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function lc(t,e,n){if(t==null)return t;var r=[],i=0;return ac(t,r,"","",function(o){return e.call(n,o,i++)}),r}function ZI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},uc={transition:null},QI={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:uc,ReactCurrentOwner:Op};function _x(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:lc,forEach:function(t,e,n){lc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lc(t,function(){e++}),e},toArray:function(t){return lc(t,function(e){return e})||[]},only:function(t){if(!Ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=fs;q.Fragment=zI;q.Profiler=VI;q.PureComponent=Ap;q.StrictMode=UI;q.Suspense=GI;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QI;q.act=_x;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ox({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Op.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Lx.call(e,a)&&!Nx.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Kl,type:t.type,key:i,ref:o,props:r,_owner:s}};q.createContext=function(t){return t={$$typeof:WI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HI,_context:t},t.Consumer=t};q.createElement=Px;q.createFactory=function(t){var e=Px.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:jI,render:t}};q.isValidElement=Ip;q.lazy=function(t){return{$$typeof:KI,_payload:{_status:-1,_result:t},_init:ZI}};q.memo=function(t,e){return{$$typeof:$I,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=uc.transition;uc.transition={};try{t()}finally{uc.transition=e}};q.unstable_act=_x;q.useCallback=function(t,e){return Ht.current.useCallback(t,e)};q.useContext=function(t){return Ht.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};q.useEffect=function(t,e){return Ht.current.useEffect(t,e)};q.useId=function(){return Ht.current.useId()};q.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Ht.current.useMemo(t,e)};q.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};q.useRef=function(t){return Ht.current.useRef(t)};q.useState=function(t){return Ht.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return Ht.current.useTransition()};q.version="18.3.1"});var po=Hr((EV,Fx)=>{"use strict";Fx.exports=Dx()});var Kx=Hr(pe=>{"use strict";function Pp(t,e){var n=t.length;t.push(e);e:for(;0<n;){var r=n-1>>>1,i=t[r];if(0<cc(i,e))t[r]=e,t[n]=i,n=r;else break e}}function Kn(t){return t.length===0?null:t[0]}function hc(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=t[s],a=s+1,u=t[a];if(0>cc(l,n))a<i&&0>cc(u,l)?(t[r]=u,t[a]=n,r=a):(t[r]=l,t[s]=n,r=s);else if(a<i&&0>cc(u,n))t[r]=u,t[a]=n,r=a;else break e}}return e}function cc(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(Bx=performance,pe.unstable_now=function(){return Bx.now()}):(Mp=Date,zx=Mp.now(),pe.unstable_now=function(){return Mp.now()-zx});var Bx,Mp,zx,dr=[],di=[],JI=1,Mn=null,It=3,dc=!1,mo=!1,Yl=!1,Hx=typeof setTimeout=="function"?setTimeout:null,Wx=typeof clearTimeout=="function"?clearTimeout:null,Ux=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _p(t){for(var e=Kn(di);e!==null;){if(e.callback===null)hc(di);else if(e.startTime<=t)hc(di),e.sortIndex=e.expirationTime,Pp(dr,e);else break;e=Kn(di)}}function Dp(t){if(Yl=!1,_p(t),!mo)if(Kn(dr)!==null)mo=!0,Bp(Fp);else{var e=Kn(di);e!==null&&zp(Dp,e.startTime-t)}}function Fp(t,e){mo=!1,Yl&&(Yl=!1,Wx(Xl),Xl=-1),dc=!0;var n=It;try{for(_p(e),Mn=Kn(dr);Mn!==null&&(!(Mn.expirationTime>e)||t&&!$x());){var r=Mn.callback;if(typeof r=="function"){Mn.callback=null,It=Mn.priorityLevel;var i=r(Mn.expirationTime<=e);e=pe.unstable_now(),typeof i=="function"?Mn.callback=i:Mn===Kn(dr)&&hc(dr),_p(e)}else hc(dr);Mn=Kn(dr)}if(Mn!==null)var o=!0;else{var s=Kn(di);s!==null&&zp(Dp,s.startTime-e),o=!1}return o}finally{Mn=null,It=n,dc=!1}}var pc=!1,fc=null,Xl=-1,jx=5,Gx=-1;function $x(){return!(pe.unstable_now()-Gx<jx)}function Lp(){if(fc!==null){var t=pe.unstable_now();Gx=t;var e=!0;try{e=fc(!0,t)}finally{e?ql():(pc=!1,fc=null)}}else pc=!1}var ql;typeof Ux=="function"?ql=function(){Ux(Lp)}:typeof MessageChannel<"u"?(Np=new MessageChannel,Vx=Np.port2,Np.port1.onmessage=Lp,ql=function(){Vx.postMessage(null)}):ql=function(){Hx(Lp,0)};var Np,Vx;function Bp(t){fc=t,pc||(pc=!0,ql())}function zp(t,e){Xl=Hx(function(){t(pe.unstable_now())},e)}pe.unstable_IdlePriority=5;pe.unstable_ImmediatePriority=1;pe.unstable_LowPriority=4;pe.unstable_NormalPriority=3;pe.unstable_Profiling=null;pe.unstable_UserBlockingPriority=2;pe.unstable_cancelCallback=function(t){t.callback=null};pe.unstable_continueExecution=function(){mo||dc||(mo=!0,Bp(Fp))};pe.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jx=0<t?Math.floor(1e3/t):5};pe.unstable_getCurrentPriorityLevel=function(){return It};pe.unstable_getFirstCallbackNode=function(){return Kn(dr)};pe.unstable_next=function(t){switch(It){case 1:case 2:case 3:var e=3;break;default:e=It}var n=It;It=e;try{return t()}finally{It=n}};pe.unstable_pauseExecution=function(){};pe.unstable_requestPaint=function(){};pe.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=It;It=t;try{return e()}finally{It=n}};pe.unstable_scheduleCallback=function(t,e,n){var r=pe.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=n+i,t={id:JI++,callback:e,priorityLevel:t,startTime:n,expirationTime:i,sortIndex:-1},n>r?(t.sortIndex=n,Pp(di,t),Kn(dr)===null&&t===Kn(di)&&(Yl?(Wx(Xl),Xl=-1):Yl=!0,zp(Dp,n-r))):(t.sortIndex=i,Pp(dr,t),mo||dc||(mo=!0,Bp(Fp))),t};pe.unstable_shouldYield=$x;pe.unstable_wrapCallback=function(t){var e=It;return function(){var n=It;It=e;try{return t.apply(this,arguments)}finally{It=n}}}});var Yx=Hr((AV,qx)=>{"use strict";qx.exports=Kx()});var Jk=Hr(Sn=>{"use strict";var eM=po(),xn=Yx();function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nS=new Set,xa={};function Ro(t,e){Ls(t,e),Ls(t+"Capture",e)}function Ls(t,e){for(xa[t]=e,t=0;t<e.length;t++)nS.add(e[t])}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=Object.prototype.hasOwnProperty,tM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xx={},Zx={};function nM(t){return am.call(Zx,t)?!0:am.call(Xx,t)?!1:tM.test(t)?Zx[t]=!0:(Xx[t]=!0,!1)}function rM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iM(t,e,n,r){if(e===null||typeof e>"u"||rM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var eg=/[\-:]([a-z])/g;function tg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eg,tg);bt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eg,tg);bt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eg,tg);bt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ng(t,e,n,r){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iM(e,n,i,r)&&(n=null),r||i===null?nM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=eM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mc=Symbol.for("react.element"),ps=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),rS=Symbol.for("react.provider"),iS=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),og=Symbol.for("react.memo"),mi=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var oS=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var Qx=Symbol.iterator;function Zl(t){return t===null||typeof t!="object"?null:(t=Qx&&t[Qx]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Up;function oa(t){if(Up===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Up=e&&e[1]||""}return`
`+Up+t}var Vp=!1;function Hp(t,e){if(!t||Vp)return"";Vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{Vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oa(t):""}function oM(t){switch(t.tag){case 5:return oa(t.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 2:case 15:return t=Hp(t.type,!1),t;case 11:return t=Hp(t.type.render,!1),t;case 1:return t=Hp(t.type,!0),t;default:return""}}function hm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ms:return"Fragment";case ps:return"Portal";case um:return"Profiler";case rg:return"StrictMode";case cm:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iS:return(t.displayName||"Context")+".Consumer";case rS:return(t._context.displayName||"Context")+".Provider";case ig:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case og:return e=t.displayName||null,e!==null?e:hm(t.type)||"Memo";case mi:e=t._payload,t=t._init;try{return hm(t(e))}catch{}}return null}function sM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hm(e);case 8:return e===rg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lM(t){var e=sS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gc(t){t._valueTracker||(t._valueTracker=lM(t))}function lS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dm(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aS(t,e){e=e.checked,e!=null&&ng(t,"checked",e,!1)}function pm(t,e){aS(t,e);var n=Oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mm(t,e.type,n):e.hasOwnProperty("defaultValue")&&mm(t,e.type,Oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ev(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mm(t,e,n){(e!=="number"||jc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function Ts(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Oi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(sa(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Oi(n)}}function uS(t,e){var n=Oi(e.value),r=Oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yc,fS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yc=yc||document.createElement("div"),yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aM=["Webkit","ms","Moz","O"];Object.keys(ua).forEach(function(t){aM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ua[e]=ua[t]})});function hS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ua.hasOwnProperty(t)&&ua[t]?(""+e).trim():e+"px"}function dS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=hS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uM=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xm(t,e){if(e){if(uM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function vm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sm=null;function sg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var km=null,As=null,Rs=null;function rv(t){if(t=Fa(t)){if(typeof km!="function")throw Error(A(280));var e=t.stateNode;e&&(e=vf(e),km(t.stateNode,t.type,e))}}function pS(t){As?Rs?Rs.push(t):Rs=[t]:As=t}function mS(){if(As){var t=As,e=Rs;if(Rs=As=null,rv(t),e)for(t=0;t<e.length;t++)rv(e[t])}}function gS(t,e){return t(e)}function yS(){}var Wp=!1;function xS(t,e,n){if(Wp)return t(e,n);Wp=!0;try{return gS(t,e,n)}finally{Wp=!1,(As!==null||Rs!==null)&&(yS(),mS())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=vf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var wm=!1;if(qr)try{hs={},Object.defineProperty(hs,"passive",{get:function(){wm=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{wm=!1}var hs;function cM(t,e,n,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ca=!1,Gc=null,$c=!1,Cm=null,fM={onError:function(t){ca=!0,Gc=t}};function hM(t,e,n,r,i,o,s,l,a){ca=!1,Gc=null,cM.apply(fM,arguments)}function dM(t,e,n,r,i,o,s,l,a){if(hM.apply(this,arguments),ca){if(ca){var u=Gc;ca=!1,Gc=null}else throw Error(A(198));$c||($c=!0,Cm=u)}}function Oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iv(t){if(Oo(t)!==t)throw Error(A(188))}function pM(t){var e=t.alternate;if(!e){if(e=Oo(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return iv(i),t;if(o===r)return iv(i),e;o=o.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function SS(t){return t=pM(t),t!==null?kS(t):null}function kS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kS(t);if(e!==null)return e;t=t.sibling}return null}var wS=xn.unstable_scheduleCallback,ov=xn.unstable_cancelCallback,mM=xn.unstable_shouldYield,gM=xn.unstable_requestPaint,Ve=xn.unstable_now,yM=xn.unstable_getCurrentPriorityLevel,lg=xn.unstable_ImmediatePriority,CS=xn.unstable_UserBlockingPriority,Kc=xn.unstable_NormalPriority,xM=xn.unstable_LowPriority,bS=xn.unstable_IdlePriority,mf=null,yr=null;function vM(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(mf,t,void 0,(t.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:wM,SM=Math.log,kM=Math.LN2;function wM(t){return t>>>=0,t===0?32:31-(SM(t)/kM|0)|0}var xc=64,vc=4194304;function la(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=la(l):(o&=s,o!==0&&(r=la(o)))}else s=n&~i,s!==0?r=la(s):o!==0&&(r=la(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qn(e),i=1<<n,r|=t[n],e&=~i;return r}function CM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Qn(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=CM(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ES(){var t=xc;return xc<<=1,!(xc&4194240)&&(xc=64),t}function jp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qn(e),t[e]=n}function EM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function ag(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var se=0;function TS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AS,ug,RS,OS,IS,Em=!1,Sc=[],ki=null,wi=null,Ci=null,ka=new Map,wa=new Map,yi=[],TM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sv(t,e){switch(t){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(e.pointerId)}}function Ql(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Fa(e),e!==null&&ug(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AM(t,e,n,r,i){switch(e){case"focusin":return ki=Ql(ki,t,e,n,r,i),!0;case"dragenter":return wi=Ql(wi,t,e,n,r,i),!0;case"mouseover":return Ci=Ql(Ci,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ka.set(o,Ql(ka.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,wa.set(o,Ql(wa.get(o)||null,t,e,n,r,i)),!0}return!1}function MS(t){var e=xo(t.target);if(e!==null){var n=Oo(e);if(n!==null){if(e=n.tag,e===13){if(e=vS(n),e!==null){t.blockedOn=e,IS(t.priority,function(){RS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sm=r,n.target.dispatchEvent(r),Sm=null}else return e=Fa(n),e!==null&&ug(e),t.blockedOn=n,!1;e.shift()}return!0}function lv(t,e,n){Pc(t)&&n.delete(e)}function RM(){Em=!1,ki!==null&&Pc(ki)&&(ki=null),wi!==null&&Pc(wi)&&(wi=null),Ci!==null&&Pc(Ci)&&(Ci=null),ka.forEach(lv),wa.forEach(lv)}function Jl(t,e){t.blockedOn===e&&(t.blockedOn=null,Em||(Em=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,RM)))}function Ca(t){function e(i){return Jl(i,t)}if(0<Sc.length){Jl(Sc[0],t);for(var n=1;n<Sc.length;n++){var r=Sc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ki!==null&&Jl(ki,t),wi!==null&&Jl(wi,t),Ci!==null&&Jl(Ci,t),ka.forEach(e),wa.forEach(e),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)MS(n),n.blockedOn===null&&yi.shift()}var Os=Qr.ReactCurrentBatchConfig,Yc=!0;function OM(t,e,n,r){var i=se,o=Os.transition;Os.transition=null;try{se=1,cg(t,e,n,r)}finally{se=i,Os.transition=o}}function IM(t,e,n,r){var i=se,o=Os.transition;Os.transition=null;try{se=4,cg(t,e,n,r)}finally{se=i,Os.transition=o}}function cg(t,e,n,r){if(Yc){var i=Tm(t,e,n,r);if(i===null)Zp(t,e,r,Xc,n),sv(t,r);else if(AM(i,t,e,n,r))r.stopPropagation();else if(sv(t,r),e&4&&-1<TM.indexOf(t)){for(;i!==null;){var o=Fa(i);if(o!==null&&AS(o),o=Tm(t,e,n,r),o===null&&Zp(t,e,r,Xc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Zp(t,e,r,null,n)}}var Xc=null;function Tm(t,e,n,r){if(Xc=null,t=sg(r),t=xo(t),t!==null)if(e=Oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xc=t,null}function LS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yM()){case lg:return 1;case CS:return 4;case Kc:case xM:return 16;case bS:return 536870912;default:return 16}default:return 16}}var vi=null,fg=null,_c=null;function NS(){if(_c)return _c;var t,e=fg,n=e.length,r,i="value"in vi?vi.value:vi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return _c=i.slice(t,1<r?1-r:void 0)}function Dc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kc(){return!0}function av(){return!1}function vn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kc:av,this.isPropagationStopped=av,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hg=vn(zs),Da=Le({},zs,{view:0,detail:0}),MM=vn(Da),Gp,$p,ea,gf=Le({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ea&&(ea&&t.type==="mousemove"?(Gp=t.screenX-ea.screenX,$p=t.screenY-ea.screenY):$p=Gp=0,ea=t),Gp)},movementY:function(t){return"movementY"in t?t.movementY:$p}}),uv=vn(gf),LM=Le({},gf,{dataTransfer:0}),NM=vn(LM),PM=Le({},Da,{relatedTarget:0}),Kp=vn(PM),_M=Le({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),DM=vn(_M),FM=Le({},zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BM=vn(FM),zM=Le({},zs,{data:0}),cv=vn(zM),UM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HM[t])?!!e[t]:!1}function dg(){return WM}var jM=Le({},Da,{key:function(t){if(t.key){var e=UM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dg,charCode:function(t){return t.type==="keypress"?Dc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GM=vn(jM),$M=Le({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fv=vn($M),KM=Le({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dg}),qM=vn(KM),YM=Le({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),XM=vn(YM),ZM=Le({},gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QM=vn(ZM),JM=[9,13,27,32],pg=qr&&"CompositionEvent"in window,fa=null;qr&&"documentMode"in document&&(fa=document.documentMode);var eL=qr&&"TextEvent"in window&&!fa,PS=qr&&(!pg||fa&&8<fa&&11>=fa),hv=" ",dv=!1;function _S(t,e){switch(t){case"keyup":return JM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function tL(t,e){switch(t){case"compositionend":return DS(e);case"keypress":return e.which!==32?null:(dv=!0,hv);case"textInput":return t=e.data,t===hv&&dv?null:t;default:return null}}function nL(t,e){if(gs)return t==="compositionend"||!pg&&_S(t,e)?(t=NS(),_c=fg=vi=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PS&&e.locale!=="ko"?null:e.data;default:return null}}var rL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rL[t.type]:e==="textarea"}function FS(t,e,n,r){pS(r),e=Zc(e,"onChange"),0<e.length&&(n=new hg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ha=null,ba=null;function iL(t){qS(t,0)}function yf(t){var e=vs(t);if(lS(e))return t}function oL(t,e){if(t==="change")return e}var BS=!1;qr&&(qr?(Cc="oninput"in document,Cc||(qp=document.createElement("div"),qp.setAttribute("oninput","return;"),Cc=typeof qp.oninput=="function"),wc=Cc):wc=!1,BS=wc&&(!document.documentMode||9<document.documentMode));var wc,Cc,qp;function mv(){ha&&(ha.detachEvent("onpropertychange",zS),ba=ha=null)}function zS(t){if(t.propertyName==="value"&&yf(ba)){var e=[];FS(e,ba,t,sg(t)),xS(iL,e)}}function sL(t,e,n){t==="focusin"?(mv(),ha=e,ba=n,ha.attachEvent("onpropertychange",zS)):t==="focusout"&&mv()}function lL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(ba)}function aL(t,e){if(t==="click")return yf(e)}function uL(t,e){if(t==="input"||t==="change")return yf(e)}function cL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:cL;function Ea(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!am.call(e,i)||!er(t[i],e[i]))return!1}return!0}function gv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yv(t,e){var n=gv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gv(n)}}function US(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?US(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VS(){for(var t=window,e=jc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jc(t.document)}return e}function mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fL(t){var e=VS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&US(n.ownerDocument.documentElement,n)){if(r!==null&&mg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=yv(n,o);var s=yv(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hL=qr&&"documentMode"in document&&11>=document.documentMode,ys=null,Am=null,da=null,Rm=!1;function xv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rm||ys==null||ys!==jc(r)||(r=ys,"selectionStart"in r&&mg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),da&&Ea(da,r)||(da=r,r=Zc(Am,"onSelect"),0<r.length&&(e=new hg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ys)))}function bc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xs={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionend:bc("Transition","TransitionEnd")},Yp={},HS={};qr&&(HS=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function xf(t){if(Yp[t])return Yp[t];if(!xs[t])return t;var e=xs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in HS)return Yp[t]=e[n];return t}var WS=xf("animationend"),jS=xf("animationiteration"),GS=xf("animationstart"),$S=xf("transitionend"),KS=new Map,vv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){KS.set(t,e),Ro(e,[t])}for(Ec=0;Ec<vv.length;Ec++)Tc=vv[Ec],Sv=Tc.toLowerCase(),kv=Tc[0].toUpperCase()+Tc.slice(1),Mi(Sv,"on"+kv);var Tc,Sv,kv,Ec;Mi(WS,"onAnimationEnd");Mi(jS,"onAnimationIteration");Mi(GS,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi($S,"onTransitionEnd");Ls("onMouseEnter",["mouseout","mouseover"]);Ls("onMouseLeave",["mouseout","mouseover"]);Ls("onPointerEnter",["pointerout","pointerover"]);Ls("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dL=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function wv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dM(r,e,void 0,t),t.currentTarget=null}function qS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;wv(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;wv(i,l,u),o=a}}}if($c)throw t=Cm,$c=!1,Cm=null,t}function Se(t,e){var n=e[Nm];n===void 0&&(n=e[Nm]=new Set);var r=t+"__bubble";n.has(r)||(YS(e,t,2,!1),n.add(r))}function Xp(t,e,n){var r=0;e&&(r|=4),YS(n,t,r,e)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function Ta(t){if(!t[Ac]){t[Ac]=!0,nS.forEach(function(n){n!=="selectionchange"&&(dL.has(n)||Xp(n,!1,t),Xp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ac]||(e[Ac]=!0,Xp("selectionchange",!1,e))}}function YS(t,e,n,r){switch(LS(e)){case 1:var i=OM;break;case 4:i=IM;break;default:i=cg}n=i.bind(null,e,n,t),i=void 0,!wm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Zp(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=xo(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}xS(function(){var u=o,c=sg(n),f=[];e:{var h=KS.get(t);if(h!==void 0){var d=hg,g=t;switch(t){case"keypress":if(Dc(n)===0)break e;case"keydown":case"keyup":d=GM;break;case"focusin":g="focus",d=Kp;break;case"focusout":g="blur",d=Kp;break;case"beforeblur":case"afterblur":d=Kp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=uv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=NM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=qM;break;case WS:case jS:case GS:d=DM;break;case $S:d=XM;break;case"scroll":d=MM;break;case"wheel":d=QM;break;case"copy":case"cut":case"paste":d=BM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=fv}var x=(e&4)!==0,v=!x&&t==="scroll",p=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,y;m!==null;){y=m;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,p!==null&&(S=Sa(m,p),S!=null&&x.push(Aa(m,S,y)))),v)break;m=m.return}0<x.length&&(h=new d(h,g,null,n,c),f.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Sm&&(g=n.relatedTarget||n.fromElement)&&(xo(g)||g[Yr]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=u,g=g?xo(g):null,g!==null&&(v=Oo(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=u),d!==g)){if(x=uv,S="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=fv,S="onPointerLeave",p="onPointerEnter",m="pointer"),v=d==null?h:vs(d),y=g==null?h:vs(g),h=new x(S,m+"leave",d,n,c),h.target=v,h.relatedTarget=y,S=null,xo(c)===u&&(x=new x(p,m+"enter",g,n,c),x.target=y,x.relatedTarget=v,S=x),v=S,d&&g)t:{for(x=d,p=g,m=0,y=x;y;y=ds(y))m++;for(y=0,S=p;S;S=ds(S))y++;for(;0<m-y;)x=ds(x),m--;for(;0<y-m;)p=ds(p),y--;for(;m--;){if(x===p||p!==null&&x===p.alternate)break t;x=ds(x),p=ds(p)}x=null}else x=null;d!==null&&Cv(f,h,d,x,!1),g!==null&&v!==null&&Cv(f,v,g,x,!0)}}e:{if(h=u?vs(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var k=oL;else if(pv(h))if(BS)k=uL;else{k=lL;var w=sL}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=aL);if(k&&(k=k(t,u))){FS(f,k,n,c);break e}w&&w(t,h,u),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&mm(h,"number",h.value)}switch(w=u?vs(u):window,t){case"focusin":(pv(w)||w.contentEditable==="true")&&(ys=w,Am=u,da=null);break;case"focusout":da=Am=ys=null;break;case"mousedown":Rm=!0;break;case"contextmenu":case"mouseup":case"dragend":Rm=!1,xv(f,n,c);break;case"selectionchange":if(hL)break;case"keydown":case"keyup":xv(f,n,c)}var C;if(pg)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else gs?_S(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(PS&&n.locale!=="ko"&&(gs||T!=="onCompositionStart"?T==="onCompositionEnd"&&gs&&(C=NS()):(vi=c,fg="value"in vi?vi.value:vi.textContent,gs=!0)),w=Zc(u,T),0<w.length&&(T=new cv(T,t,null,n,c),f.push({event:T,listeners:w}),C?T.data=C:(C=DS(n),C!==null&&(T.data=C)))),(C=eL?tL(t,n):nL(t,n))&&(u=Zc(u,"onBeforeInput"),0<u.length&&(c=new cv("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=C))}qS(f,e)})}function Aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Sa(t,n),o!=null&&r.unshift(Aa(t,o,i)),o=Sa(t,e),o!=null&&r.push(Aa(t,o,i))),t=t.return}return r}function ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cv(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Sa(n,o),a!=null&&s.unshift(Aa(n,a,l))):i||(a=Sa(n,o),a!=null&&s.push(Aa(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var pL=/\r\n?/g,mL=/\u0000|\uFFFD/g;function bv(t){return(typeof t=="string"?t:""+t).replace(pL,`
`).replace(mL,"")}function Rc(t,e,n){if(e=bv(e),bv(t)!==e&&n)throw Error(A(425))}function Qc(){}var Om=null,Im=null;function Mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,gL=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,yL=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(t){return Ev.resolve(null).then(t).catch(xL)}:Lm;function xL(t){setTimeout(function(){throw t})}function Qp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ca(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ca(e)}function bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),gr="__reactFiber$"+Us,Ra="__reactProps$"+Us,Yr="__reactContainer$"+Us,Nm="__reactEvents$"+Us,vL="__reactListeners$"+Us,SL="__reactHandles$"+Us;function xo(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yr]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tv(t);t!==null;){if(n=t[gr])return n;t=Tv(t)}return e}t=n,n=t.parentNode}return null}function Fa(t){return t=t[gr]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function vf(t){return t[Ra]||null}var Pm=[],Ss=-1;function Li(t){return{current:t}}function ke(t){0>Ss||(t.current=Pm[Ss],Pm[Ss]=null,Ss--)}function me(t,e){Ss++,Pm[Ss]=t.current,t.current=e}var Ii={},Pt=Li(Ii),rn=Li(!1),Co=Ii;function Ns(t,e){var n=t.type.contextTypes;if(!n)return Ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function on(t){return t=t.childContextTypes,t!=null}function Jc(){ke(rn),ke(Pt)}function Av(t,e,n){if(Pt.current!==Ii)throw Error(A(168));me(Pt,e),me(rn,n)}function XS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(A(108,sM(t)||"Unknown",i));return Le({},n,r)}function ef(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ii,Co=Pt.current,me(Pt,t),me(rn,rn.current),!0}function Rv(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=XS(t,e,Co),r.__reactInternalMemoizedMergedChildContext=t,ke(rn),ke(Pt),me(Pt,t)):ke(rn),me(rn,n)}var jr=null,Sf=!1,Jp=!1;function ZS(t){jr===null?jr=[t]:jr.push(t)}function kL(t){Sf=!0,ZS(t)}function Ni(){if(!Jp&&jr!==null){Jp=!0;var t=0,e=se;try{var n=jr;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jr=null,Sf=!1}catch(i){throw jr!==null&&(jr=jr.slice(t+1)),wS(lg,Ni),i}finally{se=e,Jp=!1}}return null}var ks=[],ws=0,tf=null,nf=0,Ln=[],Nn=0,bo=null,Gr=1,$r="";function go(t,e){ks[ws++]=nf,ks[ws++]=tf,tf=t,nf=e}function QS(t,e,n){Ln[Nn++]=Gr,Ln[Nn++]=$r,Ln[Nn++]=bo,bo=t;var r=Gr;t=$r;var i=32-Qn(r)-1;r&=~(1<<i),n+=1;var o=32-Qn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Gr=1<<32-Qn(e)+i|n<<i|r,$r=o+t}else Gr=1<<o|n<<i|r,$r=t}function gg(t){t.return!==null&&(go(t,1),QS(t,1,0))}function yg(t){for(;t===tf;)tf=ks[--ws],ks[ws]=null,nf=ks[--ws],ks[ws]=null;for(;t===bo;)bo=Ln[--Nn],Ln[Nn]=null,$r=Ln[--Nn],Ln[Nn]=null,Gr=Ln[--Nn],Ln[Nn]=null}var yn=null,gn=null,Ae=!1,Zn=null;function JS(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ov(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,gn=bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bo!==null?{id:Gr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,gn=null,!0):!1;default:return!1}}function _m(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dm(t){if(Ae){var e=gn;if(e){var n=e;if(!Ov(t,e)){if(_m(t))throw Error(A(418));e=bi(n.nextSibling);var r=yn;e&&Ov(t,e)?JS(r,n):(t.flags=t.flags&-4097|2,Ae=!1,yn=t)}}else{if(_m(t))throw Error(A(418));t.flags=t.flags&-4097|2,Ae=!1,yn=t}}}function Iv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Oc(t){if(t!==yn)return!1;if(!Ae)return Iv(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mm(t.type,t.memoizedProps)),e&&(e=gn)){if(_m(t))throw ek(),Error(A(418));for(;e;)JS(t,e),e=bi(e.nextSibling)}if(Iv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=bi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=yn?bi(t.stateNode.nextSibling):null;return!0}function ek(){for(var t=gn;t;)t=bi(t.nextSibling)}function Ps(){gn=yn=null,Ae=!1}function xg(t){Zn===null?Zn=[t]:Zn.push(t)}var wL=Qr.ReactCurrentBatchConfig;function ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function Ic(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mv(t){var e=t._init;return e(t._payload)}function tk(t){function e(p,m){if(t){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=Ri(p,m),p.index=0,p.sibling=null,p}function o(p,m,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function s(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,y,S){return m===null||m.tag!==6?(m=sm(y,p.mode,S),m.return=p,m):(m=i(m,y),m.return=p,m)}function a(p,m,y,S){var k=y.type;return k===ms?c(p,m,y.props.children,S,y.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===mi&&Mv(k)===m.type)?(S=i(m,y.props),S.ref=ta(p,m,y),S.return=p,S):(S=Wc(y.type,y.key,y.props,null,p.mode,S),S.ref=ta(p,m,y),S.return=p,S)}function u(p,m,y,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=lm(y,p.mode,S),m.return=p,m):(m=i(m,y.children||[]),m.return=p,m)}function c(p,m,y,S,k){return m===null||m.tag!==7?(m=wo(y,p.mode,S,k),m.return=p,m):(m=i(m,y),m.return=p,m)}function f(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=sm(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case mc:return y=Wc(m.type,m.key,m.props,null,p.mode,y),y.ref=ta(p,null,m),y.return=p,y;case ps:return m=lm(m,p.mode,y),m.return=p,m;case mi:var S=m._init;return f(p,S(m._payload),y)}if(sa(m)||Zl(m))return m=wo(m,p.mode,y,null),m.return=p,m;Ic(p,m)}return null}function h(p,m,y,S){var k=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:l(p,m,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mc:return y.key===k?a(p,m,y,S):null;case ps:return y.key===k?u(p,m,y,S):null;case mi:return k=y._init,h(p,m,k(y._payload),S)}if(sa(y)||Zl(y))return k!==null?null:c(p,m,y,S,null);Ic(p,y)}return null}function d(p,m,y,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(y)||null,l(m,p,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case mc:return p=p.get(S.key===null?y:S.key)||null,a(m,p,S,k);case ps:return p=p.get(S.key===null?y:S.key)||null,u(m,p,S,k);case mi:var w=S._init;return d(p,m,y,w(S._payload),k)}if(sa(S)||Zl(S))return p=p.get(y)||null,c(m,p,S,k,null);Ic(m,S)}return null}function g(p,m,y,S){for(var k=null,w=null,C=m,T=m=0,I=null;C!==null&&T<y.length;T++){C.index>T?(I=C,C=null):I=C.sibling;var L=h(p,C,y[T],S);if(L===null){C===null&&(C=I);break}t&&C&&L.alternate===null&&e(p,C),m=o(L,m,T),w===null?k=L:w.sibling=L,w=L,C=I}if(T===y.length)return n(p,C),Ae&&go(p,T),k;if(C===null){for(;T<y.length;T++)C=f(p,y[T],S),C!==null&&(m=o(C,m,T),w===null?k=C:w.sibling=C,w=C);return Ae&&go(p,T),k}for(C=r(p,C);T<y.length;T++)I=d(C,p,T,y[T],S),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?T:I.key),m=o(I,m,T),w===null?k=I:w.sibling=I,w=I);return t&&C.forEach(function(U){return e(p,U)}),Ae&&go(p,T),k}function x(p,m,y,S){var k=Zl(y);if(typeof k!="function")throw Error(A(150));if(y=k.call(y),y==null)throw Error(A(151));for(var w=k=null,C=m,T=m=0,I=null,L=y.next();C!==null&&!L.done;T++,L=y.next()){C.index>T?(I=C,C=null):I=C.sibling;var U=h(p,C,L.value,S);if(U===null){C===null&&(C=I);break}t&&C&&U.alternate===null&&e(p,C),m=o(U,m,T),w===null?k=U:w.sibling=U,w=U,C=I}if(L.done)return n(p,C),Ae&&go(p,T),k;if(C===null){for(;!L.done;T++,L=y.next())L=f(p,L.value,S),L!==null&&(m=o(L,m,T),w===null?k=L:w.sibling=L,w=L);return Ae&&go(p,T),k}for(C=r(p,C);!L.done;T++,L=y.next())L=d(C,p,T,L.value,S),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?T:L.key),m=o(L,m,T),w===null?k=L:w.sibling=L,w=L);return t&&C.forEach(function(B){return e(p,B)}),Ae&&go(p,T),k}function v(p,m,y,S){if(typeof y=="object"&&y!==null&&y.type===ms&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mc:e:{for(var k=y.key,w=m;w!==null;){if(w.key===k){if(k=y.type,k===ms){if(w.tag===7){n(p,w.sibling),m=i(w,y.props.children),m.return=p,p=m;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===mi&&Mv(k)===w.type){n(p,w.sibling),m=i(w,y.props),m.ref=ta(p,w,y),m.return=p,p=m;break e}n(p,w);break}else e(p,w);w=w.sibling}y.type===ms?(m=wo(y.props.children,p.mode,S,y.key),m.return=p,p=m):(S=Wc(y.type,y.key,y.props,null,p.mode,S),S.ref=ta(p,m,y),S.return=p,p=S)}return s(p);case ps:e:{for(w=y.key;m!==null;){if(m.key===w)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=i(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=lm(y,p.mode,S),m.return=p,p=m}return s(p);case mi:return w=y._init,v(p,m,w(y._payload),S)}if(sa(y))return g(p,m,y,S);if(Zl(y))return x(p,m,y,S);Ic(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=i(m,y),m.return=p,p=m):(n(p,m),m=sm(y,p.mode,S),m.return=p,p=m),s(p)):n(p,m)}return v}var _s=tk(!0),nk=tk(!1),rf=Li(null),of=null,Cs=null,vg=null;function Sg(){vg=Cs=of=null}function kg(t){var e=rf.current;ke(rf),t._currentValue=e}function Fm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){of=t,vg=Cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(vg!==t)if(t={context:t,memoizedValue:e,next:null},Cs===null){if(of===null)throw Error(A(308));Cs=t,of.dependencies={lanes:0,firstContext:t}}else Cs=Cs.next=t;return e}var vo=null;function wg(t){vo===null?vo=[t]:vo.push(t)}function rk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xr(t,r)}function Xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gi=!1;function Cg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ik(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xr(t,n)}return i=r.interleaved,i===null?(e.next=e,wg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xr(t,n)}function Fc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ag(t,n)}}function Lv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sf(t,e,n,r){var i=t.updateQueue;gi=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,c=u=a=null,l=o;do{var h=l.lane,d=l.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,x=l;switch(h=e,d=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){f=g.call(d,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(d,f,h):g,h==null)break e;f=Le({},f,h);break e;case 2:gi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else d={eventTime:d,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=d,a=f):c=c.next=d,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);To|=s,t.lanes=s,t.memoizedState=f}}function Nv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var Ba={},xr=Li(Ba),Oa=Li(Ba),Ia=Li(Ba);function So(t){if(t===Ba)throw Error(A(174));return t}function bg(t,e){switch(me(Ia,e),me(Oa,t),me(xr,Ba),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ym(e,t)}ke(xr),me(xr,e)}function Ds(){ke(xr),ke(Oa),ke(Ia)}function ok(t){So(Ia.current);var e=So(xr.current),n=ym(e,t.type);e!==n&&(me(Oa,t),me(xr,n))}function Eg(t){Oa.current===t&&(ke(xr),ke(Oa))}var Ie=Li(0);function lf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var em=[];function Tg(){for(var t=0;t<em.length;t++)em[t]._workInProgressVersionPrimary=null;em.length=0}var Bc=Qr.ReactCurrentDispatcher,tm=Qr.ReactCurrentBatchConfig,Eo=0,Me=null,st=null,pt=null,af=!1,pa=!1,Ma=0,CL=0;function Mt(){throw Error(A(321))}function Ag(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function Rg(t,e,n,r,i,o){if(Eo=o,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bc.current=t===null||t.memoizedState===null?AL:RL,t=n(r,i),pa){o=0;do{if(pa=!1,Ma=0,25<=o)throw Error(A(301));o+=1,pt=st=null,e.updateQueue=null,Bc.current=OL,t=n(r,i)}while(pa)}if(Bc.current=uf,e=st!==null&&st.next!==null,Eo=0,pt=st=Me=null,af=!1,e)throw Error(A(300));return t}function Og(){var t=Ma!==0;return Ma=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Me.memoizedState=pt=t:pt=pt.next=t,pt}function Fn(){if(st===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=pt===null?Me.memoizedState:pt.next;if(e!==null)pt=e,st=t;else{if(t===null)throw Error(A(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},pt===null?Me.memoizedState=pt=t:pt=pt.next=t}return pt}function La(t,e){return typeof e=="function"?e(t):e}function nm(t){var e=Fn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=st,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((Eo&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,Me.lanes|=c,To|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,er(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Me.lanes|=o,To|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rm(t){var e=Fn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);er(o,e.memoizedState)||(nn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function sk(){}function lk(t,e){var n=Me,r=Fn(),i=e(),o=!er(r.memoizedState,i);if(o&&(r.memoizedState=i,nn=!0),r=r.queue,Ig(ck.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Na(9,uk.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(A(349));Eo&30||ak(n,e,i)}return i}function ak(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uk(t,e,n,r){e.value=n,e.getSnapshot=r,fk(e)&&hk(t)}function ck(t,e,n){return n(function(){fk(e)&&hk(t)})}function fk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function hk(t){var e=Xr(t,1);e!==null&&Jn(e,t,1,-1)}function Pv(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=TL.bind(null,Me,t),[e.memoizedState,t]}function Na(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dk(){return Fn().memoizedState}function zc(t,e,n,r){var i=mr();Me.flags|=t,i.memoizedState=Na(1|e,n,void 0,r===void 0?null:r)}function kf(t,e,n,r){var i=Fn();r=r===void 0?null:r;var o=void 0;if(st!==null){var s=st.memoizedState;if(o=s.destroy,r!==null&&Ag(r,s.deps)){i.memoizedState=Na(e,n,o,r);return}}Me.flags|=t,i.memoizedState=Na(1|e,n,o,r)}function _v(t,e){return zc(8390656,8,t,e)}function Ig(t,e){return kf(2048,8,t,e)}function pk(t,e){return kf(4,2,t,e)}function mk(t,e){return kf(4,4,t,e)}function gk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yk(t,e,n){return n=n!=null?n.concat([t]):null,kf(4,4,gk.bind(null,e,t),n)}function Mg(){}function xk(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ag(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vk(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ag(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sk(t,e,n){return Eo&21?(er(n,e)||(n=ES(),Me.lanes|=n,To|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function bL(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=tm.transition;tm.transition={};try{t(!1),e()}finally{se=n,tm.transition=r}}function kk(){return Fn().memoizedState}function EL(t,e,n){var r=Ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wk(t))Ck(e,n);else if(n=rk(t,e,n,r),n!==null){var i=jt();Jn(n,t,r,i),bk(n,e,r)}}function TL(t,e,n){var r=Ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wk(t))Ck(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,er(l,s)){var a=e.interleaved;a===null?(i.next=i,wg(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=rk(t,e,i,r),n!==null&&(i=jt(),Jn(n,t,r,i),bk(n,e,r))}}function wk(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Ck(t,e){pa=af=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ag(t,n)}}var uf={readContext:Dn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},AL={readContext:Dn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:_v,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zc(4194308,4,gk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zc(4194308,4,t,e)},useInsertionEffect:function(t,e){return zc(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EL.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:Pv,useDebugValue:Mg,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=Pv(!1),e=t[0];return t=bL.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=mr();if(Ae){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),mt===null)throw Error(A(349));Eo&30||ak(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,_v(ck.bind(null,r,o,t),[t]),r.flags|=2048,Na(9,uk.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=mr(),e=mt.identifierPrefix;if(Ae){var n=$r,r=Gr;n=(r&~(1<<32-Qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RL={readContext:Dn,useCallback:xk,useContext:Dn,useEffect:Ig,useImperativeHandle:yk,useInsertionEffect:pk,useLayoutEffect:mk,useMemo:vk,useReducer:nm,useRef:dk,useState:function(){return nm(La)},useDebugValue:Mg,useDeferredValue:function(t){var e=Fn();return Sk(e,st.memoizedState,t)},useTransition:function(){var t=nm(La)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:sk,useSyncExternalStore:lk,useId:kk,unstable_isNewReconciler:!1},OL={readContext:Dn,useCallback:xk,useContext:Dn,useEffect:Ig,useImperativeHandle:yk,useInsertionEffect:pk,useLayoutEffect:mk,useMemo:vk,useReducer:rm,useRef:dk,useState:function(){return rm(La)},useDebugValue:Mg,useDeferredValue:function(t){var e=Fn();return st===null?e.memoizedState=t:Sk(e,st.memoizedState,t)},useTransition:function(){var t=rm(La)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:sk,useSyncExternalStore:lk,useId:kk,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wf={isMounted:function(t){return(t=t._reactInternals)?Oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Ai(t),o=Kr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ei(t,o,i),e!==null&&(Jn(e,t,i,r),Fc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Ai(t),o=Kr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ei(t,o,i),e!==null&&(Jn(e,t,i,r),Fc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=Ai(t),i=Kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ei(t,i,r),e!==null&&(Jn(e,t,r,n),Fc(e,t,r))}};function Dv(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ea(n,r)||!Ea(i,o):!0}function Ek(t,e,n){var r=!1,i=Ii,o=e.contextType;return typeof o=="object"&&o!==null?o=Dn(o):(i=on(e)?Co:Pt.current,r=e.contextTypes,o=(r=r!=null)?Ns(t,i):Ii),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Fv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wf.enqueueReplaceState(e,e.state,null)}function zm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Cg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Dn(o):(o=on(e)?Co:Pt.current,i.context=Ns(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Bm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wf.enqueueReplaceState(i,i.state,null),sf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fs(t,e){try{var n="",r=e;do n+=oM(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function im(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Um(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IL=typeof WeakMap=="function"?WeakMap:Map;function Tk(t,e,n){n=Kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ff||(ff=!0,Xm=r),Um(t,e)},n}function Ak(t,e,n){n=Kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Um(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Um(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Bv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jL.bind(null,t,e,n),e.then(t,t))}function zv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kr(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var ML=Qr.ReactCurrentOwner,nn=!1;function Wt(t,e,n,r){e.child=t===null?nk(e,null,n,r):_s(e,t.child,n,r)}function Vv(t,e,n,r,i){n=n.render;var o=e.ref;return Is(e,i),r=Rg(t,e,n,r,o,i),n=Og(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ae&&n&&gg(e),e.flags|=1,Wt(t,e,r,i),e.child)}function Hv(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!zg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Rk(t,e,o,r,i)):(t=Wc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ea,n(s,r)&&t.ref===e.ref)return Zr(t,e,i)}return e.flags|=1,t=Ri(o,r),t.ref=e.ref,t.return=e,e.child=t}function Rk(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ea(o,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Zr(t,e,i)}return Vm(t,e,n,r,i)}function Ok(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Es,mn),mn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(Es,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,me(Es,mn),mn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,me(Es,mn),mn|=r;return Wt(t,e,i,n),e.child}function Ik(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vm(t,e,n,r,i){var o=on(n)?Co:Pt.current;return o=Ns(e,o),Is(e,i),n=Rg(t,e,n,r,o,i),r=Og(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ae&&r&&gg(e),e.flags|=1,Wt(t,e,n,i),e.child)}function Wv(t,e,n,r,i){if(on(n)){var o=!0;ef(e)}else o=!1;if(Is(e,i),e.stateNode===null)Uc(t,e),Ek(e,n,r),zm(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dn(u):(u=on(n)?Co:Pt.current,u=Ns(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Fv(e,s,r,u),gi=!1;var h=e.memoizedState;s.state=h,sf(e,r,s,i),a=e.memoizedState,l!==r||h!==a||rn.current||gi?(typeof c=="function"&&(Bm(e,n,c,r),a=e.memoizedState),(l=gi||Dv(e,n,l,r,h,a,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,ik(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Yn(e.type,l),s.props=u,f=e.pendingProps,h=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Dn(a):(a=on(n)?Co:Pt.current,a=Ns(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==a)&&Fv(e,s,r,a),gi=!1,h=e.memoizedState,s.state=h,sf(e,r,s,i);var g=e.memoizedState;l!==f||h!==g||rn.current||gi?(typeof d=="function"&&(Bm(e,n,d,r),g=e.memoizedState),(u=gi||Dv(e,n,u,r,h,g,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Hm(t,e,n,r,o,i)}function Hm(t,e,n,r,i,o){Ik(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Rv(e,n,!1),Zr(t,e,o);r=e.stateNode,ML.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=_s(e,t.child,null,o),e.child=_s(e,null,l,o)):Wt(t,e,l,o),e.memoizedState=r.state,i&&Rv(e,n,!0),e.child}function Mk(t){var e=t.stateNode;e.pendingContext?Av(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Av(t,e.context,!1),bg(t,e.containerInfo)}function jv(t,e,n,r,i){return Ps(),xg(i),e.flags|=256,Wt(t,e,n,r),e.child}var Wm={dehydrated:null,treeContext:null,retryLane:0};function jm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lk(t,e,n){var r=e.pendingProps,i=Ie.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),me(Ie,i&1),t===null)return Dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ef(s,r,0,null),t=wo(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=jm(n),e.memoizedState=Wm,t):Lg(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return LL(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Ri(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Ri(l,o):(o=wo(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?jm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Wm,r}return o=t.child,t=o.sibling,r=Ri(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lg(t,e){return e=Ef({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mc(t,e,n,r){return r!==null&&xg(r),_s(e,t.child,null,n),t=Lg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LL(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=im(Error(A(422))),Mc(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ef({mode:"visible",children:r.children},i,0,null),o=wo(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&_s(e,t.child,null,s),e.child.memoizedState=jm(s),e.memoizedState=Wm,o);if(!(e.mode&1))return Mc(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(A(419)),r=im(o,r,void 0),Mc(t,e,s,r)}if(l=(s&t.childLanes)!==0,nn||l){if(r=mt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Xr(t,i),Jn(r,t,i,-1))}return Bg(),r=im(Error(A(421))),Mc(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=GL.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,gn=bi(i.nextSibling),yn=e,Ae=!0,Zn=null,t!==null&&(Ln[Nn++]=Gr,Ln[Nn++]=$r,Ln[Nn++]=bo,Gr=t.id,$r=t.overflow,bo=e),e=Lg(e,r.children),e.flags|=4096,e)}function Gv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fm(t.return,e,n)}function om(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Nk(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Wt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gv(t,n,e);else if(t.tag===19)Gv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&lf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),om(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}om(e,!0,n,null,o);break;case"together":om(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),To|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NL(t,e,n){switch(e.tag){case 3:Mk(e),Ps();break;case 5:ok(e);break;case 1:on(e.type)&&ef(e);break;case 4:bg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;me(rf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?Lk(t,e,n):(me(Ie,Ie.current&1),t=Zr(t,e,n),t!==null?t.sibling:null);me(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Nk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,Ok(t,e,n)}return Zr(t,e,n)}var Pk,Gm,_k,Dk;Pk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gm=function(){};_k=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,So(xr.current);var o=null;switch(n){case"input":i=dm(t,i),r=dm(t,r),o=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),o=[];break;case"textarea":i=gm(t,i),r=gm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qc)}xm(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xa.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i?.[u],r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xa.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Se("scroll",t),o||l===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Dk=function(t,e,n,r){n!==r&&(e.flags|=4)};function na(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PL(t,e,n){var r=e.pendingProps;switch(yg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return on(e.type)&&Jc(),Lt(e),null;case 3:return r=e.stateNode,Ds(),ke(rn),ke(Pt),Tg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zn!==null&&(Jm(Zn),Zn=null))),Gm(t,e),Lt(e),null;case 5:Eg(e);var i=So(Ia.current);if(n=e.type,t!==null&&e.stateNode!=null)_k(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return Lt(e),null}if(t=So(xr.current),Oc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[gr]=e,r[Ra]=o,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<aa.length;i++)Se(aa[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Jx(r,o),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Se("invalid",r);break;case"textarea":tv(r,o),Se("invalid",r)}xm(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Rc(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Rc(r.textContent,l,t),i=["children",""+l]):xa.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Se("scroll",r)}switch(n){case"input":gc(r),ev(r,o,!0);break;case"textarea":gc(r),nv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Qc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[gr]=e,t[Ra]=r,Pk(t,e,!1,!1),e.stateNode=t;e:{switch(s=vm(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<aa.length;i++)Se(aa[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":Jx(t,r),i=dm(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Se("invalid",t);break;case"textarea":tv(t,r),i=gm(t,r),Se("invalid",t);break;default:i=r}xm(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?dS(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&fS(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&va(t,a):typeof a=="number"&&va(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xa.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Se("scroll",t):a!=null&&ng(t,o,a,s))}switch(n){case"input":gc(t),ev(t,r,!1);break;case"textarea":gc(t),nv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Oi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ts(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)Dk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=So(Ia.current),So(xr.current),Oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[gr]=e,(o=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:Rc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gr]=e,e.stateNode=r}return Lt(e),null;case 13:if(ke(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&gn!==null&&e.mode&1&&!(e.flags&128))ek(),Ps(),e.flags|=98560,o=!1;else if(o=Oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(A(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(A(317));o[gr]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),o=!1}else Zn!==null&&(Jm(Zn),Zn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?lt===0&&(lt=3):Bg())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Ds(),Gm(t,e),t===null&&Ta(e.stateNode.containerInfo),Lt(e),null;case 10:return kg(e.type._context),Lt(e),null;case 17:return on(e.type)&&Jc(),Lt(e),null;case 19:if(ke(Ie),o=e.memoizedState,o===null)return Lt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)na(o,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=lf(t),s!==null){for(e.flags|=128,na(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Ie,Ie.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ve()>Bs&&(e.flags|=128,r=!0,na(o,!1),e.lanes=4194304)}else{if(!r)if(t=lf(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),na(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ae)return Lt(e),null}else 2*Ve()-o.renderingStartTime>Bs&&n!==1073741824&&(e.flags|=128,r=!0,na(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ve(),e.sibling=null,n=Ie.current,me(Ie,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Fg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function _L(t,e){switch(yg(e),e.tag){case 1:return on(e.type)&&Jc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ds(),ke(rn),ke(Pt),Tg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eg(e),null;case 13:if(ke(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ie),null;case 4:return Ds(),null;case 10:return kg(e.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var Lc=!1,Nt=!1,DL=typeof WeakSet=="function"?WeakSet:Set,D=null;function bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function $m(t,e,n){try{n()}catch(r){De(t,e,r)}}var $v=!1;function FL(t,e){if(Om=Yc,t=VS(),mg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++u===i&&(l=s),h===o&&++c===r&&(a=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Im={focusedElem:t,selectionRange:n},Yc=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,v=g.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?x:Yn(e.type,x),v);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(S){De(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return g=$v,$v=!1,g}function ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&$m(e,n,o)}i=i.next}while(i!==r)}}function Cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Km(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fk(t){var e=t.alternate;e!==null&&(t.alternate=null,Fk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[Ra],delete e[Nm],delete e[vL],delete e[SL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bk(t){return t.tag===5||t.tag===3||t.tag===4}function Kv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qc));else if(r!==4&&(t=t.child,t!==null))for(qm(t,e,n),t=t.sibling;t!==null;)qm(t,e,n),t=t.sibling}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}var wt=null,Xn=!1;function pi(t,e,n){for(n=n.child;n!==null;)zk(t,e,n),n=n.sibling}function zk(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(mf,n)}catch{}switch(n.tag){case 5:Nt||bs(n,e);case 6:var r=wt,i=Xn;wt=null,pi(t,e,n),wt=r,Xn=i,wt!==null&&(Xn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Xn?(t=wt,n=n.stateNode,t.nodeType===8?Qp(t.parentNode,n):t.nodeType===1&&Qp(t,n),Ca(t)):Qp(wt,n.stateNode));break;case 4:r=wt,i=Xn,wt=n.stateNode.containerInfo,Xn=!0,pi(t,e,n),wt=r,Xn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&$m(n,e,s),i=i.next}while(i!==r)}pi(t,e,n);break;case 1:if(!Nt&&(bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}pi(t,e,n);break;case 21:pi(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,pi(t,e,n),Nt=r):pi(t,e,n);break;default:pi(t,e,n)}}function qv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DL),e.forEach(function(r){var i=$L.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,Xn=!1;break e;case 3:wt=l.stateNode.containerInfo,Xn=!0;break e;case 4:wt=l.stateNode.containerInfo,Xn=!0;break e}l=l.return}if(wt===null)throw Error(A(160));zk(o,s,i),wt=null,Xn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){De(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Uk(e,t),e=e.sibling}function Uk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),pr(t),r&4){try{ma(3,t,t.return),Cf(3,t)}catch(x){De(t,t.return,x)}try{ma(5,t,t.return)}catch(x){De(t,t.return,x)}}break;case 1:qn(e,t),pr(t),r&512&&n!==null&&bs(n,n.return);break;case 5:if(qn(e,t),pr(t),r&512&&n!==null&&bs(n,n.return),t.flags&32){var i=t.stateNode;try{va(i,"")}catch(x){De(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&aS(i,o),vm(l,s);var u=vm(l,o);for(s=0;s<a.length;s+=2){var c=a[s],f=a[s+1];c==="style"?dS(i,f):c==="dangerouslySetInnerHTML"?fS(i,f):c==="children"?va(i,f):ng(i,c,f,u)}switch(l){case"input":pm(i,o);break;case"textarea":uS(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?Ts(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?Ts(i,!!o.multiple,o.defaultValue,!0):Ts(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ra]=o}catch(x){De(t,t.return,x)}}break;case 6:if(qn(e,t),pr(t),r&4){if(t.stateNode===null)throw Error(A(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){De(t,t.return,x)}}break;case 3:if(qn(e,t),pr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ca(e.containerInfo)}catch(x){De(t,t.return,x)}break;case 4:qn(e,t),pr(t);break;case 13:qn(e,t),pr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(_g=Ve())),r&4&&qv(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(u=Nt)||c,qn(e,t),Nt=u):qn(e,t),pr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(D=t,c=t.child;c!==null;){for(f=D=c;D!==null;){switch(h=D,d=h.child,h.tag){case 0:case 11:case 14:case 15:ma(4,h,h.return);break;case 1:bs(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){De(r,n,x)}}break;case 5:bs(h,h.return);break;case 22:if(h.memoizedState!==null){Xv(f);continue}}d!==null?(d.return=h,D=d):Xv(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=hS("display",s))}catch(x){De(t,t.return,x)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){De(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),pr(t),r&4&&qv(t);break;case 21:break;default:qn(e,t),pr(t)}}function pr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bk(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(va(i,""),r.flags&=-33);var o=Kv(t);Ym(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Kv(t);qm(t,l,s);break;default:throw Error(A(161))}}catch(a){De(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BL(t,e,n){D=t,Vk(t,e,n)}function Vk(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var i=D,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Lc;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Nt;l=Lc;var u=Nt;if(Lc=s,(Nt=a)&&!u)for(D=i;D!==null;)s=D,a=s.child,s.tag===22&&s.memoizedState!==null?Zv(i):a!==null?(a.return=s,D=a):Zv(i);for(;o!==null;)D=o,Vk(o,e,n),o=o.sibling;D=i,Lc=l,Nt=u}Yv(t,e,n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,D=o):Yv(t,e,n)}}function Yv(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Cf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Nv(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Nv(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ca(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Nt||e.flags&512&&Km(e)}catch(h){De(e,e.return,h)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function Xv(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Zv(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cf(4,e)}catch(a){De(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){De(e,i,a)}}var o=e.return;try{Km(e)}catch(a){De(e,o,a)}break;case 5:var s=e.return;try{Km(e)}catch(a){De(e,s,a)}}}catch(a){De(e,e.return,a)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var zL=Math.ceil,cf=Qr.ReactCurrentDispatcher,Ng=Qr.ReactCurrentOwner,_n=Qr.ReactCurrentBatchConfig,J=0,mt=null,Ye=null,Ct=0,mn=0,Es=Li(0),lt=0,Pa=null,To=0,bf=0,Pg=0,ga=null,tn=null,_g=0,Bs=1/0,Wr=null,ff=!1,Xm=null,Ti=null,Nc=!1,Si=null,hf=0,ya=0,Zm=null,Vc=-1,Hc=0;function jt(){return J&6?Ve():Vc!==-1?Vc:Vc=Ve()}function Ai(t){return t.mode&1?J&2&&Ct!==0?Ct&-Ct:wL.transition!==null?(Hc===0&&(Hc=ES()),Hc):(t=se,t!==0||(t=window.event,t=t===void 0?16:LS(t.type)),t):1}function Jn(t,e,n,r){if(50<ya)throw ya=0,Zm=null,Error(A(185));_a(t,n,r),(!(J&2)||t!==mt)&&(t===mt&&(!(J&2)&&(bf|=n),lt===4&&xi(t,Ct)),sn(t,r),n===1&&J===0&&!(e.mode&1)&&(Bs=Ve()+500,Sf&&Ni()))}function sn(t,e){var n=t.callbackNode;bM(t,e);var r=qc(t,t===mt?Ct:0);if(r===0)n!==null&&ov(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ov(n),e===1)t.tag===0?kL(Qv.bind(null,t)):ZS(Qv.bind(null,t)),yL(function(){!(J&6)&&Ni()}),n=null;else{switch(TS(r)){case 1:n=lg;break;case 4:n=CS;break;case 16:n=Kc;break;case 536870912:n=bS;break;default:n=Kc}n=Yk(n,Hk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hk(t,e){if(Vc=-1,Hc=0,J&6)throw Error(A(327));var n=t.callbackNode;if(Ms()&&t.callbackNode!==n)return null;var r=qc(t,t===mt?Ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=df(t,r);else{e=r;var i=J;J|=2;var o=jk();(mt!==t||Ct!==e)&&(Wr=null,Bs=Ve()+500,ko(t,e));do try{HL();break}catch(l){Wk(t,l)}while(!0);Sg(),cf.current=o,J=i,Ye!==null?e=0:(mt=null,Ct=0,e=lt)}if(e!==0){if(e===2&&(i=bm(t),i!==0&&(r=i,e=Qm(t,i))),e===1)throw n=Pa,ko(t,0),xi(t,r),sn(t,Ve()),n;if(e===6)xi(t,r);else{if(i=t.current.alternate,!(r&30)&&!UL(i)&&(e=df(t,r),e===2&&(o=bm(t),o!==0&&(r=o,e=Qm(t,o))),e===1))throw n=Pa,ko(t,0),xi(t,r),sn(t,Ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:yo(t,tn,Wr);break;case 3:if(xi(t,r),(r&130023424)===r&&(e=_g+500-Ve(),10<e)){if(qc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lm(yo.bind(null,t,tn,Wr),e);break}yo(t,tn,Wr);break;case 4:if(xi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Qn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zL(r/1960))-r,10<r){t.timeoutHandle=Lm(yo.bind(null,t,tn,Wr),r);break}yo(t,tn,Wr);break;case 5:yo(t,tn,Wr);break;default:throw Error(A(329))}}}return sn(t,Ve()),t.callbackNode===n?Hk.bind(null,t):null}function Qm(t,e){var n=ga;return t.current.memoizedState.isDehydrated&&(ko(t,e).flags|=256),t=df(t,e),t!==2&&(e=tn,tn=n,e!==null&&Jm(e)),t}function Jm(t){tn===null?tn=t:tn.push.apply(tn,t)}function UL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!er(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xi(t,e){for(e&=~Pg,e&=~bf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qn(e),r=1<<n;t[n]=-1,e&=~r}}function Qv(t){if(J&6)throw Error(A(327));Ms();var e=qc(t,0);if(!(e&1))return sn(t,Ve()),null;var n=df(t,e);if(t.tag!==0&&n===2){var r=bm(t);r!==0&&(e=r,n=Qm(t,r))}if(n===1)throw n=Pa,ko(t,0),xi(t,e),sn(t,Ve()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yo(t,tn,Wr),sn(t,Ve()),null}function Dg(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Bs=Ve()+500,Sf&&Ni())}}function Ao(t){Si!==null&&Si.tag===0&&!(J&6)&&Ms();var e=J;J|=1;var n=_n.transition,r=se;try{if(_n.transition=null,se=1,t)return t()}finally{se=r,_n.transition=n,J=e,!(J&6)&&Ni()}}function Fg(){mn=Es.current,ke(Es)}function ko(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gL(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(yg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jc();break;case 3:Ds(),ke(rn),ke(Pt),Tg();break;case 5:Eg(r);break;case 4:Ds();break;case 13:ke(Ie);break;case 19:ke(Ie);break;case 10:kg(r.type._context);break;case 22:case 23:Fg()}n=n.return}if(mt=t,Ye=t=Ri(t.current,null),Ct=mn=e,lt=0,Pa=null,Pg=bf=To=0,tn=ga=null,vo!==null){for(e=0;e<vo.length;e++)if(n=vo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}vo=null}return t}function Wk(t,e){do{var n=Ye;try{if(Sg(),Bc.current=uf,af){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}af=!1}if(Eo=0,pt=st=Me=null,pa=!1,Ma=0,Ng.current=null,n===null||n.return===null){lt=1,Pa=e,Ye=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Ct,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=zv(s);if(d!==null){d.flags&=-257,Uv(d,s,l,o,e),d.mode&1&&Bv(o,u,e),e=d,a=u;var g=e.updateQueue;if(g===null){var x=new Set;x.add(a),e.updateQueue=x}else g.add(a);break e}else{if(!(e&1)){Bv(o,u,e),Bg();break e}a=Error(A(426))}}else if(Ae&&l.mode&1){var v=zv(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Uv(v,s,l,o,e),xg(Fs(a,l));break e}}o=a=Fs(a,l),lt!==4&&(lt=2),ga===null?ga=[o]:ga.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=Tk(o,a,e);Lv(o,p);break e;case 1:l=a;var m=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ti===null||!Ti.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=Ak(o,l,e);Lv(o,S);break e}}o=o.return}while(o!==null)}$k(n)}catch(k){e=k,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function jk(){var t=cf.current;return cf.current=uf,t===null?uf:t}function Bg(){(lt===0||lt===3||lt===2)&&(lt=4),mt===null||!(To&268435455)&&!(bf&268435455)||xi(mt,Ct)}function df(t,e){var n=J;J|=2;var r=jk();(mt!==t||Ct!==e)&&(Wr=null,ko(t,e));do try{VL();break}catch(i){Wk(t,i)}while(!0);if(Sg(),J=n,cf.current=r,Ye!==null)throw Error(A(261));return mt=null,Ct=0,lt}function VL(){for(;Ye!==null;)Gk(Ye)}function HL(){for(;Ye!==null&&!mM();)Gk(Ye)}function Gk(t){var e=qk(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?$k(t):Ye=e,Ng.current=null}function $k(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_L(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,Ye=null;return}}else if(n=PL(n,e,mn),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);lt===0&&(lt=5)}function yo(t,e,n){var r=se,i=_n.transition;try{_n.transition=null,se=1,WL(t,e,n,r)}finally{_n.transition=i,se=r}return null}function WL(t,e,n,r){do Ms();while(Si!==null);if(J&6)throw Error(A(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(EM(t,o),t===mt&&(Ye=mt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nc||(Nc=!0,Yk(Kc,function(){return Ms(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=_n.transition,_n.transition=null;var s=se;se=1;var l=J;J|=4,Ng.current=null,FL(t,n),Uk(n,t),fL(Im),Yc=!!Om,Im=Om=null,t.current=n,BL(n,t,i),gM(),J=l,se=s,_n.transition=o}else t.current=n;if(Nc&&(Nc=!1,Si=t,hf=i),o=t.pendingLanes,o===0&&(Ti=null),vM(n.stateNode,r),sn(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ff)throw ff=!1,t=Xm,Xm=null,t;return hf&1&&t.tag!==0&&Ms(),o=t.pendingLanes,o&1?t===Zm?ya++:(ya=0,Zm=t):ya=0,Ni(),null}function Ms(){if(Si!==null){var t=TS(hf),e=_n.transition,n=se;try{if(_n.transition=null,se=16>t?16:t,Si===null)var r=!1;else{if(t=Si,Si=null,hf=0,J&6)throw Error(A(331));var i=J;for(J|=4,D=t.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(D=u;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:ma(8,c,o)}var f=c.child;if(f!==null)f.return=c,D=f;else for(;D!==null;){c=D;var h=c.sibling,d=c.return;if(Fk(c),c===u){D=null;break}if(h!==null){h.return=d,D=h;break}D=d}}}var g=o.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ma(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,D=p;break e}D=o.return}}var m=t.current;for(D=m;D!==null;){s=D;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,D=y;else e:for(s=m;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cf(9,l)}}catch(k){De(l,l.return,k)}if(l===s){D=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,D=S;break e}D=l.return}}if(J=i,Ni(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(mf,t)}catch{}r=!0}return r}finally{se=n,_n.transition=e}}return!1}function Jv(t,e,n){e=Fs(n,e),e=Tk(t,e,1),t=Ei(t,e,1),e=jt(),t!==null&&(_a(t,1,e),sn(t,e))}function De(t,e,n){if(t.tag===3)Jv(t,t,n);else for(;e!==null;){if(e.tag===3){Jv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=Fs(n,t),t=Ak(e,t,1),e=Ei(e,t,1),t=jt(),e!==null&&(_a(e,1,t),sn(e,t));break}}e=e.return}}function jL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Ct&n)===n&&(lt===4||lt===3&&(Ct&130023424)===Ct&&500>Ve()-_g?ko(t,0):Pg|=n),sn(t,e)}function Kk(t,e){e===0&&(t.mode&1?(e=vc,vc<<=1,!(vc&130023424)&&(vc=4194304)):e=1);var n=jt();t=Xr(t,e),t!==null&&(_a(t,e,n),sn(t,n))}function GL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kk(t,n)}function $L(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),Kk(t,n)}var qk;qk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,NL(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Ae&&e.flags&1048576&&QS(e,nf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uc(t,e),t=e.pendingProps;var i=Ns(e,Pt.current);Is(e,n),i=Rg(null,e,r,t,i,n);var o=Og();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(r)?(o=!0,ef(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cg(e),i.updater=wf,e.stateNode=i,i._reactInternals=e,zm(e,r,t,n),e=Hm(null,e,r,!0,o,n)):(e.tag=0,Ae&&o&&gg(e),Wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qL(r),t=Yn(r,t),i){case 0:e=Vm(null,e,r,t,n);break e;case 1:e=Wv(null,e,r,t,n);break e;case 11:e=Vv(null,e,r,t,n);break e;case 14:e=Hv(null,e,r,Yn(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Vm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Wv(t,e,r,i,n);case 3:e:{if(Mk(e),t===null)throw Error(A(387));r=e.pendingProps,o=e.memoizedState,i=o.element,ik(t,e),sf(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Fs(Error(A(423)),e),e=jv(t,e,r,n,i);break e}else if(r!==i){i=Fs(Error(A(424)),e),e=jv(t,e,r,n,i);break e}else for(gn=bi(e.stateNode.containerInfo.firstChild),yn=e,Ae=!0,Zn=null,n=nk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ps(),r===i){e=Zr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return ok(e),t===null&&Dm(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Mm(r,i)?s=null:o!==null&&Mm(r,o)&&(e.flags|=32),Ik(t,e),Wt(t,e,s,n),e.child;case 6:return t===null&&Dm(e),null;case 13:return Lk(t,e,n);case 4:return bg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_s(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Vv(t,e,r,i,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,me(rf,r._currentValue),r._currentValue=s,o!==null)if(er(o.value,s)){if(o.children===i.children&&!rn.current){e=Zr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Kr(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fm(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(A(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Fm(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Is(e,n),i=Dn(i),r=r(i),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,i=Yn(r,e.pendingProps),i=Yn(r.type,i),Hv(t,e,r,i,n);case 15:return Rk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Uc(t,e),e.tag=1,on(r)?(t=!0,ef(e)):t=!1,Is(e,n),Ek(e,r,i),zm(e,r,i,n),Hm(null,e,r,!0,t,n);case 19:return Nk(t,e,n);case 22:return Ok(t,e,n)}throw Error(A(156,e.tag))};function Yk(t,e){return wS(t,e)}function KL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new KL(t,e,n,r)}function zg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qL(t){if(typeof t=="function")return zg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ig)return 11;if(t===og)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")zg(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ms:return wo(n.children,i,o,e);case rg:s=8,i|=8;break;case um:return t=Pn(12,n,e,i|2),t.elementType=um,t.lanes=o,t;case cm:return t=Pn(13,n,e,i),t.elementType=cm,t.lanes=o,t;case fm:return t=Pn(19,n,e,i),t.elementType=fm,t.lanes=o,t;case oS:return Ef(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rS:s=10;break e;case iS:s=9;break e;case ig:s=11;break e;case og:s=14;break e;case mi:s=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=Pn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function wo(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Ef(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=oS,t.lanes=n,t.stateNode={isHidden:!1},t}function sm(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function lm(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jp(0),this.expirationTimes=jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ug(t,e,n,r,i,o,s,l,a){return t=new YL(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cg(o),t}function XL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Xk(t){if(!t)return Ii;t=t._reactInternals;e:{if(Oo(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(on(n))return XS(t,n,e)}return e}function Zk(t,e,n,r,i,o,s,l,a){return t=Ug(n,r,!0,t,i,o,s,l,a),t.context=Xk(null),n=t.current,r=jt(),i=Ai(n),o=Kr(r,i),o.callback=e??null,Ei(n,o,i),t.current.lanes=i,_a(t,i,r),sn(t,r),t}function Tf(t,e,n,r){var i=e.current,o=jt(),s=Ai(i);return n=Xk(n),e.context===null?e.context=n:e.pendingContext=n,e=Kr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(i,e,s),t!==null&&(Jn(t,i,s,o),Fc(t,i,s)),s}function pf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vg(t,e){eS(t,e),(t=t.alternate)&&eS(t,e)}function ZL(){return null}var Qk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hg(t){this._internalRoot=t}Af.prototype.render=Hg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Tf(t,e,null,null)};Af.prototype.unmount=Hg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ao(function(){Tf(null,t,null,null)}),e[Yr]=null}};function Af(t){this._internalRoot=t}Af.prototype.unstable_scheduleHydration=function(t){if(t){var e=OS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yi.length&&e!==0&&e<yi[n].priority;n++);yi.splice(n,0,t),n===0&&MS(t)}};function Wg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tS(){}function QL(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=pf(s);o.call(u)}}var s=Zk(e,r,t,0,null,!1,!1,"",tS);return t._reactRootContainer=s,t[Yr]=s.current,Ta(t.nodeType===8?t.parentNode:t),Ao(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=pf(a);l.call(u)}}var a=Ug(t,0,!1,null,null,!1,!1,"",tS);return t._reactRootContainer=a,t[Yr]=a.current,Ta(t.nodeType===8?t.parentNode:t),Ao(function(){Tf(e,a,n,r)}),a}function Of(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=pf(s);l.call(a)}}Tf(e,s,t,i)}else s=QL(n,e,t,i,r);return pf(s)}AS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=la(e.pendingLanes);n!==0&&(ag(e,n|1),sn(e,Ve()),!(J&6)&&(Bs=Ve()+500,Ni()))}break;case 13:Ao(function(){var r=Xr(t,1);if(r!==null){var i=jt();Jn(r,t,1,i)}}),Vg(t,1)}};ug=function(t){if(t.tag===13){var e=Xr(t,134217728);if(e!==null){var n=jt();Jn(e,t,134217728,n)}Vg(t,134217728)}};RS=function(t){if(t.tag===13){var e=Ai(t),n=Xr(t,e);if(n!==null){var r=jt();Jn(n,t,e,r)}Vg(t,e)}};OS=function(){return se};IS=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};km=function(t,e,n){switch(e){case"input":if(pm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vf(r);if(!i)throw Error(A(90));lS(r),pm(r,i)}}}break;case"textarea":uS(t,n);break;case"select":e=n.value,e!=null&&Ts(t,!!n.multiple,e,!1)}};gS=Dg;yS=Ao;var JL={usingClientEntryPoint:!1,Events:[Fa,vs,vf,pS,mS,Dg]},ra={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eN={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SS(t),t===null?null:t.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||ZL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(ia=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ia.isDisabled&&ia.supportsFiber))try{mf=ia.inject(eN),yr=ia}catch{}var ia;Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JL;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wg(e))throw Error(A(200));return XL(t,e,null,n)};Sn.createRoot=function(t,e){if(!Wg(t))throw Error(A(299));var n=!1,r="",i=Qk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ug(t,1,!1,null,null,n,!1,r,i),t[Yr]=e.current,Ta(t.nodeType===8?t.parentNode:t),new Hg(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=SS(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Ao(t)};Sn.hydrate=function(t,e,n){if(!Rf(e))throw Error(A(200));return Of(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!Wg(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Qk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Zk(e,null,t,1,n??null,i,!1,o,s),t[Yr]=e.current,Ta(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Af(e)};Sn.render=function(t,e,n){if(!Rf(e))throw Error(A(200));return Of(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Rf(t))throw Error(A(40));return t._reactRootContainer?(Ao(function(){Of(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1};Sn.unstable_batchedUpdates=Dg;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rf(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Of(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426"});var nw=Hr((OV,tw)=>{"use strict";function ew(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ew)}catch(t){console.error(t)}}ew(),tw.exports=Jk()});var iw=Hr(jg=>{"use strict";var rw=nw();jg.createRoot=rw.createRoot,jg.hydrateRoot=rw.hydrateRoot;var IV});var rA=Hr(fd=>{"use strict";var j4=po(),G4=Symbol.for("react.element"),$4=Symbol.for("react.fragment"),K4=Object.prototype.hasOwnProperty,q4=j4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y4={key:!0,ref:!0,__self:!0,__source:!0};function nA(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)K4.call(e,r)&&!Y4.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:G4,type:t,key:o,ref:s,props:i,_owner:q4.current}}fd.Fragment=$4;fd.jsx=nA;fd.jsxs=nA});var cl=Hr((xW,iA)=>{"use strict";iA.exports=rA()});var II=hr(po()),MI=hr(iw());var rt=hr(po());function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(null,arguments)}function ow(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ki=hr(po(),1);var an=hr(po(),1);var $g=[],uw=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?uw:$g).push(n=n+t[e])})();function tN(t){if(t<768)return!1;for(let e=0,n=$g.length;;){let r=e+n>>1;if(t<$g[r])n=r;else if(t>=uw[r])e=r+1;else return!0;if(e==n)return!1}}function sw(t){return t>=127462&&t<=127487}var lw=8205;function cw(t,e,n=!0,r=!0){return(n?fw:nN)(t,e,r)}function fw(t,e,n){if(e==t.length)return e;e&&hw(t.charCodeAt(e))&&dw(t.charCodeAt(e-1))&&e--;let r=Gg(t,e);for(e+=aw(r);e<t.length;){let i=Gg(t,e);if(r==lw||i==lw||n&&tN(i))e+=aw(i),r=i;else if(sw(i)){let o=0,s=e-2;for(;s>=0&&sw(Gg(t,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function nN(t,e,n){for(;e>0;){let r=fw(t,e-2,n);if(r<e)return r;e--}return 0}function Gg(t,e){let n=t.charCodeAt(e);if(!dw(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return hw(r)?(n-55296<<10)+(r-56320)+65536:n}function hw(t){return t>=56320&&t<57344}function dw(t){return t>=55296&&t<56320}function aw(t){return t<65536?1:2}var Y=class t{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Gs(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Hs.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Gs(this,e,n);let r=[];return this.decompose(e,n,r,0),Hs.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Lo(this),o=new Lo(e);for(let s=n,l=n;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new Lo(this,e)}iterRange(e,n=this.length){return new _f(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Df(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?t.empty:e.length<=32?new kn(e):Hs.from(kn.split(e,[]))}},kn=class t extends Y{constructor(e,n=rN(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.text[o],l=i+s.length;if((n?r:l)>=e)return new qg(i,l,r,s);i=l+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new t(pw(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),l=Pf(o.text,s.text.slice(),0,o.length);if(l.length<=32)r.push(new t(l,s.length+o.length));else{let a=l.length>>1;r.push(new t(l.slice(0,a)),new t(l.slice(a)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof t))return super.replace(e,n,r);[e,n]=Gs(this,e,n);let i=Pf(this.text,Pf(r.text,pw(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new t(i,o):Hs.from(t.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){[e,n]=Gs(this,e,n);let i="";for(let o=0,s=0;o<=n&&s<this.text.length;s++){let l=this.text[s],a=o+l.length;o>e&&s&&(i+=r),e<a&&n>o&&(i+=l.slice(Math.max(0,e-o),n-o)),o=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new t(r,i)),r=[],i=-1);return i>-1&&n.push(new t(r,i)),n}},Hs=class t extends Y{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.children[o],l=i+s.length,a=r+s.lines-1;if((n?a:l)>=e)return s.lineInner(e,n,r,i);i=l+1,r=a+1}}decompose(e,n,r,i){for(let o=0,s=0;s<=n&&o<this.children.length;o++){let l=this.children[o],a=s+l.length;if(e<=a&&n>=s){let u=i&((s<=e?1:0)|(a>=n?2:0));s>=e&&a<=n&&!u?r.push(l):l.decompose(e-s,n-s,r,u)}s=a+1}}replace(e,n,r){if([e,n]=Gs(this,e,n),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],l=o+s.length;if(e>=o&&n<=l){let a=s.replace(e-o,n-o,r),u=this.lines-s.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new t(c,this.length-(n-e)+r.length)}return super.replace(o,l,a)}o=l+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Gs(this,e,n);let i="";for(let o=0,s=0;o<this.children.length&&s<=n;o++){let l=this.children[o],a=s+l.length;s>e&&o&&(i+=r),e<a&&n>s&&(i+=l.sliceString(e-s,n-s,r)),s=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof t))return 0;let r=0,[i,o,s,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==s||o==l)return r;let a=this.children[i],u=e.children[o];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let g of e)g.flatten(d);return new kn(d,n)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,l=[],a=0,u=-1,c=[];function f(d){let g;if(d.lines>o&&d instanceof t)for(let x of d.children)f(x);else d.lines>s&&(a>s||!a)?(h(),l.push(d)):d instanceof kn&&a&&(g=c[c.length-1])instanceof kn&&d.lines+g.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new kn(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>i&&h(),a+=d.lines,u+=d.length+1,c.push(d))}function h(){a!=0&&(l.push(c.length==1?c[0]:t.from(c,u)),u=-1,a=c.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new t(l,n)}};Y.empty=new kn([""],0);function rN(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Pf(t,e,n=0,r=1e9){for(let i=0,o=0,s=!0;o<t.length&&i<=r;o++){let l=t[o],a=i+l.length;a>=n&&(a>r&&(l=l.slice(0,r-i)),i<n&&(l=l.slice(n-i)),s?(e[e.length-1]+=l,s=!1):e.push(l)),i=a+1}return e}function pw(t,e,n){return Pf(t,[""],e,n)}var Lo=class{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof kn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,l=i instanceof kn?i.text.length:i.children.length;if(s==(n>0?l:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof kn){let a=i.text[s+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[s+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof kn?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},_f=class{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Lo(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Df=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(Y.prototype[Symbol.iterator]=function(){return this.iter()},Lo.prototype[Symbol.iterator]=_f.prototype[Symbol.iterator]=Df.prototype[Symbol.iterator]=function(){return this});var qg=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}};function Gs(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Xe(t,e,n=!0,r=!0){return cw(t,e,n,r)}function iN(t){return t>=56320&&t<57344}function oN(t){return t>=55296&&t<56320}function Tt(t,e){let n=t.charCodeAt(e);if(!oN(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return iN(r)?(n-55296<<10)+(r-56320)+65536:n}function ja(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function wn(t){return t<65536?1:2}var Yg=/\r\n?|\n/,Et=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Et||(Et={})),Jr=class t{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],s=this.sections[n++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,n=!1){Xg(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new t(e)}composeDesc(e){return this.empty?e:e.empty?this:vw(this,e)}mapDesc(e,n=!1){return e.empty?this:Zg(this,e,n)}mapPos(e,n=-1,r=Et.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],a=this.sections[s++],u=i+l;if(a<0){if(u>e)return o+(e-i);o+=l}else{if(r!=Et.Simple&&u>=e&&(r==Et.TrackDel&&i<e&&u>e||r==Et.TrackBefore&&i<e||r==Et.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==i||n<0?o:o+a;o+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],s=this.sections[r++],l=i+o;if(s>=0&&i<=n&&l>=e)return i<e&&l>n?"cover":!0;i=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t(e)}static create(e){return new t(e)}},$t=class t extends Jr{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Xg(this,(n,r,i,o,s)=>e=e.replace(i,i+(r-n),s),!1),e}mapDesc(e,n=!1){return Zg(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let s=n[i],l=n[i+1];if(l>=0){n[i]=l,n[i+1]=s;let a=i>>1;for(;r.length<a;)r.push(Y.empty);r.push(s?e.slice(o,o+s):Y.empty)}o+=s}return new t(n,r)}compose(e){return this.empty?e:e.empty?this:vw(this,e,!0)}map(e,n=!1){return e.empty?this:Zg(this,e,n,!0)}iterChanges(e,n=!1){Xg(this,e,n)}get desc(){return Jr.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new No(this);e:for(let s=0,l=0;;){let a=s==e.length?1e9:e[s++];for(;l<a||l==a&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,a-l);_t(i,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;_t(n,c,f),f>0&&Pi(r,n,o.text),o.forward(c),l+=c}let u=e[s++];for(;l<u;){if(o.done)break e;let c=Math.min(o.len,u-l);_t(n,c,-1),_t(i,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),l+=c}}return{changes:new t(n,r),filtered:Jr.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],s=0,l=null;function a(c=!1){if(!c&&!i.length)return;s<n&&_t(i,n-s,-1);let f=new t(i,o);l=l?l.compose(f.map(l)):f,i=[],o=[],s=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof t){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>n)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);let g=d?typeof d=="string"?Y.of(d.split(r||Yg)):d:Y.empty,x=g.length;if(f==h&&x==0)return;f<s&&a(),f>s&&_t(i,f-s,-1),_t(i,h-f,x),Pi(o,i,g),s=h}}return u(e),a(!l),l}static empty(e){return new t(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(Y.empty);r[i]=Y.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new t(n,r)}static createSet(e,n){return new t(e,n)}};function _t(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Pi(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Y.empty);t.push(n)}}function Xg(t,e,n){let r=t.inserted;for(let i=0,o=0,s=0;s<t.sections.length;){let l=t.sections[s++],a=t.sections[s++];if(a<0)i+=l,o+=l;else{let u=i,c=o,f=Y.empty;for(;u+=l,c+=a,a&&r&&(f=f.append(r[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)l=t.sections[s++],a=t.sections[s++];e(i,u,o,c,f),i=u,o=c}}}function Zg(t,e,n,r=!1){let i=[],o=r?[]:null,s=new No(t),l=new No(e);for(let a=-1;;){if(s.done&&l.len||l.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&l.ins==-1){let u=Math.min(s.len,l.len);_t(i,u,-1),s.forward(u),l.forward(u)}else if(l.ins>=0&&(s.ins<0||a==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!n))){let u=l.len;for(_t(i,l.ins,-1);u;){let c=Math.min(s.len,u);s.ins>=0&&a<s.i&&s.len<=c&&(_t(i,0,s.ins),o&&Pi(o,i,s.text),a=s.i),s.forward(c),u-=c}l.next()}else if(s.ins>=0){let u=0,c=s.len;for(;c;)if(l.ins==-1){let f=Math.min(c,l.len);u+=f,c-=f,l.forward(f)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;_t(i,u,a<s.i?s.ins:0),o&&a<s.i&&Pi(o,i,s.text),a=s.i,s.forward(s.len-c)}else{if(s.done&&l.done)return o?$t.createSet(i,o):Jr.create(i);throw new Error("Mismatched change set lengths")}}}function vw(t,e,n=!1){let r=[],i=n?[]:null,o=new No(t),s=new No(e);for(let l=!1;;){if(o.done&&s.done)return i?$t.createSet(r,i):Jr.create(r);if(o.ins==0)_t(r,o.len,0,l),o.next();else if(s.len==0&&!s.done)_t(r,0,s.ins,l),i&&Pi(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let a=Math.min(o.len2,s.len),u=r.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;_t(r,a,c,l),i&&c&&Pi(i,r,s.text)}else s.ins==-1?(_t(r,o.off?0:o.len,a,l),i&&Pi(i,r,o.textBit(a))):(_t(r,o.off?0:o.len,s.off?0:s.ins,l),i&&!s.off&&Pi(i,r,s.text));l=(o.ins>a||s.ins>=0&&s.len>a)&&(l||r.length>u),o.forward2(a),s.forward(a)}}}}var No=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Y.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Y.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},Vs=class t{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new t(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new t(e,n,r)}},E=class t{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:t.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new t([this.main],0)}addRange(e,n=!0){return t.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,t.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new t(e.ranges.map(n=>Vs.fromJSON(n)),e.main)}static single(e,n=e){return new t([t.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return t.normalized(e.slice(),n);r=o.to}return new t(e,n)}static cursor(e,n=0,r,i){return Vs.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let o=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?Vs.create(n,e,48|o):Vs.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let l=s.from,a=Math.max(o.to,s.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?t.range(a,l):t.range(l,a))}}return new t(e,n)}};function Sw(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}var l0=0,N=class t{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=l0++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new t(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:a0),!!e.static,e.enables)}of(e){return new Ws([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ws(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ws(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}};function a0(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}var Ws=class{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=l0++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?u=!0:((n=e[f.id])!==null&&n!==void 0?n:1)&1||c.push(e[f.id]);return{create(f){return f.values[s]=r(f),1},update(f,h){if(a&&h.docChanged||u&&(h.docChanged||h.selection)||Qg(f,c)){let d=r(f);if(l?!mw(d,f.values[s],i):!i(d,f.values[s]))return f.values[s]=d,1}return 0},reconfigure:(f,h)=>{let d,g=h.config.address[o];if(g!=null){let x=Uf(h,g);if(this.dependencies.every(v=>v instanceof N?h.facet(v)===f.facet(v):v instanceof re?h.field(v,!1)==f.field(v,!1):!0)||(l?mw(d=r(f),x,i):i(d=r(f),x)))return f.values[s]=x,0}else d=r(f);return f.values[s]=d,1}}}};function mw(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Qg(t,e){let n=!1;for(let r of e)Ua(t,r)&1&&(n=!0);return n}function sN(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),o=r.filter(a=>!(a&1)),s=t[e.id]>>1;function l(a){let u=[];for(let c=0;c<r.length;c++){let f=Uf(a,r[c]);if(i[c]==2)for(let h of f)u.push(h);else u.push(f)}return e.combine(u)}return{create(a){for(let u of r)Ua(a,u);return a.values[s]=l(a),1},update(a,u){if(!Qg(a,o))return 0;let c=l(a);return e.compare(c,a.values[s])?0:(a.values[s]=c,1)},reconfigure(a,u){let c=Qg(a,r),f=u.config.facets[e.id],h=u.facet(e);if(f&&!c&&a0(n,f))return a.values[s]=h,0;let d=l(a);return e.compare(d,h)?(a.values[s]=h,0):(a.values[s]=d,1)}}}var Mf=N.define({static:!0}),re=class t{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new t(l0++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Mf).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[n]=s,1)},reconfigure:(r,i)=>{let o=r.facet(Mf),s=i.facet(Mf),l;return(l=o.find(a=>a.field==this))&&l!=s.find(a=>a.field==this)?(r.values[n]=l.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Mf.of({field:this,create:e})]}get extension(){return this}},Io={lowest:4,low:3,default:2,high:1,highest:0};function za(t){return e=>new Ff(e,t)}var Cn={highest:za(Io.highest),high:za(Io.high),default:za(Io.default),low:za(Io.low),lowest:za(Io.lowest)},Ff=class{constructor(e,n){this.inner=e,this.prec=n}},Bf=class t{of(e){return new Va(this,e)}reconfigure(e){return t.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Va=class{constructor(e,n){this.compartment=e,this.inner=n}},zf=class t{constructor(e,n,r,i,o,s){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),s=new Map;for(let h of lN(e,n,s))h instanceof re?i.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],u=[];for(let h of i)l[h.id]=u.length<<1,u.push(d=>h.slot(d));let c=r?.config.facets;for(let h in o){let d=o[h],g=d[0].facet,x=c&&c[h]||[];if(d.every(v=>v.type==0))if(l[g.id]=a.length<<1|1,a0(x,d))a.push(r.facet(g));else{let v=g.combine(d.map(p=>p.value));a.push(r&&g.compare(v,r.facet(g))?r.facet(g):v)}else{for(let v of d)v.type==0?(l[v.id]=a.length<<1|1,a.push(v.value)):(l[v.id]=u.length<<1,u.push(p=>v.dynamicSlot(p)));l[g.id]=u.length<<1,u.push(v=>sN(v,g,d))}}let f=u.map(h=>h(l));return new t(e,s,f,l,a,o)}};function lN(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(s,l){let a=i.get(s);if(a!=null){if(a<=l)return;let u=r[a].indexOf(s);u>-1&&r[a].splice(u,1),s instanceof Va&&n.delete(s.compartment)}if(i.set(s,l),Array.isArray(s))for(let u of s)o(u,l);else if(s instanceof Va){if(n.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(s.compartment)||s.inner;n.set(s.compartment,u),o(u,l)}else if(s instanceof Ff)o(s.inner,s.prec);else if(s instanceof re)r[l].push(s),s.provides&&o(s.provides,l);else if(s instanceof Ws)r[l].push(s),s.facet.extensions&&o(s.facet.extensions,Io.default);else{let u=s.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,l)}}return o(t,Io.default),r.reduce((s,l)=>s.concat(l))}function Ua(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Uf(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}var kw=N.define(),Jg=N.define({combine:t=>t.some(e=>e),static:!0}),ww=N.define({combine:t=>t.length?t[0]:void 0,static:!0}),Cw=N.define(),bw=N.define(),Ew=N.define(),Tw=N.define({combine:t=>t.length?t[0]:!1}),gt=class{constructor(e,n){this.type=e,this.value=n}static define(){return new e0}},e0=class{of(e){return new gt(this,e)}},t0=class{constructor(e){this.map=e}of(e){return new V(this,e)}},V=class t{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new t(this.type,n)}is(e){return this.type==e}static define(e={}){return new t0(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}};V.reconfigure=V.define();V.appendConfig=V.define();var at=class t{constructor(e,n,r,i,o,s){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&Sw(r,n.newLength),o.some(l=>l.type==t.time)||(this.annotations=o.concat(t.time.of(Date.now())))}static create(e,n,r,i,o,s){return new t(e,n,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(t.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}};at.time=gt.define();at.userEvent=gt.define();at.addToHistory=gt.define();at.remote=gt.define();function aN(t,e){let n=[];for(let r=0,i=0;;){let o,s;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],s=t[r++];else if(i<e.length)o=e[i++],s=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Aw(t,e,n){var r;let i,o,s;return n?(i=e.changes,o=$t.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:V.mapEffects(t.effects,i).concat(V.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function n0(t,e,n){let r=e.selection,i=js(e.annotations);return e.userEvent&&(i=i.concat(at.userEvent.of(e.userEvent))),{changes:e.changes instanceof $t?e.changes:$t.of(e.changes||[],n,t.facet(ww)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:js(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Rw(t,e,n){let r=n0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let s=!!e[o].sequential;r=Aw(r,n0(t,e[o],s?r.changes.newLength:t.doc.length),s)}let i=at.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return cN(n?uN(i):i)}function uN(t){let e=t.startState,n=!0;for(let i of e.facet(Cw)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:aN(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=$t.empty(e.doc.length);else{let s=t.changes.filter(n);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}t=at.create(e,i,t.selection&&t.selection.map(o),V.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(bw);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof at?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof at?t=o[0]:t=Rw(e,js(o),!1)}return t}function cN(t){let e=t.startState,n=e.facet(Ew),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=Aw(r,n0(e,o,t.changes.newLength),!0))}return r==t?t:at.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}var fN=[];function js(t){return t==null?fN:Array.isArray(t)?t:[t]}var ae=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ae||(ae={})),hN=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,r0;try{r0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function dN(t){if(r0)return r0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||hN.test(n)))return!0}return!1}function pN(t){return e=>{if(!/\S/.test(e))return ae.Space;if(dN(e))return ae.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ae.Word;return ae.Other}}var ee=class t{constructor(e,n,r,i,o,s){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Ua(this,l<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Ua(this,r),Uf(this,r)}update(...e){return Rw(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let l of e.effects)l.is(Bf.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(l.value.compartment,l.value.extension)):l.is(V.reconfigure)?(n=null,r=l.value):l.is(V.appendConfig)&&(n=null,r=js(r).concat(l.value));let o;n?o=e.startState.values.slice():(n=zf.resolve(r,i,this),o=new t(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let s=e.startState.facet(Jg)?e.newSelection:e.newSelection.asSingle();new t(n,e.newDoc,s,o,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],s=js(r.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),u=this.changes(a.changes),c=u.map(i);for(let h=0;h<l;h++)o[h]=o[h].map(c);let f=i.mapDesc(u,!0);o.push(a.range.map(f)),i=i.compose(c),s=V.mapEffects(s,c).concat(V.mapEffects(js(a.effects),f))}return{changes:i,selection:E.create(o,n.mainIndex),effects:s}}changes(e=[]){return e instanceof $t?e:$t.of(e,this.doc.length,this.facet(t.lineSeparator))}toText(e){return Y.of(e.split(this.facet(t.lineSeparator)||Yg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Ua(this,n),Uf(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof re&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],l=e[o];i.push(s.init(a=>s.spec.fromJSON(l,a)))}}return t.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=zf.resolve(e.extensions||[],new Map),r=e.doc instanceof Y?e.doc:Y.of((e.doc||"").split(n.staticFacet(t.lineSeparator)||Yg)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return Sw(i,r.length),n.staticFacet(Jg)||(i=i.asSingle()),new t(n,r,i,n.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(t.tabSize)}get lineBreak(){return this.facet(t.lineSeparator)||`
`}get readOnly(){return this.facet(Tw)}phrase(e,...n){for(let r of this.facet(t.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(kw))for(let s of o(this,n,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return pN(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,l=e-r;for(;s>0;){let a=Xe(n,s,!1);if(o(n.slice(a,s))!=ae.Word)break;s=a}for(;l<i;){let a=Xe(n,l);if(o(n.slice(l,a))!=ae.Word)break;l=a}return s==l?null:E.range(s+r,l+r)}};ee.allowMultipleSelections=Jg;ee.tabSize=N.define({combine:t=>t.length?t[0]:4});ee.lineSeparator=ww;ee.readOnly=Tw;ee.phrases=N.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ee.languageData=kw;ee.changeFilter=Cw;ee.transactionFilter=bw;ee.transactionExtender=Ew;Bf.reconfigure=V.define();function Dt(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let s=i[o],l=r[o];if(l===void 0)r[o]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](l,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}var tr=class{eq(e){return this==e}range(e,n=e){return Ha.create(e,n,this)}};tr.prototype.startSide=tr.prototype.endSide=0;tr.prototype.point=!1;tr.prototype.mapMode=Et.TrackDel;var Ha=class t{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new t(e,n,r)}};function i0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}var o0=class t{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let s=i,l=o.length;;){if(s==l)return s;let a=s+l>>1,u=o[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==s)return u>=0?s:l;u>=0?l=a:s=a+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],s=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,f=this.to[a]+e,h,d;if(c==f){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(h=d=g,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<h)))continue}else if(h=n.mapPos(c,u.startSide),d=n.mapPos(f,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(s<0&&(s=h),u.point&&(l=Math.max(l,d-h)),r.push(u),i.push(h-s),o.push(d-s))}return{mapped:r.length?new t(i,o,r,l):null,pos:s}}},te=class t{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new t(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(n.length==0&&!s)return this;if(r&&(n=n.slice().sort(i0)),this.isEmpty)return n.length?t.of(n):this;let l=new Vf(this,null,-1).goto(0),a=0,u=[],c=new Fe;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let f=n[a++];c.addInner(f.from,f.to,f.value)||u.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!s||i>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||i>l.to||o<l.from||s(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(Ha.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?t.empty:this.nextLayer.update({add:u,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s],u=e.touchesRange(l,l+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:f}=a.map(l,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(f))}}let o=this.nextLayer.map(e);return n.length==0?o:new t(r,n,o||t.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(n>=o&&e<=o+s.length&&s.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Wa.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Wa.from(e).goto(n)}static compare(e,n,r,i,o=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=gw(s,l,r),u=new Mo(s,a,o),c=new Mo(l,a,o);r.iterGaps((f,h,d)=>yw(u,f,c,h,d,i)),r.empty&&r.length==0&&yw(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let o=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),s=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let l=gw(o,s),a=new Mo(o,l,0).goto(r),u=new Mo(s,l,0).goto(r);for(;;){if(a.to!=u.to||!s0(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,o=-1){let s=new Mo(e,null,o).goto(n),l=n,a=s.openStart;for(;;){let u=Math.min(s.to,r);if(s.point){let c=s.activeForPoint(s.to),f=s.pointFrom<n?c.length+1:s.point.startSide<0?c.length:Math.min(c.length,a);i.point(l,u,s.point,c,f,s.pointRank),a=Math.min(s.openEnd(u),c.length)}else u>l&&(i.span(l,u,s.active,a),a=s.openEnd(u));if(s.to>r)return a+(s.point&&s.to>r?1:0);l=s.to,s.next()}}static of(e,n=!1){let r=new Fe;for(let i of e instanceof Ha?[e]:n?mN(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return t.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=t.empty;i=i.nextLayer)n=new t(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}};te.empty=new te([],[],null,-1);function mN(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(i0(e,r)>0)return t.slice().sort(i0);e=r}return t}te.empty.nextLayer=te.empty;var Fe=class t{finishChunk(e){this.chunks.push(new o0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new t)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(te.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=te.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}};function gw(t,e,n){let r=new Map;for(let o of t)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let l=r.get(o.chunk[s]);l!=null&&(n?n.mapPos(l):l)==o.chunkPos[s]&&!n?.touchesRange(l,l+o.chunk[s].length)&&i.add(o.chunk[s])}return i}var Vf=class{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},Wa=class t{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new Vf(s,n,r,o));return i.length==1?i[0]:new t(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Kg(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Kg(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Kg(this.heap,0)}}};function Kg(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}var Mo=class{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Wa.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Lf(this.active,e),Lf(this.activeTo,e),Lf(this.activeRank,e),this.minActive=xw(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Nf(this.active,n,r),Nf(this.activeTo,n,i),Nf(this.activeRank,n,o),e&&Nf(e,n,this.cursor.from),this.minActive=xw(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Lf(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}};function yw(t,e,n,r,i,o){t.goto(e),n.goto(r);let s=r+i,l=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,f=c<0?t.to+a:n.to,h=Math.min(f,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&s0(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(l,h,t.point,n.point):h>l&&!s0(t.active,n.active)&&o.compareRange(l,h,t.active,n.active),f>s)break;(u||t.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(f),l=f,c<=0&&t.next(),c>=0&&n.next()}}function s0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Lf(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Nf(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function xw(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function ei(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Xe(t,i));return r}function Hf(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=Xe(t,i)}return r===!0?-1:t.length}var u0="\u037C",Ow=typeof Symbol>"u"?"__"+u0:Symbol.for(u0),c0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},Bn=class{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,l,a,u){let c=[],f=/^@(\w+)\b/.exec(s[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(s[0]+";");for(let d in l){let g=l[d];if(/&/.test(d))o(d.split(/,\s*/).map(x=>s.map(v=>x.replace(/&/,v))).reduce((x,v)=>x.concat(v)),g,a);else if(g&&typeof g=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");o(i(d),g,c,h)}else g!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+g+";")}(c.length||h)&&a.push((r&&!f&&!u?s.map(r):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Iw[Ow]||1;return Iw[Ow]=e+1,u0+e.toString(36)}static mount(e,n,r){let i=e[c0],o=r&&r.nonce;i?o&&i.setNonce(o):i=new f0(e,o),i.mount(Array.isArray(n)?n:[n],e)}},Mw=new Map,f0=class{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=Mw.get(r);if(o)return e[c0]=o;this.sheet=new i.CSSStyleSheet,Mw.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[c0]=this}mount(e,n){let r=this.sheet,i=0,o=0;for(let s=0;s<e.length;s++){let l=e[s],a=this.modules.indexOf(l);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),a==-1){if(this.modules.splice(o++,0,l),r)for(let u=0;u<l.rules.length;u++)r.insertRule(l.rules[u],i++)}else{for(;o<a;)i+=this.modules[o++].rules.length;i+=l.rules.length,o++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+`
`;this.styleTag.textContent=s;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var ti={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$s={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gN=typeof navigator<"u"&&/Mac/.test(navigator.platform),yN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Ze=0;Ze<10;Ze++)ti[48+Ze]=ti[96+Ze]=String(Ze);var Ze;for(Ze=1;Ze<=24;Ze++)ti[Ze+111]="F"+Ze;var Ze;for(Ze=65;Ze<=90;Ze++)ti[Ze]=String.fromCharCode(Ze+32),$s[Ze]=String.fromCharCode(Ze);var Ze;for(Wf in ti)$s.hasOwnProperty(Wf)||($s[Wf]=ti[Wf]);var Wf;function Lw(t){var e=gN&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||yN&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?$s:ti)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function ie(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Nw(t,arguments[e]);return t}function Nw(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Nw(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}var Kt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},v0=typeof document<"u"?document:{documentElement:{style:{}}},S0=/Edge\/(\d+)/.exec(Kt.userAgent),wC=/MSIE \d/.test(Kt.userAgent),k0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Kt.userAgent),kh=!!(wC||k0||S0),Pw=!kh&&/gecko\/(\d+)/i.test(Kt.userAgent),h0=!kh&&/Chrome\/(\d+)/.exec(Kt.userAgent),_w="webkitFontSmoothing"in v0.documentElement.style,w0=!kh&&/Apple Computer/.test(Kt.vendor),Dw=w0&&(/Mobile\/\w+/.test(Kt.userAgent)||Kt.maxTouchPoints>2),P={mac:Dw||/Mac/.test(Kt.platform),windows:/Win/.test(Kt.platform),linux:/Linux|X11/.test(Kt.platform),ie:kh,ie_version:wC?v0.documentMode||6:k0?+k0[1]:S0?+S0[1]:0,gecko:Pw,gecko_version:Pw?+(/Firefox\/(\d+)/.exec(Kt.userAgent)||[0,0])[1]:0,chrome:!!h0,chrome_version:h0?+h0[1]:0,ios:Dw,android:/Android\b/.test(Kt.userAgent),webkit:_w,webkit_version:_w?+(/\bAppleWebKit\/(\d+)/.exec(Kt.userAgent)||[0,0])[1]:0,safari:w0,safari_version:w0?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Kt.userAgent)||[0,0])[1]:0,tabSize:v0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function ru(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function C0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function eh(t,e){if(!e.anchorNode)return!1;try{return C0(t,e.anchorNode)}catch{return!1}}function Qs(t){return t.nodeType==3?Fo(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Ya(t,e,n,r){return n?Fw(t,e,n,r,-1)||Fw(t,e,n,r,1):!1}function Do(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function sh(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Fw(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Cr(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=Do(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Cr(t):0}else return!1}}function Cr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function fu(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function xN(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function CC(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function vN(t,e,n,r,i,o,s,l){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==a.body,g=1,x=1;if(d)h=xN(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let m=c.getBoundingClientRect();({scaleX:g,scaleY:x}=CC(c,m)),h={left:m.left,right:m.left+c.clientWidth*g,top:m.top,bottom:m.top+c.clientHeight*x}}let v=0,p=0;if(i=="nearest")e.top<h.top?(p=e.top-(h.top+s),n>0&&e.bottom>h.bottom+p&&(p=e.bottom-h.bottom+s)):e.bottom>h.bottom&&(p=e.bottom-h.bottom+s,n<0&&e.top-p<h.top&&(p=e.top-(h.top+s)));else{let m=e.bottom-e.top,y=h.bottom-h.top;p=(i=="center"&&m<=y?e.top+m/2-y/2:i=="start"||i=="center"&&n<0?e.top-s:e.bottom-y+s)-h.top}if(r=="nearest"?e.left<h.left?(v=e.left-(h.left+o),n>0&&e.right>h.right+v&&(v=e.right-h.right+o)):e.right>h.right&&(v=e.right-h.right+o,n<0&&e.left<h.left+v&&(v=e.left-(h.left+o))):v=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==l?e.left-o:e.right-(h.right-h.left)+o)-h.left,v||p)if(d)u.scrollBy(v,p);else{let m=0,y=0;if(p){let S=c.scrollTop;c.scrollTop+=p/x,y=(c.scrollTop-S)*x}if(v){let S=c.scrollLeft;c.scrollLeft+=v/g,m=(c.scrollLeft-S)*g}e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y},m&&Math.abs(m-v)<1&&(r="nearest"),y&&Math.abs(y-p)<1&&(i="nearest")}if(d)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function SN(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}var b0=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Cr(n):0),r,Math.min(e.focusOffset,r?Cr(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}},Po=null;P.safari&&P.safari_version>=26&&(Po=!1);function bC(t){if(t.setActive)return t.setActive();if(Po)return t.focus(Po);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Po==null?{get preventScroll(){return Po={preventScroll:!0},!0}}:void 0),!Po){Po=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}var Bw;function Fo(t,e,n=e){let r=Bw||(Bw=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Zs(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function kN(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function EC(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function wN(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Cr(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Cr(n))}else{if(n==t)return!0;r=Do(n),n=n.parentNode}}function TC(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function AC(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Cr(n)}else if(n.parentNode&&!sh(n))r=Do(n),n=n.parentNode;else return null}}function RC(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!sh(n))r=Do(n)+1,n=n.parentNode;else return null}}var qt=class t{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new t(e.parentNode,Do(e),n)}static after(e,n){return new t(e.parentNode,Do(e)+1,n)}},ay=[],he=class t{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=i?i.nextSibling:r.firstChild)){let l=t.get(o);(!l||!l.parent&&l.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,n),s.flags&=-8}if(o=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&o!=s.dom&&(n.written=!0),s.dom.parentNode==r)for(;o&&o!=s.dom;)o=zw(o);else r.insertBefore(s.dom,o);i=s.dom}for(o=i?i.nextSibling:r.firstChild,o&&n&&n.node==r&&(n.written=!0);o;)o=zw(o)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=Cr(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!t.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,o=-1,s=-1,l=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let f=this.children[a],h=u+f.length;if(u<e&&h>n)return f.domBoundsAround(e,n,u);if(h>=e&&i==-1&&(i=a,o=u),u>n&&f.dom.parentNode==this.dom){s=a,l=c;break}c=h,u=h+f.breakAfter}return{from:o,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=ay){this.markDirty();for(let i=e;i<n;i++){let o=this.children[i];o.parent==this&&r.indexOf(o)<0&&o.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new lh(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}};he.prototype.breakAfter=0;function zw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}var lh=class{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}};function OC(t,e,n,r,i,o,s,l,a){let{children:u}=t,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,h=f?f.breakAfter:s;if(!(e==r&&c&&!s&&!h&&o.length<2&&c.merge(n,i,o.length?f:null,n==0,l,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&f?.breakAfter)?(e==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,a)?o[o.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),o.push(d))):d?.breakAfter&&(f?f.breakAfter=1:s=1),r++}for(c&&(c.breakAfter=s,n>0&&(!s&&o.length&&c.merge(n,c.length,o[0],!1,l,0)?c.breakAfter=o.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,l,0),e++));e<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),a=o.length?0:l;else if(u[e].become(o[0]))e++,o.shift(),l=o.length?0:a;else break;!o.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,l,a)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function IC(t,e,n,r,i,o){let s=t.childCursor(),{i:l,off:a}=s.findPos(n,1),{i:u,off:c}=s.findPos(e,-1),f=e-n;for(let h of r)f+=h.length;t.length+=f,OC(t,u,c,l,a,r,0,i,o)}var CN=256,br=class t extends he{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof t)||this.length-(n-e)+r.length>CN||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new qt(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return bN(this.dom,e,n)}},Fi=class t extends he{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(EC(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,o,s){return r&&(!(r instanceof t&&r.mark.eq(this.mark))||e&&o<=0||n<this.length&&s<=0)?!1:(IC(this,e,n,r?r.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,o=0;for(let l of this.children){let a=r+l.length;a>e&&n.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=o),r=a,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new t(this.mark,n,s)}domAtPos(e){return MC(this,e)}coordsAt(e,n){return NC(this,e,n)}};function bN(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&n<0||e==r&&n>=0?P.chrome||P.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let l=Fo(t,i,o).getClientRects();if(!l.length)return null;let a=l[(s?s<0:n>=0)?0:l.length-1];return P.safari&&!s&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),s?fu(a,s<0):a||null}var Js=class t extends he{static create(e,n,r){return new t(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=t.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,o,s){return r&&(!(r instanceof t)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof t&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Y.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Y.empty}domAtPos(e){return(this.length?e==0:this.side>0)?qt.before(this.dom):qt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let l=s?i.length-1:0;o=i[l],!(e>0?l==0:l==i.length-1||o.top<o.bottom);l+=s?-1:1);return fu(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},iu=class t extends he{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof t&&e.side==this.side}split(){return new t(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?qt.before(this.dom):qt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Y.empty}get isHidden(){return!0}};br.prototype.children=Js.prototype.children=iu.prototype.children=ay;function MC(t,e){let n=t.dom,{children:r}=t,i=0;for(let o=0;i<r.length;i++){let s=r[i],l=o+s.length;if(!(l==o&&s.getSide()<=0)){if(e>o&&e<l&&s.dom.parentNode==n)return s.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=i;o>0;o--){let s=r[o-1];if(s.dom.parentNode==n)return s.domAtPos(s.length)}for(let o=i;o<r.length;o++){let s=r[o];if(s.dom.parentNode==n)return s.domAtPos(0)}return new qt(n,0)}function LC(t,e,n){let r,{children:i}=t;n>0&&e instanceof Fi&&i.length&&(r=i[i.length-1])instanceof Fi&&r.mark.eq(e.mark)?LC(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function NC(t,e,n){let r=null,i=-1,o=null,s=-1;function l(u,c){for(let f=0,h=0;f<u.children.length&&h<=c;f++){let d=u.children[f],g=h+d.length;g>=c&&(d.children.length?l(d,c-h):(!o||o.isHidden&&(n>0||TN(o,d)))&&(g>c||h==g&&d.getSide()>0)?(o=d,s=c-h):(h<c||h==g&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-h)),h=g}}l(t,e);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):EN(t)}function EN(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Qs(e);return n[n.length-1]||null}function TN(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function E0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}var Uw=Object.create(null);function ah(t,e,n){if(t==e)return!0;t||(t=Uw),e||(e=Uw);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(i.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function T0(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function AN(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}var He=class{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},Yt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Yt||(Yt={})),O=class extends tr{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ou(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Bi(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=PC(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(s?n?2e8:1:-6e8)+1}return new Bi(e,r,i,n,e.widget||null,!0)}static line(e){return new su(e)}static set(e,n=!1){return te.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};O.none=te.empty;var ou=class t extends O{constructor(e){let{start:n,end:r}=PC(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof t&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&ah(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}};ou.prototype.point=!1;var su=class t extends O{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof t&&this.spec.class==e.spec.class&&ah(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}};su.prototype.mapMode=Et.TrackBefore;su.prototype.point=!0;var Bi=class t extends O{constructor(e,n,r,i,o,s){super(n,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?n<=0?Et.TrackBefore:Et.TrackAfter:Et.TrackDel}get type(){return this.startSide!=this.endSide?Yt.WidgetRange:this.startSide<=0?Yt.WidgetBefore:Yt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof t&&RN(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}};Bi.prototype.point=!0;function PC(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function RN(t,e){return t==e||!!(t&&e&&t.compare(e))}function th(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}var At=class t extends he{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,o,s){if(r){if(!(r instanceof t))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),IC(this,e,n,r?r.children.slice():[],o,s),!0}split(e){let n=new t;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)n.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ah(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){LC(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=E0(n,this.attrs||{})),r&&(this.attrs=E0({class:r},this.attrs||{}))}domAtPos(e){return MC(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(EC(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(T0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&he.get(i)instanceof Fi;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=he.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!P.ios||!this.children.some(o=>o instanceof br))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof br)||/[^ -~]/.test(r.text))return null;let i=Qs(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=NC(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let s=(o-i.textHeight)/2;return{top:r.top+s,bottom:r.bottom-s,left:r.left,right:r.left}}}return r}become(e){return e instanceof t&&this.children.length==0&&e.children.length==0&&ah(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=n){if(o instanceof t)return o;if(s>n)break}i=s+o.breakAfter}return null}},_o=class t extends he{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,o,s){return r&&(!(r instanceof t)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?qt.before(this.dom):qt.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new t(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return ay}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Y.empty}domBoundsAround(){return null}become(e){return e instanceof t&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof lu?null:fu(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}},lu=class extends He{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},Xa=class t{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof _o&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new At),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(jf(new iu(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof _o)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),o=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(jf(new br(this.text.slice(this.textOff,this.textOff+o)),n),r),this.atCursorPos=!0,this.textOff+=o,e-=o,r=i<=o?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof Bi){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(r instanceof Bi)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new _o(r.widget||zi.block,l,r));else{let a=Js.create(r.widget||zi.inline,l,l?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&o<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||o>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(jf(new iu(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(jf(a,i),o),this.atCursorPos=c,this.pendingBuffer=c?e<n||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(e,n,r,i,o){let s=new t(e,n,r,o);return s.openEnd=te.spans(i,n,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}};function jf(t,e){for(let n of e)t=new Fi(n,[t],t.length);return t}var zi=class extends He{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};zi.inline=new zi("span");zi.block=new zi("div");var ue=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ue||(ue={})),Bo=ue.LTR,uy=ue.RTL;function _C(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}var ON=_C("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),IN=_C("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),A0=Object.create(null),vr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);A0[e]=n,A0[n]=-e}function DC(t){return t<=247?ON[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?IN[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}var MN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,kr=class{get dir(){return this.level%2?uy:Bo}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let o=-1;for(let s=0;s<e.length;s++){let l=e[s];if(l.from<=n&&l.to>=n){if(l.level==r)return s;(o<0||(i!=0?i<0?l.from<n:l.to>n:e[o].level>l.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}};function FC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!FC(r.inner,i.inner))return!1}return!0}var fe=[];function LN(t,e,n,r,i){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:e,l=o<r.length?r[o].from:n,a=o?256:i;for(let u=s,c=a,f=a;u<l;u++){let h=DC(t.charCodeAt(u));h==512?h=c:h==8&&f==4&&(h=16),fe[u]=h==4?2:h,h&7&&(f=h),c=h}for(let u=s,c=a,f=a;u<l;u++){let h=fe[u];if(h==128)u<l-1&&c==fe[u+1]&&c&24?h=fe[u]=c:fe[u]=256;else if(h==64){let d=u+1;for(;d<l&&fe[d]==64;)d++;let g=u&&c==8||d<n&&fe[d]==8?f==1?1:8:256;for(let x=u;x<d;x++)fe[x]=g;u=d-1}else h==8&&f==1&&(fe[u]=1);c=h,h&7&&(f=h)}}}function NN(t,e,n,r,i){let o=i==1?2:1;for(let s=0,l=0,a=0;s<=r.length;s++){let u=s?r[s-1].to:e,c=s<r.length?r[s].from:n;for(let f=u,h,d,g;f<c;f++)if(d=A0[h=t.charCodeAt(f)])if(d<0){for(let x=l-3;x>=0;x-=3)if(vr[x+1]==-d){let v=vr[x+2],p=v&2?i:v&4?v&1?o:i:0;p&&(fe[f]=fe[vr[x]]=p),l=x;break}}else{if(vr.length==189)break;vr[l++]=f,vr[l++]=h,vr[l++]=a}else if((g=fe[f])==2||g==1){let x=g==i;a=x?0:1;for(let v=l-3;v>=0;v-=3){let p=vr[v+2];if(p&2)break;if(x)vr[v+2]|=2;else{if(p&4)break;vr[v+2]|=4}}}}}function PN(t,e,n,r){for(let i=0,o=r;i<=n.length;i++){let s=i?n[i-1].to:t,l=i<n.length?n[i].from:e;for(let a=s;a<l;){let u=fe[a];if(u==256){let c=a+1;for(;;)if(c==l){if(i==n.length)break;c=n[i++].to,l=i<n.length?n[i].from:e}else if(fe[c]==256)c++;else break;let f=o==1,h=(c<e?fe[c]:r)==1,d=f==h?f?1:2:r;for(let g=c,x=i,v=x?n[x-1].to:t;g>a;)g==v&&(g=n[--x].from,v=x?n[x-1].to:t),fe[--g]=d;a=c}else o=u,a++}}}function R0(t,e,n,r,i,o,s){let l=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,f=!1;if(u==o.length||a<o[u].from){let x=fe[a];x!=l&&(c=!1,f=x==16)}let h=!c&&l==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u<o.length&&g==o[u].from){if(f)break e;let x=o[u];if(!c)for(let v=x.to,p=u+1;;){if(v==n)break e;if(p<o.length&&o[p].from==v)v=o[p++].to;else{if(fe[v]==l)break e;break}}if(u++,h)h.push(x);else{x.from>a&&s.push(new kr(a,x.from,d));let v=x.direction==Bo!=!(d%2);O0(t,v?r+1:r,i,x.inner,x.from,x.to,s),a=x.to}g=x.to}else{if(g==n||(c?fe[g]!=l:fe[g]==l))break;g++}h?R0(t,a,g,r+1,i,h,s):a<g&&s.push(new kr(a,g,d)),a=g}else for(let a=n,u=o.length;a>e;){let c=!0,f=!1;if(!u||a>o[u-1].to){let x=fe[a-1];x!=l&&(c=!1,f=x==16)}let h=!c&&l==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u&&g==o[u-1].to){if(f)break e;let x=o[--u];if(!c)for(let v=x.from,p=u;;){if(v==e)break e;if(p&&o[p-1].to==v)v=o[--p].from;else{if(fe[v-1]==l)break e;break}}if(h)h.push(x);else{x.to<a&&s.push(new kr(x.to,a,d));let v=x.direction==Bo!=!(d%2);O0(t,v?r+1:r,i,x.inner,x.from,x.to,s),a=x.from}g=x.from}else{if(g==e||(c?fe[g-1]!=l:fe[g-1]==l))break;g--}h?R0(t,g,a,r+1,i,h,s):g<a&&s.push(new kr(g,a,d)),a=g}}function O0(t,e,n,r,i,o,s){let l=e%2?2:1;LN(t,i,o,r,l),NN(t,i,o,r,l),PN(i,o,r,l),R0(t,i,o,e,n,r,s)}function _N(t,e,n){if(!t)return[new kr(0,0,e==uy?1:0)];if(e==Bo&&!n.length&&!MN.test(t))return BC(t.length);if(n.length)for(;t.length>fe.length;)fe[fe.length]=256;let r=[],i=e==Bo?0:1;return O0(t,i,i,n,0,t.length,r),r}function BC(t){return[new kr(0,t,0)]}var zC="";function DN(t,e,n,r,i){var o;let s=r.head-t.from,l=kr.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc),a=e[l],u=a.side(i,n);if(s==u){let h=l+=i?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],s=a.side(!i,n),u=a.side(i,n)}let c=Xe(t.text,s,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),zC=t.text.slice(Math.min(s,c),Math.max(s,c));let f=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<a.level?E.cursor(f.side(!i,n)+t.from,f.forward(i,n)?1:-1,f.level):E.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function FN(t,e,n){for(let r=e;r<n;r++){let i=DC(t.charCodeAt(r));if(i==1)return Bo;if(i==2||i==4)return uy}return Bo}var UC=N.define(),VC=N.define(),HC=N.define(),WC=N.define(),I0=N.define(),jC=N.define(),GC=N.define(),cy=N.define(),fy=N.define(),$C=N.define({combine:t=>t.some(e=>e)}),KC=N.define({combine:t=>t.some(e=>e)}),qC=N.define(),Za=class t{constructor(e,n="nearest",r="nearest",i=5,o=5,s=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new t(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new t(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},Gf=V.define({map:(t,e)=>t.map(e)}),YC=V.define();function Rt(t,e,n){let r=t.facet(WC);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}var ni=N.define({combine:t=>t.length?t[0]:!0}),BN=0,Ks=N.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}}),X=class t{constructor(e,n,r,i,o){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(Ks.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ks.of({plugin:this,arg:e}))}static define(e,n){let{eventHandlers:r,eventObservers:i,provide:o,decorations:s}=n||{};return new t(BN++,e,r,i,l=>{let a=[];return s&&a.push(au.of(u=>{let c=u.plugin(l);return c?s(c):O.none})),o&&a.push(o(l)),a})}static fromClass(e,n){return t.define((r,i)=>new e(r,i),n)}},Qa=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Rt(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Rt(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Rt(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},XC=N.define(),hy=N.define(),au=N.define(),ZC=N.define(),hu=N.define(),QC=N.define();function Vw(t,e){let n=t.state.facet(QC);if(!n.length)return n;let r=n.map(o=>o instanceof Function?o(t):o),i=[];return te.spans(r,e.from,e.to,{point(){},span(o,s,l,a){let u=o-e.from,c=s-e.from,f=i;for(let h=l.length-1;h>=0;h--,a--){let d=l[h].spec.bidiIsolate,g;if(d==null&&(d=FN(e.text,u,c)),a>0&&f.length&&(g=f[f.length-1]).to==u&&g.direction==d)g.to=c,f=g.inner;else{let x={from:u,to:c,direction:d,inner:[]};f.push(x),f=x.inner}}}}),i}var JC=N.define();function dy(t){let e=0,n=0,r=0,i=0;for(let o of t.state.facet(JC)){let s=o(t);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(n=Math.max(n,s.right)),s.top!=null&&(r=Math.max(r,s.top)),s.bottom!=null&&(i=Math.max(i,s.bottom)))}return{left:e,right:n,top:r,bottom:i}}var Ga=N.define(),wr=class t{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,s=0,l=0;;i++){let a=i==e.length?null:e[i],u=s-l,c=a?a.fromB:1e9;for(;o<n.length&&n[o]<c;){let f=n[o],h=n[o+1],d=Math.max(l,f),g=Math.min(c,h);if(d<=g&&new t(d+u,g+u,d,g).addToSet(r),h>c)break;o+=2}if(!a)return r;new t(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),s=a.toA,l=a.toB}}},uh=class t{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=$t.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,s,l,a)=>i.push(new wr(o,s,l,a))),this.changedRanges=i}static create(e,n,r){return new t(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},ch=class extends he{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=O.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new At],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!GN(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?UN(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new wr(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(P.ie||P.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,l=this.updateDeco(),a=WN(s,l,e.changes);return r=wr.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=P.chrome||P.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof _o&&s.widget instanceof lu&&o.push(s.dom);i.updateGaps(o)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,o=this.childCursor(n);for(let s=i.length-1;;s--){let l=s>=0?i[s]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:f}=l,h,d,g,x;if(r&&r.range.fromB<f&&r.range.toB>c){let S=Xa.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),k=Xa.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,g=S.openStart,x=k.openEnd;let w=this.compositionView(r);k.breakAtStart?w.breakAfter=1:k.content.length&&w.merge(w.length,w.length,k.content[0],!1,k.openStart,0)&&(w.breakAfter=k.content[0].breakAfter,k.content.shift()),S.content.length&&w.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),h=S.content.concat(w).concat(k.content)}else({content:h,breakAtStart:d,openStart:g,openEnd:x}=Xa.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:v,off:p}=o.findPos(u,1),{i:m,off:y}=o.findPos(a,-1);OC(this,m,y,v,p,h,d,g,x)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(YC)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new br(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Fi(i,[n],n.length);let r=new At;return r.append(n,0),r}fixCompositionDOM(e){let n=(o,s)=>{s.flags|=8|(s.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(s);let l=he.get(o);l&&l!=s&&(l.dom=null),s.setDOM(o)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)r=i.childPos(r.off,1),i=i.children[r.i],n(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&!(this.view.state.facet(ni)||this.dom.tabIndex>-1)&&eh(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||o))return;let s=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(P.gecko&&l.empty&&!this.hasComposition&&zN(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=u=new qt(f,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||(!Ya(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Ya(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{P.android&&P.chrome&&this.dom.contains(c.focusNode)&&jN(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=ru(this.view.root);if(f)if(l.empty){if(P.gecko){let h=VN(a.node,a.offset);if(h&&h!=3){let d=(h==1?AC:RC)(a.node,a.offset);d&&(a=new qt(d.node,d.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),h.setEnd(u.node,u.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new qt(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new qt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Ya(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=ru(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let s=At.find(this,n.head);if(!s)return;let l=s.posAtStart;if(n.head==l||n.head==l+s.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&r.collapse(i,o)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let o=he.get(n.childNodes[i]);o instanceof At&&(r=o.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let o=he.get(n.childNodes[i]);o instanceof At&&(r=o.domAtPos(o.length))}return r?new qt(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=he.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof At)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let l=this.children[s],a=o-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!r||l instanceof At&&!(r instanceof At&&n>=0)))r=l,i=u;else if(r&&u==e&&a==e&&l instanceof _o&&Math.abs(n)<2){if(l.deco.startSide<0)break;s&&(r=null)}o=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof At))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(r,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}r=a}if(!(i instanceof br))return null;let o=Xe(i.text,r);if(o==r)return null;let s=Fo(i.dom,r,o).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(l==s.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==ue.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(h>i)break;if(u>=r){let d=f.dom.getBoundingClientRect();if(n.push(d.height),s){let g=f.dom.lastChild,x=g?Qs(g):[];if(x.length){let v=x[x.length-1],p=a?v.right-d.left:d.right-v.left;p>l&&(l=p,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?ue.RTL:ue.LTR}measureTextSize(){for(let o of this.children)if(o instanceof At){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Qs(e.firstChild)[0];n=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new lh(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],s=o?o.from-1:this.length;if(s>r){let l=(n.lineBlockAt(s).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(O.replace({widget:new lu(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return O.set(e)}updateDeco(){let e=1,n=this.view.state.facet(au).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),r=!1,i=this.view.state.facet(ZC).map((o,s)=>{let l=typeof o=="function";return l&&(r=!0),l?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(te.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(qC))try{if(u(this.view,e.range,e))return!0}catch(c){Rt(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=dy(this.view),s={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;vN(this.view.scrollDOM,s,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==ue.LTR)}lineHasWidget(e){let{i:n}=this.childCursor().findPos(e);if(n==this.children.length)return!1;let r=i=>i instanceof Js||i.children.some(r);return r(this.children[n])}};function zN(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function eb(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=AC(n.focusNode,n.focusOffset),i=RC(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let l=he.get(i.node);if(!l||l instanceof br&&l.text!=i.node.nodeValue)o=i;else if(t.docView.lastCompositionAfterCursor){let a=he.get(r.node);!a||a instanceof br&&a.text!=r.node.nodeValue||(o=i)}}if(t.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function UN(t,e,n){let r=eb(t,n);if(!r)return null;let{node:i,from:o,to:s}=r,l=i.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(r.from,r.to)!=l)return null;let a=e.invertedDesc,u=new wr(a.mapPos(o),a.mapPos(s),o,s),c=[];for(let f=i.parentNode;;f=f.parentNode){let h=he.get(f);if(h instanceof Fi)c.push({node:f,deco:h.mark});else{if(h instanceof At||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=t.contentDOM)c.push({node:f,deco:new ou({inclusive:!0,attributes:AN(f),tagName:f.tagName.toLowerCase()})});else return null}}}function VN(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}var HN=class{constructor(){this.changes=[]}compareRange(e,n){th(e,n,this.changes)}comparePoint(e,n){th(e,n,this.changes)}boundChange(e){th(e,e,this.changes)}};function WN(t,e,n){let r=new HN;return te.compare(t,e,n,r),r.changes}function jN(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function GN(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function $N(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return E.cursor(e);o==0?n=1:o==i.length&&(n=-1);let s=o,l=o;n<0?s=Xe(i.text,o,!1):l=Xe(i.text,o);let a=r(i.text.slice(s,l));for(;s>0;){let u=Xe(i.text,s,!1);if(r(i.text.slice(u,s))!=a)break;s=u}for(;l<i.length;){let u=Xe(i.text,l);if(r(i.text.slice(l,u))!=a)break;l=u}return E.range(s+i.from,l+i.from)}function KN(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function qN(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function d0(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Hw(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Ww(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function M0(t,e,n){let r,i,o,s,l=!1,a,u,c,f;for(let g=t.firstChild;g;g=g.nextSibling){let x=Qs(g);for(let v=0;v<x.length;v++){let p=x[v];i&&d0(i,p)&&(p=Hw(Ww(p,i.bottom),i.top));let m=KN(e,p),y=qN(n,p);if(m==0&&y==0)return g.nodeType==3?jw(g,e,n):M0(g,e,n);(!r||s>y||s==y&&o>m)&&(r=g,i=p,o=m,s=y,l=m?e<p.left?v>0:v<x.length-1:!0),m==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=g,c=p):n<p.top&&(!f||f.top>p.top)&&(u=g,f=p):c&&d0(c,p)?c=Ww(c,p.bottom):f&&d0(f,p)&&(f=Hw(f,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):f&&f.top<=n&&(r=u,i=f),!r)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return jw(r,h,n);if(l&&r.contentEditable!="false")return M0(r,h,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function jw(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,s=0;for(let l=0;l<r;l++){let a=Fo(t,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;s||(s=e-c.left);let f=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let h=e>=(c.left+c.right)/2,d=h;if(P.chrome||P.gecko){let g=Fo(t,l).getBoundingClientRect();Math.abs(g.left-c.right)<.1&&(d=!h)}if(f<=0)return{node:t,offset:l+(d?1:0)};i=l+(d?1:0),o=f}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function tb(t,e,n,r=-1){var i,o;let s=t.contentDOM.getBoundingClientRect(),l=s.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:f}=e,h=f-l;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,k=!1;a=t.elementAtHeight(h),a.type!=Yt.Text;)for(;h=r>0?a.bottom+S:a.top-S,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,r=-r}f=l+h;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Gw(t,s,a,c,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Gw(t,s,a,c,f);let g=t.dom.ownerDocument,x=t.root.elementFromPoint?t.root:g,v=x.elementFromPoint(c,f);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(s.left+1,Math.min(s.right-1,c)),v=x.elementFromPoint(c,f),v&&!t.contentDOM.contains(v)&&(v=null));let p,m=-1;if(v&&((i=t.docView.nearest(v))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(c,f);S&&({offsetNode:p,offset:m}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(c,f);S&&({startContainer:p,startOffset:m}=S)}p&&(!t.contentDOM.contains(p)||P.safari&&YN(p,m,c)||P.chrome&&XN(p,m,c))&&(p=void 0),p&&(m=Math.min(Cr(p),m))}if(!p||!t.docView.dom.contains(p)){let S=At.find(t.docView,d);if(!S)return h>a.top+a.height/2?a.to:a.from;({node:p,offset:m}=M0(S.dom,c,f))}let y=t.docView.nearest(p);if(!y)return null;if(y.isWidget&&((o=y.dom)===null||o===void 0?void 0:o.nodeType)==1){let S=y.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(p,m)+y.posAtStart}function Gw(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-l)*.5)/l);o+=a*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+Hf(s,o,t.state.tabSize)}function nb(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let o=i.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=i.parentNode;if(!s||s.nodeName=="DIV")break;i=s}}return Fo(t,r-1,r).getBoundingClientRect().right>n}function YN(t,e,n){return nb(t,e,n)}function XN(t,e,n){if(e!=0)return nb(t,e,n);for(let i=t;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=t.nodeType==1?t.getBoundingClientRect():Fo(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function L0(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let o of r.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==Yt.Text&&(i.type!=o.type||(n<0?o.from<e:o.to>e)))&&(i=o)}}return i||r}return r}function ZN(t,e,n,r){let i=L0(t,e.head,e.assoc||-1),o=!r||i.type!=Yt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let s=t.dom.getBoundingClientRect(),l=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(l==ue.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function $w(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let l=e,a=null;;){let u=DN(i,o,s,l,n),c=zC;if(!u){if(i.number==(n?t.state.doc.lines:1))return l;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return l}else{if(!r)return u;a=r(c)}l=u}}function QN(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let s=r(o);return i==ae.Space&&(i=s),i==s}}function JN(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let s=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)s==null&&(s=u.left-a.left),l=o<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);s==null&&(s=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),l=(o<0?d.top:d.bottom)+c}let f=a.left+s,h=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=l+(h+d)*o,x=tb(t,{x:f,y:g},!1,o);if(g<a.top||g>a.bottom||(o<0?x<i:x>i)){let v=t.docView.coordsForChar(x),p=!v||g<v.top?-1:1;return E.cursor(x,p,void 0,s)}}}function Ja(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(o,s,l)=>{if(e>o&&e<s){let a=r||n||(e-o<s-e?-1:1);e=a<0?o:s,r=a}});if(!r)return e}}function rb(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let s=Ja(t,i.from,0);s!=i.from&&(o=E.cursor(s,-1))}else{let s=Ja(t,i.from,-1),l=Ja(t,i.to,1);(s!=i.from||l!=i.to)&&(o=E.range(i.from==i.anchor?s:l,i.from==i.head?s:l))}o&&(n||(n=e.ranges.slice()),n[r]=o)}return n?E.create(n,e.mainIndex):e}function p0(t,e,n){let r=Ja(t.state.facet(hu).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}var $a="\uFFFF",N0=class{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ee.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=$a}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==n)break;let l=he.get(i),a=he.get(s);(l&&a?l.breakAfter:(l?l.breakAfter:sh(i))||sh(s)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&!tP(s,n)&&this.lineBreak(),i=s}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,l;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(l=i.exec(n))&&(o=l.index,s=l[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let n=he.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(eP(e,r.node,r.offset)?n:0))}};function eP(t,e,n){for(;;){if(!e||n<Cr(e))return!1;if(e==t)return!0;n=Do(e)+1,e=e.parentNode}}function tP(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=he.get(t);if(!(r?.isWidget||t.cmIgnore))return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}var fh=class{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}},P0=class{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let l=o||s?[]:rP(e),a=new N0(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=iP(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!C0(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=s&&s.node==l.anchorNode&&s.offset==l.anchorOffset||!C0(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((P.ios||P.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(a,u),h=Math.max(a,u),d=c.from-f,g=c.to-h;(d==0||d==1||f==0)&&(g==0||g==-1||h==e.state.doc.length)&&(a=0,u=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(E.range(u,a)):this.newSel=E.single(u,a)}}};function ib(t,e){let n,{newSel:r}=e,i=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:l}=e.bounds,a=i.from,u=null;(o===8||P.android&&e.text.length<l-s)&&(a=i.to,u="end");let c=ob(t.state.doc.sliceString(s,l,$a),e.text,a-s,u);c&&(P.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==$a+$a&&c.toB--,n={from:s+c.from,to:s+c.toA,insert:Y.of(e.text.slice(c.from,c.toB).split($a))})}else r&&(!t.hasFocus&&t.state.facet(ni)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(P.mac||P.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Y.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:P.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Y.of([" "])}),n)return py(t,n,r,o);if(r&&!r.main.eq(i)){let s=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(s=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(r=rb(t.state.facet(hu).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:s,userEvent:l}),!0}else return!1}function py(t,e,n,r=-1){if(P.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(P.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Zs(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Zs(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Zs(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let s,l=()=>s||(s=nP(t,e,n));return t.state.facet(jC).some(a=>a(t,e.from,e.to,o,l))||t.dispatch(l()),!0}function nP(t,e,n){let r,i=t.state,o=i.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let a=e.from<o.from?-1:1,u=a<0?o.from:o.to,c=Ja(i.facet(hu).map(f=>f(t)),u,a);e.from==c&&(s=c)}if(s>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=o.from<e.from?i.sliceDoc(o.from,e.from):"",u=o.to>e.to?i.sliceDoc(e.to,o.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let c=t.state.sliceDoc(e.from,e.to),f,h=n&&eb(t,n.main.head);if(h){let g=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-g}}else f=t.state.doc.lineAt(o.head);let d=o.to-e.to;r=i.changeByRange(g=>{if(g.from==o.from&&g.to==o.to)return{changes:a,range:u||g.map(a)};let x=g.to-d,v=x-c.length;if(t.state.sliceDoc(v,x)!=c||x>=f.from&&v<=f.to)return{range:g};let p=i.changes({from:v,to:x,insert:e.insert}),m=g.to-o.to;return{changes:p,range:u?E.range(Math.max(0,u.anchor+m),Math.max(0,u.head+m)):g.map(p)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:l,scrollIntoView:!0})}function ob(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let s=t.length,l=e.length;for(;s>0&&l>0&&t.charCodeAt(s-1)==e.charCodeAt(l-1);)s--,l--;if(r=="end"){let a=Math.max(0,o-Math.min(s,l));n-=s+a-o}if(s<o&&t.length<e.length){let a=n<=o&&n>=s?o-n:0;o-=a,l=o+(l-s),s=o}else if(l<o){let a=n<=o&&n>=l?o-n:0;o-=a,s=o+(s-l),l=o}return{from:o,toA:s,toB:l}}function rP(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new fh(n,r)),(i!=n||o!=r)&&e.push(new fh(i,o))),e}function iP(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}var _0=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,P.safari&&e.contentDOM.addEventListener("input",()=>null),P.gecko&&vP(e.contentDOM.ownerDocument)}handleEvent(e){!fP(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=oP(e),r=this.handlers,i=this.view.contentDOM;for(let o in n)if(o!="scroll"){let s=!n[o].handlers.length,l=r[o];l&&s!=!l.handlers.length&&(i.removeEventListener(o,this.handleEvent),l=null),l||i.addEventListener(o,this.handleEvent,{passive:s})}for(let o in r)o!="scroll"&&!n[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&lb.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),P.android&&P.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return P.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=sb.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||sP.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Zs(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:P.safari&&!P.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function Kw(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Rt(n.state,i)}}}function oP(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,o=i&&i.plugin.domEventHandlers,s=i&&i.plugin.domEventObservers;if(o)for(let l in o){let a=o[l];a&&n(l).handlers.push(Kw(r.value,a))}if(s)for(let l in s){let a=s[l];a&&n(l).observers.push(Kw(r.value,a))}}for(let r in nr)n(r).handlers.push(nr[r]);for(let r in Un)n(r).observers.push(Un[r]);return e}var sb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],sP="dthko",lb=[16,17,18,20,91,92,224,225],$f=6;function Kf(t){return Math.max(0,t)*.7+8}function lP(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}var D0=class{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=SN(e.contentDOM),this.atoms=e.state.facet(hu).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ee.allowMultipleSelections)&&aP(e,n),this.dragging=cP(e,n)&&cb(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&lP(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,o=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=dy(this.view);e.clientX-a.left<=i+$f?n=-Kf(i-e.clientX):e.clientX+a.right>=s-$f&&(n=Kf(e.clientX-s)),e.clientY-a.top<=o+$f?r=-Kf(o-e.clientY):e.clientY+a.bottom>=l-$f&&(r=Kf(e.clientY-l)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=rb(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function aP(t,e){let n=t.state.facet(UC);return n.length?n[0](e):P.mac?e.metaKey:e.ctrlKey}function uP(t,e){let n=t.state.facet(VC);return n.length?n[0](e):P.mac?!e.altKey:!e.ctrlKey}function cP(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=ru(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function fP(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=he.get(n))&&r.ignoreEvent(e))return!1;return!0}var nr=Object.create(null),Un=Object.create(null),ab=P.ie&&P.ie_version<15||P.ios&&P.webkit_version<604;function hP(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),ub(t,n.value)},50)}function wh(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function ub(t,e){e=wh(t.state,cy,e);let{state:n}=t,r,i=1,o=n.toText(e),s=o.lines==n.selection.ranges.length;if(F0!=null&&n.selection.ranges.every(a=>a.empty)&&F0==o.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let f=n.toText((s?o.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:f},range:E.cursor(u.from+f.length)}})}else s?r=n.changeByRange(a=>{let u=o.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Un.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};nr.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Un.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Un.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};nr.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(HC))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=mP(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new D0(t,e,n,r)),r&&t.observer.ignore(()=>{bC(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function qw(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return $N(t.state,e,n);{let i=At.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,l=i?i.posAtEnd:o.to;return l<t.state.doc.length&&l==o.to&&l++,E.range(s,l)}}var Yw=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function dP(t,e,n,r){let i=At.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&Yw(n,r,s))return-1;let l=i.coordsAt(o,1);return l&&Yw(n,r,l)?1:s&&s.bottom>=r?-1:1}function Xw(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:dP(t,n,e.clientX,e.clientY)}}var pP=P.ie&&P.ie_version<=11,Zw=null,Qw=0,Jw=0;function cb(t){if(!pP)return t.detail;let e=Zw,n=Jw;return Zw=t,Jw=Date.now(),Qw=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Qw+1)%3:1}function mP(t,e){let n=Xw(t,e),r=cb(e),i=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),i=i.map(o.changes))},get(o,s,l){let a=Xw(t,o),u,c=qw(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!s){let f=qw(t,n.pos,n.bias,r),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?E.range(h,d):E.range(d,h)}return s?i.replaceRange(i.main.extend(c.from,c.to)):l&&r==1&&i.ranges.length>1&&(u=gP(i,a.pos))?u:l?i.addRange(c):E.create([c])}}}function gP(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}nr.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let o=i.posAtStart,s=o+i.length;(o>=n.to||s<=n.from)&&(n=E.range(o,s))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",wh(t.state,fy,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};nr.dragend=t=>(t.inputState.draggedContent=null,!1);function eC(t,e,n,r){if(n=wh(t.state,cy,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=r&&o&&uP(t,e)?{from:o.from,to:o.to}:null,l={from:i,insert:n},a=t.state.changes(s?[s,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}nr.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&eC(t,e,r.filter(s=>s!=null).join(t.state.lineBreak),!1)};for(let s=0;s<n.length;s++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[s]=l.result),o()},l.readAsText(n[s])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return eC(t,e,r,!0),!0}return!1};nr.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=ab?null:e.clipboardData;return n?(ub(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(hP(t),!1)};function yP(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function xP(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let s=t.doc.lineAt(o);s.number>i&&(e.push(s.text),n.push({from:s.from,to:Math.min(t.doc.length,s.to+1)})),i=s.number}r=!0}return{text:wh(t,fy,e.join(t.lineBreak)),ranges:n,linewise:r}}var F0=null;nr.copy=nr.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=xP(t.state);if(!n&&!i)return!1;F0=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=ab?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(yP(t,n),!1)};var fb=gt.define();function hb(t,e){let n=[];for(let r of t.facet(GC)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:fb.of(!0)}):null}function db(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=hb(t.state,e);n?t.dispatch(n):t.update([])}},10)}Un.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),db(t)};Un.blur=t=>{t.observer.clearSelectionRange(),db(t)};Un.compositionstart=Un.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Un.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,P.chrome&&P.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Un.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};nr.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let l=s[0],a=t.posAtDOM(l.startContainer,l.startOffset),u=t.posAtDOM(l.endContainer,l.endOffset);return py(t,{from:a,to:u,insert:t.state.toText(o)},null),!0}}let i;if(P.chrome&&P.android&&(i=sb.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return P.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),P.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Un.compositionend(t,e),20),!1};var tC=new Set;function vP(t){tC.has(t)||(tC.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}var nC=["pre-wrap","normal","pre-line","break-spaces"],el=!1;function rC(){el=!1}var B0=class{constructor(e){this.lineWrapping=e,this.doc=Y.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return nC.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o,s){let l=nC.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=o,a){this.heightSamples={};for(let u=0;u<s.length;u++){let c=s[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}},z0=class{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}},Sr=class t{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?Yt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Bi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new t(this.from,this.length+e.length,this.top,this.height+e.height,n)}},we=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(we||(we={})),nh=.001,bn=class t{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>nh&&(el=!0),this.height=e)}replace(e,n,r){return t.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this,s=r.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:f}=i[l],h=o.lineAt(a,we.ByPosNoHeight,r.setDoc(n),0,0),d=h.to>=u?h:o.lineAt(u,we.ByPosNoHeight,r,0,0);for(f+=d.to-u,u=d.to;l>0&&h.from<=i[l-1].toA;)a=i[l-1].fromA,c=i[l-1].fromB,l--,a<h.from&&(h=o.lineAt(a,we.ByPosNoHeight,r,0,0));c+=h.from-a,a=h.from;let g=V0.build(r.setDoc(s),e,c,f);o=hh(o,o.replace(a,u,g))}return o.updateHeight(r,0)}static empty(){return new zn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(o>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,o-=l.size}else break;else if(i<o){let l=e[n++];l&&(i+=l.size)}else{let l=e[--r];l&&(o+=l.size)}let s=0;return e[n-1]==null?(s=1,n--):e[n]==null&&(s=1,r++),new U0(t.of(e.slice(0,n)),s,t.of(e.slice(r)))}};function hh(t,e){return t==e?t:(t.constructor!=e.constructor&&(el=!0),e)}bn.prototype.size=1;var dh=class extends bn{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Sr(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,n,r,i,o,s){e<=o+this.length&&n>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},zn=class t extends dh{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Sr(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof t||i instanceof Di&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Di?i=new t(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):bn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Di=class t extends bn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,o=i-r+1,s,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*o);s=a/o,this.length>o+1&&(l=(this.height-a)/(this.length-o-1))}else s=this.height/o;return{firstLine:r,lastLine:i,perLine:s,perChar:l}}blockAt(e,n,r,i){let{firstLine:o,lastLine:s,perLine:l,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),f=l+c.length*a,h=Math.max(r,e-f/2);return new Sr(c.from,c.length,h,f,0)}else{let u=Math.max(0,Math.min(s-o,Math.floor((e-r)/l))),{from:c,length:f}=n.doc.line(o+u);return new Sr(c,f,r+l*u,l,0)}}lineAt(e,n,r,i,o){if(n==we.ByHeight)return this.blockAt(e,r,i,o);if(n==we.ByPosNoHeight){let{from:d,to:g}=r.doc.lineAt(e);return new Sr(d,g-d,0,0,0)}let{firstLine:s,perLine:l,perChar:a}=this.heightMetrics(r,o),u=r.doc.lineAt(e),c=l+u.length*a,f=u.number-s,h=i+l*f+a*(u.from-o-f);return new Sr(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,n,r,i,o,s){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(r,o);for(let c=e,f=i;c<=n;){let h=r.doc.lineAt(c);if(c==e){let g=h.number-l;f+=a*g+u*(e-o-g)}let d=a+u*h.length;s(new Sr(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof t?r[r.length-1]=new t(o.length+i):r.push(null,new t(i-1))}if(e>0){let o=r[0];o instanceof t?r[0]=new t(e+o.length):r.unshift(new t(e-1),null)}return bn.of(r)}decomposeLeft(e,n){n.push(new t(e-1),null)}decomposeRight(e,n){n.push(null,new t(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let s=[],l=Math.max(n,i.from),a=-1;for(i.from>n&&s.push(new t(i.from-n-1).updateHeight(e,n));l<=o&&i.more;){let c=e.doc.lineAt(l).length;s.length&&s.push(null);let f=i.heights[i.index++];a==-1?a=f:Math.abs(f-a)>=nh&&(a=-2);let h=new zn(c,f);h.outdated=!1,s.push(h),l+=c+1}l<=o&&s.push(null,new t(o-l).updateHeight(e,l));let u=bn.of(s);return(a<0||Math.abs(u.height-this.height)>=nh||Math.abs(a-this.heightMetrics(e,n).perLine)>=nh)&&(el=!0),hh(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},U0=class extends bn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let s=i+this.left.height,l=o+this.left.length+this.break,a=n==we.ByHeight?e<s:e<l,u=a?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,s,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=n==we.ByPosNoHeight?we.ByPosNoHeight:we.ByPos;return a?u.join(this.right.lineAt(l,c,r,s,l)):this.left.lineAt(l,c,r,i,o).join(u)}forEachLine(e,n,r,i,o,s){let l=i+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,o,s),n>=a&&this.right.forEachLine(e,n,r,l,a,s);else{let u=this.lineAt(a,we.ByPos,r,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,o,s),u.to>=e&&u.from<=n&&s(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,l,a,s)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let l of r)o.push(l);if(e>0&&iC(o,s-1),n<this.length){let l=o.length;this.decomposeRight(n,o),iC(o,l)}return bn.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?bn.of(this.break?[e,null,n]:[e,n]):(this.left=hh(this.left,e),this.right=hh(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:s}=this,l=n+o.length+this.break,a=null;return i&&i.from<=n+o.length&&i.more?a=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=l+s.length&&i.more?a=s=s.updateHeight(e,l,r,i):s.updateHeight(e,l,r),a?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function iC(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Di&&(r=t[e+1])instanceof Di&&t.splice(e-1,3,new Di(n.length+1+r.length))}var SP=5,V0=class t{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof zn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new zn(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=n-e;r.block?this.addBlock(new dh(s,i,r)):(s||o||i>=SP)&&this.addLineDeco(i,o,s)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new zn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Di(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof zn)return e;let n=new zn(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof zn)&&!this.isCovered?this.nodes.push(new zn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof zn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new t(r,e);return te.spans(n,r,i,o,0),o.finish(r)}};function kP(t,e,n){let r=new H0;return te.compare(t,e,n,r,0),r.changes}var H0=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&th(e,n,this.changes,5)}};function wP(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();o=Math.max(o,h.left),s=Math.min(s,h.right),l=Math.max(l,h.top),a=Math.min(u==t.parentNode?i.innerHeight:a,h.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-n.left,right:Math.max(o,s)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function CP(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function bP(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}var eu=class{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,n){return O.replace({widget:new W0(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}},W0=class extends He{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},ph=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=oC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ue.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(hy).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new B0(n),this.stateDeco=e.facet(au).filter(r=>typeof r!="function"),this.heightMap=bn.empty().applyChanges(this.stateDeco,Y.empty,this.heightOracle.setDoc(e.doc),[new wr(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=O.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new qs(o,s))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?oC:new j0(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ka(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(au).filter(c=>typeof c!="function");let i=e.changedRanges,o=wr.extendWithRanges(i,kP(r,this.stateDeco,e?e.changes:$t.empty(this.state.doc.length))),s=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);rC(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||el)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(KC)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?ue.RTL:ue.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),l=n.getBoundingClientRect(),a=s||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:S,scaleY:k}=CC(n,l);(S>.005&&Math.abs(this.scaleX-S)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=S,this.scaleY=k,u|=16,s=a=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,h=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=TC(e.scrollDOM);let g=(this.printing?bP:wP)(n,this.paddingTop),x=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!CP(e.dom))return 0;let m=l.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(s=!0),s||i.lineWrapping&&Math.abs(m-this.contentDOMWidth)>i.charWidth){let{lineHeight:k,charWidth:w,textHeight:C}=e.docView.measureTextSize();s=k>0&&i.refresh(o,k,w,C,Math.max(5,m/w),S),s&&(e.docView.minWidth=0,u|=16)}x>0&&v>0?c=Math.max(x,v):x<0&&v<0&&(c=Math.min(x,v)),rC();for(let k of this.viewports){let w=k.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(k);this.heightMap=(s?bn.empty().applyChanges(this.stateDeco,Y.empty,this.heightOracle,[new wr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new z0(k.from,w))}el&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:l}=this,a=new qs(i.lineAt(s-r*1e3,we.ByHeight,o,0,0).from,i.lineAt(l+(1-r)*1e3,we.ByHeight,o,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,we.ByPos,o,0,0),h;n.y=="center"?h=(f.top+f.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?h=f.top:h=f.bottom-c,a=new qs(i.lineAt(h-1e3/2,we.ByHeight,o,0,0).from,i.lineAt(h+c+1e3/2,we.ByHeight,o,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new qs(this.heightMap.lineAt(r,we.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,we.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,we.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:l}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=l+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new eu(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,s=i<<1;if(this.defaultTextDirection!=ue.LTR&&!r)return[];let l=[],a=(c,f,h,d)=>{if(f-c<o)return;let g=this.state.selection.main,x=[g.from];g.empty||x.push(g.to);for(let p of x)if(p>c&&p<f){a(c,p-10,h,d),a(p+10,f,h,d);return}let v=TP(e,p=>p.from>=h.from&&p.to<=h.to&&Math.abs(p.from-c)<o&&Math.abs(p.to-f)<o&&!x.some(m=>p.from<m&&p.to>m));if(!v){if(f<h.to&&n&&r&&n.visibleRanges.some(y=>y.from<=f&&y.to>=f)){let y=n.moveToLineBoundary(E.cursor(f),!1,!0).head;y>c&&(f=y)}let p=this.gapSize(h,c,f,d),m=r||p<2e6?p:2e6;v=new eu(c,f,p,m)}l.push(v)},u=c=>{if(c.length<s||c.type!=Yt.Text)return;let f=EP(c.from,c.to,this.stateDeco);if(f.total<s)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(r){let x=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,p;if(h!=null){let m=Yf(f,h),y=((this.visibleBottom-this.visibleTop)/2+x)/c.height;v=m-y,p=m+y}else v=(this.visibleTop-c.top-x)/c.height,p=(this.visibleBottom-c.top+x)/c.height;d=qf(f,v),g=qf(f,p)}else{let x=f.total*this.heightOracle.charWidth,v=i*this.heightOracle.charWidth,p=0;if(x>2e6)for(let w of e)w.from>=c.from&&w.from<c.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=w.size-w.displaySize);let m=this.pixelViewport.left+p,y=this.pixelViewport.right+p,S,k;if(h!=null){let w=Yf(f,h),C=((y-m)/2+v)/x;S=w-C,k=w+C}else S=(m-v)/x,k=(y+v)/x;d=qf(f,S),g=qf(f,k)}d>c.from&&a(c.from,d,c,f),g<c.to&&a(g,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,n,r,i){let o=Yf(i,r)-Yf(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){eu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=O.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];te.spans(n,this.viewport.from,this.viewport.to,{span(o,s){r.push({from:o,to:s})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let o=0;o<r.length&&!(i&8);o++){let s=this.visibleRanges[o],l=r[o];(s.from!=l.from||s.to!=l.to)&&(i|=4,e&&e.mapPos(s.from,-1)==l.from&&e.mapPos(s.to,1)==l.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ka(this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Ka(this.heightMap.lineAt(this.scaler.fromDOM(e),we.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ka(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},qs=class{constructor(e,n){this.from=e,this.to=n}};function EP(t,e,n){let r=[],i=t,o=0;return te.spans(n,t,e,{span(){},point(s,l){s>i&&(r.push({from:i,to:s}),o+=s-i),i=l}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function qf({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:s}=e[i],l=s-o;if(r<=l)return o+r;r-=l}}function Yf(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function TP(t,e){for(let n of t)if(e(n))return n}var oC={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}},j0=class t{constructor(e,n,r){let i=0,o=0,s=0;this.viewports=r.map(({from:l,to:a})=>{let u=n.lineAt(l,we.ByPos,e,0,0).top,c=n.lineAt(a,we.ByPos,e,0,0).bottom;return i+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let l of this.viewports)l.domTop=s+(l.top-o)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}eq(e){return e instanceof t?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}};function Ka(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Sr(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Ka(i,e)):t._content)}var Xf=N.define({combine:t=>t.join(" ")}),G0=N.define({combine:t=>t.indexOf(!0)>-1}),$0=Bn.newName(),pb=Bn.newName(),mb=Bn.newName(),gb={"&light":"."+pb,"&dark":"."+mb};function K0(t,e,n){return new Bn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}var AP=K0("."+$0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},gb),RP={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},m0=P.ie&&P.ie_version<=11,q0=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new b0,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(P.ie&&P.ie_version<=11||P.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&P.android&&e.constructor.EDIT_CONTEXT!==!1&&!(P.chrome&&P.chrome_version<126)&&(this.editContext=new Y0(e),e.state.facet(ni)&&(e.contentDOM.editContext=this.editContext.editContext)),m0&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(ni)?r.root.activeElement!=this.dom:!eh(this.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(P.ie&&P.ie_version<=11||P.android&&P.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Ya(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ru(e.root);if(!n)return!1;let r=P.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&OP(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=eh(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&wN(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,RP),m0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),m0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Zs(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(i=!0),n==-1?{from:n,to:r}=s:(n=Math.min(s.from,n),r=Math.max(s.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&eh(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new P0(this.view,e,n,r);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=ib(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=sC(n,e.previousSibling||e.target.previousSibling,-1),i=sC(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ni)!=e.state.facet(ni)&&(e.view.contentDOM.editContext=e.state.facet(ni)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function sC(t,e,n){for(;e;){let r=he.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function lC(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return Ya(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function OP(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return lC(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?lC(t,n):null}var Y0=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:o,head:s}=i,l=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let u=a-l>r.text.length;l==this.from&&o<this.from?l=o:a==this.to&&o>this.to&&(a=o);let c=ob(e.state.sliceDoc(l,a),r.text,(u?i.from:i.to)-l,u?"end":null);if(!c){let h=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:c.from+l,to:c.toA+l,insert:Y.of(r.text.slice(c.from,c.toB).split(`
`))};if((P.mac||P.android)&&f.from==s-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:Y.of([r.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);py(e,f,E.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],o=null;for(let s=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);s<l;s++){let a=e.coordsForChar(s);o=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||o||new DOMRect,i.push(o)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let o of r.getTextFormats()){let s=o.underlineStyle,l=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(l)){let a=this.toEditorPos(o.rangeStart),u=this.toEditorPos(o.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;i.push(O.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:YC.of(O.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=ru(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,s,l,a,u)=>{if(r)return;let c=u.length-(s-o);if(i&&s>=i.to)if(i.from==o&&i.to==s&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(o+=n,s+=n,s<=this.from)this.from+=c,this.to+=c;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},R=class t{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(o=>r(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||kN(e.parent)||document,this.viewState=new ph(e.state||ee.create(e)),e.scrollTo&&e.scrollTo.is(Gf)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ks).map(i=>new Qa(i));for(let i of this.plugins)i.update(this);this.observer=new q0(this),this.inputState=new _0(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ch(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof at?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(fb))?(this.inputState.notifiedFocused=s,l=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,a=hb(o,s),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(ee.phrases)!=this.state.facet(ee.phrases))return this.setState(o);i=uh.create(this,o,e),i.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new Za(d.empty?d:E.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(Gf)&&(f=d.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=mh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Ga)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Xf)!=i.state.facet(Xf)&&(this.viewState.mustMeasureContent=!0),(n||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(I0))try{h(i)}catch(d){Rt(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!ib(this,c)&&u.force&&Zs(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new ph(e),this.plugins=e.facet(Ks).map(r=>new Qa(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new ch(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Ks),r=e.state.facet(Ks);if(n!=r){let i=[];for(let o of r){let s=n.indexOf(o);if(s<0)i.push(new Qa(o));else{let l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Rt(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(s<0)if(TC(r))o=-1,s=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);o=d.from,s=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(g){return Rt(this.state,g),aC}}),f=uh.create(this,this.state,[]),h=!1;f.flags|=a,n?n.flags|=a:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=aC)try{let g=u[d];g.write&&g.write(c[d],this)}catch(g){Rt(this.state,g)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let g=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(I0))l(n)}get themeClasses(){return $0+" "+(this.state.facet(G0)?mb:pb)+" "+this.state.facet(Xf)}updateAttrs(){let e=uC(this,XC,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ni)?"true":"false",class:"cm-content",style:`${P.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),uC(this,hy,n);let r=this.observer.ignore(()=>{let i=T0(this.contentDOM,this.contentAttrs,n),o=T0(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(t.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ga);let e=this.state.facet(t.cspNonce);Bn.mount(this.root,this.styleModules.concat(AP).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return p0(this,e,$w(this,e,n,r))}moveByGroup(e,n){return p0(this,e,$w(this,e,n,r=>QN(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=r[n?r.length-1:0];return E.cursor(o.side(n,i)+e.from,o.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return ZN(this,e,n,r)}moveVertically(e,n,r){return p0(this,e,JN(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),tb(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[kr.find(o,e-i.from,-1,n)];return fu(r,s.dir==ue.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet($C)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>IP)return BC(e.length);let n=this.textDirectionAt(e.from),r;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||FC(o.isolates,r=Vw(this,e))))return o.order;r||(r=Vw(this,e));let i=_N(e.text,n,r);return this.bidiCache.push(new mh(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||P.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{bC(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Gf.of(new Za(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Gf.of(new Za(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return X.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return X.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Bn.newName(),i=[Xf.of(r),Ga.of(K0(`.${r}`,e))];return n&&n.dark&&i.push(G0.of(!0)),i}static baseTheme(e){return Cn.lowest(Ga.of(K0("."+$0,e,gb)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&he.get(r)||he.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}};R.styleModule=Ga;R.inputHandler=jC;R.clipboardInputFilter=cy;R.clipboardOutputFilter=fy;R.scrollHandler=qC;R.focusChangeEffect=GC;R.perLineTextDirection=$C;R.exceptionSink=WC;R.updateListener=I0;R.editable=ni;R.mouseSelectionStyle=HC;R.dragMovesSelection=VC;R.clickAddsSelectionRange=UC;R.decorations=au;R.outerDecorations=ZC;R.atomicRanges=hu;R.bidiIsolatedRanges=QC;R.scrollMargins=JC;R.darkTheme=G0;R.cspNonce=N.define({combine:t=>t.length?t[0]:""});R.contentAttributes=hy;R.editorAttributes=XC;R.lineWrapping=R.contentAttributes.of({class:"cm-lineWrapping"});R.announce=V.define();var IP=4096,aC={},mh=class t{constructor(e,n,r,i,o,s){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=o,this.order=s}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:ue.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!n.touchesRange(s.from,s.to)&&r.push(new t(n.mapPos(s.from,1),n.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return r}};function uC(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(t):o;s&&E0(s,n)}return n}var MP=P.mac?"mac":P.windows?"win":P.linux?"linux":"key";function LP(t,e){let n=t.split(/-(?!$)/),r=n[n.length-1];r=="Space"&&(r=" ");let i,o,s,l;for(let a=0;a<n.length-1;++a){let u=n[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),l&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Zf(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}var NP=Cn.default(R.domEventHandlers({keydown(t,e){return vb(yb(e.state),t,e,"editor")}})),Uo=N.define({enables:NP}),cC=new WeakMap;function yb(t){let e=t.facet(Uo),n=cC.get(e);return n||cC.set(e,n=_P(e.reduce((r,i)=>r.concat(i),[]))),n}function xb(t,e,n){return vb(yb(t.state),e,t,n)}var _i=null,PP=4e3;function _P(t,e=MP){let n=Object.create(null),r=Object.create(null),i=(s,l)=>{let a=r[s];if(a==null)r[s]=l;else if(a!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,l,a,u,c)=>{var f,h;let d=n[s]||(n[s]=Object.create(null)),g=l.split(/ (?!$)/).map(p=>LP(p,e));for(let p=1;p<g.length;p++){let m=g.slice(0,p).join(" ");i(m,!0),d[m]||(d[m]={preventDefault:!0,stopPropagation:!1,run:[y=>{let S=_i={view:y,prefix:m,scope:s};return setTimeout(()=>{_i==S&&(_i=null)},PP),!0}]})}let x=g.join(" ");i(x,!1);let v=d[x]||(d[x]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&v.run.push(a),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let s of t){let l=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let u of l){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=s;for(let h in c)c[h].run.push(d=>f(d,X0))}let a=s[e]||s.key;if(a)for(let u of l)o(u,a,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(u,"Shift-"+a,s.shift,s.preventDefault,s.stopPropagation)}return n}var X0=null;function vb(t,e,n,r){X0=e;let i=Lw(e),o=Tt(i,0),s=wn(o)==i.length&&i!=" ",l="",a=!1,u=!1,c=!1;_i&&_i.view==n&&_i.scope==r&&(l=_i.prefix+" ",lb.indexOf(e.keyCode)<0&&(u=!0,_i=null));let f=new Set,h=v=>{if(v){for(let p of v.run)if(!f.has(p)&&(f.add(p),p(n)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],g,x;return d&&(h(d[l+Zf(i,e,!s)])?a=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(P.windows&&e.ctrlKey&&e.altKey)&&!(P.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=ti[e.keyCode])&&g!=i?(h(d[l+Zf(g,e,!0)])||e.shiftKey&&(x=$s[e.keyCode])!=i&&x!=g&&h(d[l+Zf(x,e,!1)]))&&(a=!0):s&&e.shiftKey&&h(d[l+Zf(i,e,!0)])&&(a=!0),!a&&h(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),X0=null,a}var uu=class t{constructor(e,n,r,i,o){this.className=e,this.left=n,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=Sb(e);return[new t(n,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return DP(e,n,r)}};function Sb(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ue.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function fC(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let o=t.dom.getBoundingClientRect(),s=(i.top+i.bottom)/2,l=t.posAtCoords({x:o.left+1,y:s}),a=t.posAtCoords({x:o.right-1,y:s});return l==null||a==null?r:{from:Math.max(r.from,Math.min(l,a)),to:Math.min(r.to,Math.max(l,a))}}function DP(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==ue.LTR,s=t.contentDOM,l=s.getBoundingClientRect(),a=Sb(t),u=s.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=l.right-(c?parseInt(c.paddingRight):0),d=L0(t,r,1),g=L0(t,i,-1),x=d.type==Yt.Text?d:null,v=g.type==Yt.Text?g:null;if(x&&(t.lineWrapping||d.widgetLineBreaks)&&(x=fC(t,r,1,x)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=fC(t,i,-1,v)),x&&v&&x.from==v.from&&x.to==v.to)return m(y(n.from,n.to,x));{let k=x?y(n.from,null,x):S(d,!1),w=v?y(null,n.to,v):S(g,!0),C=[];return(x||d).to<(v||g).from-(x&&v?1:0)||d.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<w.top?C.push(p(f,k.bottom,h,w.top)):k.bottom<w.top&&t.elementAtHeight((k.bottom+w.top)/2).type==Yt.Text&&(k.bottom=w.top=(k.bottom+w.top)/2),m(k).concat(C).concat(m(w))}function p(k,w,C,T){return new uu(e,k-a.left,w-a.top,C-k,T-w)}function m({top:k,bottom:w,horizontal:C}){let T=[];for(let I=0;I<C.length;I+=2)T.push(p(C[I],k,C[I+1],w));return T}function y(k,w,C){let T=1e9,I=-1e9,L=[];function U(G,Z,le,Te,Ue){let ne=t.coordsAtPos(G,G==C.to?-2:2),de=t.coordsAtPos(le,le==C.from?2:-2);!ne||!de||(T=Math.min(ne.top,de.top,T),I=Math.max(ne.bottom,de.bottom,I),Ue==ue.LTR?L.push(o&&Z?f:ne.left,o&&Te?h:de.right):L.push(!o&&Te?f:de.left,!o&&Z?h:ne.right))}let B=k??C.from,j=w??C.to;for(let G of t.visibleRanges)if(G.to>B&&G.from<j)for(let Z=Math.max(G.from,B),le=Math.min(G.to,j);;){let Te=t.state.doc.lineAt(Z);for(let Ue of t.bidiSpans(Te)){let ne=Ue.from+Te.from,de=Ue.to+Te.from;if(ne>=le)break;de>Z&&U(Math.max(ne,Z),k==null&&ne<=B,Math.min(de,le),w==null&&de>=j,Ue.dir)}if(Z=Te.to+1,Z>=le)break}return L.length==0&&U(B,k==null,j,w==null,t.textDirection),{top:T,bottom:I,horizontal:L}}function S(k,w){let C=l.top+(w?k.top:k.bottom);return{top:C,bottom:C,horizontal:[]}}}function FP(t,e){return t.constructor==e.constructor&&t.eq(e)}var Z0=class{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(rh)!=e.state.facet(rh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(rh);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!FP(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,P.safari&&P.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},rh=N.define();function kb(t){return[X.define(e=>new Z0(e,t)),rh.of(t)]}var cu=N.define({combine(t){return Dt(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function wb(t={}){return[cu.of(t),BP,zP,UP,KC.of(!0)]}function Cb(t){return t.startState.facet(cu)!=t.state.facet(cu)}var BP=kb({above:!0,markers(t){let{state:e}=t,n=e.facet(cu),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty||n.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:E.cursor(i.head,i.head>i.anchor?-1:1);for(let a of uu.forRange(t,s,l))r.push(a)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Cb(t);return n&&hC(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){hC(e.state,t)},class:"cm-cursorLayer"});function hC(t,e){e.style.animationDuration=t.facet(cu).cursorBlinkRate+"ms"}var zP=kb({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:uu.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Cb(t)},class:"cm-selectionLayer"}),UP=Cn.highest(R.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),bb=V.define({map(t,e){return t==null?null:e.mapPos(t)}}),qa=re.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(bb)?r.value:n,t)}}),VP=X.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(qa);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(qa)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(qa),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(qa)!=t&&this.view.dispatch({effects:bb.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Eb(){return[qa,VP]}function dC(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),s=n,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)i(s+l.index,l)}function HP(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}var Q0=class{constructor(e){let{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(l,a,u,c)=>i(c,u,u+l[0].length,l,a);else if(typeof r=="function")this.addMatch=(l,a,u,c)=>{let f=r(l,a,u);f&&c(u,u+l[0].length,f)};else if(r)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let n=new Fe,r=n.add.bind(n);for(let{from:i,to:o}of HP(e,this.maxLength))dC(e.state.doc,this.regexp,i,o,(s,l)=>this.addMatch(l,e,s,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(r=Math.min(l,r),i=Math.max(a,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),l=Math.min(o.to,i);if(l>=s){let a=e.state.doc.lineAt(s),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(o.from,a.from),f=Math.min(o.to,u.to);if(this.boundary){for(;s>a.from;s--)if(this.boundary.test(a.text[s-1-a.from])){c=s;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){f=l;break}}let h=[],d,g=(x,v,p)=>h.push(p.range(x,v));if(a==u)for(this.regexp.lastIndex=c-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,g);else dC(e.state.doc,this.regexp,c,f,(x,v)=>this.addMatch(v,e,x,g));n=n.update({filterFrom:c,filterTo:f,filter:(x,v)=>x<c||v>f,add:h})}}return n}},J0=/x/.unicode!=null?"gu":"g",WP=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,J0),jP={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},g0=null;function GP(){var t;if(g0==null&&typeof document<"u"&&document.body){let e=document.body.style;g0=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return g0||!1}var ih=N.define({combine(t){let e=Dt(t,{render:null,specialChars:WP,addSpecialChars:null});return(e.replaceTabs=!GP())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,J0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,J0)),e}});function Tb(t={}){return[ih.of(t),$P()]}var pC=null;function $P(){return pC||(pC=X.fromClass(class{constructor(t){this.view=t,this.decorations=O.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(ih)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Q0({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=Tt(e[0],0);if(o==9){let s=i.lineAt(r),l=n.state.tabSize,a=ei(s.text,l,r-s.from);return O.replace({widget:new ty((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=O.replace({widget:new ey(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(ih);t.startState.facet(ih)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}var KP="\u2022";function qP(t){return t>=32?KP:t==10?"\u2424":String.fromCharCode(9216+t)}var ey=class extends He{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=qP(this.code),r=e.state.phrase("Control character")+" "+(jP[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}},ty=class extends He{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};function Ab(){return XP}var YP=O.line({class:"cm-activeLine"}),XP=X.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(YP.range(i.from)),e=i.from)}return O.set(n)}},{decorations:t=>t.decorations}),ny=class extends He{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?Qs(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=fu(n[0],r.direction!="rtl"),o=parseInt(r.lineHeight);return i.bottom-i.top>o*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+o}:i}ignoreEvent(){return!1}};function Rb(t){let e=X.fromClass(class{constructor(n){this.view=n,this.placeholder=t?O.set([O.widget({widget:new ny(t),side:1}).range(0)]):O.none}get decorations(){return this.view.state.doc.length?O.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,R.contentAttributes.of({"aria-placeholder":t})]:e}var ry=2e3;function ZP(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>ry||n.off>ry||e.col<0||n.col<0){let s=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=r;a<=i;a++){let u=t.doc.line(a);u.length<=l&&o.push(E.range(u.from+s,u.to+l))}}else{let s=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=r;a<=i;a++){let u=t.doc.line(a),c=Hf(u.text,s,t.tabSize,!0);if(c<0)o.push(E.cursor(u.to));else{let f=Hf(u.text,l,t.tabSize);o.push(E.range(u.from+c,u.from+f))}}}return o}function QP(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function mC(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>ry?-1:i==r.length?QP(t,e.clientX):ei(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function JP(t,e){let n=mC(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),s=i.state.doc.lineAt(o);n={line:s.number,col:n.col,off:Math.min(n.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let l=mC(t,i);if(!l)return r;let a=ZP(t.state,n,l);return a.length?s?E.create(a.concat(r.ranges)):E.create(a):r}}:null}function Ob(t){let e=t?.eventFilter||(n=>n.altKey&&n.button==0);return R.mouseSelectionStyle.of((n,r)=>e(r)?JP(n,r):null)}var e3={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},t3={style:"cursor: crosshair"};function Ib(t={}){let[e,n]=e3[t.key||"Alt"],r=X.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,R.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?t3:null})]}var Qf="-10000px",gh=class{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=r(s,o))}update(e,n){var r;let i=e.state.facet(this.facet),o=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let s=[],l=n?[]:null;for(let a=0;a<o.length;a++){let u=o[a],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==u.create&&(c=f)}if(c<0)s[a]=this.createTooltipView(u,a?s[a-1]:null),l&&(l[a]=!!u.above);else{let f=s[a]=this.tooltipViews[c];l&&(l[a]=n[c]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(this.removeTooltipView(a),(r=a.destroy)===null||r===void 0||r.call(a));return n&&(l.forEach((a,u)=>n[u]=a),n.length=l.length),this.input=i,this.tooltips=o,this.tooltipViews=s,!0}};function n3(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}var y0=N.define({combine:t=>{var e,n,r;return{position:P.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||n3}}}),gC=new WeakMap,my=X.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(y0);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new gh(t,du,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(y0);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=Qf,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(P.safari){let s=o.getBoundingClientRect();n=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}else n=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=dy(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let l=this.manager.tooltipViews[s];return l.getCoords?l.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(y0).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:o}=t,s=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(n.top,r.top)||f.top>=Math.min(n.bottom,r.bottom)||f.right<Math.max(n.left,r.left)-.1||f.left>Math.min(n.right,r.right)+.1)){c.style.top=Qf;continue}let d=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,g=d?7:0,x=h.right-h.left,v=(e=gC.get(u))!==null&&e!==void 0?e:h.bottom-h.top,p=u.offset||i3,m=this.view.textDirection==ue.LTR,y=h.width>r.right-r.left?m?r.left:r.right-h.width:m?Math.max(r.left,Math.min(f.left-(d?14:0)+p.x,r.right-x)):Math.min(Math.max(r.left,f.left-x+(d?14:0)-p.x),r.right-x),S=this.above[l];!a.strictSide&&(S?f.top-v-g-p.y<r.top:f.bottom+v+g+p.y>r.bottom)&&S==r.bottom-f.bottom>f.top-r.top&&(S=this.above[l]=!S);let k=(S?f.top-r.top:r.bottom-f.bottom)-g;if(k<v&&u.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=Qf;continue}gC.set(u,v),c.style.height=(v=k)/o+"px"}else c.style.height&&(c.style.height="");let w=S?f.top-v-g-p.y:f.bottom+g+p.y,C=y+x;if(u.overlap!==!0)for(let T of s)T.left<C&&T.right>y&&T.top<w+v&&T.bottom>w&&(w=S?T.top-v-2-g:T.bottom+g+2);if(this.position=="absolute"?(c.style.top=(w-t.parent.top)/o+"px",yC(c,(y-t.parent.left)/i)):(c.style.top=w/o+"px",yC(c,y/i)),d){let T=f.left+(m?p.x:-p.x)-(y+14-7);d.style.left=T/i+"px"}u.overlap!==!0&&s.push({left:y,top:w,right:C,bottom:w+v}),c.classList.toggle("cm-tooltip-above",S),c.classList.toggle("cm-tooltip-below",!S),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Qf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function yC(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}var r3=R.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),i3={x:0,y:0},du=N.define({enables:[my,r3]}),yh=N.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])}),xh=class t{static create(e){return new t(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new gh(e,yh,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},o3=du.compute([yh],t=>{let e=t.facet(yh);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:xh.create,above:e[0].above,arrow:e.some(n=>n.arrow)}}),iy=class{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,o=1;if(r instanceof Js)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let l=e.coordsAtPos(i);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=a&&a.dir==ue.RTL?-1:1;o=n.x<l.left?-u:u}let s=this.source(e,i,o);if(s?.then){let l=this.pending={pos:i};s.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Rt(e.state,a,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(my),n=e?e.manager.tooltips.findIndex(r=>r.create==xh.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:o}=this;if(i.length&&o&&!s3(o.dom,e)||this.pending){let{pos:s}=i[0]||this.pending,l=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:s;(s==l?this.view.posAtCoords(this.lastMove)!=s:!l3(this.view,s,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},Jf=4;function s3(t,e){let{left:n,right:r,top:i,bottom:o}=t.getBoundingClientRect(),s;if(s=t.querySelector(".cm-tooltip-arrow")){let l=s.getBoundingClientRect();i=Math.min(l.top,i),o=Math.max(l.bottom,o)}return e.clientX>=n-Jf&&e.clientX<=r+Jf&&e.clientY>=i-Jf&&e.clientY<=o+Jf}function l3(t,e,n,r,i,o){let s=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,l)<i)return!1;let a=t.posAtCoords({x:r,y:i},!1);return a>=e&&a<=n}function Mb(t,e={}){let n=V.define(),r=re.define({create(){return[]},update(i,o){if(i.length&&(e.hideOnChange&&(o.docChanged||o.selection)?i=[]:e.hideOn&&(i=i.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let l of i){let a=o.changes.mapPos(l.pos,-1,Et.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=o.changes.mapPos(u.end)),s.push(u)}}i=s}for(let s of o.effects)s.is(n)&&(i=s.value),s.is(a3)&&(i=[]);return i},provide:i=>yh.from(i)});return{active:r,extension:[r,X.define(i=>new iy(i,t,r,n,e.hoverTime||300)),o3]}}function gy(t,e){let n=t.plugin(my);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}var a3=V.define();var xC=N.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Vo(t,e){let n=t.plugin(Lb),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}var Lb=X.fromClass(class{constructor(t){this.input=t.state.facet(zo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(xC);this.top=new Ys(t,!0,e.topContainer),this.bottom=new Ys(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(xC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ys(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ys(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(zo);if(n!=this.input){let r=n.filter(a=>a),i=[],o=[],s=[],l=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),l.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?o:s).push(c)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>R.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})}),Ys=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=vC(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=vC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function vC(t){let e=t.nextSibling;return t.remove(),e}var zo=N.define({enables:Lb});var Qe=class extends tr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Qe.prototype.elementClass="";Qe.prototype.toDOM=void 0;Qe.prototype.mapMode=Et.TrackBefore;Qe.prototype.startSide=Qe.prototype.endSide=-1;Qe.prototype.point=!0;var oh=N.define(),u3=N.define(),c3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>te.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},tu=N.define();function pu(t){return[Nb(),tu.of({...c3,...t})]}var oy=N.define({combine:t=>t.some(e=>e)});function Nb(t){let e=[f3];return t&&t.fixed===!1&&e.push(oy.of(!0)),e}var f3=X.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(tu).map(e=>new vh(t,e)),this.fixed=!t.state.facet(oy);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(oy)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=te.iter(this.view.state.facet(oh),this.view.viewport.from),r=[],i=this.gutters.map(o=>new ly(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let s=!0;for(let l of o.type)if(l.type==Yt.Text&&s){sy(n,r,l.from);for(let a of i)a.line(this.view,l,r);s=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(o.type==Yt.Text){sy(n,r,o.from);for(let s of i)s.line(this.view,o,r)}else if(o.widget)for(let s of i)s.widget(this.view,o);for(let o of i)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(tu),n=t.state.facet(tu),r=t.docChanged||t.heightChanged||t.viewportChanged||!te.eq(t.startState.facet(oh),t.state.facet(oh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let s=e.indexOf(o);s<0?i.push(new vh(this.view,o)):(this.gutters[s].update(t),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>R.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ue.LTR?{left:r,right:i}:{right:r,left:i}})});function SC(t){return Array.isArray(t)?t:[t]}function sy(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}var ly=class{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=te.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,o=(n.top-this.height)/e.scaleY,s=n.height/e.scaleY;if(this.i==i.elements.length){let l=new Sh(e,s,o,r);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,s,o,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];sy(this.cursor,i,n.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let s=this.gutter;i.length==0&&!s.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let o of e.state.facet(u3)){let s=o(e,n.widget,n);s&&(i||(i=[])).push(s)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}},vh=class{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let a=o.getBoundingClientRect();s=(a.top+a.bottom)/2}else s=i.clientY;let l=e.lineBlockAtHeight(s-e.documentTop);n.domEventHandlers[r](e,l,i)&&i.preventDefault()});this.markers=SC(n.markers(e)),n.initialSpacer&&(this.spacer=new Sh(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=SC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!te.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},Sh=class{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),h3(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let l=s,a=o<n.length?n[o++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,u=!0;break}}else l=this.markers.length;for(;s<l;){let c=this.markers[s++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&s++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}};function h3(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}var d3=N.define(),p3=N.define(),Xs=N.define({combine(t){return Dt(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],s=n[i];r[i]=o?(l,a,u)=>o(l,a,u)||s(l,a,u):s}return r}})}}),nu=class extends Qe{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function x0(t,e){return t.state.facet(Xs).formatNumber(e,t.state)}var m3=tu.compute([Xs],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(d3)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new nu(x0(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(p3)){let o=i(e,n,r);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Xs)!=e.state.facet(Xs),initialSpacer(e){return new nu(x0(e,kC(e.state.doc.lines)))},updateSpacer(e,n){let r=x0(n.view,kC(n.view.state.doc.lines));return r==e.number?e:new nu(r)},domEventHandlers:t.facet(Xs).domEventHandlers,side:"before"}));function Pb(t={}){return[Xs.of(t),Nb(),m3]}function kC(t){let e=9;for(;e<t;)e=e*10+9;return e}var g3=new class extends Qe{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},y3=oh.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(g3.range(i)))}return te.of(e)});function _b(){return y3}var x3=0,mu=class{constructor(e,n){this.from=e,this.to=n}},$=class{constructor(e={}){this.id=x3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=En.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}};$.closedBy=new $({deserialize:t=>t.split(" ")});$.openedBy=new $({deserialize:t=>t.split(" ")});$.group=new $({deserialize:t=>t.split(" ")});$.isolate=new $({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});$.contextHash=new $({perNode:!0});$.lookAhead=new $({perNode:!0});$.mounted=new $({perNode:!0});var tl=class{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[$.mounted.id]}},v3=Object.create(null),En=class t{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):v3,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new t(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop($.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop($.group),o=-1;o<(i?i.length:0);o++){let s=n[o<0?r.name:i[o]];if(s)return s}}}};En.none=new En("",Object.create(null),0,8);var Ch=new WeakMap,Db=new WeakMap,yt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(yt||(yt={}));var Ft=class t{constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let e=tl.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new xu(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Ch.get(this)||this.topNode,o=new xu(i);return o.moveTo(e,n),Ch.set(this,o._tree),o}get topNode(){return new Er(this,0,0,null)}resolve(e,n=0){let r=gu(Ch.get(this)||this.topNode,e,n,!1);return Ch.set(this,r),r}resolveInner(e,n=0){let r=gu(Db.get(this)||this.topNode,e,n,!0);return Db.set(this,r),r}resolveStack(e,n=0){return S3(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e,s=e.mode||0,l=(s&yt.IncludeAnonymous)>0;for(let a=this.cursor(s|yt.IncludeAnonymous);;){let u=!1;if(a.from<=o&&a.to>=i&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Cy(En.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new t(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new t(En.none,n,r,i)))}static build(e){return k3(e)}};Ft.empty=new Ft(En.none,[],[],0);var yy=class t{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new t(this.buffer,this.index)}},Ui=class t{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return En.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,n,r,i,o){let{buffer:s}=this,l=-1;for(let a=e;a!=n&&!(zb(o,i,s[a+1],s[a+2])&&(l=a,r>0));a=s[a+3]);return l}slice(e,n,r){let i=this.buffer,o=new Uint16Array(n-e),s=0;for(let l=e,a=0;l<n;){o[a++]=i[l++],o[a++]=i[l++]-r;let u=o[a++]=i[l++]-r;o[a++]=i[l++]-e,s=Math.max(s,u)}return new t(o,s,this.set)}};function zb(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function gu(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let s=!r&&t instanceof Er&&t.index<0?null:t.parent;if(!s)return t;t=s}let o=r?0:yt.IgnoreOverlays;if(r)for(let s=t,l=s.parent;l;s=l,l=s.parent)s instanceof Er&&s.index<0&&((i=l.enter(e,n,o))===null||i===void 0?void 0:i.from)!=s.from&&(t=l);for(;;){let s=t.enter(e,n,o);if(!s)return t;t=s}}var Eh=class{cursor(e=0){return new xu(this,e)}getChild(e,n=null,r=null){let i=Fb(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Fb(this,e,n,r)}resolve(e,n=0){return gu(this,e,n,!1)}resolveInner(e,n=0){return gu(this,e,n,!0)}matchContext(e){return xy(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}},Er=class t extends Eh{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){for(let s=this;;){for(let{children:l,positions:a}=s._tree,u=n>0?l.length:-1;e!=u;e+=n){let c=l[e],f=a[e]+s.from;if(zb(i,r,f,f+c.length)){if(c instanceof Ui){if(o&yt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,r-f,i);if(h>-1)return new yu(new vy(s,c,e,f),null,h)}else if(o&yt.IncludeAnonymous||!c.type.isAnonymous||wy(c)){let h;if(!(o&yt.IgnoreMounts)&&(h=tl.get(c))&&!h.overlay)return new t(h.tree,f,e,s);let d=new t(c,f,e,s);return o&yt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(o&yt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+n:e=n<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&yt.IgnoreOverlays)&&(i=tl.get(this._tree))&&i.overlay){let o=e-this.from;for(let{from:s,to:l}of i.overlay)if((n>0?s<=o:s<o)&&(n<0?l>=o:l>o))return new t(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Fb(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(let s=!1;!s;)if(s=i.type.is(n),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function xy(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}var vy=class{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}},yu=class t extends Eh{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new t(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&yt.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new t(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new t(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new t(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1];e.push(r.slice(i,o,s)),n.push(0)}return new Ft(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function Ub(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let s=t[o];(s.from>n.from||s.to<n.to)&&(n=s,e=o)}let r=n instanceof Er&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new Sy(i,n)}var Sy=class{constructor(e,n){this.heads=e,this.node=n}get next(){return Ub(this.heads)}};function S3(t,e,n){let r=t.resolveInner(e,n),i=null;for(let o=r instanceof Er?r:r.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(i||(i=[r])).push(s.resolve(e,n)),o=s}else{let s=tl.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let l=new Er(s.tree,s.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(gu(l,e,n,!1))}}return i?Ub(i):r}var xu=class{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Er)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Er?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&yt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&yt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&yt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let l=r._tree.children[o];if(this.mode&yt.IncludeAnonymous||l instanceof Ui||!l.type.isAnonymous||wy(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;n=s,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)n=new yu(this.buffer,n,this.stack[i]);return this.bufferNode=new yu(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return xy(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return xy(this._tree,e,i);let s=r[n.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}};function wy(t){return t.children.some(e=>e instanceof Ui||!e.type.isAnonymous||wy(e))}function k3(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=1024,reused:o=[],minRepeatType:s=r.types.length}=t,l=Array.isArray(n)?new yy(n,n.length):n,a=r.types,u=0,c=0;function f(k,w,C,T,I,L){let{id:U,start:B,end:j,size:G}=l,Z=c,le=u;if(G<0)if(l.next(),G==-1){let qe=o[U];C.push(qe),T.push(B-k);return}else if(G==-3){u=U;return}else if(G==-4){c=U;return}else throw new RangeError(`Unrecognized record size: ${G}`);let Te=a[U],Ue,ne,de=B-k;if(j-B<=i&&(ne=v(l.pos-w,I))){let qe=new Uint16Array(ne.size-ne.skip),it=l.pos-ne.size,On=qe.length;for(;l.pos>it;)On=p(ne.start,qe,On);Ue=new Ui(qe,j-ne.start,r),de=ne.start-k}else{let qe=l.pos-G;l.next();let it=[],On=[],fr=U>=s?U:-1,dt=0,fo=j;for(;l.pos>qe;)fr>=0&&l.id==fr&&l.size>=0?(l.end<=fo-i&&(g(it,On,B,dt,l.end,fo,fr,Z,le),dt=it.length,fo=l.end),l.next()):L>2500?h(B,qe,it,On):f(B,qe,it,On,fr,L+1);if(fr>=0&&dt>0&&dt<it.length&&g(it,On,B,dt,B,fo,fr,Z,le),it.reverse(),On.reverse(),fr>-1&&dt>0){let ot=d(Te,le);Ue=Cy(Te,it,On,0,it.length,0,j-B,ot,ot)}else Ue=x(Te,it,On,j-B,Z-j,le)}C.push(Ue),T.push(de)}function h(k,w,C,T){let I=[],L=0,U=-1;for(;l.pos>w;){let{id:B,start:j,end:G,size:Z}=l;if(Z>4)l.next();else{if(U>-1&&j<U)break;U<0&&(U=G-i),I.push(B,j,G),L++,l.next()}}if(L){let B=new Uint16Array(L*4),j=I[I.length-2];for(let G=I.length-3,Z=0;G>=0;G-=3)B[Z++]=I[G],B[Z++]=I[G+1]-j,B[Z++]=I[G+2]-j,B[Z++]=Z;C.push(new Ui(B,I[2]-j,r)),T.push(j-k)}}function d(k,w){return(C,T,I)=>{let L=0,U=C.length-1,B,j;if(U>=0&&(B=C[U])instanceof Ft){if(!U&&B.type==k&&B.length==I)return B;(j=B.prop($.lookAhead))&&(L=T[U]+B.length+j)}return x(k,C,T,I,L,w)}}function g(k,w,C,T,I,L,U,B,j){let G=[],Z=[];for(;k.length>T;)G.push(k.pop()),Z.push(w.pop()+C-I);k.push(x(r.types[U],G,Z,L-I,B-L,j)),w.push(I-C)}function x(k,w,C,T,I,L,U){if(L){let B=[$.contextHash,L];U=U?[B].concat(U):[B]}if(I>25){let B=[$.lookAhead,I];U=U?[B].concat(U):[B]}return new Ft(k,w,C,T,U)}function v(k,w){let C=l.fork(),T=0,I=0,L=0,U=C.end-i,B={size:0,start:0,skip:0};e:for(let j=C.pos-k;C.pos>j;){let G=C.size;if(C.id==w&&G>=0){B.size=T,B.start=I,B.skip=L,L+=4,T+=4,C.next();continue}let Z=C.pos-G;if(G<0||Z<j||C.start<U)break;let le=C.id>=s?4:0,Te=C.start;for(C.next();C.pos>Z;){if(C.size<0)if(C.size==-3)le+=4;else break e;else C.id>=s&&(le+=4);C.next()}I=Te,T+=G,L+=le}return(w<0||T==k)&&(B.size=T,B.start=I,B.skip=L),B.size>4?B:void 0}function p(k,w,C){let{id:T,start:I,end:L,size:U}=l;if(l.next(),U>=0&&T<s){let B=C;if(U>4){let j=l.pos-(U-4);for(;l.pos>j;)C=p(k,w,C)}w[--C]=B,w[--C]=L-k,w[--C]=I-k,w[--C]=T}else U==-3?u=T:U==-4&&(c=T);return C}let m=[],y=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,m,y,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:m.length?y[0]+m[0].length:0;return new Ft(a[t.topID],m.reverse(),y.reverse(),S)}var Bb=new WeakMap;function bh(t,e){if(!t.isAnonymous||e instanceof Ui||e.type!=t)return 1;let n=Bb.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Ft)){n=1;break}n+=bh(t,r)}Bb.set(e,n)}return n}function Cy(t,e,n,r,i,o,s,l,a){let u=0;for(let g=r;g<i;g++)u+=bh(t,e[g]);let c=Math.ceil(u*1.5/8),f=[],h=[];function d(g,x,v,p,m){for(let y=v;y<p;){let S=y,k=x[y],w=bh(t,g[y]);for(y++;y<p;y++){let C=bh(t,g[y]);if(w+C>=c)break;w+=C}if(y==S+1){if(w>c){let C=g[S];d(C.children,C.positions,0,C.children.length,x[S]+m);continue}f.push(g[S])}else{let C=x[y-1]+g[y-1].length-k;f.push(Cy(t,g,x,S,y,k,C,null,a))}h.push(k+m-o)}}return d(e,n,r,i,0),(l||a)(f,h,s)}var Ho=class t{constructor(e,n,r,i,o=!1,s=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new t(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<n.length?n[l]:null,f=c?c.fromA:1e9;if(f-a>=r)for(;s&&s.from<f;){let h=s;if(a>=h.from||f<=h.to||u){let d=Math.max(h.from,a)-u,g=Math.min(h.to,f)-u;h=d>=g?null:new t(d,g,h.tree,h.offset+u,l>0,!!c)}if(h&&i.push(h),s.to>f)break;s=o<e.length?e[o++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}},Th=class{startParse(e,n,r){return typeof e=="string"&&(e=new ky(e)),r=r?r.length?r.map(i=>new mu(i.from,i.to)):[new mu(0,0)]:[new mu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}},ky=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}};var tH=new $({perNode:!0});var w3=0,rr=class t{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=w3++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof t&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new t(r,[],null,[]);if(i.set.push(i),n)for(let o of n.set)i.set.push(o);return i}static defineModifier(e){let n=new Ih(e);return r=>r.modified.indexOf(n)>-1?r:Ih.get(r.base||r,r.modified.concat(n).sort((i,o)=>i.id-o.id))}},C3=0,Ih=class t{constructor(e){this.name=e,this.instances=[],this.id=C3++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(l=>l.base==e&&b3(n,l.modified));if(r)return r;let i=[],o=new rr(e.name,i,e,n);for(let l of n)l.instances.push(o);let s=E3(n);for(let l of e.set)if(!l.modified.length)for(let a of s)i.push(t.get(l,a));return o}};function b3(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function E3(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function Wb(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],s=2,l=i;for(let f=0;;){if(l=="..."&&f>0&&f+3==i.length){s=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+i);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){s=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);l=i.slice(f)}let a=o.length-1,u=o[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new jo(r,s,a>0?o.slice(0,a):null);e[u]=c.sort(e[u])}}return jb.add(e)}var jb=new $({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let o=new jo(i.tags,i.mode,i.context);n?n.next=o:r=o,n=o}return r}}),jo=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};jo.empty=new jo([],2,null);function Ay(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let s of o.tag)n[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let l of o)for(let a of l.set){let u=n[a.id];if(u){s=s?s+" "+u:u;break}}return s},scope:r}}function T3(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function Gb(t,e,n,r=0,i=t.length){let o=new Ey(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}var Ey=class{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:s,from:l,to:a}=e;if(l>=r||a<=n)return;s.isTop&&(o=this.highlighters.filter(d=>!d.scope||d.scope(s)));let u=i,c=A3(e)||jo.empty,f=T3(o,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(n,l),u),c.opaque)return;let h=e.tree&&e.tree.prop($.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),g=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),x=e.firstChild();for(let v=0,p=l;;v++){let m=v<h.overlay.length?h.overlay[v]:null,y=m?m.from+l:a,S=Math.max(n,p),k=Math.min(r,y);if(S<k&&x)for(;e.from<k&&(this.highlightRange(e,S,k,i,o),this.startSpan(Math.min(k,e.to),u),!(e.to>=y||!e.nextSibling())););if(!m||y>r)break;p=m.to+l,p>n&&(this.highlightRange(d.cursor(),Math.max(n,m.from+l),Math.min(r,p),"",g),this.startSpan(Math.min(r,p),u))}x&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}};function A3(t){let e=t.type.prop(jb);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}var M=rr.define,Ah=M(),Vi=M(),Vb=M(Vi),Hb=M(Vi),Hi=M(),Rh=M(Hi),by=M(Hi),Rr=M(),Wo=M(Rr),Tr=M(),Ar=M(),Ty=M(),vu=M(Ty),Oh=M(),b={comment:Ah,lineComment:M(Ah),blockComment:M(Ah),docComment:M(Ah),name:Vi,variableName:M(Vi),typeName:Vb,tagName:M(Vb),propertyName:Hb,attributeName:M(Hb),className:M(Vi),labelName:M(Vi),namespace:M(Vi),macroName:M(Vi),literal:Hi,string:Rh,docString:M(Rh),character:M(Rh),attributeValue:M(Rh),number:by,integer:M(by),float:M(by),bool:M(Hi),regexp:M(Hi),escape:M(Hi),color:M(Hi),url:M(Hi),keyword:Tr,self:M(Tr),null:M(Tr),atom:M(Tr),unit:M(Tr),modifier:M(Tr),operatorKeyword:M(Tr),controlKeyword:M(Tr),definitionKeyword:M(Tr),moduleKeyword:M(Tr),operator:Ar,derefOperator:M(Ar),arithmeticOperator:M(Ar),logicOperator:M(Ar),bitwiseOperator:M(Ar),compareOperator:M(Ar),updateOperator:M(Ar),definitionOperator:M(Ar),typeOperator:M(Ar),controlOperator:M(Ar),punctuation:Ty,separator:M(Ty),bracket:vu,angleBracket:M(vu),squareBracket:M(vu),paren:M(vu),brace:M(vu),content:Rr,heading:Wo,heading1:M(Wo),heading2:M(Wo),heading3:M(Wo),heading4:M(Wo),heading5:M(Wo),heading6:M(Wo),contentSeparator:M(Rr),list:M(Rr),quote:M(Rr),emphasis:M(Rr),strong:M(Rr),link:M(Rr),monospace:M(Rr),strikethrough:M(Rr),inserted:M(),deleted:M(),changed:M(),invalid:M(),meta:Oh,documentMeta:M(Oh),annotation:M(Oh),processingInstruction:M(Oh),definition:rr.defineModifier("definition"),constant:rr.defineModifier("constant"),function:rr.defineModifier("function"),standard:rr.defineModifier("standard"),local:rr.defineModifier("local"),special:rr.defineModifier("special")};for(let t in b){let e=b[t];e instanceof rr&&(e.name=t)}var iH=Ay([{tag:b.link,class:"tok-link"},{tag:b.heading,class:"tok-heading"},{tag:b.emphasis,class:"tok-emphasis"},{tag:b.strong,class:"tok-strong"},{tag:b.keyword,class:"tok-keyword"},{tag:b.atom,class:"tok-atom"},{tag:b.bool,class:"tok-bool"},{tag:b.url,class:"tok-url"},{tag:b.labelName,class:"tok-labelName"},{tag:b.inserted,class:"tok-inserted"},{tag:b.deleted,class:"tok-deleted"},{tag:b.literal,class:"tok-literal"},{tag:b.string,class:"tok-string"},{tag:b.number,class:"tok-number"},{tag:[b.regexp,b.escape,b.special(b.string)],class:"tok-string2"},{tag:b.variableName,class:"tok-variableName"},{tag:b.local(b.variableName),class:"tok-variableName tok-local"},{tag:b.definition(b.variableName),class:"tok-variableName tok-definition"},{tag:b.special(b.variableName),class:"tok-variableName2"},{tag:b.definition(b.propertyName),class:"tok-propertyName tok-definition"},{tag:b.typeName,class:"tok-typeName"},{tag:b.namespace,class:"tok-namespace"},{tag:b.className,class:"tok-className"},{tag:b.macroName,class:"tok-macroName"},{tag:b.propertyName,class:"tok-propertyName"},{tag:b.operator,class:"tok-operator"},{tag:b.comment,class:"tok-comment"},{tag:b.meta,class:"tok-meta"},{tag:b.invalid,class:"tok-invalid"},{tag:b.punctuation,class:"tok-punctuation"}]);var Ry,ku=new $;var R3=new $,Vn=class{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ee.prototype.hasOwnProperty("tree")||Object.defineProperty(ee.prototype,"tree",{get(){return xt(this)}}),this.parser=n,this.extension=[Wi.of(this),ee.languageData.of((o,s,l)=>{let a=$b(o,s,l),u=a.type.prop(ku);if(!u)return[];let c=o.facet(u),f=a.type.prop(R3);if(f){let h=a.resolve(s-a.from,l);for(let d of f)if(d.test(h,o)){let g=o.facet(d.facet);return d.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return $b(e,n,r).type.prop(ku)==this.data}findRegions(e){let n=e.facet(Wi);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(ku)==this.data){r.push({from:s,to:s+o.length});return}let l=o.prop($.mounted);if(l){if(l.tree.prop(ku)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+s,to:a.to+s});else r.push({from:s,to:s+o.length});return}else if(l.overlay){let a=r.length;if(i(l.tree,l.overlay[0].from+s),r.length>a)return}}for(let a=0;a<o.children.length;a++){let u=o.children[a];u instanceof Ft&&i(u,o.positions[a]+s)}};return i(xt(e),0),r}get allowsNesting(){return!0}};Vn.setState=V.define();function $b(t,e,n){let r=t.facet(Wi),i=xt(t).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,n,yt.ExcludeBuffers))o.type.isTop&&(i=o);return i}function xt(t){let e=t.field(Vn.state,!1);return e?e.tree:Ft.empty}var Ly=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}},Su=null,Ny=class t{constructor(e,n,r=[],i,o,s,l,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new t(e,n,[],Ft.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Ly(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Ft.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ho.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ho.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Su;Su=this;try{return e()}finally{Su=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Kb(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,f,h)=>a.push({fromA:u,toA:c,fromB:f,toB:h})),r=Ho.applyChanges(r,a),i=Ft.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&l.push({from:c,to:f})}}}return new t(this.parser,n,r,i,o,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=Kb(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Th{createParse(n,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let a=Su;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=s,new Ft(En.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Su}};function Kb(t,e,n){return Ho.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}var Cu=class t{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new t(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Ny.create(e.facet(Wi).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new t(r)}};Vn.state=re.define({create:Cu.init,update(t,e){for(let n of e.effects)if(n.is(Vn.setState))return n.value;return e.startState.facet(Wi)!=e.state.facet(Wi)?Cu.init(e.state):t.apply(e)}});var Jb=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Jb=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});var Oy=typeof navigator<"u"&&(!((Ry=navigator.scheduling)===null||Ry===void 0)&&Ry.isInputPending)?()=>navigator.scheduling.isInputPending():null,O3=X.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Vn.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Vn.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Jb(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(Vn.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Oy?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<i&&r.doc.length>i+1e3,a=o.context.work(()=>Oy&&Oy()||Date.now()>s,i+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Vn.setState.of(new Cu(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Rt(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Wi=N.define({combine(t){return t.length?t[0]:null},enables:t=>[Vn.state,O3,R.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});var I3=N.define(),Ko=N.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function bu(t){let e=t.facet(Ko);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function rl(t,e){let n="",r=t.tabSize,i=t.facet(Ko)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let o=0;o<e;o++)n+=i;return n}function Nh(t,e){t instanceof ee&&(t=new Go(t));for(let r of t.state.facet(I3)){let i=r(t,e);if(i!==void 0)return i}let n=xt(t.state);return n.length>=e?L3(t,n,e):null}var Go=class{constructor(e,n={}){this.state=e,this.options=n,this.unit=bu(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return ei(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},M3=new $;function L3(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let o=[];for(let s=i;s&&!(s.from<r.node.from||s.to>r.node.to||s.from==r.node.from&&s.type==r.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)r={node:o[s],next:r}}return eE(r,t,n)}function eE(t,e,n){for(let r=t;r;r=r.next){let i=P3(r.node);if(i)return i(Py.create(e,n,r))}return 0}function N3(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function P3(t){let e=t.type.prop(M3);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop($.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>B3(s,!0,1,void 0,o&&!N3(s)?i.from:void 0)}return t.parent==null?_3:null}function _3(){return 0}var Py=class t extends Go{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new t(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(D3(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return eE(this.context.next,this.base,this.pos)}};function D3(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function F3(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=s)return null;let u=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+u}}l=a.to}}function B3(t,e,n,r,i){let o=t.textAfter,s=o.match(/^\s*/)[0].length,l=r&&o.slice(s,s+r.length)==r||i==t.pos+s,a=e?F3(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}var z3=200;function tE(){return ee.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+z3)return t;let o=n.sliceString(i.from,r);if(!e.some(u=>u.test(o)))return t;let{state:s}=t,l=-1,a=[];for(let{head:u}of s.selection.ranges){let c=s.doc.lineAt(u);if(c.from==l)continue;l=c.from;let f=Nh(s,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=rl(s,f);h!=d&&a.push({from:c.from,to:c.from+h.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}var Uy=N.define(),U3=new $;function V3(t,e,n){let r=xt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),o=null;for(let s=i;s;s=s.next){let l=s.node;if(l.to<=n||l.from>n)continue;if(o&&l.from<e)break;let a=l.type.prop(U3);if(a&&(l.to<r.length-50||r.length==t.doc.length||!H3(l))){let u=a(l,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(o=u)}}return o}function H3(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Mh(t,e,n){for(let r of t.facet(Uy)){let i=r(t,e,n);if(i)return i}return V3(t,e,n)}function nE(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}var il=V.define({map:nE}),qo=V.define({map:nE});function rE(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}var $o=re.define({create(){return O.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=qb(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(il)&&!W3(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Vy),i=r?O.replace({widget:new _y(r(e.state,n.value))}):Yb;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(qo)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=qb(t,e.selection.main.head)),t},provide:t=>R.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Yb.range(r,i))}return O.set(e,!0)}});function qb(t,e,n=e){let r=!1;return t.between(e,n,(i,o)=>{i<n&&o>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,o)=>i>=n||o<=e}):t}function Lh(t,e,n){var r;let i=null;return(r=t.field($o,!1))===null||r===void 0||r.between(e,n,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function W3(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function iE(t,e){return t.field($o,!1)?e:e.concat(V.appendConfig.of(lE()))}var j3=t=>{for(let e of rE(t)){let n=Mh(t.state,e.from,e.to);if(n)return t.dispatch({effects:iE(t.state,[il.of(n),oE(t,n)])}),!0}return!1},G3=t=>{if(!t.state.field($o,!1))return!1;let e=[];for(let n of rE(t)){let r=Lh(t.state,n.from,n.to);r&&e.push(qo.of(r),oE(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function oE(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return R.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}var $3=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=Mh(e,i.from,i.to);o&&n.push(il.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:iE(t.state,n)}),!!n.length},K3=t=>{let e=t.state.field($o,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(qo.of({from:r,to:i}))}),t.dispatch({effects:n}),!0};var sE=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:j3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:G3},{key:"Ctrl-Alt-[",run:$3},{key:"Ctrl-Alt-]",run:K3}],q3={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},Vy=N.define({combine(t){return Dt(t,q3)}});function lE(t){let e=[$o,X3];return t&&e.push(Vy.of(t)),e}function aE(t,e){let{state:n}=t,r=n.facet(Vy),i=s=>{let l=t.lineBlockAt(t.posAtDOM(s.target)),a=Lh(t.state,l.from,l.to);a&&t.dispatch({effects:qo.of(a)}),s.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}var Yb=O.replace({widget:new class extends He{toDOM(t){return aE(t,null)}}}),_y=class extends He{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return aE(e,this.value)}},Y3={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1},wu=class extends Qe{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}};function uE(t={}){let e={...Y3,...t},n=new wu(e,!0),r=new wu(e,!1),i=X.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Wi)!=s.state.facet(Wi)||s.startState.field($o,!1)!=s.state.field($o,!1)||xt(s.startState)!=xt(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new Fe;for(let a of s.viewportLineBlocks){let u=Lh(s.state,a.from,a.to)?r:Mh(s.state,a.from,a.to)?n:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:o}=e;return[i,pu({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(i))===null||l===void 0?void 0:l.markers)||te.empty},initialSpacer(){return new wu(e,!1)},domEventHandlers:{...o,click:(s,l,a)=>{if(o.click&&o.click(s,l,a))return!0;let u=Lh(s.state,l.from,l.to);if(u)return s.dispatch({effects:qo.of(u)}),!0;let c=Mh(s.state,l.from,l.to);return c?(s.dispatch({effects:il.of(c)}),!0):!1}}}),lE()]}var X3=R.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),nl=class t{constructor(e,n){this.specs=e;let r;function i(l){let a=Bn.newName();return(r||(r=Object.create(null)))["."+a]=l,a}let o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,s=n.scope;this.scope=s instanceof Vn?l=>l.prop(ku)==s.data:s?l=>l==s:void 0,this.style=Ay(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=r?new Bn(r):null,this.themeType=n.themeType}static define(e,n){return new t(e,n||{})}},Dy=N.define(),cE=N.define({combine(t){return t.length?[t[0]]:null}});function Iy(t){let e=t.facet(Dy);return e.length?e:t.facet(cE)}function Ph(t,e){let n=[Z3],r;return t instanceof nl&&(t.module&&n.push(R.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(cE.of(t)):r?n.push(Dy.computeN([R.darkTheme],i=>i.facet(R.darkTheme)==(r=="dark")?[t]:[])):n.push(Dy.of(t)),n}var Fy=class{constructor(e){this.markCache=Object.create(null),this.tree=xt(e.state),this.decorations=this.buildDeco(e,Iy(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=xt(e.state),r=Iy(e.state),i=r!=Iy(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!i&&n.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return O.none;let r=new Fe;for(let{from:i,to:o}of e.visibleRanges)Gb(this.tree,n,(s,l,a)=>{r.add(s,l,this.markCache[a]||(this.markCache[a]=O.mark({class:a})))},i,o);return r.finish()}},Z3=Cn.high(X.fromClass(Fy,{decorations:t=>t.decorations})),fE=nl.define([{tag:b.meta,color:"#404740"},{tag:b.link,textDecoration:"underline"},{tag:b.heading,textDecoration:"underline",fontWeight:"bold"},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strong,fontWeight:"bold"},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.keyword,color:"#708"},{tag:[b.atom,b.bool,b.url,b.contentSeparator,b.labelName],color:"#219"},{tag:[b.literal,b.inserted],color:"#164"},{tag:[b.string,b.deleted],color:"#a11"},{tag:[b.regexp,b.escape,b.special(b.string)],color:"#e40"},{tag:b.definition(b.variableName),color:"#00f"},{tag:b.local(b.variableName),color:"#30a"},{tag:[b.typeName,b.namespace],color:"#085"},{tag:b.className,color:"#167"},{tag:[b.special(b.variableName),b.macroName],color:"#256"},{tag:b.definition(b.propertyName),color:"#00c"},{tag:b.comment,color:"#940"},{tag:b.invalid,color:"#f00"}]),Q3=R.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),hE=1e4,dE="()[]{}",pE=N.define({combine(t){return Dt(t,{afterCursor:!0,brackets:dE,maxScanDistance:hE,renderMatch:t_})}}),J3=O.mark({class:"cm-matchingBracket"}),e_=O.mark({class:"cm-nonmatchingBracket"});function t_(t){let e=[],n=t.matched?J3:e_;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}var n_=re.define({create(){return O.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(pE);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=ir(e.state,i.head,-1,r)||i.head>0&&ir(e.state,i.head-1,1,r)||r.afterCursor&&(ir(e.state,i.head,1,r)||i.head<e.state.doc.length&&ir(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return O.set(n,!0)},provide:t=>R.decorations.from(t)}),r_=[n_,Q3];function mE(t={}){return[pE.of(t),r_]}var i_=new $;function By(t,e,n){let r=t.prop(e<0?$.openedBy:$.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function zy(t){let e=t.type.prop(i_);return e?e(t.node):t}function ir(t,e,n,r={}){let i=r.maxScanDistance||hE,o=r.brackets||dE,s=xt(t),l=s.resolveInner(e,n);for(let a=l;a;a=a.parent){let u=By(a.type,n,o);if(u&&a.from<a.to){let c=zy(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return o_(t,e,n,a,c,u,o)}}return s_(t,e,n,s,l.type,i,o)}function o_(t,e,n,r,i,o,s){let l=r.parent,a={from:i.from,to:i.to},u=0,c=l?.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let f=zy(c);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(By(c.type,n,s))u++;else if(By(c.type,-n,s)){if(u==0){let f=zy(c);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function s_(t,e,n,r,i,o,s){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=s.indexOf(l);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=o;){let d=c.value;n<0&&(h+=d.length);let g=e+h*n;for(let x=n>0?0:d.length-1,v=n>0?d.length:-1;x!=v;x+=n){let p=s.indexOf(d[x]);if(!(p<0||r.resolveInner(g+x,1).type!=i))if(p%2==0==n>0)f++;else{if(f==1)return{start:u,end:{from:g+x,to:g+x+1},matched:p>>1==a>>1};f--}}n>0&&(h+=d.length)}return c.done?{start:u,matched:!1}:null}var l_=Object.create(null),Xb=[En.none];var Zb=[],Qb=Object.create(null),a_=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])a_[t]=u_(l_,e);function My(t,e){Zb.indexOf(t)>-1||(Zb.push(t),console.warn(e))}function u_(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=t[u]||b[u];c?typeof c=="function"?a.length?a=a.map(c):My(u,`Modifier ${u} used at start of tag`):a.length?My(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:My(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(l=>l.id),o=Qb[i];if(o)return o.id;let s=Qb[i]=En.define({id:Xb.length,name:r,props:[Wb({[r]:n})]});return Xb.push(s),s.id}var dH={rtl:O.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:ue.RTL}),ltr:O.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:ue.LTR}),auto:O.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var c_=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=qy(t.state,n.from);return r.line?f_(t):r.block?d_(t):!1};function Ky(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}var f_=Ky(g_,0);var h_=Ky(bE,0);var d_=Ky((t,e)=>bE(t,e,m_(e)),0);function qy(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}var Eu=50;function p_(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-Eu,r),s=t.sliceDoc(i,i+Eu),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(s)[0].length,u=o.length-l;if(o.slice(u-e.length,u)==e&&s.slice(a,a+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let c,f;i-r<=2*Eu?c=f=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Eu),f=t.sliceDoc(i-Eu,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,g=f.length-d-n.length;return c.slice(h,h+e.length)==e&&f.slice(g,g+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(f.charAt(g-1))?1:0}}:null}function m_(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function bE(t,e,n=e.selection.ranges){let r=n.map(o=>qy(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,s)=>p_(e,r[s],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let s=0,l;s<i.length;s++)if(l=i[s]){let a=r[s],{open:u,close:c}=l;o.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:o}}return null}function g_(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of n){let l=r.length,a=1e9,u=qy(e,o).line;if(u){for(let c=o;c<=s;){let f=e.doc.lineAt(c);if(f.from>i&&(o==s||s>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,g=f.text.slice(h,h+u.length)==u?h:-1;h<f.text.length&&h<a&&(a=h),r.push({line:f,comment:g,token:u,indent:h,empty:d,single:!1})}c=f.to+1}if(a<1e9)for(let c=l;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==l+1&&(r[l].single=!0)}}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:u,empty:c,single:f}of r)(f||!c)&&o.push({from:l.from+u,insert:a+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:a}of r)if(l>=0){let u=s.from+l,c=u+a.length;s.text[c-s.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}var Wy=gt.define(),y_=gt.define(),x_=N.define(),EE=N.define({combine(t){return Dt(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),TE=re.define({create(){return Yo.empty},update(t,e){let n=e.state.facet(EE),r=e.annotation(Wy);if(r){let a=or.fromTransaction(e,r.selection),u=r.side,c=u==0?t.undone:t.done;return a?c=Dh(c,c.length,n.minDepth,a):c=IE(c,e.startState.selection),new Yo(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(y_);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(at.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=or.fromTransaction(e),s=e.annotation(at.time),l=e.annotation(at.userEvent);return o?t=t.addChanges(o,s,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Yo(t.done.map(or.fromJSON),t.undone.map(or.fromJSON))}});function AE(t={}){return[TE,EE.of(t),R.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?RE:e.inputType=="historyRedo"?jy:null;return r?(e.preventDefault(),r(n)):!1}})]}function Fh(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(TE,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}var RE=Fh(0,!1),jy=Fh(1,!1),v_=Fh(0,!0),S_=Fh(1,!0);var or=class t{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new t(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new t(e.changes&&$t.fromJSON(e.changes),[],e.mapped&&Jr.fromJSON(e.mapped),e.startSelection&&E.fromJSON(e.startSelection),e.selectionsAfter.map(E.fromJSON))}static fromTransaction(e,n){let r=Hn;for(let i of e.startState.facet(x_)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new t(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Hn)}static selection(e){return new t(void 0,Hn,void 0,void 0,e)}};function Dh(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function k_(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,s,l)=>{for(let a=0;a<n.length;){let u=n[a++],c=n[a++];l>=u&&s<=c&&(r=!0)}}),r}function w_(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function OE(t,e){return t.length?e.length?t.concat(e):t:e}var Hn=[],C_=200;function IE(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-C_));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Dh(t,t.length-1,1e9,n.setSelAfter(r)))}else return[or.selection([e])]}function b_(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Hy(t,e){if(!t.length)return t;let n=t.length,r=Hn;for(;n;){let i=E_(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[or.selection(r)]:Hn}function E_(t,e,n){let r=OE(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Hn,n);if(!t.changes)return or.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new or(i,V.mapEffects(t.effects,e),s,t.startSelection.map(o),r)}var T_=/^(input\.type|delete)($|\.)/,Yo=class t{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new t(this.done,this.undone):this}addChanges(e,n,r,i,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||T_.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,k_(l.changes,e.changes))||r=="input.type.compose")?s=Dh(s,s.length-1,i.minDepth,new or(e.changes.compose(l.changes),OE(V.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Hn)):s=Dh(s,s.length,i.minDepth,e),new t(s,Hn,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Hn;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&w_(o[o.length-1],e)?this:new t(IE(this.done,e),this.undone,n,r)}addMapping(e){return new t(Hy(this.done,e),Hy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],s=o.selectionsAfter[0]||n.selection;if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Wy.of({side:e,rest:b_(i),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=i.length==1?Hn:i.slice(0,i.length-1);return o.mapped&&(l=Hy(l,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Wy.of({side:e,rest:l,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};Yo.empty=new Yo(Hn,Hn);var ME=[{key:"Mod-z",run:RE,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:jy,preventDefault:!0},{linux:"Ctrl-Shift-z",run:jy,preventDefault:!0},{key:"Mod-u",run:v_,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:S_,preventDefault:!0}];function ol(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function sr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function lr({state:t,dispatch:e},n){let r=ol(t.selection,n);return r.eq(t.selection,!0)?!1:(e(sr(t,r)),!0)}function Bh(t,e){return E.cursor(e?t.to:t.from)}function LE(t,e){return lr(t,n=>n.empty?t.moveByChar(n,e):Bh(n,e))}function Bt(t){return t.textDirectionAt(t.state.selection.main.head)==ue.LTR}var NE=t=>LE(t,!Bt(t)),PE=t=>LE(t,Bt(t));function _E(t,e){return lr(t,n=>n.empty?t.moveByGroup(n,e):Bh(n,e))}var A_=t=>_E(t,!Bt(t)),R_=t=>_E(t,Bt(t));var wH=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function O_(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function zh(t,e,n){let r=xt(t).resolveInner(e.head),i=n?$.closedBy:$.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;O_(t,u,i)?r=u:a=n?u.to:u.from}let o=r.type.prop(i),s,l;return o&&(s=n?ir(t,r.from,1):ir(t,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,E.cursor(l,n?-1:1)}var I_=t=>lr(t,e=>zh(t.state,e,!Bt(t))),M_=t=>lr(t,e=>zh(t.state,e,Bt(t)));function DE(t,e){return lr(t,n=>{if(!n.empty)return Bh(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}var FE=t=>DE(t,!1),BE=t=>DE(t,!0);function zE(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let o of t.state.facet(R.scrollMargins)){let s=o(t);s?.top&&(n=Math.max(s?.top,n)),s?.bottom&&(r=Math.max(s?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function UE(t,e){let n=zE(t),{state:r}=t,i=ol(r.selection,s=>s.empty?t.moveVertically(s,e,n.height):Bh(s,e));if(i.eq(r.selection))return!1;let o;if(n.selfScroll){let s=t.coordsAtPos(r.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,u=l.bottom-n.marginBottom;s&&s.top>a&&s.bottom<u&&(o=R.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-a}))}return t.dispatch(sr(r,i),{effects:o}),!0}var gE=t=>UE(t,!1),Gy=t=>UE(t,!0);function ji(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=E.cursor(r.from+o))}return i}var L_=t=>lr(t,e=>ji(t,e,!0)),N_=t=>lr(t,e=>ji(t,e,!1)),P_=t=>lr(t,e=>ji(t,e,!Bt(t))),__=t=>lr(t,e=>ji(t,e,Bt(t))),D_=t=>lr(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),F_=t=>lr(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function B_(t,e,n){let r=!1,i=ol(t.selection,o=>{let s=ir(t,o.head,-1)||ir(t,o.head,1)||o.head>0&&ir(t,o.head-1,1)||o.head<t.doc.length&&ir(t,o.head+1,-1);if(!s||!s.end)return o;r=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return n?E.range(o.anchor,l):E.cursor(l)});return r?(e(sr(t,i)),!0):!1}var z_=({state:t,dispatch:e})=>B_(t,e,!1);function Wn(t,e){let n=ol(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(sr(t.state,n)),!0)}function VE(t,e){return Wn(t,n=>t.moveByChar(n,e))}var HE=t=>VE(t,!Bt(t)),WE=t=>VE(t,Bt(t));function jE(t,e){return Wn(t,n=>t.moveByGroup(n,e))}var U_=t=>jE(t,!Bt(t)),V_=t=>jE(t,Bt(t));var H_=t=>Wn(t,e=>zh(t.state,e,!Bt(t))),W_=t=>Wn(t,e=>zh(t.state,e,Bt(t)));function GE(t,e){return Wn(t,n=>t.moveVertically(n,e))}var $E=t=>GE(t,!1),KE=t=>GE(t,!0);function qE(t,e){return Wn(t,n=>t.moveVertically(n,e,zE(t).height))}var yE=t=>qE(t,!1),xE=t=>qE(t,!0),j_=t=>Wn(t,e=>ji(t,e,!0)),G_=t=>Wn(t,e=>ji(t,e,!1)),$_=t=>Wn(t,e=>ji(t,e,!Bt(t))),K_=t=>Wn(t,e=>ji(t,e,Bt(t))),q_=t=>Wn(t,e=>E.cursor(t.lineBlockAt(e.head).from)),Y_=t=>Wn(t,e=>E.cursor(t.lineBlockAt(e.head).to)),vE=({state:t,dispatch:e})=>(e(sr(t,{anchor:0})),!0),SE=({state:t,dispatch:e})=>(e(sr(t,{anchor:t.doc.length})),!0),kE=({state:t,dispatch:e})=>(e(sr(t,{anchor:t.selection.main.anchor,head:0})),!0),wE=({state:t,dispatch:e})=>(e(sr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),X_=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Z_=({state:t,dispatch:e})=>{let n=Uh(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},Q_=({state:t,dispatch:e})=>{let n=ol(t.selection,r=>{let i=xt(t),o=i.resolveStack(r.from,1);if(r.empty){let s=i.resolveStack(r.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:l}=s;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&s.next)return E.range(l.to,l.from)}return r});return n.eq(t.selection)?!1:(e(sr(t,n)),!0)};function YE(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let o of n.selection.ranges){let s=n.doc.lineAt(o.head);if(e?s.to<t.state.doc.length:s.from>0)for(let l=o;;){let a=t.moveVertically(l,e);if(a.head<s.from||a.head>s.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==l.head)break;l=a}}}return i.length==r.ranges.length?!1:(t.dispatch(sr(n,E.create(i,i.length-1))),!0)}var J_=t=>YE(t,!1),eD=t=>YE(t,!0),tD=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e(sr(t,r)),!0):!1};function Tu(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let a=e(o);a<s?(n="delete.backward",a=_h(t,a,!1)):a>s&&(n="delete.forward",a=_h(t,a,!0)),s=Math.min(s,a),l=Math.max(l,a)}else s=_h(t,s,!1),l=_h(t,l,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:E.cursor(s,s<o.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?R.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function _h(t,e,n){if(t instanceof R)for(let r of t.state.facet(R.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}var XE=(t,e,n)=>Tu(t,r=>{let i=r.from,{state:o}=t,s=o.doc.lineAt(i),l,a;if(n&&!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,i-s.from))){if(l[l.length-1]=="	")return i-1;let u=ei(l,o.tabSize),c=u%bu(o)||bu(o);for(let f=0;f<c&&l[l.length-1-f]==" ";f++)i--;a=i}else a=Xe(s.text,i-s.from,e,e)+s.from,a==i&&s.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,i-s.from))&&(a=Xe(s.text,a-s.from,!1,!1)+s.from);return a}),$y=t=>XE(t,!1,!0);var ZE=t=>XE(t,!0,!1),QE=(t,e)=>Tu(t,n=>{let r=n.head,{state:i}=t,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let l=null;;){if(r==(e?o.to:o.from)){r==n.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Xe(o.text,r-o.from,e)+o.from,u=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(u);if(l!=null&&c!=l)break;(u!=" "||r!=n.head)&&(l=c),r=a}return r}),JE=t=>QE(t,!1),nD=t=>QE(t,!0);var rD=t=>Tu(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)});var iD=t=>Tu(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),oD=t=>Tu(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)});var sD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Y.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},lD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),s=i==o.from?i-1:Xe(o.text,i-o.from,!1)+o.from,l=i==o.to?i+1:Xe(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:t.doc.slice(i,l).append(t.doc.slice(s,i))},range:E.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Uh(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function eT(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of Uh(t)){if(n?o.to==t.doc.length:o.from==0)continue;let s=t.doc.lineAt(n?o.to+1:o.from-1),l=s.length+1;if(n){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+t.lineBreak});for(let a of o.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:t.lineBreak+s.text});for(let a of o.ranges)i.push(E.range(a.anchor-l,a.head-l))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}var aD=({state:t,dispatch:e})=>eT(t,e,!1),uD=({state:t,dispatch:e})=>eT(t,e,!0);function tT(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Uh(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var cD=({state:t,dispatch:e})=>tT(t,e,!1),fD=({state:t,dispatch:e})=>tT(t,e,!0),hD=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Uh(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=ol(e.selection,i=>{let o;if(t.lineWrapping){let s=t.lineBlockAt(i.head),l=t.coordsAtPos(i.head,i.assoc||1);l&&(o=s.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,o)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function dD(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=xt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop($.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}var CE=nT(!1),pD=nT(!0);function nT(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,l=e.doc.lineAt(o),a=!t&&o==s&&dD(e,o);t&&(o=s=(s<=l.to?l:e.doc.lineAt(s)).to);let u=new Go(e,{simulateBreak:o,simulateDoubleBreak:!!a}),c=Nh(u,o);for(c==null&&(c=ei(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;a?{from:o,to:s}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",rl(e,c)];return a&&f.push(rl(e,u.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:Y.of(f)},range:E.cursor(o+1+f[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Yy(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let l=t.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(e(l,i,r),n=l.number),s=l.to+1}let o=t.changes(i);return{changes:i,range:E.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}var mD=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Go(t,{overrideIndentation:o=>{let s=n[o];return s??-1}}),i=Yy(t,(o,s,l)=>{let a=Nh(r,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let u=/^\s*/.exec(o.text)[0],c=rl(t,a);(u!=c||l.from<o.from+u.length)&&(n[o.from]=a,s.push({from:o.from,to:o.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},rT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Yy(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Ko)})}),{userEvent:"input.indent"})),!0),iT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Yy(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=ei(i,t.tabSize),s=0,l=rl(t,Math.max(0,o-bu(t)));for(;s<i.length&&s<l.length&&i.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+i.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),gD=t=>(t.setTabFocusMode(),!0);var yD=[{key:"Ctrl-b",run:NE,shift:HE,preventDefault:!0},{key:"Ctrl-f",run:PE,shift:WE},{key:"Ctrl-p",run:FE,shift:$E},{key:"Ctrl-n",run:BE,shift:KE},{key:"Ctrl-a",run:D_,shift:q_},{key:"Ctrl-e",run:F_,shift:Y_},{key:"Ctrl-d",run:ZE},{key:"Ctrl-h",run:$y},{key:"Ctrl-k",run:rD},{key:"Ctrl-Alt-h",run:JE},{key:"Ctrl-o",run:sD},{key:"Ctrl-t",run:lD},{key:"Ctrl-v",run:Gy}],xD=[{key:"ArrowLeft",run:NE,shift:HE,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:A_,shift:U_,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:P_,shift:$_,preventDefault:!0},{key:"ArrowRight",run:PE,shift:WE,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:R_,shift:V_,preventDefault:!0},{mac:"Cmd-ArrowRight",run:__,shift:K_,preventDefault:!0},{key:"ArrowUp",run:FE,shift:$E,preventDefault:!0},{mac:"Cmd-ArrowUp",run:vE,shift:kE},{mac:"Ctrl-ArrowUp",run:gE,shift:yE},{key:"ArrowDown",run:BE,shift:KE,preventDefault:!0},{mac:"Cmd-ArrowDown",run:SE,shift:wE},{mac:"Ctrl-ArrowDown",run:Gy,shift:xE},{key:"PageUp",run:gE,shift:yE},{key:"PageDown",run:Gy,shift:xE},{key:"Home",run:N_,shift:G_,preventDefault:!0},{key:"Mod-Home",run:vE,shift:kE},{key:"End",run:L_,shift:j_,preventDefault:!0},{key:"Mod-End",run:SE,shift:wE},{key:"Enter",run:CE,shift:CE},{key:"Mod-a",run:X_},{key:"Backspace",run:$y,shift:$y,preventDefault:!0},{key:"Delete",run:ZE,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:JE,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:nD,preventDefault:!0},{mac:"Mod-Backspace",run:iD,preventDefault:!0},{mac:"Mod-Delete",run:oD,preventDefault:!0}].concat(yD.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),oT=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:I_,shift:H_},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:M_,shift:W_},{key:"Alt-ArrowUp",run:aD},{key:"Shift-Alt-ArrowUp",run:cD},{key:"Alt-ArrowDown",run:uD},{key:"Shift-Alt-ArrowDown",run:fD},{key:"Mod-Alt-ArrowUp",run:J_},{key:"Mod-Alt-ArrowDown",run:eD},{key:"Escape",run:tD},{key:"Mod-Enter",run:pD},{key:"Alt-l",mac:"Ctrl-l",run:Z_},{key:"Mod-i",run:Q_,preventDefault:!0},{key:"Mod-[",run:iT},{key:"Mod-]",run:rT},{key:"Mod-Alt-\\",run:mD},{key:"Shift-Mod-k",run:hD},{key:"Shift-Mod-\\",run:z_},{key:"Mod-/",run:c_},{key:"Alt-A",run:h_},{key:"Ctrl-m",mac:"Shift-Alt-m",run:gD}].concat(xD),sT={key:"Tab",run:rT,shift:iT};var lT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t,$i=class{constructor(e,n,r=0,i=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?l=>o(lT(l)):lT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Tt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=ja(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=wn(e);let i=this.normalize(n);if(i.length)for(let o=0,s=r;;o++){let l=i.charCodeAt(o),a=this.match(l,s,this.bufferPos+this.bufferStart);if(o==i.length-1){if(a)return this.value=a,this;break}s==r&&o<n.length&&n.charCodeAt(o)==l&&s++}}}match(e,n,r){let i=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],l=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[o+1],to:r}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}};typeof Symbol<"u"&&($i.prototype[Symbol.iterator]=function(){return this});var fT={from:-1,to:-1,match:/.*/.exec("")},n1="gm"+(/x/.unicode==null?"":"u"),Wh=class{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=fT,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Gh(e,n,r,i,o);this.re=new RegExp(n,n1+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=$h(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=$h(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},Xy=new WeakMap,jh=class t{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Xy.get(e);if(!i||i.from>=r||i.to<=n){let l=new t(n,e.sliceString(n,r));return Xy.set(e,l),l}if(i.from==n&&i.to==r)return i;let{text:o,from:s}=i;return s>n&&(o=e.sliceString(n,s)+o,s=n),i.to<r&&(o+=e.sliceString(i.to,r)),Xy.set(e,new t(s,o)),new t(n,o.slice(n-s,r-s))}},Gh=class{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=fT,this.matchPos=$h(e,i),this.re=new RegExp(n,n1+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=jh.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=$h(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=jh.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(Wh.prototype[Symbol.iterator]=Gh.prototype[Symbol.iterator]=function(){return this});function vD(t){try{return new RegExp(t,n1),!0}catch{return!1}}function $h(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Zy(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=ie("input",{class:"cm-textfield",name:"line",value:e}),r=ie("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:Au.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},ie("label",t.state.phrase("Go to line"),": ",n)," ",ie("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ie("button",{name:"close",onclick:()=>{t.dispatch({effects:Au.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["\xD7"]));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!o)return;let{state:s}=t,l=s.doc.lineAt(s.selection.main.head),[,a,u,c,f]=o,h=c?+c.slice(1):0,d=u?+u:l.number;if(u&&f){let v=d/100;a&&(v=v*(a=="-"?-1:1)+l.number/s.doc.lines),d=Math.round(s.doc.lines*v)}else u&&a&&(d=d*(a=="-"?-1:1)+l.number);let g=s.doc.line(Math.max(1,Math.min(s.doc.lines,d))),x=E.cursor(g.from+Math.max(0,Math.min(h,g.length)));t.dispatch({effects:[Au.of(!1),R.scrollIntoView(x.from,{y:"center"})],selection:x}),t.focus()}return{dom:r}}var Au=V.define(),aT=re.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Au)&&(t=n.value);return t},provide:t=>zo.from(t,e=>e?Zy:null)}),SD=t=>{let e=Vo(t,Zy);if(!e){let n=[Au.of(!0)];t.state.field(aT,!1)==null&&n.push(V.appendConfig.of([aT,kD])),t.dispatch({effects:n}),e=Vo(t,Zy)}return e&&e.dom.querySelector("input").select(),!0},kD=R.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),wD={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},hT=N.define({combine(t){return Dt(t,wD,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function dT(t){let e=[AD,TD];return t&&e.push(hT.of(t)),e}var CD=O.mark({class:"cm-selectionMatch"}),bD=O.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function uT(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=ae.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=ae.Word)}function ED(t,e,n,r){return t(e.sliceDoc(n,n+1))==ae.Word&&t(e.sliceDoc(r-1,r))==ae.Word}var TD=X.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(hT),{state:n}=t,r=n.selection;if(r.ranges.length>1)return O.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return O.none;let a=n.wordAt(i.head);if(!a)return O.none;s=n.charCategorizer(i.head),o=n.sliceDoc(a.from,a.to)}else{let a=i.to-i.from;if(a<e.minSelectionLength||a>200)return O.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),s=n.charCategorizer(i.head),!(uT(s,n,i.from,i.to)&&ED(s,n,i.from,i.to)))return O.none}else if(o=n.sliceDoc(i.from,i.to),!o)return O.none}let l=[];for(let a of t.visibleRanges){let u=new $i(n.doc,o,a.from,a.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!s||uT(s,n,c,f))&&(i.empty&&c<=i.from&&f>=i.to?l.push(bD.range(c,f)):(c>=i.to||f<=i.from)&&l.push(CD.range(c,f)),l.length>e.maxMatches))return O.none}}return O.set(l)}},{decorations:t=>t.decorations}),AD=R.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),RD=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function OD(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,l=new $i(t.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new $i(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(a=>a.from==l.value.from))continue;if(o){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}var ID=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return RD({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=OD(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:R.scrollIntoView(i.to)})),!0):!1},al=N.define({combine(t){return Dt(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new t1(e),scrollToMatch:e=>R.scrollIntoView(e)})}});var Kh=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||vD(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Jy(this):new Qy(this)}getCursor(e,n=0,r){let i=e.doc?e:ee.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?ll(this,i,n,r):sl(this,i,n,r)}},qh=class{constructor(e){this.spec=e}};function sl(t,e,n,r){return new $i(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?MD(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function MD(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(Yh(i,n-o))!=ae.Word||e(Xh(i,n-o))!=ae.Word)&&(e(Xh(i,r-o))!=ae.Word||e(Yh(i,r-o))!=ae.Word))}var Qy=class extends qh{constructor(e){super(e)}nextMatch(e,n,r){let i=sl(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,n+this.spec.unquoted.length);i=sl(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),s=sl(this.spec,e,o,i),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=sl(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=sl(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}};function ll(t,e,n,r){return new Wh(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?LD(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Yh(t,e){return t.slice(Xe(t,e,!1),e)}function Xh(t,e){return t.slice(e,Xe(t,e))}function LD(t){return(e,n,r)=>!r[0].length||(t(Yh(r.input,r.index))!=ae.Word||t(Xh(r.input,r.index))!=ae.Word)&&(t(Xh(r.input,r.index+r[0].length))!=ae.Word||t(Yh(r.input,r.index+r[0].length))!=ae.Word)}var Jy=class extends qh{nextMatch(e,n,r){let i=ll(this.spec,e,r,e.doc.length).next();return i.done&&(i=ll(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),s=ll(this.spec,e,o,r),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==n||l.from>o+10))return l;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let o=+r.slice(0,i);if(o>0&&o<e.match.length)return e.match[o]+r.slice(i)}return n})}matchAll(e,n){let r=ll(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=ll(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}},Ou=V.define(),r1=V.define(),Gi=re.define({create(t){return new Ru(e1(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ou)?t=new Ru(n.value.create(),t.panel):n.is(r1)&&(t=new Ru(t.query,n.value?i1:null));return t},provide:t=>zo.from(t,e=>e.panel)});var Ru=class{constructor(e,n){this.query=e,this.panel=n}},ND=O.mark({class:"cm-searchMatch"}),PD=O.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_D=X.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Gi))}update(t){let e=t.state.field(Gi);(e!=t.startState.field(Gi)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return O.none;let{view:n}=this,r=new Fe;for(let i=0,o=n.visibleRanges,s=o.length;i<s;i++){let{from:l,to:a}=o[i];for(;i<s-1&&a>o[i+1].from-2*250;)a=o[++i].to;t.highlight(n.state,l,a,(u,c)=>{let f=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);r.add(u,c,f?PD:ND)})}return r.finish()}},{decorations:t=>t.decorations});function Iu(t){return e=>{let n=e.state.field(Gi,!1);return n&&n.query.spec.valid?t(e,n):gT(e)}}var Zh=Iu((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),o=t.state.facet(al);return t.dispatch({selection:i,effects:[o1(t,r),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),mT(t),!0}),Qh=Iu((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let o=E.single(i.from,i.to),s=t.state.facet(al);return t.dispatch({selection:o,effects:[o1(t,i),s.scrollToMatch(o.main,t)],userEvent:"select.search"}),mT(t),!0}),DD=Iu((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),FD=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let l=new $i(t.doc,t.sliceDoc(r,i));!l.next().done;){if(o.length>1e3)return!1;l.value.from==r&&(s=o.length),o.push(E.range(l.value.from,l.value.to))}return e(t.update({selection:E.create(o,s),userEvent:"select.search.matches"})),!0},cT=Iu((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let s=o,l=[],a,u,c=[];s.from==r&&s.to==i&&(u=n.toText(e.getReplacement(s)),l.push({from:s.from,to:s.to,insert:u}),s=e.nextMatch(n,s.from,s.to),c.push(R.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let f=t.state.changes(l);return s&&(a=E.single(s.from,s.to).map(f),c.push(o1(t,s)),c.push(n.facet(al).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:c,userEvent:"input.replace"}),!0}),BD=Iu((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:R.announce.of(r),userEvent:"input.replace.all"}),!0});function i1(t){return t.state.facet(al).createPanel(t)}function e1(t,e){var n,r,i,o,s;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=t.facet(al);return new Kh({search:((n=e?.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:u.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:u.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:u.wholeWord})}function pT(t){let e=Vo(t,i1);return e&&e.dom.querySelector("[main-field]")}function mT(t){let e=pT(t);e&&e==t.root.activeElement&&e.select()}var gT=t=>{let e=t.state.field(Gi,!1);if(e&&e.panel){let n=pT(t);if(n&&n!=t.root.activeElement){let r=e1(t.state,e.query.spec);r.valid&&t.dispatch({effects:Ou.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[r1.of(!0),e?Ou.of(e1(t.state,e.query.spec)):V.appendConfig.of(UD)]});return!0},yT=t=>{let e=t.state.field(Gi,!1);if(!e||!e.panel)return!1;let n=Vo(t,i1);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:r1.of(!1)}),!0},xT=[{key:"Mod-f",run:gT,scope:"editor search-panel"},{key:"F3",run:Zh,shift:Qh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Zh,shift:Qh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:yT,scope:"editor search-panel"},{key:"Mod-Shift-l",run:FD},{key:"Mod-Alt-g",run:SD},{key:"Mod-d",run:ID,preventDefault:!0}],t1=class{constructor(e){this.view=e;let n=this.query=e.state.field(Gi).query.spec;this.commit=this.commit.bind(this),this.searchField=ie("input",{value:n.search,placeholder:Tn(e,"Find"),"aria-label":Tn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ie("input",{value:n.replace,placeholder:Tn(e,"Replace"),"aria-label":Tn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ie("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=ie("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=ie("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,s){return ie("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=ie("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Zh(e),[Tn(e,"next")]),r("prev",()=>Qh(e),[Tn(e,"previous")]),r("select",()=>DD(e),[Tn(e,"all")]),ie("label",null,[this.caseField,Tn(e,"match case")]),ie("label",null,[this.reField,Tn(e,"regexp")]),ie("label",null,[this.wordField,Tn(e,"by word")]),...e.state.readOnly?[]:[ie("br"),this.replaceField,r("replace",()=>cT(e),[Tn(e,"replace")]),r("replaceAll",()=>BD(e),[Tn(e,"replace all")])],ie("button",{name:"close",onclick:()=>yT(e),"aria-label":Tn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Kh({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ou.of(e)}))}keydown(e){xb(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Qh:Zh)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),cT(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ou)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(al).top}};function Tn(t,e){return t.state.phrase(e)}var Vh=30,Hh=/[\s\.,:;?!]/;function o1(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-Vh),s=Math.min(i,n+Vh),l=t.state.sliceDoc(o,s);if(o!=r.from){for(let a=0;a<Vh;a++)if(!Hh.test(l[a+1])&&Hh.test(l[a])){l=l.slice(a);break}}if(s!=i){for(let a=l.length-1;a>l.length-Vh;a--)if(!Hh.test(l[a-1])&&Hh.test(l[a])){l=l.slice(0,a);break}}return R.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`)}var zD=R.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),UD=[Gi,Cn.low(_D),zD];var ed=class{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=xt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(TT(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}};function vT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function VD(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=vT(e)+vT(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function HD(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:VD(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}var td=class{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}};function Zo(t){return t.selection.main.from}function TT(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}var AT=gt.define();function WD(t,e,n,r){let{main:i}=t.selection,o=n-i.from,s=r-i.from;return{...t.changeByRange(l=>{if(l!=i&&n!=r&&t.sliceDoc(l.from+o,l.from+s)!=t.sliceDoc(n,r))return{range:l};let a=t.toText(e);return{changes:{from:l.from+o,to:r==i.from?l.to:l.from+s,insert:a},range:E.cursor(l.from+o+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}var ST=new WeakMap;function jD(t){if(!Array.isArray(t))return t;let e=ST.get(t);return e||ST.set(t,e=HD(t)),e}var nd=V.define(),Mu=V.define(),u1=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Tt(e,n),i=wn(r);this.chars.push(r);let o=e.slice(n,n+i),s=o.toUpperCase();this.folded.push(Tt(s==o?o.toLowerCase():s,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:s}=this;if(n.length==1){let m=Tt(e,0),y=wn(m),S=y==e.length?0:-100;if(m!=n[0])if(m==r[0])S+=-200;else return null;return this.ret(S,[0,y])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,u=0;if(l<0){for(let m=0,y=Math.min(e.length,200);m<y&&u<a;){let S=Tt(e,m);(S==n[u]||S==r[u])&&(i[u++]=m),m+=wn(S)}if(u<a)return null}let c=0,f=0,h=!1,d=0,g=-1,x=-1,v=/[a-z]/.test(e),p=!0;for(let m=0,y=Math.min(e.length,200),S=0;m<y&&f<a;){let k=Tt(e,m);l<0&&(c<a&&k==n[c]&&(o[c++]=m),d<a&&(k==n[d]||k==r[d]?(d==0&&(g=m),x=m+1,d++):d=0));let w,C=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(w=ja(k))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!m||C==1&&v||S==0&&C!=0)&&(n[f]==k||r[f]==k&&(h=!0)?s[f++]=m:s.length&&(p=!1)),S=C,m+=wn(k)}return f==a&&s[0]==0&&p?this.result(-100+(h?-200:0),s,e):d==a&&g==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-900-e.length,[g,x]):f==a?this.result(-100+(h?-200:0)+-700+(p?0:-1100),s,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],o=0;for(let s of n){let l=s+(this.astral?wn(Tt(r,s)):1);o&&i[o-1]==s?i[o-1]=l:(i[o++]=s,i[o++]=l)}return this.ret(e-r.length,i)}},c1=class{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}},vt=N.define({combine(t){return Dt(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:GD,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>kT(e(r),n(r)),optionClass:(e,n)=>r=>kT(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function kT(t,e){return t?e?t+" "+e:t:e}function GD(t,e,n,r,i,o){let s=t.textDirection==ue.RTL,l=s,a=!1,u="top",c,f,h=e.left-i.left,d=i.right-e.right,g=r.right-r.left,x=r.bottom-r.top;if(l&&h<Math.min(g,d)?l=!1:!l&&d<Math.min(g,h)&&(l=!0),g<=(l?h:d))c=Math.max(i.top,Math.min(n.top,i.bottom-x))-e.top,f=Math.min(400,l?h:d);else{a=!0,f=Math.min(400,(s?e.right:i.right-e.left)-30);let m=i.bottom-e.bottom;m>=x||m>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let v=(e.bottom-e.top)/o.offsetHeight,p=(e.right-e.left)/o.offsetWidth;return{style:`${u}: ${c/v}px; max-width: ${f/p}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":l?"left":"right")}}function $D(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,o){let s=document.createElement("span");s.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let u=0;u<o.length;){let c=o[u++],f=o[u++];c>a&&s.appendChild(document.createTextNode(l.slice(a,c)));let h=s.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(c,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&s.appendChild(document.createTextNode(l.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function s1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}var f1=class{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:o,selected:s}=i.open,l=e.state.facet(vt);this.optionContent=$D(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=s1(o.length,s,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:u}=e.state.field(n).open;for(let c=a.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(vt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Mu.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:s,disabled:l}=r.open;(!i.open||i.open.options!=o)&&(this.range=s1(o.length,s,e.state.facet(vt).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),l!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=s1(n.options.length,n.selected,this.view.state.facet(vt).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:o}=i;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(i);if(!s)return;"then"in s?s.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,i)}).catch(l=>Rt(this.view.state,l,"completion info")):(this.addInfoPane(s,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&qD(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return i.top>Math.min(o.bottom,n.bottom)-10||i.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(vt).positionInfo(this.view,n,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){let i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",s=>{s.target==i&&s.preventDefault()});let o=null;for(let s=r.from;s<r.to;s++){let{completion:l,match:a}=e[s],{section:u}=l;if(u){let h=typeof u=="string"?u:u.name;if(h!=o&&(s>r.from||r.from==0))if(o=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}let c=i.appendChild(document.createElement("li"));c.id=n+"-"+s,c.setAttribute("role","option");let f=this.optionClass(l);f&&(c.className=f);for(let h of this.optionContent){let d=h(l,this.view.state,this.view,a);d&&c.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function KD(t,e){return n=>new f1(n,t,e)}function qD(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function wT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function YD(t,e){let n=[],r=null,i=null,o=c=>{n.push(c);let{section:f}=c.completion;if(f){r||(r=[]);let h=typeof f=="string"?f:f.name;r.some(d=>d.name==h)||r.push(typeof f=="string"?{name:h}:f)}},s=e.facet(vt);for(let c of t)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)o(new td(h,c.source,f?f(h):[],1e9-n.length));else{let h=e.sliceDoc(c.from,c.to),d,g=s.filterStrict?new c1(h):new u1(h);for(let x of c.result.options)if(d=g.match(x.label)){let v=x.displayLabel?f?f(x,d.matched):[]:d.matched,p=d.score+(x.boost||0);if(o(new td(x,c.source,v,p)),typeof x.section=="object"&&x.section.rank==="dynamic"){let{name:m}=x.section;i||(i=Object.create(null)),i[m]=Math.max(p,i[m]||-1e9)}}}}if(r){let c=Object.create(null),f=0,h=(d,g)=>(d.rank==="dynamic"&&g.rank==="dynamic"?i[g.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof g.rank=="number"?g.rank:1e9)||(d.name<g.name?-1:1);for(let d of r.sort(h))f-=1e5,c[d.name]=f;for(let d of n){let{section:g}=d.completion;g&&(d.score+=c[typeof g=="string"?g:g.name])}}let l=[],a=null,u=s.compareCompletions;for(let c of n.sort((f,h)=>h.score-f.score||u(f.completion,h.completion))){let f=c.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(c):wT(c.completion)>wT(a)&&(l[l.length-1]=c),a=c.completion}return l}var h1=class t{constructor(e,n,r,i,o,s){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=s}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new t(this.options,CT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,o,s){if(i&&!s&&e.some(u=>u.isPending))return i.setDisabled();let l=YD(e,n);if(!l.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let a=n.facet(vt).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==u){a=c;break}}return new t(l,CT(r,a),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:t4,above:o.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new t(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new t(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},d1=class t{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new t(JD,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(vt),o=(r.override||n.languageDataAt("autocomplete",Zo(n)).map(jD)).map(a=>(this.active.find(c=>c.source==a)||new ri(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((a,u)=>a==this.active[u])&&(o=this.active);let s=this.open,l=e.effects.some(a=>a.is(m1));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!XD(o,this.active)||l?s=h1.build(o,n,this.id,s,r,l):s&&s.disabled&&!o.some(a=>a.isPending)&&(s=null),!s&&o.every(a=>!a.isPending)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new ri(a.source,0):a));for(let a of e.effects)a.is(OT)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new t(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ZD:QD}};function XD(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}var ZD={"aria-autocomplete":"list"},QD={};function CT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}var JD=[];function RT(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(AT);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}var ri=class t{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=RT(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new t(i.source,0)),r&4&&i.state==0&&(i=new t(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(nd))i=new t(i.source,1,o.value);else if(o.is(Mu))i=new t(i.source,0);else if(o.is(m1))for(let s of o.value)s.source==i.source&&(i=s);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Zo(e.state))}},rd=class t extends ri{constructor(e,n,r,i,o,s){super(e,3,n),this.limit=r,this.result=i,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Zo(e.state);if(l>s||!i||n&2&&(Zo(e.startState)==this.from||l<this.limit))return new ri(this.source,n&4?1:0);let a=e.changes.mapPos(this.limit);return e4(i.validFor,e.state,o,s)?new t(this.source,this.explicit,a,i,o,s):i.update&&(i=i.update(i,o,s,new ed(e.state,l,!1)))?new t(this.source,this.explicit,a,i,i.from,(r=i.to)!==null&&r!==void 0?r:Zo(e.state)):new ri(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new t(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ri(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}};function e4(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):TT(t,!0).test(i)}var m1=V.define({map(t,e){return t.map(n=>n.map(e))}}),OT=V.define(),ln=re.define({create(){return d1.start()},update(t,e){return t.update(e)},provide:t=>[du.from(t,e=>e.tooltip),R.contentAttributes.from(t,e=>e.attrs)]});function g1(t,e){let n=e.completion.apply||e.completion.label,r=t.state.field(ln).active.find(i=>i.source==e.source);return r instanceof rd?(typeof n=="string"?t.dispatch({...WD(t.state,n,r.from,r.to),annotations:AT.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}var t4=KD(ln,g1);function Jh(t,e="option"){return n=>{let r=n.state.field(ln,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(vt).interactionDelay)return!1;let i=1,o;e=="page"&&(o=gy(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),n.dispatch({effects:OT.of(l)}),!0}}var n4=t=>{let e=t.state.field(ln,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(vt).interactionDelay?!1:g1(t,e.open.options[e.open.selected])},l1=t=>t.state.field(ln,!1)?(t.dispatch({effects:nd.of(!0)}),!0):!1,r4=t=>{let e=t.state.field(ln,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Mu.of(null)}),!0)},p1=class{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}},i4=50,o4=1e3,s4=X.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(ln).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(ln),n=t.state.facet(vt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(ln)==e)return;let r=t.transactions.some(o=>{let s=RT(o,n);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(r||s.context.abortOnDocChange&&t.docChanged||s.updates.length+t.transactions.length>i4&&Date.now()-s.time>o4){for(let l of s.context.abortListeners)try{l()}catch(a){Rt(this.view.state,a)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(s=>s.is(nd)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(ln);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vt).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=Zo(e),r=new ed(e,n,t.explicit,this.view),i=new p1(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Mu.of(null)}),Rt(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(vt),r=this.view.state.field(ln);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let l=Zo(o.updates.length?o.updates[0].startState:this.view.state),a=Math.min(l,o.done.from+(o.active.explicit?0:1)),u=new rd(o.active.source,o.active.explicit,a,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:l);for(let c of o.updates)u=u.update(c,n);if(u.hasResult()){e.push(u);continue}}let s=r.active.find(l=>l.source==o.active.source);if(s&&s.isPending)if(o.done==null){let l=new ri(o.active.source,0);for(let a of o.updates)l=l.update(a,n);l.isPending||e.push(l)}else this.startQuery(s)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:m1.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(ln,!1);if(e&&e.tooltip&&this.view.state.facet(vt).closeOnBlur){let n=e.open&&gy(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Mu.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:nd.of(!1)}),20),this.composing=0}}}),l4=typeof navigator=="object"&&/Win/.test(navigator.platform),a4=Cn.highest(R.domEventHandlers({keydown(t,e){let n=e.state.field(ln,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(l4&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(s=>s.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&g1(e,r),!1}})),u4=R.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var Lu={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Xo=V.define({map(t,e){let n=e.mapPos(t,-1,Et.TrackAfter);return n??void 0}}),y1=new class extends tr{};y1.startSide=1;y1.endSide=-1;var IT=re.define({create(){return te.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Xo)&&(t=t.update({add:[y1.range(n.value,n.value+1)]}));return t}});function MT(){return[f4,IT]}var a1="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function LT(t){for(let e=0;e<a1.length;e+=2)if(a1.charCodeAt(e)==t)return a1.charAt(e+1);return ja(t<128?t:t+1)}function NT(t,e){return t.languageDataAt("closeBrackets",e)[0]||Lu}var c4=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),f4=R.inputHandler.of((t,e,n,r)=>{if((c4?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&wn(Tt(r,0))==1||e!=i.from||n!=i.to)return!1;let o=d4(t.state,r);return o?(t.dispatch(o),!0):!1}),h4=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=NT(t,t.selection.main.head).brackets||Lu.brackets,i=null,o=t.changeByRange(s=>{if(s.empty){let l=p4(t.doc,s.head);for(let a of r)if(a==l&&id(t.doc,s.head)==LT(Tt(a,0)))return{changes:{from:s.head-a.length,to:s.head+a.length},range:E.cursor(s.head-a.length)}}return{range:i=s}});return i||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},PT=[{key:"Backspace",run:h4}];function d4(t,e){let n=NT(t,t.selection.main.head),r=n.brackets||Lu.brackets;for(let i of r){let o=LT(Tt(i,0));if(e==i)return o==i?y4(t,i,r.indexOf(i+i+i)>-1,n):m4(t,i,o,n.before||Lu.before);if(e==o&&_T(t,t.selection.main.from))return g4(t,i,o)}return null}function _T(t,e){let n=!1;return t.field(IT).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function id(t,e){let n=t.sliceString(e,e+2);return n.slice(0,wn(Tt(n,0)))}function p4(t,e){let n=t.sliceString(e-2,e);return wn(Tt(n,0))==n.length?n:n.slice(1)}function m4(t,e,n,r){let i=null,o=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:n,from:s.to}],effects:Xo.of(s.to+e.length),range:E.range(s.anchor+e.length,s.head+e.length)};let l=id(t.doc,s.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+n,from:s.head},effects:Xo.of(s.head+e.length),range:E.cursor(s.head+e.length)}:{range:i=s}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function g4(t,e,n){let r=null,i=t.changeByRange(o=>o.empty&&id(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:E.cursor(o.head+n.length)}:r={range:o});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function y4(t,e,n,r){let i=r.stringPrefixes||Lu.stringPrefixes,o=null,s=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Xo.of(l.to+e.length),range:E.range(l.anchor+e.length,l.head+e.length)};let a=l.head,u=id(t.doc,a),c;if(u==e){if(bT(t,a))return{changes:{insert:e+e,from:a},effects:Xo.of(a+e.length),range:E.cursor(a+e.length)};if(_T(t,a)){let h=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:E.cursor(a+h.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(c=ET(t,a-2*e.length,i))>-1&&bT(t,c))return{changes:{insert:e+e+e+e,from:a},effects:Xo.of(a+e.length),range:E.cursor(a+e.length)};if(t.charCategorizer(a)(u)!=ae.Word&&ET(t,a,i)>-1&&!x4(t,a,e,i))return{changes:{insert:e+e,from:a},effects:Xo.of(a+e.length),range:E.cursor(a+e.length)}}return{range:o=l}});return o?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function bT(t,e){let n=xt(t).resolveInner(e+1);return n.parent&&n.from==e}function x4(t,e,n,r){let i=xt(t).resolveInner(e,-1),o=r.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=l.indexOf(n);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>n.length+a;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function ET(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=ae.Word)return e;for(let i of n){let o=e-i.length;if(t.sliceDoc(o,e)==i&&r(t.sliceDoc(o-1,o))!=ae.Word)return o}return-1}function DT(t={}){return[a4,ln,vt.of(t),s4,v4,u4]}var x1=[{key:"Ctrl-Space",run:l1},{mac:"Alt-`",run:l1},{mac:"Alt-i",run:l1},{key:"Escape",run:r4},{key:"ArrowDown",run:Jh(!0)},{key:"ArrowUp",run:Jh(!1)},{key:"PageDown",run:Jh(!0,"page")},{key:"PageUp",run:Jh(!1,"page")},{key:"Enter",run:n4}],v4=Cn.highest(Uo.computeN([vt],t=>t.facet(vt).defaultKeymap?[x1]:[]));var sd=class{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}},Qo=class t{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(Nu).markerFilter;i&&(e=i(e,r));let o=e.slice().sort((d,g)=>d.from-g.from||d.to-g.to),s=new Fe,l=[],a=0,u=r.doc.iter(),c=0,f=r.doc.length;for(let d=0;;){let g=d==o.length?null:o[d];if(!g&&!l.length)break;let x,v;if(l.length)x=a,v=l.reduce((y,S)=>Math.min(y,S.to),g&&g.from>x?g.from:1e8);else{if(x=g.from,x>f)break;v=g.to,l.push(g),d++}for(;d<o.length;){let y=o[d];if(y.from==x&&(y.to>y.from||y.to==x))l.push(y),d++,v=Math.min(y.to,v);else{v=Math.min(y.from,v);break}}v=Math.min(v,f);let p=!1;if(l.some(y=>y.from==x&&(y.to==v||v==f))&&(p=x==v,!p&&v-x<10)){let y=x-(c+u.value.length);y>0&&(u.next(y),c=x);for(let S=x;;){if(S>=v){p=!0;break}if(!u.lineBreak&&c+u.value.length>S)break;S=c+u.value.length,c+=u.value.length,u.next()}}let m=I4(l);if(p)s.add(x,x,O.widget({widget:new v1(m),diagnostics:l.slice()}));else{let y=l.reduce((S,k)=>k.markClass?S+" "+k.markClass:S,"");s.add(x,v,O.mark({class:"cm-lintRange cm-lintRange-"+m+y,diagnostics:l.slice(),inclusiveEnd:l.some(S=>S.to>v)}))}if(a=v,a==f)break;for(let y=0;y<l.length;y++)l[y].to<=a&&l.splice(y--,1)}let h=s.finish();return new t(h,n,ul(h))}};function ul(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!r)r=new sd(i,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new sd(r.from,o,r.diagnostic)}}),r}function S4(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(Nu).hideOn(t,n,r);if(i!=null)return i;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(s=>s.is(zT))||t.changes.touchesRange(o.from,Math.max(o.to,r)))}function k4(t,e){return t.field(An,!1)?e:e.concat(V.appendConfig.of(M4))}var zT=V.define(),S1=V.define(),UT=V.define(),An=re.define({create(){return new Qo(O.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);r=ul(n,t.selected.diagnostic,o)||ul(n,null,o)}!n.size&&i&&e.state.facet(Nu).autoPanel&&(i=null),t=new Qo(n,i,r)}for(let n of e.effects)if(n.is(zT)){let r=e.state.facet(Nu).autoPanel?n.value.length?Pu.open:null:t.panel;t=Qo.init(n.value,r,e.state)}else n.is(S1)?t=new Qo(t.diagnostics,n.value?Pu.open:null,t.selected):n.is(UT)&&(t=new Qo(t.diagnostics,t.panel,n.value));return t},provide:t=>[zo.from(t,e=>e.panel),R.decorations.from(t,e=>e.diagnostics)]});var w4=O.mark({class:"cm-lintRange cm-lintRange-active"});function C4(t,e,n){let{diagnostics:r}=t.state.field(An),i,o=-1,s=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(a,u,{spec:c})=>{if(e>=a&&e<=u&&(a==u||(e>a||n>0)&&(e<u||n<0)))return i=c.diagnostics,o=a,s=u,!1});let l=t.state.facet(Nu).tooltipFilter;return i&&l&&(i=l(i,t.state)),i?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create(){return{dom:b4(t,i)}}}:null}function b4(t,e){return ie("ul",{class:"cm-tooltip-lint"},e.map(n=>WT(t,n,!1)))}var E4=t=>{let e=t.state.field(An,!1);(!e||!e.panel)&&t.dispatch({effects:k4(t.state,[S1.of(!0)])});let n=Vo(t,Pu.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},FT=t=>{let e=t.state.field(An,!1);return!e||!e.panel?!1:(t.dispatch({effects:S1.of(!1)}),!0)},T4=t=>{let e=t.state.field(An,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)};var VT=[{key:"Mod-Shift-m",run:E4,preventDefault:!0},{key:"F8",run:T4}];var Nu=N.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Dt(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:BT,tooltipFilter:BT,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,o)=>e(r,i,o)||n(r,i,o):e:n,autoPanel:(e,n)=>e||n})}}});function BT(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function HT(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function WT(t,e,n){var r;let i=n?HT(e.actions):[];return ie("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ie("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let l=!1,a=d=>{if(d.preventDefault(),l)return;l=!0;let g=ul(t.state.field(An).diagnostics,e);g&&o.apply(t,g.from,g.to)},{name:u}=o,c=i[s]?u.indexOf(i[s]):-1,f=c<0?u:[u.slice(0,c),ie("u",u.slice(c,c+1)),u.slice(c+1)],h=o.markClass?" "+o.markClass:"";return ie("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[s]})"`}.`},f)}),e.source&&ie("div",{class:"cm-diagnosticSource"},e.source))}var v1=class extends He{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ie("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}},ld=class{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=WT(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},Pu=class t{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)FT(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=HT(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==i.keyCode){let a=ul(this.view.state.field(An).diagnostics,o);a&&o.actions[l].apply(e,a.from,a.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=ie("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=ie("div",{class:"cm-panel-lint"},this.list,ie("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>FT(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(An).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(An),r=0,i=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:u})=>{for(let c of u.diagnostics){if(s.has(c))continue;s.add(c);let f=-1,h;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==c){f=d;break}f<0?(h=new ld(this.view,c),this.items.splice(r,0,h),i=!0):(h=this.items[f],f>r&&(this.items.splice(r,f-r),i=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new ld(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let u=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/u:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(An),r=ul(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:UT.of(r)})}static open(e){return new t(e)}};function A4(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function od(t){return A4(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var R4=R.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:od("#d11")},".cm-lintRange-warning":{backgroundImage:od("orange")},".cm-lintRange-info":{backgroundImage:od("#999")},".cm-lintRange-hint":{backgroundImage:od("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function O4(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function I4(t){let e="hint",n=1;for(let r of t){let i=O4(r.severity);i>n&&(n=i,e=r.severity)}return e}var M4=[An,R.decorations.compute([An],t=>{let{selected:e,panel:n}=t.field(An);return!e||!n||e.from==e.to?O.none:O.set([w4.range(e.from,e.to)])}),Mb(C4,{hideOn:S4}),R4];var k1=function(e){e===void 0&&(e={});var{crosshairCursor:n=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(PT)),e.defaultKeymap!==!1&&(r=r.concat(oT)),e.searchKeymap!==!1&&(r=r.concat(xT)),e.historyKeymap!==!1&&(r=r.concat(ME)),e.foldKeymap!==!1&&(r=r.concat(sE)),e.completionKeymap!==!1&&(r=r.concat(x1)),e.lintKeymap!==!1&&(r=r.concat(VT));var i=[];return e.lineNumbers!==!1&&i.push(Pb()),e.highlightActiveLineGutter!==!1&&i.push(_b()),e.highlightSpecialChars!==!1&&i.push(Tb()),e.history!==!1&&i.push(AE()),e.foldGutter!==!1&&i.push(uE()),e.drawSelection!==!1&&i.push(wb()),e.dropCursor!==!1&&i.push(Eb()),e.allowMultipleSelections!==!1&&i.push(ee.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(tE()),e.syntaxHighlighting!==!1&&i.push(Ph(fE,{fallback:!0})),e.bracketMatching!==!1&&i.push(mE()),e.closeBrackets!==!1&&i.push(MT()),e.autocompletion!==!1&&i.push(DT()),e.rectangularSelection!==!1&&i.push(Ob()),n!==!1&&i.push(Ib()),e.highlightActiveLine!==!1&&i.push(Ab()),e.highlightSelectionMatches!==!1&&i.push(dT()),e.tabSize&&typeof e.tabSize=="number"&&i.push(Ko.of(" ".repeat(e.tabSize))),i.concat([Uo.of(r.flat())]).filter(Boolean)};var L4="#e5c07b",jT="#e06c75",N4="#56b6c2",P4="#ffffff",ad="#abb2bf",C1="#7d8799",_4="#61afef",D4="#98c379",GT="#d19a66",F4="#c678dd",B4="#21252b",$T="#2c313a",KT="#282c34",w1="#353a42",z4="#3E4451",qT="#528bff";var U4=R.theme({"&":{color:ad,backgroundColor:KT},".cm-content":{caretColor:qT},".cm-cursor, .cm-dropCursor":{borderLeftColor:qT},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:z4},".cm-panels":{backgroundColor:B4,color:ad},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:KT,color:C1,border:"none"},".cm-activeLineGutter":{backgroundColor:$T},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:w1},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:w1,borderBottomColor:w1},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:$T,color:ad}}},{dark:!0}),V4=nl.define([{tag:b.keyword,color:F4},{tag:[b.name,b.deleted,b.character,b.propertyName,b.macroName],color:jT},{tag:[b.function(b.variableName),b.labelName],color:_4},{tag:[b.color,b.constant(b.name),b.standard(b.name)],color:GT},{tag:[b.definition(b.name),b.separator],color:ad},{tag:[b.typeName,b.className,b.number,b.changed,b.annotation,b.modifier,b.self,b.namespace],color:L4},{tag:[b.operator,b.operatorKeyword,b.url,b.escape,b.regexp,b.link,b.special(b.string)],color:N4},{tag:[b.meta,b.comment],color:C1},{tag:b.strong,fontWeight:"bold"},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.link,color:C1,textDecoration:"underline"},{tag:b.heading,fontWeight:"bold",color:jT},{tag:[b.atom,b.bool,b.special(b.variableName)],color:GT},{tag:[b.processingInstruction,b.string,b.inserted],color:D4},{tag:b.invalid,color:P4}]),YT=[U4,Ph(V4)];var XT=R.theme({"&":{backgroundColor:"#fff"}},{dark:!1});var ZT=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:r=!0,readOnly:i=!1,theme:o="light",placeholder:s="",basicSetup:l=!0}=e,a=[];switch(n&&a.unshift(Uo.of([sT])),l&&(typeof l=="boolean"?a.unshift(k1()):a.unshift(k1(l))),s&&a.unshift(Rb(s)),o){case"light":a.push(XT);break;case"dark":a.push(YT);break;case"none":break;default:a.push(o);break}return r===!1&&a.push(R.editable.of(!1)),i&&a.push(ee.readOnly.of(!0)),[...a]};var QT=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});var ud=class{constructor(e,n){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=n,this.timeoutMS=n,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(n=>{try{n()}catch(r){console.error("TimeoutLatch callback error:",r)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}},cd=class{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}},b1=null,JT=()=>typeof window>"u"?new cd:(b1||(b1=new cd),b1);var eA=gt.define(),H4=200,W4=[];function tA(t){var{value:e,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:l=W4,autoFocus:a,theme:u="light",height:c=null,minHeight:f=null,maxHeight:h=null,width:d=null,minWidth:g=null,maxWidth:x=null,placeholder:v="",editable:p=!0,readOnly:m=!1,indentWithTab:y=!0,basicSetup:S=!0,root:k,initialState:w}=t,[C,T]=(0,an.useState)(),[I,L]=(0,an.useState)(),[U,B]=(0,an.useState)(),j=(0,an.useState)(()=>({current:null}))[0],G=(0,an.useState)(()=>({current:null}))[0],Z=R.theme({"&":{height:c,minHeight:f,maxHeight:h,width:d,minWidth:g,maxWidth:x},"& .cm-scroller":{height:"100% !important"}}),le=R.updateListener.of(ne=>{if(ne.docChanged&&typeof r=="function"&&!ne.transactions.some(it=>it.annotation(eA))){j.current?j.current.reset():(j.current=new ud(()=>{if(G.current){var it=G.current;G.current=null,it()}j.current=null},H4),JT().add(j.current));var de=ne.state.doc,qe=de.toString();r(qe,ne)}i&&i(QT(ne))}),Te=ZT({theme:u,editable:p,readOnly:m,placeholder:v,indentWithTab:y,basicSetup:S}),Ue=[le,Z,...Te];return s&&typeof s=="function"&&Ue.push(R.updateListener.of(s)),Ue=Ue.concat(l),(0,an.useLayoutEffect)(()=>{if(C&&!U){var ne={doc:e,selection:n,extensions:Ue},de=w?ee.fromJSON(w.json,ne,w.fields):ee.create(ne);if(B(de),!I){var qe=new R({state:de,parent:C,root:k});L(qe),o&&o(qe,de)}}return()=>{I&&(B(void 0),L(void 0))}},[C,U]),(0,an.useEffect)(()=>{t.container&&T(t.container)},[t.container]),(0,an.useEffect)(()=>()=>{I&&(I.destroy(),L(void 0)),j.current&&(j.current.cancel(),j.current=null)},[I]),(0,an.useEffect)(()=>{a&&I&&I.focus()},[a,I]),(0,an.useEffect)(()=>{I&&I.dispatch({effects:V.reconfigure.of(Ue)})},[u,l,c,f,h,d,g,x,v,p,m,y,S,r,s]),(0,an.useEffect)(()=>{if(e!==void 0){var ne=I?I.state.doc.toString():"";if(I&&e!==ne){var de=j.current&&!j.current.isDone,qe=()=>{I&&e!==I.state.doc.toString()&&I.dispatch({changes:{from:0,to:I.state.doc.toString().length,insert:e||""},annotations:[eA.of(!0)]})};de?G.current=qe:qe()}}},[e,I]),{state:U,setState:B,view:I,setView:L,container:C,setContainer:T}}var oA=hr(cl(),1),X4=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],sA=(0,Ki.forwardRef)((t,e)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:u,autoFocus:c,theme:f="light",height:h,minHeight:d,maxHeight:g,width:x,minWidth:v,maxWidth:p,basicSetup:m,placeholder:y,indentWithTab:S,editable:k,readOnly:w,root:C,initialState:T}=t,I=ow(t,X4),L=(0,Ki.useRef)(null),{state:U,view:B,container:j,setContainer:G}=tA({root:C,value:r,autoFocus:c,theme:f,height:h,minHeight:d,maxHeight:g,width:x,minWidth:v,maxWidth:p,basicSetup:m,placeholder:y,indentWithTab:S,editable:k,readOnly:w,selection:i,onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:u,extensions:o,initialState:T});(0,Ki.useImperativeHandle)(e,()=>({editor:L.current,state:U,view:B}),[L,j,U,B]);var Z=(0,Ki.useCallback)(Te=>{L.current=Te,G(Te)},[G]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var le=typeof f=="string"?"cm-theme-"+f:"cm-theme";return(0,oA.jsx)("div",If({ref:Z,className:""+le+(n?" "+n:"")},I))});sA.displayName="CodeMirror";var lA=sA;var Z4=typeof window=="object"&&window&&window.Object===Object&&window,hd=Z4;var Q4=typeof self=="object"&&self&&self.Object===Object&&self,J4=hd||Q4||Function("return this")(),Je=J4;var e6=Je.Symbol,St=e6;var aA=Object.prototype,t6=aA.hasOwnProperty,n6=aA.toString,_u=St?St.toStringTag:void 0;function r6(t){var e=t6.call(t,_u),n=t[_u];try{t[_u]=void 0;var r=!0}catch{}var i=n6.call(t);return r&&(e?t[_u]=n:delete t[_u]),i}var uA=r6;var i6=Object.prototype,o6=i6.toString;function s6(t){return o6.call(t)}var cA=s6;var l6="[object Null]",a6="[object Undefined]",fA=St?St.toStringTag:void 0;function u6(t){return t==null?t===void 0?a6:l6:fA&&fA in Object(t)?uA(t):cA(t)}var Xt=u6;function c6(t){return t!=null&&typeof t=="object"}var We=c6;var f6="[object Symbol]";function h6(t){return typeof t=="symbol"||We(t)&&Xt(t)==f6}var qi=h6;function d6(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Or=d6;var p6=Array.isArray,H=p6;var m6=1/0,hA=St?St.prototype:void 0,dA=hA?hA.toString:void 0;function pA(t){if(typeof t=="string")return t;if(H(t))return Or(t,pA)+"";if(qi(t))return dA?dA.call(t):"";var e=t+"";return e=="0"&&1/t==-m6?"-0":e}var mA=pA;var g6=/\s/;function y6(t){for(var e=t.length;e--&&g6.test(t.charAt(e)););return e}var gA=y6;var x6=/^\s+/;function v6(t){return t&&t.slice(0,gA(t)+1).replace(x6,"")}var yA=v6;function S6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ne=S6;var xA=NaN,k6=/^[-+]0x[0-9a-f]+$/i,w6=/^0b[01]+$/i,C6=/^0o[0-7]+$/i,b6=parseInt;function E6(t){if(typeof t=="number")return t;if(qi(t))return xA;if(Ne(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ne(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yA(t);var n=w6.test(t);return n||C6.test(t)?b6(t.slice(2),n?2:8):k6.test(t)?xA:+t}var vA=E6;var SA=1/0,T6=17976931348623157e292;function A6(t){if(!t)return t===0?t:0;if(t=vA(t),t===SA||t===-SA){var e=t<0?-1:1;return e*T6}return t===t?t:0}var kA=A6;function R6(t){var e=kA(t),n=e%1;return e===e?n?e-n:e:0}var Ir=R6;function O6(t){return t}var jn=O6;var I6="[object AsyncFunction]",M6="[object Function]",L6="[object GeneratorFunction]",N6="[object Proxy]";function P6(t){if(!Ne(t))return!1;var e=Xt(t);return e==M6||e==L6||e==I6||e==N6}var Zt=P6;var _6=Je["__core-js_shared__"],dd=_6;var wA=function(){var t=/[^.]+$/.exec(dd&&dd.keys&&dd.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function D6(t){return!!wA&&wA in t}var CA=D6;var F6=Function.prototype,B6=F6.toString;function z6(t){if(t!=null){try{return B6.call(t)}catch{}try{return t+""}catch{}}return""}var ii=z6;var U6=/[\\^$.*+?()[\]{}|]/g,V6=/^\[object .+?Constructor\]$/,H6=Function.prototype,W6=Object.prototype,j6=H6.toString,G6=W6.hasOwnProperty,$6=RegExp("^"+j6.call(G6).replace(U6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function K6(t){if(!Ne(t)||CA(t))return!1;var e=Zt(t)?$6:V6;return e.test(ii(t))}var bA=K6;function q6(t,e){return t?.[e]}var EA=q6;function Y6(t,e){var n=EA(t,e);return bA(n)?n:void 0}var un=Y6;var X6=un(Je,"WeakMap"),pd=X6;var TA=Object.create,Z6=function(){function t(){}return function(e){if(!Ne(e))return{};if(TA)return TA(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),AA=Z6;function Q6(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var RA=Q6;function J6(){}var Pe=J6;function e8(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var OA=e8;var t8=800,n8=16,r8=Date.now;function i8(t){var e=0,n=0;return function(){var r=r8(),i=n8-(r-n);if(n=r,i>0){if(++e>=t8)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var IA=i8;function o8(t){return function(){return t}}var MA=o8;var s8=function(){try{var t=un(Object,"defineProperty");return t({},"",{}),t}catch{}}(),fl=s8;var l8=fl?function(t,e){return fl(t,"toString",{configurable:!0,enumerable:!1,value:MA(e),writable:!0})}:jn,LA=l8;var a8=IA(LA),NA=a8;function u8(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var md=u8;function c8(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var gd=c8;function f8(t){return t!==t}var PA=f8;function h8(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var _A=h8;function d8(t,e,n){return e===e?_A(t,e,n):gd(t,PA,n)}var hl=d8;function p8(t,e){var n=t==null?0:t.length;return!!n&&hl(t,e,0)>-1}var yd=p8;var m8=9007199254740991,g8=/^(?:0|[1-9]\d*)$/;function y8(t,e){var n=typeof t;return e=e??m8,!!e&&(n=="number"||n!="symbol"&&g8.test(t))&&t>-1&&t%1==0&&t<e}var Yi=y8;function x8(t,e,n){e=="__proto__"&&fl?fl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var dl=x8;function v8(t,e){return t===e||t!==t&&e!==e}var Mr=v8;var S8=Object.prototype,k8=S8.hasOwnProperty;function w8(t,e,n){var r=t[e];(!(k8.call(t,e)&&Mr(r,n))||n===void 0&&!(e in t))&&dl(t,e,n)}var Xi=w8;function C8(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],a=r?r(n[l],t[l],l,n,t):void 0;a===void 0&&(a=t[l]),i?dl(n,l,a):Xi(n,l,a)}return n}var Lr=C8;var DA=Math.max;function b8(t,e,n){return e=DA(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=DA(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(s),RA(t,this,l)}}var FA=b8;function E8(t,e){return NA(FA(t,e,jn),t+"")}var pl=E8;var T8=9007199254740991;function A8(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=T8}var ml=A8;function R8(t){return t!=null&&ml(t.length)&&!Zt(t)}var et=R8;function O8(t,e,n){if(!Ne(n))return!1;var r=typeof e;return(r=="number"?et(n)&&Yi(e,n.length):r=="string"&&e in n)?Mr(n[e],t):!1}var Zi=O8;function I8(t){return pl(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&Zi(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,o)}return e})}var BA=I8;var M8=Object.prototype;function L8(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||M8;return t===n}var Nr=L8;function N8(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var zA=N8;var P8="[object Arguments]";function _8(t){return We(t)&&Xt(t)==P8}var E1=_8;var UA=Object.prototype,D8=UA.hasOwnProperty,F8=UA.propertyIsEnumerable,B8=E1(function(){return arguments}())?E1:function(t){return We(t)&&D8.call(t,"callee")&&!F8.call(t,"callee")},Qi=B8;function z8(){return!1}var VA=z8;var jA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,HA=jA&&typeof module=="object"&&module&&!module.nodeType&&module,U8=HA&&HA.exports===jA,WA=U8?Je.Buffer:void 0,V8=WA?WA.isBuffer:void 0,H8=V8||VA,oi=H8;var W8="[object Arguments]",j8="[object Array]",G8="[object Boolean]",$8="[object Date]",K8="[object Error]",q8="[object Function]",Y8="[object Map]",X8="[object Number]",Z8="[object Object]",Q8="[object RegExp]",J8="[object Set]",e5="[object String]",t5="[object WeakMap]",n5="[object ArrayBuffer]",r5="[object DataView]",i5="[object Float32Array]",o5="[object Float64Array]",s5="[object Int8Array]",l5="[object Int16Array]",a5="[object Int32Array]",u5="[object Uint8Array]",c5="[object Uint8ClampedArray]",f5="[object Uint16Array]",h5="[object Uint32Array]",Ce={};Ce[i5]=Ce[o5]=Ce[s5]=Ce[l5]=Ce[a5]=Ce[u5]=Ce[c5]=Ce[f5]=Ce[h5]=!0;Ce[W8]=Ce[j8]=Ce[n5]=Ce[G8]=Ce[r5]=Ce[$8]=Ce[K8]=Ce[q8]=Ce[Y8]=Ce[X8]=Ce[Z8]=Ce[Q8]=Ce[J8]=Ce[e5]=Ce[t5]=!1;function d5(t){return We(t)&&ml(t.length)&&!!Ce[Xt(t)]}var GA=d5;function p5(t){return function(e){return t(e)}}var Pr=p5;var $A=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Du=$A&&typeof module=="object"&&module&&!module.nodeType&&module,m5=Du&&Du.exports===$A,T1=m5&&hd.process,g5=function(){try{var t=Du&&Du.require&&Du.require("util").types;return t||T1&&T1.binding&&T1.binding("util")}catch{}}(),Gn=g5;var KA=Gn&&Gn.isTypedArray,y5=KA?Pr(KA):GA,gl=y5;var x5=Object.prototype,v5=x5.hasOwnProperty;function S5(t,e){var n=H(t),r=!n&&Qi(t),i=!n&&!r&&oi(t),o=!n&&!r&&!i&&gl(t),s=n||r||i||o,l=s?zA(t.length,String):[],a=l.length;for(var u in t)(e||v5.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Yi(u,a)))&&l.push(u);return l}var xd=S5;function k5(t,e){return function(n){return t(e(n))}}var vd=k5;var w5=vd(Object.keys,Object),qA=w5;var C5=Object.prototype,b5=C5.hasOwnProperty;function E5(t){if(!Nr(t))return qA(t);var e=[];for(var n in Object(t))b5.call(t,n)&&n!="constructor"&&e.push(n);return e}var Sd=E5;function T5(t){return et(t)?xd(t):Sd(t)}var ge=T5;var A5=Object.prototype,R5=A5.hasOwnProperty,O5=BA(function(t,e){if(Nr(e)||et(e)){Lr(e,ge(e),t);return}for(var n in e)R5.call(e,n)&&Xi(t,n,e[n])}),Ot=O5;function I5(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var YA=I5;var M5=Object.prototype,L5=M5.hasOwnProperty;function N5(t){if(!Ne(t))return YA(t);var e=Nr(t),n=[];for(var r in t)r=="constructor"&&(e||!L5.call(t,r))||n.push(r);return n}var XA=N5;function P5(t){return et(t)?xd(t,!0):XA(t)}var Ji=P5;var _5=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D5=/^\w*$/;function F5(t,e){if(H(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||qi(t)?!0:D5.test(t)||!_5.test(t)||e!=null&&t in Object(e)}var yl=F5;var B5=un(Object,"create"),si=B5;function z5(){this.__data__=si?si(null):{},this.size=0}var ZA=z5;function U5(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var QA=U5;var V5="__lodash_hash_undefined__",H5=Object.prototype,W5=H5.hasOwnProperty;function j5(t){var e=this.__data__;if(si){var n=e[t];return n===V5?void 0:n}return W5.call(e,t)?e[t]:void 0}var JA=j5;var G5=Object.prototype,$5=G5.hasOwnProperty;function K5(t){var e=this.__data__;return si?e[t]!==void 0:$5.call(e,t)}var e2=K5;var q5="__lodash_hash_undefined__";function Y5(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=si&&e===void 0?q5:e,this}var t2=Y5;function xl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xl.prototype.clear=ZA;xl.prototype.delete=QA;xl.prototype.get=JA;xl.prototype.has=e2;xl.prototype.set=t2;var A1=xl;function X5(){this.__data__=[],this.size=0}var n2=X5;function Z5(t,e){for(var n=t.length;n--;)if(Mr(t[n][0],e))return n;return-1}var eo=Z5;var Q5=Array.prototype,J5=Q5.splice;function eF(t){var e=this.__data__,n=eo(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():J5.call(e,n,1),--this.size,!0}var r2=eF;function tF(t){var e=this.__data__,n=eo(e,t);return n<0?void 0:e[n][1]}var i2=tF;function nF(t){return eo(this.__data__,t)>-1}var o2=nF;function rF(t,e){var n=this.__data__,r=eo(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var s2=rF;function vl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}vl.prototype.clear=n2;vl.prototype.delete=r2;vl.prototype.get=i2;vl.prototype.has=o2;vl.prototype.set=s2;var to=vl;var iF=un(Je,"Map"),no=iF;function oF(){this.size=0,this.__data__={hash:new A1,map:new(no||to),string:new A1}}var l2=oF;function sF(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var a2=sF;function lF(t,e){var n=t.__data__;return a2(e)?n[typeof e=="string"?"string":"hash"]:n.map}var ro=lF;function aF(t){var e=ro(this,t).delete(t);return this.size-=e?1:0,e}var u2=aF;function uF(t){return ro(this,t).get(t)}var c2=uF;function cF(t){return ro(this,t).has(t)}var f2=cF;function fF(t,e){var n=ro(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var h2=fF;function Sl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Sl.prototype.clear=l2;Sl.prototype.delete=u2;Sl.prototype.get=c2;Sl.prototype.has=f2;Sl.prototype.set=h2;var Jo=Sl;var hF="Expected a function";function R1(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(hF);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(R1.Cache||Jo),n}R1.Cache=Jo;var d2=R1;var dF=500;function pF(t){var e=d2(t,function(r){return n.size===dF&&n.clear(),r}),n=e.cache;return e}var p2=pF;var mF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gF=/\\(\\)?/g,yF=p2(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(mF,function(n,r,i,o){e.push(i?o.replace(gF,"$1"):r||n)}),e}),m2=yF;function xF(t){return t==null?"":mA(t)}var g2=xF;function vF(t,e){return H(t)?t:yl(t,e)?[t]:m2(g2(t))}var io=vF;var SF=1/0;function kF(t){if(typeof t=="string"||qi(t))return t;var e=t+"";return e=="0"&&1/t==-SF?"-0":e}var _r=kF;function wF(t,e){e=io(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[_r(e[n++])];return n&&n==r?t:void 0}var kl=wF;function CF(t,e,n){var r=t==null?void 0:kl(t,e);return r===void 0?n:r}var y2=CF;function bF(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var wl=bF;var x2=St?St.isConcatSpreadable:void 0;function EF(t){return H(t)||Qi(t)||!!(x2&&t&&t[x2])}var v2=EF;function S2(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=v2),i||(i=[]);++o<s;){var l=t[o];e>0&&n(l)?e>1?S2(l,e-1,n,r,i):wl(i,l):r||(i[i.length]=l)}return i}var Cl=S2;function TF(t){var e=t==null?0:t.length;return e?Cl(t,1):[]}var ut=TF;var AF=vd(Object.getPrototypeOf,Object),kd=AF;function RF(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var wd=RF;function OF(t,e,n,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}var k2=OF;function IF(){this.__data__=new to,this.size=0}var w2=IF;function MF(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var C2=MF;function LF(t){return this.__data__.get(t)}var b2=LF;function NF(t){return this.__data__.has(t)}var E2=NF;var PF=200;function _F(t,e){var n=this.__data__;if(n instanceof to){var r=n.__data__;if(!no||r.length<PF-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jo(r)}return n.set(t,e),this.size=n.size,this}var T2=_F;function bl(t){var e=this.__data__=new to(t);this.size=e.size}bl.prototype.clear=w2;bl.prototype.delete=C2;bl.prototype.get=b2;bl.prototype.has=E2;bl.prototype.set=T2;var oo=bl;function DF(t,e){return t&&Lr(e,ge(e),t)}var A2=DF;function FF(t,e){return t&&Lr(e,Ji(e),t)}var R2=FF;var L2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,O2=L2&&typeof module=="object"&&module&&!module.nodeType&&module,BF=O2&&O2.exports===L2,I2=BF?Je.Buffer:void 0,M2=I2?I2.allocUnsafe:void 0;function zF(t,e){if(e)return t.slice();var n=t.length,r=M2?M2(n):new t.constructor(n);return t.copy(r),r}var N2=zF;function UF(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var El=UF;function VF(){return[]}var Cd=VF;var HF=Object.prototype,WF=HF.propertyIsEnumerable,P2=Object.getOwnPropertySymbols,jF=P2?function(t){return t==null?[]:(t=Object(t),El(P2(t),function(e){return WF.call(t,e)}))}:Cd,Tl=jF;function GF(t,e){return Lr(t,Tl(t),e)}var _2=GF;var $F=Object.getOwnPropertySymbols,KF=$F?function(t){for(var e=[];t;)wl(e,Tl(t)),t=kd(t);return e}:Cd,bd=KF;function qF(t,e){return Lr(t,bd(t),e)}var D2=qF;function YF(t,e,n){var r=e(t);return H(t)?r:wl(r,n(t))}var Ed=YF;function XF(t){return Ed(t,ge,Tl)}var Fu=XF;function ZF(t){return Ed(t,Ji,bd)}var Td=ZF;var QF=un(Je,"DataView"),Ad=QF;var JF=un(Je,"Promise"),Rd=JF;var eB=un(Je,"Set"),so=eB;var F2="[object Map]",tB="[object Object]",B2="[object Promise]",z2="[object Set]",U2="[object WeakMap]",V2="[object DataView]",nB=ii(Ad),rB=ii(no),iB=ii(Rd),oB=ii(so),sB=ii(pd),es=Xt;(Ad&&es(new Ad(new ArrayBuffer(1)))!=V2||no&&es(new no)!=F2||Rd&&es(Rd.resolve())!=B2||so&&es(new so)!=z2||pd&&es(new pd)!=U2)&&(es=function(t){var e=Xt(t),n=e==tB?t.constructor:void 0,r=n?ii(n):"";if(r)switch(r){case nB:return V2;case rB:return F2;case iB:return B2;case oB:return z2;case sB:return U2}return e});var ar=es;var lB=Object.prototype,aB=lB.hasOwnProperty;function uB(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&aB.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var H2=uB;var cB=Je.Uint8Array,Al=cB;function fB(t){var e=new t.constructor(t.byteLength);return new Al(e).set(new Al(t)),e}var Rl=fB;function hB(t,e){var n=e?Rl(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var W2=hB;var dB=/\w*$/;function pB(t){var e=new t.constructor(t.source,dB.exec(t));return e.lastIndex=t.lastIndex,e}var j2=pB;var G2=St?St.prototype:void 0,$2=G2?G2.valueOf:void 0;function mB(t){return $2?Object($2.call(t)):{}}var K2=mB;function gB(t,e){var n=e?Rl(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var q2=gB;var yB="[object Boolean]",xB="[object Date]",vB="[object Map]",SB="[object Number]",kB="[object RegExp]",wB="[object Set]",CB="[object String]",bB="[object Symbol]",EB="[object ArrayBuffer]",TB="[object DataView]",AB="[object Float32Array]",RB="[object Float64Array]",OB="[object Int8Array]",IB="[object Int16Array]",MB="[object Int32Array]",LB="[object Uint8Array]",NB="[object Uint8ClampedArray]",PB="[object Uint16Array]",_B="[object Uint32Array]";function DB(t,e,n){var r=t.constructor;switch(e){case EB:return Rl(t);case yB:case xB:return new r(+t);case TB:return W2(t,n);case AB:case RB:case OB:case IB:case MB:case LB:case NB:case PB:case _B:return q2(t,n);case vB:return new r;case SB:case CB:return new r(t);case kB:return j2(t);case wB:return new r;case bB:return K2(t)}}var Y2=DB;function FB(t){return typeof t.constructor=="function"&&!Nr(t)?AA(kd(t)):{}}var X2=FB;var BB="[object Map]";function zB(t){return We(t)&&ar(t)==BB}var Z2=zB;var Q2=Gn&&Gn.isMap,UB=Q2?Pr(Q2):Z2,J2=UB;var VB="[object Set]";function HB(t){return We(t)&&ar(t)==VB}var eR=HB;var tR=Gn&&Gn.isSet,WB=tR?Pr(tR):eR,nR=WB;var jB=1,GB=2,$B=4,rR="[object Arguments]",KB="[object Array]",qB="[object Boolean]",YB="[object Date]",XB="[object Error]",iR="[object Function]",ZB="[object GeneratorFunction]",QB="[object Map]",JB="[object Number]",oR="[object Object]",e9="[object RegExp]",t9="[object Set]",n9="[object String]",r9="[object Symbol]",i9="[object WeakMap]",o9="[object ArrayBuffer]",s9="[object DataView]",l9="[object Float32Array]",a9="[object Float64Array]",u9="[object Int8Array]",c9="[object Int16Array]",f9="[object Int32Array]",h9="[object Uint8Array]",d9="[object Uint8ClampedArray]",p9="[object Uint16Array]",m9="[object Uint32Array]",ye={};ye[rR]=ye[KB]=ye[o9]=ye[s9]=ye[qB]=ye[YB]=ye[l9]=ye[a9]=ye[u9]=ye[c9]=ye[f9]=ye[QB]=ye[JB]=ye[oR]=ye[e9]=ye[t9]=ye[n9]=ye[r9]=ye[h9]=ye[d9]=ye[p9]=ye[m9]=!0;ye[XB]=ye[iR]=ye[i9]=!1;function Od(t,e,n,r,i,o){var s,l=e&jB,a=e&GB,u=e&$B;if(n&&(s=i?n(t,r,i,o):n(t)),s!==void 0)return s;if(!Ne(t))return t;var c=H(t);if(c){if(s=H2(t),!l)return OA(t,s)}else{var f=ar(t),h=f==iR||f==ZB;if(oi(t))return N2(t,l);if(f==oR||f==rR||h&&!i){if(s=a||h?{}:X2(t),!l)return a?D2(t,R2(s,t)):_2(t,A2(s,t))}else{if(!ye[f])return i?t:{};s=Y2(t,f,l)}}o||(o=new oo);var d=o.get(t);if(d)return d;o.set(t,s),nR(t)?t.forEach(function(v){s.add(Od(v,e,n,v,t,o))}):J2(t)&&t.forEach(function(v,p){s.set(p,Od(v,e,n,p,t,o))});var g=u?a?Td:Fu:a?Ji:ge,x=c?void 0:g(t);return md(x||t,function(v,p){x&&(p=v,v=t[p]),Xi(s,p,Od(v,e,n,p,t,o))}),s}var sR=Od;var g9=4;function y9(t){return sR(t,g9)}var be=y9;function x9(t){for(var e=-1,n=t==null?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}var Dr=x9;var v9="__lodash_hash_undefined__";function S9(t){return this.__data__.set(t,v9),this}var lR=S9;function k9(t){return this.__data__.has(t)}var aR=k9;function Id(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Jo;++e<n;)this.add(t[e])}Id.prototype.add=Id.prototype.push=lR;Id.prototype.has=aR;var Ol=Id;function w9(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Md=w9;function C9(t,e){return t.has(e)}var Il=C9;var b9=1,E9=2;function T9(t,e,n,r,i,o){var s=n&b9,l=t.length,a=e.length;if(l!=a&&!(s&&a>l))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=n&E9?new Ol:void 0;for(o.set(t,e),o.set(e,t);++f<l;){var g=t[f],x=e[f];if(r)var v=s?r(x,g,f,e,t,o):r(g,x,f,t,e,o);if(v!==void 0){if(v)continue;h=!1;break}if(d){if(!Md(e,function(p,m){if(!Il(d,m)&&(g===p||i(g,p,n,r,o)))return d.push(m)})){h=!1;break}}else if(!(g===x||i(g,x,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var Ld=T9;function A9(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var uR=A9;function R9(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Ml=R9;var O9=1,I9=2,M9="[object Boolean]",L9="[object Date]",N9="[object Error]",P9="[object Map]",_9="[object Number]",D9="[object RegExp]",F9="[object Set]",B9="[object String]",z9="[object Symbol]",U9="[object ArrayBuffer]",V9="[object DataView]",cR=St?St.prototype:void 0,O1=cR?cR.valueOf:void 0;function H9(t,e,n,r,i,o,s){switch(n){case V9:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case U9:return!(t.byteLength!=e.byteLength||!o(new Al(t),new Al(e)));case M9:case L9:case _9:return Mr(+t,+e);case N9:return t.name==e.name&&t.message==e.message;case D9:case B9:return t==e+"";case P9:var l=uR;case F9:var a=r&O9;if(l||(l=Ml),t.size!=e.size&&!a)return!1;var u=s.get(t);if(u)return u==e;r|=I9,s.set(t,e);var c=Ld(l(t),l(e),r,i,o,s);return s.delete(t),c;case z9:if(O1)return O1.call(t)==O1.call(e)}return!1}var fR=H9;var W9=1,j9=Object.prototype,G9=j9.hasOwnProperty;function $9(t,e,n,r,i,o){var s=n&W9,l=Fu(t),a=l.length,u=Fu(e),c=u.length;if(a!=c&&!s)return!1;for(var f=a;f--;){var h=l[f];if(!(s?h in e:G9.call(e,h)))return!1}var d=o.get(t),g=o.get(e);if(d&&g)return d==e&&g==t;var x=!0;o.set(t,e),o.set(e,t);for(var v=s;++f<a;){h=l[f];var p=t[h],m=e[h];if(r)var y=s?r(m,p,h,e,t,o):r(p,m,h,t,e,o);if(!(y===void 0?p===m||i(p,m,n,r,o):y)){x=!1;break}v||(v=h=="constructor")}if(x&&!v){var S=t.constructor,k=e.constructor;S!=k&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(x=!1)}return o.delete(t),o.delete(e),x}var hR=$9;var K9=1,dR="[object Arguments]",pR="[object Array]",Nd="[object Object]",q9=Object.prototype,mR=q9.hasOwnProperty;function Y9(t,e,n,r,i,o){var s=H(t),l=H(e),a=s?pR:ar(t),u=l?pR:ar(e);a=a==dR?Nd:a,u=u==dR?Nd:u;var c=a==Nd,f=u==Nd,h=a==u;if(h&&oi(t)){if(!oi(e))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new oo),s||gl(t)?Ld(t,e,n,r,i,o):fR(t,e,a,n,r,i,o);if(!(n&K9)){var d=c&&mR.call(t,"__wrapped__"),g=f&&mR.call(e,"__wrapped__");if(d||g){var x=d?t.value():t,v=g?e.value():e;return o||(o=new oo),i(x,v,n,r,o)}}return h?(o||(o=new oo),hR(t,e,n,r,i,o)):!1}var gR=Y9;function yR(t,e,n,r,i){return t===e?!0:t==null||e==null||!We(t)&&!We(e)?t!==t&&e!==e:gR(t,e,n,r,yR,i)}var Pd=yR;var X9=1,Z9=2;function Q9(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var l=n[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=n[i];var a=l[0],u=t[a],c=l[1];if(s&&l[2]){if(u===void 0&&!(a in t))return!1}else{var f=new oo;if(r)var h=r(u,c,a,t,e,f);if(!(h===void 0?Pd(c,u,X9|Z9,r,f):h))return!1}}return!0}var xR=Q9;function J9(t){return t===t&&!Ne(t)}var _d=J9;function e7(t){for(var e=ge(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,_d(i)]}return e}var vR=e7;function t7(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Dd=t7;function n7(t){var e=vR(t);return e.length==1&&e[0][2]?Dd(e[0][0],e[0][1]):function(n){return n===t||xR(n,t,e)}}var SR=n7;function r7(t,e){return t!=null&&e in Object(t)}var kR=r7;function i7(t,e,n){e=io(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=_r(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&ml(i)&&Yi(s,i)&&(H(t)||Qi(t)))}var Fd=i7;function o7(t,e){return t!=null&&Fd(t,e,kR)}var wR=o7;var s7=1,l7=2;function a7(t,e){return yl(t)&&_d(e)?Dd(_r(t),e):function(n){var r=y2(n,t);return r===void 0&&r===e?wR(n,t):Pd(e,r,s7|l7)}}var CR=a7;function u7(t){return function(e){return e?.[t]}}var bR=u7;function c7(t){return function(e){return kl(e,t)}}var ER=c7;function f7(t){return yl(t)?bR(_r(t)):ER(t)}var TR=f7;function h7(t){return typeof t=="function"?t:t==null?jn:typeof t=="object"?H(t)?CR(t[0],t[1]):SR(t):TR(t)}var tt=h7;function d7(t,e,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}var AR=d7;function p7(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),l=s.length;l--;){var a=s[t?l:++i];if(n(o[a],a,o)===!1)break}return e}}var RR=p7;var m7=RR(),OR=m7;function g7(t,e){return t&&OR(t,e,ge)}var IR=g7;function y7(t,e){return function(n,r){if(n==null)return n;if(!et(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var MR=y7;var x7=MR(IR),cn=x7;function v7(t,e,n,r){return cn(t,function(i,o,s){e(r,i,n(i),s)}),r}var LR=v7;function S7(t,e){return function(n,r){var i=H(n)?AR:LR,o=e?e():{};return i(n,t,tt(r,2),o)}}var NR=S7;var PR=Object.prototype,k7=PR.hasOwnProperty,w7=pl(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Zi(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=Ji(o),l=-1,a=s.length;++l<a;){var u=s[l],c=t[u];(c===void 0||Mr(c,PR[u])&&!k7.call(t,u))&&(t[u]=o[u])}return t}),Ll=w7;function C7(t){return We(t)&&et(t)}var I1=C7;function b7(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Bd=b7;var E7=200;function T7(t,e,n,r){var i=-1,o=yd,s=!0,l=t.length,a=[],u=e.length;if(!l)return a;n&&(e=Or(e,Pr(n))),r?(o=Bd,s=!1):e.length>=E7&&(o=Il,s=!1,e=new Ol(e));e:for(;++i<l;){var c=t[i],f=n==null?c:n(c);if(c=r||c!==0?c:0,s&&f===f){for(var h=u;h--;)if(e[h]===f)continue e;a.push(c)}else o(e,f,r)||a.push(c)}return a}var _R=T7;var A7=pl(function(t,e){return I1(t)?_R(t,Cl(e,1,I1,!0)):[]}),lo=A7;function R7(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Fr=R7;function O7(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:Ir(e),wd(t,e<0?0:e,r)):[]}var je=O7;function I7(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:Ir(e),e=r-e,wd(t,0,e<0?0:e)):[]}var li=I7;function M7(t){return typeof t=="function"?t:jn}var DR=M7;function L7(t,e){var n=H(t)?md:cn;return n(t,DR(e))}var F=L7;function N7(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var FR=N7;function P7(t,e){var n=!0;return cn(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var BR=P7;function _7(t,e,n){var r=H(t)?FR:BR;return n&&Zi(t,e,n)&&(e=void 0),r(t,tt(e,3))}var zt=_7;function D7(t,e){var n=[];return cn(t,function(r,i,o){e(r,i,o)&&n.push(r)}),n}var zd=D7;function F7(t,e){var n=H(t)?El:zd;return n(t,tt(e,3))}var Ut=F7;function B7(t){return function(e,n,r){var i=Object(e);if(!et(e)){var o=tt(n,3);e=ge(e),n=function(l){return o(i[l],l,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var zR=B7;var z7=Math.max;function U7(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Ir(n);return i<0&&(i=z7(r+i,0)),gd(t,tt(e,3),i)}var UR=U7;var V7=zR(UR),Br=V7;function H7(t){return t&&t.length?t[0]:void 0}var kt=H7;function W7(t,e){var n=-1,r=et(t)?Array(t.length):[];return cn(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var VR=W7;function j7(t,e){var n=H(t)?Or:VR;return n(t,tt(e,3))}var _=j7;function G7(t,e){return Cl(_(t,e),1)}var Qt=G7;var $7=Object.prototype,K7=$7.hasOwnProperty,q7=NR(function(t,e,n){K7.call(t,n)?t[n].push(e):dl(t,n,[e])}),M1=q7;var Y7=Object.prototype,X7=Y7.hasOwnProperty;function Z7(t,e){return t!=null&&X7.call(t,e)}var HR=Z7;function Q7(t,e){return t!=null&&Fd(t,e,HR)}var z=Q7;var J7="[object String]";function ez(t){return typeof t=="string"||!H(t)&&We(t)&&Xt(t)==J7}var ct=ez;function tz(t,e){return Or(e,function(n){return t[n]})}var WR=tz;function nz(t){return t==null?[]:WR(t,ge(t))}var ce=nz;var rz=Math.max;function iz(t,e,n,r){t=et(t)?t:ce(t),n=n&&!r?Ir(n):0;var i=t.length;return n<0&&(n=rz(i+n,0)),ct(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&hl(t,e,n)>-1}var Re=iz;var oz=Math.max;function sz(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Ir(n);return i<0&&(i=oz(r+i,0)),hl(t,e,i)}var Ud=sz;var lz="[object Map]",az="[object Set]",uz=Object.prototype,cz=uz.hasOwnProperty;function fz(t){if(t==null)return!0;if(et(t)&&(H(t)||typeof t=="string"||typeof t.splice=="function"||oi(t)||gl(t)||Qi(t)))return!t.length;var e=ar(t);if(e==lz||e==az)return!t.size;if(Nr(t))return!Sd(t).length;for(var n in t)if(cz.call(t,n))return!1;return!0}var K=fz;var hz="[object RegExp]";function dz(t){return We(t)&&Xt(t)==hz}var jR=dz;var GR=Gn&&Gn.isRegExp,pz=GR?Pr(GR):jR,$n=pz;function mz(t){return t===void 0}var Vt=mz;var gz="Expected a function";function yz(t){if(typeof t!="function")throw new TypeError(gz);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var $R=yz;function xz(t,e,n,r){if(!Ne(t))return t;e=io(e,t);for(var i=-1,o=e.length,s=o-1,l=t;l!=null&&++i<o;){var a=_r(e[i]),u=n;if(a==="__proto__"||a==="constructor"||a==="prototype")return t;if(i!=s){var c=l[a];u=r?r(c,a,l):void 0,u===void 0&&(u=Ne(c)?c:Yi(e[i+1])?[]:{})}Xi(l,a,u),l=l[a]}return t}var KR=xz;function vz(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],l=kl(t,s);n(l,s)&&KR(o,io(s,t),l)}return o}var qR=vz;function Sz(t,e){if(t==null)return{};var n=Or(Td(t),function(r){return[r]});return e=tt(e),qR(t,n,function(r,i){return e(r,i[0])})}var fn=Sz;function kz(t,e,n,r,i){return i(t,function(o,s,l){n=r?(r=!1,o):e(n,o,s,l)}),n}var YR=kz;function wz(t,e,n){var r=H(t)?k2:YR,i=arguments.length<3;return r(t,tt(e,4),n,i,cn)}var nt=wz;function Cz(t,e){var n=H(t)?El:zd;return n(t,$R(tt(e,3)))}var ao=Cz;function bz(t,e){var n;return cn(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var XR=bz;function Ez(t,e,n){var r=H(t)?Md:XR;return n&&Zi(t,e,n)&&(e=void 0),r(t,tt(e,3))}var Bu=Ez;var Tz=1/0,Az=so&&1/Ml(new so([,-0]))[1]==Tz?function(t){return new so(t)}:Pe,ZR=Az;var Rz=200;function Oz(t,e,n){var r=-1,i=yd,o=t.length,s=!0,l=[],a=l;if(n)s=!1,i=Bd;else if(o>=Rz){var u=e?null:ZR(t);if(u)return Ml(u);s=!1,i=Il,a=new Ol}else a=e?[]:l;e:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,s&&f===f){for(var h=a.length;h--;)if(a[h]===f)continue e;e&&a.push(f),l.push(c)}else i(a,f,n)||(a!==l&&a.push(f),l.push(c))}return l}var QR=Oz;function Iz(t){return t&&t.length?QR(t):[]}var Nl=Iz;function Pl(t){console&&console.error&&console.error(`Error: ${t}`)}function zu(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Uu(t){let e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function Vu(t){function e(){}e.prototype=t;let n=new e;function r(){return typeof n.bar}return r(),r(),t;(0,eval)(t)}function Mz(t){return Lz(t)?t.LABEL:t.name}function Lz(t){return ct(t.LABEL)&&t.LABEL!==""}var Rn=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),F(this.definition,n=>{n.accept(e)})}},xe=class extends Rn{constructor(e){super([]),this.idx=1,Ot(this,fn(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},Jt=class extends Rn{constructor(e){super(e.definition),this.orgText="",Ot(this,fn(e,n=>n!==void 0))}},ve=class extends Rn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Ot(this,fn(e,n=>n!==void 0))}},Ee=class extends Rn{constructor(e){super(e.definition),this.idx=1,Ot(this,fn(e,n=>n!==void 0))}},Ge=class extends Rn{constructor(e){super(e.definition),this.idx=1,Ot(this,fn(e,n=>n!==void 0))}},$e=class extends Rn{constructor(e){super(e.definition),this.idx=1,Ot(this,fn(e,n=>n!==void 0))}},oe=class extends Rn{constructor(e){super(e.definition),this.idx=1,Ot(this,fn(e,n=>n!==void 0))}},Be=class extends Rn{constructor(e){super(e.definition),this.idx=1,Ot(this,fn(e,n=>n!==void 0))}},ze=class extends Rn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Ot(this,fn(e,n=>n!==void 0))}},Q=class{constructor(e){this.idx=1,Ot(this,fn(e,n=>n!==void 0))}accept(e){e.visit(this)}};function Vd(t){return _(t,_l)}function _l(t){function e(n){return _(n,_l)}if(t instanceof xe){let n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return ct(t.label)&&(n.label=t.label),n}else{if(t instanceof ve)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Ee)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Ge)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof $e)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:_l(new Q({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Be)return{type:"RepetitionWithSeparator",idx:t.idx,separator:_l(new Q({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof oe)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof ze)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Q){let n={type:"Terminal",name:t.terminalType.name,label:Mz(t.terminalType),idx:t.idx};ct(t.label)&&(n.terminalLabel=t.label);let r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=$n(r)?r.source:r),n}else{if(t instanceof Jt)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}var en=class{visit(e){let n=e;switch(n.constructor){case xe:return this.visitNonTerminal(n);case ve:return this.visitAlternative(n);case Ee:return this.visitOption(n);case Ge:return this.visitRepetitionMandatory(n);case $e:return this.visitRepetitionMandatoryWithSeparator(n);case Be:return this.visitRepetitionWithSeparator(n);case oe:return this.visitRepetition(n);case ze:return this.visitAlternation(n);case Q:return this.visitTerminal(n);case Jt:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function L1(t){return t instanceof ve||t instanceof Ee||t instanceof oe||t instanceof Ge||t instanceof $e||t instanceof Be||t instanceof Q||t instanceof Jt}function ts(t,e=[]){return t instanceof Ee||t instanceof oe||t instanceof Be?!0:t instanceof ze?Bu(t.definition,r=>ts(r,e)):t instanceof xe&&Re(e,t)?!1:t instanceof Rn?(t instanceof xe&&e.push(t),zt(t.definition,r=>ts(r,e))):!1}function N1(t){return t instanceof ze}function hn(t){if(t instanceof xe)return"SUBRULE";if(t instanceof Ee)return"OPTION";if(t instanceof ze)return"OR";if(t instanceof Ge)return"AT_LEAST_ONE";if(t instanceof $e)return"AT_LEAST_ONE_SEP";if(t instanceof Be)return"MANY_SEP";if(t instanceof oe)return"MANY";if(t instanceof Q)return"CONSUME";throw Error("non exhaustive match")}var ai=class{walk(e,n=[]){F(e.definition,(r,i)=>{let o=je(e.definition,i+1);if(r instanceof xe)this.walkProdRef(r,o,n);else if(r instanceof Q)this.walkTerminal(r,o,n);else if(r instanceof ve)this.walkFlat(r,o,n);else if(r instanceof Ee)this.walkOption(r,o,n);else if(r instanceof Ge)this.walkAtLeastOne(r,o,n);else if(r instanceof $e)this.walkAtLeastOneSep(r,o,n);else if(r instanceof Be)this.walkManySep(r,o,n);else if(r instanceof oe)this.walkMany(r,o,n);else if(r instanceof ze)this.walkOr(r,o,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){let i=n.concat(r);this.walk(e,i)}walkOption(e,n,r){let i=n.concat(r);this.walk(e,i)}walkAtLeastOne(e,n,r){let i=[new Ee({definition:e.definition})].concat(n,r);this.walk(e,i)}walkAtLeastOneSep(e,n,r){let i=JR(e,n,r);this.walk(e,i)}walkMany(e,n,r){let i=[new Ee({definition:e.definition})].concat(n,r);this.walk(e,i)}walkManySep(e,n,r){let i=JR(e,n,r);this.walk(e,i)}walkOr(e,n,r){let i=n.concat(r);F(e.definition,o=>{let s=new ve({definition:[o]});this.walk(s,i)})}};function JR(t,e,n){return[new Ee({definition:[new Q({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function ns(t){if(t instanceof xe)return ns(t.referencedRule);if(t instanceof Q)return _z(t);if(L1(t))return Nz(t);if(N1(t))return Pz(t);throw Error("non exhaustive match")}function Nz(t){let e=[],n=t.definition,r=0,i=n.length>r,o,s=!0;for(;i&&s;)o=n[r],s=ts(o),e=e.concat(ns(o)),r=r+1,i=n.length>r;return Nl(e)}function Pz(t){let e=_(t.definition,n=>ns(n));return Nl(ut(e))}function _z(t){return[t.terminalType]}var Hd="_~IN~_";var P1=class extends ai{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){let i=Dz(e.referencedRule,e.idx)+this.topProd.name,o=n.concat(r),s=new ve({definition:o}),l=ns(s);this.follows[i]=l}};function eO(t){let e={};return F(t,n=>{let r=new P1(n).startWalking();Ot(e,r)}),e}function Dz(t,e){return t.name+e+Hd}function W(t){return t.charCodeAt(0)}function Wd(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function Dl(t,e){if(t[e]===!0)throw"duplicate flag "+e;let n=t[e];t[e]=!0}function rs(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function Hu(){throw Error("Internal Error - Should never get here!")}function _1(t){return t.type==="Character"}var Wu=[];for(let t=W("0");t<=W("9");t++)Wu.push(t);var ju=[W("_")].concat(Wu);for(let t=W("a");t<=W("z");t++)ju.push(t);for(let t=W("A");t<=W("Z");t++)ju.push(t);var D1=[W(" "),W("\f"),W(`
`),W("\r"),W("	"),W("\v"),W("	"),W("\xA0"),W("\u1680"),W("\u2000"),W("\u2001"),W("\u2002"),W("\u2003"),W("\u2004"),W("\u2005"),W("\u2006"),W("\u2007"),W("\u2008"),W("\u2009"),W("\u200A"),W("\u2028"),W("\u2029"),W("\u202F"),W("\u205F"),W("\u3000"),W("\uFEFF")];var Fz=/[0-9a-fA-F]/,jd=/[0-9]/,Bz=/[1-9]/,Gu=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let n=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Dl(r,"global");break;case"i":Dl(r,"ignoreCase");break;case"m":Dl(r,"multiLine");break;case"u":Dl(r,"unicode");break;case"y":Dl(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){let e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){let e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}rs(n);let r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return Hu()}quantifier(e=!1){let n,r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let o;this.isDigit()?(o=this.integerIncludingZero(),n={atLeast:i,atMost:o}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;rs(n);break}if(!(e===!0&&n===void 0)&&rs(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e,n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),rs(e)?(e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):Hu()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[W(`
`),W("\r"),W("\u2028"),W("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=Wu;break;case"D":e=Wu,n=!0;break;case"s":e=D1;break;case"S":e=D1,n=!0;break;case"w":e=ju;break;case"W":e=ju,n=!0;break}return rs(e)?{type:"Set",value:e,complement:n}:Hu()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=W("\f");break;case"n":e=W(`
`);break;case"r":e=W("\r");break;case"t":e=W("	");break;case"v":e=W("\v");break}return rs(e)?{type:"Character",value:e}:Hu()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:W("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:W(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:W(e)}}}characterClass(){let e=[],n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){let r=this.classAtom(),i=r.type==="Character";if(_1(r)&&this.isRangeDash()){this.consumeChar("-");let o=this.classAtom(),s=o.type==="Character";if(_1(o)){if(o.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:o.value})}else Wd(r.value,e),e.push(W("-")),Wd(o.value,e)}else Wd(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:W("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}let n=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(Bz.test(e)===!1)throw Error("Expecting a positive integer");for(;jd.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(jd.test(e)===!1)throw Error("Expecting an integer");for(;jd.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:W(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return jd.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let i=0;i<e;i++){let o=this.popChar();if(Fz.test(o)===!1)throw Error("Expecting a HexDecimal digits");n+=o}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var uo=class{visitChildren(e){for(let n in e){let r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var Gd={},zz=new Gu;function Fl(t){let e=t.toString();if(Gd.hasOwnProperty(e))return Gd[e];{let n=zz.pattern(e);return Gd[e]=n,n}}function tO(){Gd={}}var rO="Complement Sets are not supported for first char optimization",$u=`Unable to use "first char" lexer optimizations:
`;function iO(t,e=!1){try{let n=Fl(t);return F1(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===rO)e&&zu(`${$u}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Pl(`${$u}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function F1(t,e,n){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)F1(t.value[i],e,n);break;case"Alternative":let r=t.value;for(let i=0;i<r.length;i++){let o=r[i];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=o;switch(s.type){case"Character":$d(s.value,e,n);break;case"Set":if(s.complement===!0)throw Error(rO);F(s.value,a=>{if(typeof a=="number")$d(a,e,n);else{let u=a;if(n===!0)for(let c=u.from;c<=u.to;c++)$d(c,e,n);else{for(let c=u.from;c<=u.to&&c<Bl;c++)$d(c,e,n);if(u.to>=Bl){let c=u.from>=Bl?u.from:Bl,f=u.to,h=zr(c),d=zr(f);for(let g=h;g<=d;g++)e[g]=g}}}});break;case"Group":F1(s.value,e,n);break;default:throw Error("Non Exhaustive Match")}let l=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&B1(s)===!1||s.type!=="Group"&&l===!1)break}break;default:throw Error("non exhaustive match!")}return ce(e)}function $d(t,e,n){let r=zr(t);e[r]=r,n===!0&&Uz(t,e)}function Uz(t,e){let n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){let i=zr(r.charCodeAt(0));e[i]=i}else{let i=n.toLowerCase();if(i!==n){let o=zr(i.charCodeAt(0));e[o]=o}}}function nO(t,e){return Br(t.value,n=>{if(typeof n=="number")return Re(e,n);{let r=n;return Br(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function B1(t){let e=t.quantifier;return e&&e.atLeast===0?!0:t.value?H(t.value)?zt(t.value,B1):B1(t.value):!1}var z1=class extends uo{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){Re(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?nO(e,this.targetCharCodes)===void 0&&(this.found=!0):nO(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Kd(t,e){if(e instanceof RegExp){let n=Fl(e),r=new z1(t);return r.visit(n),r.found}else return Br(e,n=>Re(t,n.charCodeAt(0)))!==void 0}var is="PATTERN",zl="defaultMode",qd="modes",V1=typeof new RegExp("(?:)").sticky=="boolean";function lO(t,e){e=Ll(e,{useSticky:V1,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(m,y)=>y()});let n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{iU()});let r;n("Reject Lexer.NA",()=>{r=ao(t,m=>m[is]===Ke.NA)});let i=!1,o;n("Transform Patterns",()=>{i=!1,o=_(r,m=>{let y=m[is];if($n(y)){let S=y.source;return S.length===1&&S!=="^"&&S!=="$"&&S!=="."&&!y.ignoreCase?S:S.length===2&&S[0]==="\\"&&!Re(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],S[1])?S[1]:e.useSticky?sO(y):oO(y)}else{if(Zt(y))return i=!0,{exec:y};if(typeof y=="object")return i=!0,y;if(typeof y=="string"){if(y.length===1)return y;{let S=y.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),k=new RegExp(S);return e.useSticky?sO(k):oO(k)}}else throw Error("non exhaustive match")}})});let s,l,a,u,c;n("misc mapping",()=>{s=_(r,m=>m.tokenTypeIdx),l=_(r,m=>{let y=m.GROUP;if(y!==Ke.SKIPPED){if(ct(y))return y;if(Vt(y))return!1;throw Error("non exhaustive match")}}),a=_(r,m=>{let y=m.LONGER_ALT;if(y)return H(y)?_(y,k=>Ud(r,k)):[Ud(r,y)]}),u=_(r,m=>m.PUSH_MODE),c=_(r,m=>z(m,"POP_MODE"))});let f;n("Line Terminator Handling",()=>{let m=mO(e.lineTerminatorCharacters);f=_(r,y=>!1),e.positionTracking!=="onlyOffset"&&(f=_(r,y=>z(y,"LINE_BREAKS")?!!y.LINE_BREAKS:pO(y,m)===!1&&Kd(m,y.PATTERN)))});let h,d,g,x;n("Misc Mapping #2",()=>{h=_(r,hO),d=_(o,nU),g=nt(r,(m,y)=>{let S=y.GROUP;return ct(S)&&S!==Ke.SKIPPED&&(m[S]=[]),m},{}),x=_(o,(m,y)=>({pattern:o[y],longerAlt:a[y],canLineTerminator:f[y],isCustom:h[y],short:d[y],group:l[y],push:u[y],pop:c[y],tokenTypeIdx:s[y],tokenType:r[y]}))});let v=!0,p=[];return e.safeMode||n("First Char Optimization",()=>{p=nt(r,(m,y,S)=>{if(typeof y.PATTERN=="string"){let k=y.PATTERN.charCodeAt(0),w=zr(k);U1(m,w,x[S])}else if(H(y.START_CHARS_HINT)){let k;F(y.START_CHARS_HINT,w=>{let C=typeof w=="string"?w.charCodeAt(0):w,T=zr(C);k!==T&&(k=T,U1(m,T,x[S]))})}else if($n(y.PATTERN))if(y.PATTERN.unicode)v=!1,e.ensureOptimizations&&Pl(`${$u}	Unable to analyze < ${y.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let k=iO(y.PATTERN,e.ensureOptimizations);K(k)&&(v=!1),F(k,w=>{U1(m,w,x[S])})}else e.ensureOptimizations&&Pl(`${$u}	TokenType: <${y.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),v=!1;return m},[])}),{emptyGroups:g,patternIdxToConfig:x,charCodeToPatternIdxToConfig:p,hasCustom:i,canBeOptimized:v}}function aO(t,e){let n=[],r=Hz(t);n=n.concat(r.errors);let i=Wz(r.valid),o=i.valid;return n=n.concat(i.errors),n=n.concat(Vz(o)),n=n.concat(Zz(o)),n=n.concat(Qz(o,e)),n=n.concat(Jz(o)),n}function Vz(t){let e=[],n=Ut(t,r=>$n(r[is]));return e=e.concat(Gz(n)),e=e.concat(qz(n)),e=e.concat(Yz(n)),e=e.concat(Xz(n)),e=e.concat($z(n)),e}function Hz(t){let e=Ut(t,i=>!z(i,is)),n=_(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:Oe.MISSING_PATTERN,tokenTypes:[i]})),r=lo(t,e);return{errors:n,valid:r}}function Wz(t){let e=Ut(t,i=>{let o=i[is];return!$n(o)&&!Zt(o)&&!z(o,"exec")&&!ct(o)}),n=_(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Oe.INVALID_PATTERN,tokenTypes:[i]})),r=lo(t,e);return{errors:n,valid:r}}var jz=/[^\\][$]/;function Gz(t){class e extends uo{constructor(){super(...arguments),this.found=!1}visitEndAnchor(o){this.found=!0}}let n=Ut(t,i=>{let o=i.PATTERN;try{let s=Fl(o),l=new e;return l.visit(s),l.found}catch{return jz.test(o.source)}});return _(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Oe.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function $z(t){let e=Ut(t,r=>r.PATTERN.test(""));return _(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:Oe.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}var Kz=/[^\\[][\^]|^\^/;function qz(t){class e extends uo{constructor(){super(...arguments),this.found=!1}visitStartAnchor(o){this.found=!0}}let n=Ut(t,i=>{let o=i.PATTERN;try{let s=Fl(o),l=new e;return l.visit(s),l.found}catch{return Kz.test(o.source)}});return _(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Oe.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Yz(t){let e=Ut(t,r=>{let i=r[is];return i instanceof RegExp&&(i.multiline||i.global)});return _(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Oe.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Xz(t){let e=[],n=_(t,o=>nt(t,(s,l)=>(o.PATTERN.source===l.PATTERN.source&&!Re(e,l)&&l.PATTERN!==Ke.NA&&(e.push(l),s.push(l)),s),[]));n=Dr(n);let r=Ut(n,o=>o.length>1);return _(r,o=>{let s=_(o,a=>a.name);return{message:`The same RegExp pattern ->${kt(o).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:Oe.DUPLICATE_PATTERNS_FOUND,tokenTypes:o}})}function Zz(t){let e=Ut(t,r=>{if(!z(r,"GROUP"))return!1;let i=r.GROUP;return i!==Ke.SKIPPED&&i!==Ke.NA&&!ct(i)});return _(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Oe.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function Qz(t,e){let n=Ut(t,i=>i.PUSH_MODE!==void 0&&!Re(e,i.PUSH_MODE));return _(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:Oe.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Jz(t){let e=[],n=nt(t,(r,i,o)=>{let s=i.PATTERN;return s===Ke.NA||(ct(s)?r.push({str:s,idx:o,tokenType:i}):$n(s)&&tU(s)&&r.push({str:s.source,idx:o,tokenType:i})),r},[]);return F(t,(r,i)=>{F(n,({str:o,idx:s,tokenType:l})=>{if(i<s&&eU(o,r.PATTERN)){let a=`Token: ->${l.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:a,type:Oe.UNREACHABLE_PATTERN,tokenTypes:[r,l]})}})}),e}function eU(t,e){if($n(e)){let n=e.exec(t);return n!==null&&n.index===0}else{if(Zt(e))return e(t,0,[],{});if(z(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function tU(t){return Br([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function oO(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function sO(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function uO(t,e,n){let r=[];return z(t,zl)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+zl+`> property in its definition
`,type:Oe.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),z(t,qd)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+qd+`> property in its definition
`,type:Oe.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),z(t,qd)&&z(t,zl)&&!z(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${zl}: <${t.defaultMode}>which does not exist
`,type:Oe.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),z(t,qd)&&F(t.modes,(i,o)=>{F(i,(s,l)=>{if(Vt(s))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${o}> at index: <${l}>
`,type:Oe.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(z(s,"LONGER_ALT")){let a=H(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];F(a,u=>{!Vt(u)&&!Re(i,u)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${s.name}> outside of mode <${o}>
`,type:Oe.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function cO(t,e,n){let r=[],i=!1,o=Dr(ut(ce(t.modes))),s=ao(o,a=>a[is]===Ke.NA),l=mO(n);return e&&F(s,a=>{let u=pO(a,l);if(u!==!1){let f={message:rU(a,u),type:u.issue,tokenType:a};r.push(f)}else z(a,"LINE_BREAKS")?a.LINE_BREAKS===!0&&(i=!0):Kd(l,a.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Oe.NO_LINE_BREAKS_FLAGS}),r}function fO(t){let e={},n=ge(t);return F(n,r=>{let i=t[r];if(H(i))e[r]=[];else throw Error("non exhaustive match")}),e}function hO(t){let e=t.PATTERN;if($n(e))return!1;if(Zt(e))return!0;if(z(e,"exec"))return!0;if(ct(e))return!1;throw Error("non exhaustive match")}function nU(t){return ct(t)&&t.length===1?t.charCodeAt(0):!1}var dO={test:function(t){let e=t.length;for(let n=this.lastIndex;n<e;n++){let r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function pO(t,e){if(z(t,"LINE_BREAKS"))return!1;if($n(t.PATTERN)){try{Kd(e,t.PATTERN)}catch(n){return{issue:Oe.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(ct(t.PATTERN))return!1;if(hO(t))return{issue:Oe.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function rU(t,e){if(e.issue===Oe.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===Oe.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function mO(t){return _(t,n=>ct(n)?n.charCodeAt(0):n)}function U1(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}var Bl=256,Yd=[];function zr(t){return t<Bl?t:Yd[t]}function iU(){if(K(Yd)){Yd=new Array(65536);for(let t=0;t<65536;t++)Yd[t]=t>255?255+~~(t/255):t}}function ui(t,e){let n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function Ul(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var gO=1,xO={};function ci(t){let e=oU(t);sU(e),aU(e),lU(e),F(e,n=>{n.isParent=n.categoryMatches.length>0})}function oU(t){let e=be(t),n=t,r=!0;for(;r;){n=Dr(ut(_(n,o=>o.CATEGORIES)));let i=lo(n,e);e=e.concat(i),K(i)?r=!1:n=i}return e}function sU(t){F(t,e=>{H1(e)||(xO[gO]=e,e.tokenTypeIdx=gO++),yO(e)&&!H(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),yO(e)||(e.CATEGORIES=[]),uU(e)||(e.categoryMatches=[]),cU(e)||(e.categoryMatchesMap={})})}function lU(t){F(t,e=>{e.categoryMatches=[],F(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(xO[r].tokenTypeIdx)})})}function aU(t){F(t,e=>{vO([],e)})}function vO(t,e){F(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),F(e.CATEGORIES,n=>{let r=t.concat(e);Re(r,n)||vO(r,n)})}function H1(t){return z(t,"tokenTypeIdx")}function yO(t){return z(t,"CATEGORIES")}function uU(t){return z(t,"categoryMatches")}function cU(t){return z(t,"categoryMatchesMap")}function SO(t){return z(t,"tokenTypeIdx")}var W1={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var Oe;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Oe||(Oe={}));var Ku={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:W1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Ku);var Ke=class{constructor(e,n=Ku){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,o)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${i}>`);let{time:l,value:a}=Uu(o),u=l>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${s}<-- <${i}> time: ${l}ms`),this.traceInitIndent--,a}else return o()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Ot({},Ku,n);let r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,o=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Ku.lineTerminatorsPattern)this.config.lineTerminatorsPattern=dO;else if(this.config.lineTerminatorCharacters===Ku.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),H(e)?i={modes:{defaultMode:be(e)},defaultMode:zl}:(o=!1,i=be(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(uO(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(cO(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},F(i.modes,(l,a)=>{i.modes[a]=ao(l,u=>Vt(u))});let s=ge(i.modes);if(F(i.modes,(l,a)=>{this.TRACE_INIT(`Mode: <${a}> processing`,()=>{if(this.modes.push(a),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(aO(l,s))}),K(this.lexerDefinitionErrors)){ci(l);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=lO(l,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[a]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[a]=u.charCodeToPatternIdxToConfig,this.emptyGroups=Ot({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[a]=u.canBeOptimized}})}),this.defaultMode=i.defaultMode,!K(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let a=_(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+a)}F(this.lexerDefinitionWarning,l=>{zu(l.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(V1?(this.chopInput=jn,this.match=this.matchWithTest):(this.updateLastIndex=Pe,this.match=this.matchWithExec),o&&(this.handleModes=Pe),this.trackStartLines===!1&&(this.computeNewColumn=jn),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Pe),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let l=nt(this.canModeBeOptimized,(a,u,c)=>(u===!1&&a.push(c),a),[]);if(n.ensureOptimizations&&!K(l))throw Error(`Lexer Modes: < ${l.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{tO()}),this.TRACE_INIT("toFastProperties",()=>{Vu(this)})})}tokenize(e,n=this.defaultMode){if(!K(this.lexerDefinitionErrors)){let i=_(this.lexerDefinitionErrors,o=>o.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,i,o,s,l,a,u,c,f,h,d,g,x,v,p,m,y=e,S=y.length,k=0,w=0,C=this.hasCustom?0:Math.floor(e.length/10),T=new Array(C),I=[],L=this.trackStartLines?1:void 0,U=this.trackStartLines?1:void 0,B=fO(this.emptyGroups),j=this.trackStartLines,G=this.config.lineTerminatorsPattern,Z=0,le=[],Te=[],Ue=[],ne=[];Object.freeze(ne);let de;function qe(){return le}function it(ot){let In=zr(ot),cs=Te[In];return cs===void 0?ne:cs}let On=ot=>{if(Ue.length===1&&ot.tokenType.PUSH_MODE===void 0){let In=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(ot);I.push({offset:ot.startOffset,line:ot.startLine,column:ot.startColumn,length:ot.image.length,message:In})}else{Ue.pop();let In=Fr(Ue);le=this.patternIdxToConfig[In],Te=this.charCodeToPatternIdxToConfig[In],Z=le.length;let cs=this.canModeBeOptimized[In]&&this.config.safeMode===!1;Te&&cs?de=it:de=qe}};function fr(ot){Ue.push(ot),Te=this.charCodeToPatternIdxToConfig[ot],le=this.patternIdxToConfig[ot],Z=le.length,Z=le.length;let In=this.canModeBeOptimized[ot]&&this.config.safeMode===!1;Te&&In?de=it:de=qe}fr.call(this,n);let dt,fo=this.config.recoveryEnabled;for(;k<S;){a=null;let ot=y.charCodeAt(k),In=de(ot),cs=In.length;for(r=0;r<cs;r++){dt=In[r];let pn=dt.pattern;u=null;let Ur=dt.short;if(Ur!==!1?ot===Ur&&(a=pn):dt.isCustom===!0?(m=pn.exec(y,k,T,B),m!==null?(a=m[0],m.payload!==void 0&&(u=m.payload)):a=null):(this.updateLastIndex(pn,k),a=this.match(pn,e,k)),a!==null){if(l=dt.longerAlt,l!==void 0){let hi=l.length;for(o=0;o<hi;o++){let Vr=le[l[o]],ho=Vr.pattern;if(c=null,Vr.isCustom===!0?(m=ho.exec(y,k,T,B),m!==null?(s=m[0],m.payload!==void 0&&(c=m.payload)):s=null):(this.updateLastIndex(ho,k),s=this.match(ho,e,k)),s&&s.length>a.length){a=s,u=c,dt=Vr;break}}}break}}if(a!==null){if(f=a.length,h=dt.group,h!==void 0&&(d=dt.tokenTypeIdx,g=this.createTokenInstance(a,k,d,dt.tokenType,L,U,f),this.handlePayload(g,u),h===!1?w=this.addToken(T,w,g):B[h].push(g)),e=this.chopInput(e,f),k=k+f,U=this.computeNewColumn(U,f),j===!0&&dt.canLineTerminator===!0){let pn=0,Ur,hi;G.lastIndex=0;do Ur=G.test(a),Ur===!0&&(hi=G.lastIndex-1,pn++);while(Ur===!0);pn!==0&&(L=L+pn,U=f-hi,this.updateTokenEndLineColumnLocation(g,h,hi,pn,L,U,f))}this.handleModes(dt,On,fr,g)}else{let pn=k,Ur=L,hi=U,Vr=fo===!1;for(;Vr===!1&&k<S;)for(e=this.chopInput(e,1),k++,i=0;i<Z;i++){let ho=le[i],Ep=ho.pattern,Cx=ho.short;if(Cx!==!1?y.charCodeAt(k)===Cx&&(Vr=!0):ho.isCustom===!0?Vr=Ep.exec(y,k,T,B)!==null:(this.updateLastIndex(Ep,k),Vr=Ep.exec(e)!==null),Vr===!0)break}if(x=k-pn,U=this.computeNewColumn(U,x),p=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y,pn,x,Ur,hi),I.push({offset:pn,line:Ur,column:hi,length:x,message:p}),fo===!1)break}}return this.hasCustom||(T.length=w),{tokens:T,groups:B,errors:I}}handleModes(e,n,r,i){if(e.pop===!0){let o=e.push;n(i),o!==void 0&&r.call(this,o)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,i,o,s,l){let a,u;n!==void 0&&(a=r===l-1,u=a?-1:0,i===1&&a===!0||(e.endLine=o+u,e.endColumn=s-1+-u))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,n,r,i,o,s){return{image:e,startOffset:n,startLine:o,startColumn:s,tokenTypeIdx:r,tokenType:i}}createFullToken(e,n,r,i,o,s,l){return{image:e,startOffset:n,endOffset:n+l-1,startLine:o,endLine:o,startColumn:s,endColumn:s+l-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){let r=e.exec(n);return r!==null?r[0]:null}};Ke.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Ke.NA=/NOT_APPLICABLE/;function os(t){return j1(t)?t.LABEL:t.name}function j1(t){return ct(t.LABEL)&&t.LABEL!==""}var fU="parent",kO="categories",wO="label",CO="group",bO="push_mode",EO="pop_mode",TO="longer_alt",AO="line_breaks",RO="start_chars_hint";function ft(t){return hU(t)}function hU(t){let e=t.pattern,n={};if(n.name=t.name,Vt(e)||(n.PATTERN=e),z(t,fU))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return z(t,kO)&&(n.CATEGORIES=t[kO]),ci([n]),z(t,wO)&&(n.LABEL=t[wO]),z(t,CO)&&(n.GROUP=t[CO]),z(t,EO)&&(n.POP_MODE=t[EO]),z(t,bO)&&(n.PUSH_MODE=t[bO]),z(t,TO)&&(n.LONGER_ALT=t[TO]),z(t,AO)&&(n.LINE_BREAKS=t[AO]),z(t,RO)&&(n.START_CHARS_HINT=t[RO]),n}var ur=ft({name:"EOF",pattern:Ke.NA});ci([ur]);function ss(t,e,n,r,i,o,s,l){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:s,endColumn:l,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function G1(t,e){return ui(t,e)}var Xd={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${j1(t)?`--> ${os(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){let o="Expecting: ",l=`
but found: '`+kt(e).image+"'";if(r)return o+r+l;{let a=nt(t,(h,d)=>h.concat(d),[]),u=_(a,h=>`[${_(h,d=>os(d)).join(", ")}]`),f=`one of these possible Token sequences:
${_(u,(h,d)=>`  ${d+1}. ${h}`).join(`
`)}`;return o+f+l}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){let i="Expecting: ",s=`
but found: '`+kt(e).image+"'";if(n)return i+n+s;{let a=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${_(t,u=>`[${_(u,c=>os(c)).join(",")}]`).join(" ,")}>`;return i+a+s}}};Object.freeze(Xd);var OO={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},cr={buildDuplicateFoundError(t,e){function n(c){return c instanceof Q?c.terminalType.name:c instanceof xe?c.nonTerminalName:""}let r=t.name,i=kt(e),o=i.idx,s=hn(i),l=n(i),a=o>0,u=`->${s}${a?o:""}<- ${l?`with argument: ->${l}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){let e=_(t.prefixPath,i=>os(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){let e=_(t.prefixPath,i=>os(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx,r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=hn(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){let e=t.topLevelRule.name,n=_(t.leftRecursionPath,o=>o.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Jt?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function IO(t,e){let n=new $1(t,e);return n.resolveRefs(),n.errors}var $1=class extends en{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){F(ce(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{let r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:ht.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var K1=class extends ai{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=be(this.path.ruleStack).reverse(),this.occurrenceStack=be(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let i=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){K(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Zd=class extends K1{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let i=n.concat(r),o=new ve({definition:i});this.possibleTokTypes=ns(o),this.found=!0}}},Vl=class extends ai{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},Qd=class extends Vl{walkMany(e,n,r){if(e.idx===this.occurrence){let i=kt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,n,r)}},qu=class extends Vl{walkManySep(e,n,r){if(e.idx===this.occurrence){let i=kt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,n,r)}},Jd=class extends Vl{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){let i=kt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,n,r)}},Yu=class extends Vl{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){let i=kt(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof Q&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,n,r)}};function ep(t,e,n=[]){n=be(n);let r=[],i=0;function o(l){return l.concat(je(t,i+1))}function s(l){let a=ep(o(l),e,n);return r.concat(a)}for(;n.length<e&&i<t.length;){let l=t[i];if(l instanceof ve)return s(l.definition);if(l instanceof xe)return s(l.definition);if(l instanceof Ee)r=s(l.definition);else if(l instanceof Ge){let a=l.definition.concat([new oe({definition:l.definition})]);return s(a)}else if(l instanceof $e){let a=[new ve({definition:l.definition}),new oe({definition:[new Q({terminalType:l.separator})].concat(l.definition)})];return s(a)}else if(l instanceof Be){let a=l.definition.concat([new oe({definition:[new Q({terminalType:l.separator})].concat(l.definition)})]);r=s(a)}else if(l instanceof oe){let a=l.definition.concat([new oe({definition:l.definition})]);r=s(a)}else{if(l instanceof ze)return F(l.definition,a=>{K(a.definition)===!1&&(r=s(a.definition))}),r;if(l instanceof Q)n.push(l.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:je(t,i)}),r}function tp(t,e,n,r){let i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE",l=!1,a=e.length,u=a-r-1,c=[],f=[];for(f.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!K(f);){let h=f.pop();if(h===s){l&&Fr(f).idx<=u&&f.pop();continue}let d=h.def,g=h.idx,x=h.ruleStack,v=h.occurrenceStack;if(K(d))continue;let p=d[0];if(p===i){let m={idx:g,def:je(d),ruleStack:li(x),occurrenceStack:li(v)};f.push(m)}else if(p instanceof Q)if(g<a-1){let m=g+1,y=e[m];if(n(y,p.terminalType)){let S={idx:m,def:je(d),ruleStack:x,occurrenceStack:v};f.push(S)}}else if(g===a-1)c.push({nextTokenType:p.terminalType,nextTokenOccurrence:p.idx,ruleStack:x,occurrenceStack:v}),l=!0;else throw Error("non exhaustive match");else if(p instanceof xe){let m=be(x);m.push(p.nonTerminalName);let y=be(v);y.push(p.idx);let S={idx:g,def:p.definition.concat(o,je(d)),ruleStack:m,occurrenceStack:y};f.push(S)}else if(p instanceof Ee){let m={idx:g,def:je(d),ruleStack:x,occurrenceStack:v};f.push(m),f.push(s);let y={idx:g,def:p.definition.concat(je(d)),ruleStack:x,occurrenceStack:v};f.push(y)}else if(p instanceof Ge){let m=new oe({definition:p.definition,idx:p.idx}),y=p.definition.concat([m],je(d)),S={idx:g,def:y,ruleStack:x,occurrenceStack:v};f.push(S)}else if(p instanceof $e){let m=new Q({terminalType:p.separator}),y=new oe({definition:[m].concat(p.definition),idx:p.idx}),S=p.definition.concat([y],je(d)),k={idx:g,def:S,ruleStack:x,occurrenceStack:v};f.push(k)}else if(p instanceof Be){let m={idx:g,def:je(d),ruleStack:x,occurrenceStack:v};f.push(m),f.push(s);let y=new Q({terminalType:p.separator}),S=new oe({definition:[y].concat(p.definition),idx:p.idx}),k=p.definition.concat([S],je(d)),w={idx:g,def:k,ruleStack:x,occurrenceStack:v};f.push(w)}else if(p instanceof oe){let m={idx:g,def:je(d),ruleStack:x,occurrenceStack:v};f.push(m),f.push(s);let y=new oe({definition:p.definition,idx:p.idx}),S=p.definition.concat([y],je(d)),k={idx:g,def:S,ruleStack:x,occurrenceStack:v};f.push(k)}else if(p instanceof ze)for(let m=p.definition.length-1;m>=0;m--){let y=p.definition[m],S={idx:g,def:y.definition.concat(je(d)),ruleStack:x,occurrenceStack:v};f.push(S),f.push(s)}else if(p instanceof ve)f.push({idx:g,def:p.definition.concat(je(d)),ruleStack:x,occurrenceStack:v});else if(p instanceof Jt)f.push(dU(p,g,x,v));else throw Error("non exhaustive match")}return c}function dU(t,e,n,r){let i=be(n);i.push(t.name);let o=be(r);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}var _e;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(_e||(_e={}));function rp(t){if(t instanceof Ee||t==="Option")return _e.OPTION;if(t instanceof oe||t==="Repetition")return _e.REPETITION;if(t instanceof Ge||t==="RepetitionMandatory")return _e.REPETITION_MANDATORY;if(t instanceof $e||t==="RepetitionMandatoryWithSeparator")return _e.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Be||t==="RepetitionWithSeparator")return _e.REPETITION_WITH_SEPARATOR;if(t instanceof ze||t==="Alternation")return _e.ALTERNATION;throw Error("non exhaustive match")}function LO(t,e,n,r,i,o){let s=Xu(t,e,n),l=BO(s)?Ul:ui;return o(s,r,l,i)}function NO(t,e,n,r,i,o){let s=Zu(t,e,i,n),l=BO(s)?Ul:ui;return o(s[0],l,r)}function PO(t,e,n,r){let i=t.length,o=zt(t,s=>zt(s,l=>l.length===1));if(e)return function(s){let l=_(s,a=>a.GATE);for(let a=0;a<i;a++){let u=t[a],c=u.length,f=l[a];if(!(f!==void 0&&f.call(this)===!1))e:for(let h=0;h<c;h++){let d=u[h],g=d.length;for(let x=0;x<g;x++){let v=this.LA(x+1);if(n(v,d[x])===!1)continue e}return a}}};if(o&&!r){let s=_(t,a=>ut(a)),l=nt(s,(a,u,c)=>(F(u,f=>{z(a,f.tokenTypeIdx)||(a[f.tokenTypeIdx]=c),F(f.categoryMatches,h=>{z(a,h)||(a[h]=c)})}),a),{});return function(){let a=this.LA(1);return l[a.tokenTypeIdx]}}else return function(){for(let s=0;s<i;s++){let l=t[s],a=l.length;e:for(let u=0;u<a;u++){let c=l[u],f=c.length;for(let h=0;h<f;h++){let d=this.LA(h+1);if(n(d,c[h])===!1)continue e}return s}}}}function _O(t,e,n){let r=zt(t,o=>o.length===1),i=t.length;if(r&&!n){let o=ut(t);if(o.length===1&&K(o[0].categoryMatches)){let l=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===l}}else{let s=nt(o,(l,a,u)=>(l[a.tokenTypeIdx]=!0,F(a.categoryMatches,c=>{l[c]=!0}),l),[]);return function(){let l=this.LA(1);return s[l.tokenTypeIdx]===!0}}}else return function(){e:for(let o=0;o<i;o++){let s=t[o],l=s.length;for(let a=0;a<l;a++){let u=this.LA(a+1);if(e(u,s[a])===!1)continue e}return!0}return!1}}var Y1=class extends ai{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,_e.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,_e.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,_e.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,_e.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,_e.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}},np=class extends en{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,_e.OPTION)}visitRepetition(e){this.checkIsTarget(e,_e.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,_e.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,_e.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,_e.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,_e.ALTERNATION)}};function MO(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function q1(t){let e=[""];for(let n=0;n<t.length;n++){let r=t[n],i=[];for(let o=0;o<e.length;o++){let s=e[o];i.push(s+"_"+r.tokenTypeIdx);for(let l=0;l<r.categoryMatches.length;l++){let a="_"+r.categoryMatches[l];i.push(s+a)}}e=i}return e}function pU(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;let i=t[r];for(let o=0;o<e.length;o++){let s=e[o];if(i[s]===!0)return!1}}return!0}function DO(t,e){let n=_(t,s=>ep([s],1)),r=MO(n.length),i=_(n,s=>{let l={};return F(s,a=>{let u=q1(a.partialPath);F(u,c=>{l[c]=!0})}),l}),o=n;for(let s=1;s<=e;s++){let l=o;o=MO(l.length);for(let a=0;a<l.length;a++){let u=l[a];for(let c=0;c<u.length;c++){let f=u[c].partialPath,h=u[c].suffixDef,d=q1(f);if(pU(i,d,a)||K(h)||f.length===e){let x=r[a];if(ip(x,f)===!1){x.push(f);for(let v=0;v<d.length;v++){let p=d[v];i[a][p]=!0}}}else{let x=ep(h,s+1,f);o[a]=o[a].concat(x),F(x,v=>{let p=q1(v.partialPath);F(p,m=>{i[a][m]=!0})})}}}}return r}function Xu(t,e,n,r){let i=new np(t,_e.ALTERNATION,r);return e.accept(i),DO(i.result,n)}function Zu(t,e,n,r){let i=new np(t,n);e.accept(i);let o=i.result,l=new Y1(e,t,n).startWalking(),a=new ve({definition:o}),u=new ve({definition:l});return DO([a,u],r)}function ip(t,e){e:for(let n=0;n<t.length;n++){let r=t[n];if(r.length===e.length){for(let i=0;i<r.length;i++){let o=e[i],s=r[i];if((o===s||s.categoryMatchesMap[o.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function FO(t,e){return t.length<e.length&&zt(t,(n,r)=>{let i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function BO(t){return zt(t,e=>zt(e,n=>zt(n,r=>K(r.categoryMatches))))}function zO(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return _(e,n=>Object.assign({type:ht.CUSTOM_LOOKAHEAD_VALIDATION},n))}function UO(t,e,n,r){let i=Qt(t,a=>mU(a,n)),o=kU(t,e,n),s=Qt(t,a=>xU(a,n)),l=Qt(t,a=>yU(a,t,r,n));return i.concat(o,s,l)}function mU(t,e){let n=new X1;t.accept(n);let r=n.allProductions,i=M1(r,gU),o=fn(i,l=>l.length>1);return _(ce(o),l=>{let a=kt(l),u=e.buildDuplicateFoundError(t,l),c=hn(a),f={message:u,type:ht.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:c,occurrence:a.idx},h=VO(a);return h&&(f.parameter=h),f})}function gU(t){return`${hn(t)}_#_${t.idx}_#_${VO(t)}`}function VO(t){return t instanceof Q?t.terminalType.name:t instanceof xe?t.nonTerminalName:""}var X1=class extends en{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function yU(t,e,n,r){let i=[];if(nt(e,(s,l)=>l.name===t.name?s+1:s,0)>1){let s=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:s,type:ht.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function HO(t,e,n){let r=[],i;return Re(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:ht.INVALID_RULE_OVERRIDE,ruleName:t})),r}function Q1(t,e,n,r=[]){let i=[],o=op(e.definition);if(K(o))return[];{let s=t.name;Re(o,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:ht.LEFT_RECURSION,ruleName:s});let a=lo(o,r.concat([t])),u=Qt(a,c=>{let f=be(r);return f.push(c),Q1(t,c,n,f)});return i.concat(u)}}function op(t){let e=[];if(K(t))return e;let n=kt(t);if(n instanceof xe)e.push(n.referencedRule);else if(n instanceof ve||n instanceof Ee||n instanceof Ge||n instanceof $e||n instanceof Be||n instanceof oe)e=e.concat(op(n.definition));else if(n instanceof ze)e=ut(_(n.definition,o=>op(o.definition)));else if(!(n instanceof Q))throw Error("non exhaustive match");let r=ts(n),i=t.length>1;if(r&&i){let o=je(t);return e.concat(op(o))}else return e}var Qu=class extends en{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function WO(t,e){let n=new Qu;t.accept(n);let r=n.alternations;return Qt(r,o=>{let s=li(o.definition);return Qt(s,(l,a)=>{let u=tp([l],[],ui,1);return K(u)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:o,emptyChoiceIdx:a}),type:ht.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:o.idx,alternative:a+1}]:[]})})}function jO(t,e,n){let r=new Qu;t.accept(r);let i=r.alternations;return i=ao(i,s=>s.ignoreAmbiguities===!0),Qt(i,s=>{let l=s.idx,a=s.maxLookahead||e,u=Xu(l,t,a,s),c=vU(u,s,t,n),f=SU(u,s,t,n);return c.concat(f)})}var Z1=class extends en{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function xU(t,e){let n=new Qu;t.accept(n);let r=n.alternations;return Qt(r,o=>o.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:o}),type:ht.TOO_MANY_ALTS,ruleName:t.name,occurrence:o.idx}]:[])}function GO(t,e,n){let r=[];return F(t,i=>{let o=new Z1;i.accept(o);let s=o.allProductions;F(s,l=>{let a=rp(l),u=l.maxLookahead||e,c=l.idx,h=Zu(c,i,a,u)[0];if(K(ut(h))){let d=n.buildEmptyRepetitionError({topLevelRule:i,repetition:l});r.push({message:d,type:ht.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function vU(t,e,n,r){let i=[],o=nt(t,(l,a,u)=>(e.definition[u].ignoreAmbiguities===!0||F(a,c=>{let f=[u];F(t,(h,d)=>{u!==d&&ip(h,c)&&e.definition[d].ignoreAmbiguities!==!0&&f.push(d)}),f.length>1&&!ip(i,c)&&(i.push(c),l.push({alts:f,path:c}))}),l),[]);return _(o,l=>{let a=_(l.alts,c=>c+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:a,prefixPath:l.path}),type:ht.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:l.alts}})}function SU(t,e,n,r){let i=nt(t,(s,l,a)=>{let u=_(l,c=>({idx:a,path:c}));return s.concat(u)},[]);return Dr(Qt(i,s=>{if(e.definition[s.idx].ignoreAmbiguities===!0)return[];let a=s.idx,u=s.path,c=Ut(i,h=>e.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<a&&FO(h.path,u));return _(c,h=>{let d=[h.idx+1,a+1],g=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:d,prefixPath:h.path}),type:ht.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:g,alternatives:d}})}))}function kU(t,e,n){let r=[],i=_(e,o=>o.name);return F(t,o=>{let s=o.name;if(Re(i,s)){let l=n.buildNamespaceConflictError(o);r.push({message:l,type:ht.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),r}function $O(t){let e=Ll(t,{errMsgProvider:OO}),n={};return F(t.rules,r=>{n[r.name]=r}),IO(n,e.errMsgProvider)}function KO(t){return t=Ll(t,{errMsgProvider:cr}),UO(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var qO="MismatchedTokenException",YO="NoViableAltException",XO="EarlyExitException",ZO="NotAllInputParsedException",QO=[qO,YO,XO,ZO];Object.freeze(QO);function co(t){return Re(QO,t.name)}var Hl=class extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},ls=class extends Hl{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=qO}},Ju=class extends Hl{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=YO}},ec=class extends Hl{constructor(e,n){super(e,n),this.name=ZO}},tc=class extends Hl{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=XO}};var J1={},tx="InRuleRecoveryException",ex=class extends Error{constructor(e){super(e),this.name=tx}},sp=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=z(e,"recoveryEnabled")?e.recoveryEnabled:dn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=wU)}getTokenToInsert(e){let n=ss(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,i){let o=this.findReSyncTokenType(),s=this.exportLexerState(),l=[],a=!1,u=this.LA(1),c=this.LA(1),f=()=>{let h=this.LA(0),d=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:h,ruleName:this.getCurrRuleFullName()}),g=new ls(d,u,this.LA(0));g.resyncedTokens=li(l),this.SAVE_ERROR(g)};for(;!a;)if(this.tokenMatcher(c,i)){f();return}else if(r.call(this)){f(),e.apply(this,n);return}else this.tokenMatcher(c,o)?a=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,l));this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){let r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new ex("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||K(n))return!1;let r=this.LA(1);return Br(n,o=>this.tokenMatcher(r,o))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return Re(r,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),n=this.LA(1),r=2;for(;;){let i=Br(e,o=>G1(n,o));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return J1;let e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return _(e,(r,i)=>i===0?J1:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){let e=_(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return ut(e)}getFollowSetFromFollowKey(e){if(e===J1)return[ur];let n=e.ruleName+e.idxInCallingRule+Hd+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,ur)||n.push(e),n}reSyncTo(e){let n=[],r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return li(n)}attemptInRepetitionRecovery(e,n,r,i,o,s,l){}getCurrentGrammarPath(e,n){let r=this.getHumanReadableRuleStack(),i=be(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return _(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function wU(t,e,n,r,i,o,s){let l=this.getKeyForAutomaticLookahead(r,i),a=this.firstAfterRepMap[l];if(a===void 0){let h=this.getCurrRuleFullName(),d=this.getGAstProductions()[h];a=new o(d,i).startWalking(),this.firstAfterRepMap[l]=a}let u=a.token,c=a.occurrence,f=a.isEndOfRule;this.RULE_STACK.length===1&&f&&u===void 0&&(u=ur,c=1),!(u===void 0||c===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,c,s)&&this.tryInRepetitionRecovery(t,e,n,u)}function lp(t,e,n){return n|e|t}var nc=class{constructor(e){var n;this.maxLookahead=(n=e?.maxLookahead)!==null&&n!==void 0?n:dn.maxLookahead}validate(e){let n=this.validateNoLeftRecursion(e.rules);if(K(n)){let r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),o=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...i,...o]}return n}validateNoLeftRecursion(e){return Qt(e,n=>Q1(n,n,cr))}validateEmptyOrAlternatives(e){return Qt(e,n=>WO(n,cr))}validateAmbiguousAlternationAlternatives(e,n){return Qt(e,r=>jO(r,n,cr))}validateSomeNonEmptyLookaheadPath(e,n){return GO(e,n,cr)}buildLookaheadForAlternation(e){return LO(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,PO)}buildLookaheadForOptional(e){return NO(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,rp(e.prodType),_O)}};var up=class{initLooksAhead(e){this.dynamicTokensEnabled=z(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:dn.dynamicTokensEnabled,this.maxLookahead=z(e,"maxLookahead")?e.maxLookahead:dn.maxLookahead,this.lookaheadStrategy=z(e,"lookaheadStrategy")?e.lookaheadStrategy:new nc({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){F(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{let{alternation:r,repetition:i,option:o,repetitionMandatory:s,repetitionMandatoryWithSeparator:l,repetitionWithSeparator:a}=CU(n);F(r,u=>{let c=u.idx===0?"":u.idx;this.TRACE_INIT(`${hn(u)}${c}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:n,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=lp(this.fullRuleNameToShort[n.name],256,u.idx);this.setLaFuncCache(h,f)})}),F(i,u=>{this.computeLookaheadFunc(n,u.idx,768,"Repetition",u.maxLookahead,hn(u))}),F(o,u=>{this.computeLookaheadFunc(n,u.idx,512,"Option",u.maxLookahead,hn(u))}),F(s,u=>{this.computeLookaheadFunc(n,u.idx,1024,"RepetitionMandatory",u.maxLookahead,hn(u))}),F(l,u=>{this.computeLookaheadFunc(n,u.idx,1536,"RepetitionMandatoryWithSeparator",u.maxLookahead,hn(u))}),F(a,u=>{this.computeLookaheadFunc(n,u.idx,1280,"RepetitionWithSeparator",u.maxLookahead,hn(u))})})})}computeLookaheadFunc(e,n,r,i,o,s){this.TRACE_INIT(`${s}${n===0?"":n}`,()=>{let l=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:o||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),a=lp(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(a,l)})}getKeyForAutomaticLookahead(e,n){let r=this.getLastExplicitRuleShortName();return lp(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}},nx=class extends en{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},ap=new nx;function CU(t){ap.reset(),t.accept(ap);let e=ap.dslMethods;return ap.reset(),e}function ox(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function sx(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function JO(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function eI(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}var bU="name";function lx(t,e){Object.defineProperty(t,bU,{enumerable:!1,configurable:!0,writable:!1,value:e})}function EU(t,e){let n=ge(t),r=n.length;for(let i=0;i<r;i++){let o=n[i],s=t[o],l=s.length;for(let a=0;a<l;a++){let u=s[a];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}function tI(t,e){let n=function(){};lx(n,t+"BaseSemantics");let r={visit:function(i,o){if(H(i)&&(i=i[0]),!Vt(i))return this[i.name](i.children,o)},validateVisitor:function(){let i=TU(this,e);if(!K(i)){let o=_(i,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${o.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function nI(t,e,n){let r=function(){};lx(r,t+"BaseSemanticsWithDefaults");let i=Object.create(n.prototype);return F(e,o=>{i[o]=EU}),r.prototype=i,r.prototype.constructor=r,r}var ax;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(ax||(ax={}));function TU(t,e){return AU(t,e)}function AU(t,e){let n=Ut(e,i=>Zt(t[i])===!1),r=_(n,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:ax.MISSING_METHOD,methodName:i}));return Dr(r)}var dp=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=z(e,"nodeLocationTracking")?e.nodeLocationTracking:dn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Pe,this.cstFinallyStateUpdate=Pe,this.cstPostTerminal=Pe,this.cstPostNonTerminal=Pe,this.cstPostRule=Pe;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=sx,this.setNodeLocationFromNode=sx,this.cstPostRule=Pe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Pe,this.setNodeLocationFromNode=Pe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=ox,this.setNodeLocationFromNode=ox,this.cstPostRule=Pe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Pe,this.setNodeLocationFromNode=Pe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Pe,this.setNodeLocationFromNode=Pe,this.cstPostRule=Pe,this.setInitialNodeLocation=Pe;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){let n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){let r=this.CST_STACK[this.CST_STACK.length-1];JO(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){let r=this.CST_STACK[this.CST_STACK.length-1];eI(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(Vt(this.baseCstVisitorConstructor)){let e=tI(this.className,ge(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Vt(this.baseCstVisitorWithDefaultsConstructor)){let e=nI(this.className,ge(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var pp=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Wl}LA(e){let n=this.currIdx+e;return n<0||this.tokVectorLength<=n?Wl:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var mp=class{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=jl){if(Re(this.definedRulesNames,e)){let s={message:cr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ht.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);let i=this.defineRule(e,n,r);return this[e]=i,i}OVERRIDE_RULE(e,n,r=jl){let i=HO(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let o=this.defineRule(e,n,r);return this[e]=o,o}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(co(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Vd(ce(this.gastProductionsCache))}};var gp=class{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Ul,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},z(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(H(e)){if(K(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(H(e))this.tokensMap=nt(e,(o,s)=>(o[s.name]=s,o),{});else if(z(e,"modes")&&zt(ut(ce(e.modes)),SO)){let o=ut(ce(e.modes)),s=Nl(o);this.tokensMap=nt(s,(l,a)=>(l[a.name]=a,l),{})}else if(Ne(e))this.tokensMap=be(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=ur;let r=z(e,"modes")?ut(ce(e.modes)):ce(e),i=zt(r,o=>K(o.categoryMatches));this.tokenMatcher=i?Ul:ui,ci(ce(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=z(r,"resyncEnabled")?r.resyncEnabled:jl.resyncEnabled,o=z(r,"recoveryValueFunc")?r.recoveryValueFunc:jl.recoveryValueFunc,s=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;let l;return this.outputCst===!0?l=function(...c){try{this.ruleInvocationStateUpdate(s,e,this.subruleIdx),n.apply(this,c);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}}:l=function(...c){try{return this.ruleInvocationStateUpdate(s,e,this.subruleIdx),n.apply(this,c)}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}},Object.assign(l,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){let i=this.RULE_STACK.length===1,o=n&&!this.isBackTracking()&&this.recoveryEnabled;if(co(e)){let s=e;if(o){let l=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(l))if(s.resyncedTokens=this.reSyncTo(l),this.outputCst){let a=this.CST_STACK[this.CST_STACK.length-1];return a.recoveredNode=!0,a}else return r(e);else{if(this.outputCst){let a=this.CST_STACK[this.CST_STACK.length-1];a.recoveredNode=!0,s.partialCstResult=a}throw s}}else{if(i)return this.moveToTerminatedState(),r(e);throw s}}else throw e}optionInternal(e,n){let r=this.getKeyForAutomaticLookahead(512,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof e!="function"){o=e.DEF;let s=e.GATE;if(s!==void 0){let l=i;i=()=>s.call(this)&&l.call(this)}}else o=e;if(i.call(this)===!0)return o.call(this)}atLeastOneInternal(e,n){let r=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;let s=n.GATE;if(s!==void 0){let l=i;i=()=>s.call(this)&&l.call(this)}}else o=n;if(i.call(this)===!0){let s=this.doSingleRepetition(o);for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o)}else throw this.raiseEarlyExitException(e,_e.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],i,1024,e,Jd)}atLeastOneSepFirstInternal(e,n){let r=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){let i=n.DEF,o=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let l=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,i,Yu],l,1536,e,Yu)}else throw this.raiseEarlyExitException(e,_e.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){let r=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),o;if(typeof n!="function"){o=n.DEF;let l=n.GATE;if(l!==void 0){let a=i;i=()=>l.call(this)&&a.call(this)}}else o=n;let s=!0;for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],i,768,e,Qd,s)}manySepFirstInternal(e,n){let r=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){let i=n.DEF,o=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let l=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,i,qu],l,1280,e,qu)}}repetitionSepSecondInternal(e,n,r,i,o){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,o],r,1536,e,o)}doSingleRepetition(e){let n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){let r=this.getKeyForAutomaticLookahead(256,n),i=H(e)?e:e.DEF,s=this.getLaFuncFromCache(r).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new ec(n,e))}}subruleInternal(e,n,r){let i;try{let o=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=e.apply(this,o),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(o){throw this.subruleInternalError(o,r,e.ruleName)}}subruleInternalError(e,n,r){throw co(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let i;try{let o=this.LA(1);this.tokenMatcher(o,e)===!0?(this.consumeToken(),i=o):this.consumeInternalError(e,o,r)}catch(o){i=this.consumeInternalRecovery(e,n,o)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,n,r){let i,o=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:o,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new ls(i,n,o))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(o){throw o.name===tx?r:o}}else throw r}saveRecogState(){let e=this.errors,n=be(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),ur)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var yp=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=z(e,"errorMessageProvider")?e.errorMessageProvider:dn.errorMessageProvider}SAVE_ERROR(e){if(co(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:be(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return be(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){let i=this.getCurrRuleFullName(),o=this.getGAstProductions()[i],l=Zu(e,o,n,this.maxLookahead)[0],a=[];for(let c=1;c<=this.maxLookahead;c++)a.push(this.LA(c));let u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:l,actual:a,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new tc(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){let r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],o=Xu(e,i,this.maxLookahead),s=[];for(let u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));let l=this.LA(0),a=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:s,previous:l,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Ju(a,this.LA(1),l))}};var xp=class{initContentAssist(){}computeContentAssist(e,n){let r=this.gastProductionsCache[e];if(Vt(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return tp([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let n=kt(e.ruleStack),i=this.getGAstProductions()[n];return new Zd(i,e).startWalking()}};var kp={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(kp);var rI=!0,iI=Math.pow(2,8)-1,sI=ft({name:"RECORDING_PHASE_TOKEN",pattern:Ke.NA});ci([sI]);var lI=ss(sI,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(lI);var OU={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},vp=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let n=e>0?e:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let n=0;n<10;n++){let r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return Wl}topLevelRuleRecord(e,n){try{let r=new Jt({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return ic.call(this,Ee,e,n)}atLeastOneInternalRecord(e,n){ic.call(this,Ge,n,e)}atLeastOneSepFirstInternalRecord(e,n){ic.call(this,$e,n,e,rI)}manyInternalRecord(e,n){ic.call(this,oe,n,e)}manySepFirstInternalRecord(e,n){ic.call(this,Be,n,e,rI)}orInternalRecord(e,n){return IU.call(this,e,n)}subruleInternalRecord(e,n,r){if(Sp(n),!e||z(e,"ruleName")===!1){let l=new Error(`<SUBRULE${oI(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw l.KNOWN_RECORDER_ERROR=!0,l}let i=Fr(this.recordingProdStack),o=e.ruleName,s=new xe({idx:n,nonTerminalName:o,label:r?.LABEL,referencedRule:void 0});return i.definition.push(s),this.outputCst?OU:kp}consumeInternalRecord(e,n,r){if(Sp(n),!H1(e)){let s=new Error(`<CONSUME${oI(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let i=Fr(this.recordingProdStack),o=new Q({idx:n,terminalType:e,label:r?.LABEL});return i.definition.push(o),lI}};function ic(t,e,n,r=!1){Sp(n);let i=Fr(this.recordingProdStack),o=Zt(e)?e:e.DEF,s=new t({definition:[],idx:n});return r&&(s.separator=e.SEP),z(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),i.definition.push(s),this.recordingProdStack.pop(),kp}function IU(t,e){Sp(e);let n=Fr(this.recordingProdStack),r=H(t)===!1,i=r===!1?t:t.DEF,o=new ze({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});z(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD);let s=Bu(i,l=>Zt(l.GATE));return o.hasPredicates=s,n.definition.push(o),F(i,l=>{let a=new ve({definition:[]});o.definition.push(a),z(l,"IGNORE_AMBIGUITIES")?a.ignoreAmbiguities=l.IGNORE_AMBIGUITIES:z(l,"GATE")&&(a.ignoreAmbiguities=!0),this.recordingProdStack.push(a),l.ALT.call(this),this.recordingProdStack.pop()}),kp}function oI(t){return t===0?"":`${t}`}function Sp(t){if(t<0||t>iI){let e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${iI+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var wp=class{initPerformanceTracer(e){if(z(e,"traceInitPerf")){let n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=dn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);let{time:i,value:o}=Uu(n),s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,o}else return n()}};function aI(t,e){e.forEach(n=>{let r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;let o=Object.getOwnPropertyDescriptor(r,i);o&&(o.get||o.set)?Object.defineProperty(t.prototype,i,o):t.prototype[i]=n.prototype[i]})})}var Wl=ss(ur,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Wl);var dn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Xd,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),jl=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),ht;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ht||(ht={}));var Cp=class t{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;let n=this.className;this.TRACE_INIT("toFastProps",()=>{Vu(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),F(this.definedRulesNames,i=>{let s=this[i].originalGrammarAction,l;this.TRACE_INIT(`${i} Rule`,()=>{l=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=l})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=$O({rules:ce(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(K(r)&&this.skipValidations===!1){let i=KO({rules:ce(this.gastProductionsCache),tokenTypes:ce(this.tokensMap),errMsgProvider:cr,grammarName:n}),o=zO({lookaheadStrategy:this.lookaheadStrategy,rules:ce(this.gastProductionsCache),tokenTypes:ce(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,o)}}),K(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let i=eO(ce(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,o;(o=(i=this.lookaheadStrategy).initialize)===null||o===void 0||o.call(i,{rules:ce(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(ce(this.gastProductionsCache))})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!K(this.definitionErrors))throw e=_(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;let r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),z(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=z(n,"skipValidations")?n.skipValidations:dn.skipValidations}};Cp.DEFER_DEFINITION_ERRORS_HANDLING=!1;aI(Cp,[sp,up,dp,pp,gp,mp,yp,xp,vp,wp]);var LU=ft({name:"NewLine",pattern:/\n/}),NU=ft({name:"DirectoryStart",pattern:/\//}),PU=ft({name:"FileExtension",pattern:/\.(tsx|jsx|ts|js|json|css|scss|html|md|py|java|cpp|c|go|rs|rb|php|yaml|yml|xml|sql|sh|bash)/}),_U=ft({name:"Component",pattern:/%[a-zA-Z][a-zA-Z0-9_]*/}),DU=ft({name:"FunctionToken",pattern:/\$[a-zA-Z][a-zA-Z0-9_]*\(\)/}),FU=ft({name:"Reference",pattern:/@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*/}),BU=ft({name:"Variable",pattern:/var[a-zA-Z][a-zA-Z0-9_]*/}),zU=ft({name:"UserNote",pattern:/#/}),UU=ft({name:"StringLiteral",pattern:/"[^"]*"/}),VU=ft({name:"NumberLiteral",pattern:/\d+(\.\d+)?/}),HU=ft({name:"Equals",pattern:/=/}),WU=ft({name:"Identifier",pattern:/[a-zA-Z][a-zA-Z0-9_\-]*/}),jU=ft({name:"Content",pattern:/[^\n\r]+/}),GU=ft({name:"WhiteSpace",pattern:/[ \t]+/,group:Ke.SKIPPED}),$U=[GU,zU,UU,VU,_U,BU,FU,DU,PU,NU,HU,WU,jU,LU],uI=new Ke($U);function KU(t){switch(t){case"DirectoryStart":return"cm-directoryStart";case"Reference":return"cm-reference";case"FunctionToken":return"cm-function";case"Component":return"cm-component";case"Variable":return"cm-variable";case"FileExtension":return"cm-fileExtension";case"Identifier":return"cm-identifier";case"Comment":return"cm-comment";case"StringLiteral":return"cm-string";case"NumberLiteral":return"cm-number";case"BooleanLiteral":return"cm-boolean";case"SuggestionPrefix":return"cm-suggestion-prefix";case"FeedbackPrefix":return"cm-feedback-prefix";case"UserNote":return"cm-user-note";case"ToolTrigger":return"cm-tool-trigger";case"Content":return"cm-content-token";default:return"cm-defaultToken"}}var qU=X.fromClass(class{constructor(t){this.decorations=this.buildDecorations(t.state.doc.toString())}update(t){t.docChanged&&(this.decorations=this.buildDecorations(t.state.doc.toString()))}buildDecorations(t){let e=t.split(`
`),n=[],r=0;for(let o=0;o<e.length;o++){let s=e[o];if(s.trim()){let a=uI.tokenize(s);for(let u of a.tokens){let c=KU(u.tokenType.name),f=O.mark({class:c}),h=r+u.startOffset,d=r+(u.endOffset??u.startOffset+u.image.length-1)+1;h!=null&&d!=null&&h<d&&n.push({from:h,to:d,decoration:f})}this.collectStructuralDecorations(n,s,r,o)}r+=s.length+1}n.sort((o,s)=>o.from-s.from);let i=new Fe;for(let{from:o,to:s,decoration:l}of n)i.add(o,s,l);return i.finish()}collectStructuralDecorations(t,e,n,r){let i=e.match(/^(\s*)/),o=i?i[1]:"",s=Math.floor(o.length/2),l=e.trim();if(!l)return;if(this.isStructuralLine(l)&&s>0){let u=O.mark({class:"cm-structure-connection",attributes:{style:`--parent-indent: ${s-1};`}});t.push({from:n,to:n+e.length,decoration:u})}}isStructuralLine(t){return t.startsWith("/")&&!t.includes(".")||!!t.match(/^[a-zA-Z][a-zA-Z0-9_]*\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)||!!t.match(/^\$[a-zA-Z][a-zA-Z0-9_]*\(\)$/)||!!t.match(/^%[a-zA-Z][a-zA-Z0-9_]*$/)||t.startsWith("#")||!!t.match(/^@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*$/)}},{decorations:t=>t.decorations});function cI(){return qU}function cx(t){let e=t.match(/^(\s*)/);return e?Math.floor(e[1].length/2):0}function fI(t){let e=[],n=t.toString().split(`
`);for(let r=0;r<n.length;r++){let i=n[r],o=i.trim(),s=cx(i);if(!o)continue;let l=null;if(o.startsWith("/")&&!o.includes(".")?l="directory":o.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md|vue|py|java|cpp|c|go|rs|php|rb|swift|kt|dart)$/)?l="file":o.startsWith("%")?l="component":o.startsWith("$")&&o.includes("()")&&(l="function"),l){let a=YU(n,r,s);if(a>r){let u=t.line(r+1).from,c=t.line(a+1).to;e.push({from:u,to:c,type:l,indentLevel:s})}}}return e}function YU(t,e,n){let r=e;for(let i=e+1;i<t.length;i++){let o=t[i];if(!o.trim())continue;if(cx(o)<=n)break;r=i}return r}var dI=re.define({create(t){return fI(t.doc)},update(t,e){return e.docChanged?fI(e.state.doc):t}});function hI(t,e,n){let r=t.field(dI,!1);if(!r)return null;let o=t.doc.lineAt(e),s=o.text,l=s.trim(),a=cx(s);if(!(l.startsWith("/")&&!l.includes(".")||l.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md|vue|py|java|cpp|c|go|rs|php|rb|swift|kt|dart)$/)||l.startsWith("%")||l.startsWith("$")&&l.includes("()")))return null;let c=r.find(f=>f.from<=e&&f.to>=n&&f.indentLevel===a);return c&&c.to>c.from?{from:o.to,to:c.to}:null}function pI(){return[dI,Uy.of(hI),X.fromClass(class{constructor(t){this.view=t}update(t){}}),R.domEventHandlers({keydown(t,e){if(t.ctrlKey&&t.shiftKey&&t.key==="["){t.preventDefault();let{state:n}=e,{selection:r}=n,i=n.doc.lineAt(r.main.head),o=hI(n,i.from,i.to);return o&&e.dispatch({effects:il.of(o)}),!0}if(t.ctrlKey&&t.shiftKey&&t.key==="]"){t.preventDefault();let{state:n}=e,{selection:r}=n,i=n.doc.lineAt(r.main.head);return e.dispatch({effects:qo.of({from:i.from,to:i.to})}),!0}return!1}})]}var fx=class extends He{constructor(n,r=0){super();this.iconType=n;this.level=r}toDOM(){let n=document.createElement("span");switch(n.className=`cm-file-structure-icon cm-${this.iconType}-icon`,n.style.marginLeft=`${this.level*16}px`,n.style.display="inline-block",n.style.width="16px",n.style.height="16px",n.style.marginRight="6px",n.style.verticalAlign="text-top",this.iconType){case"directory":n.innerHTML='<svg viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M853.333333 256H469.333333l-85.333333-85.333333H170.666667c-46.933333 0-85.333333 38.4-85.333334 85.333333v170.666667h853.333334v-85.333334c0-46.933333-38.4-85.333333-85.333334-85.333333z" fill="#FFA000"></path><path d="M853.333333 256H170.666667c-46.933333 0-85.333333 38.4-85.333334 85.333333v426.666667c0 46.933333 38.4 85.333333 85.333334 85.333333h682.666666c46.933333 0 85.333333-38.4 85.333334-85.333333V341.333333c0-46.933333-38.4-85.333333-85.333334-85.333333z" fill="#FFCA28"></path></g></svg>',n.style.color="#f59e0b";break;case"file-jsx":case"file-tsx":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M18.6789 15.9759C18.6789 14.5415 17.4796 13.3785 16 13.3785C14.5206 13.3785 13.3211 14.5415 13.3211 15.9759C13.3211 17.4105 14.5206 18.5734 16 18.5734C17.4796 18.5734 18.6789 17.4105 18.6789 15.9759Z" fill="#53C1DE"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M24.7004 11.1537C25.2661 8.92478 25.9772 4.79148 23.4704 3.39016C20.9753 1.99495 17.7284 4.66843 16.0139 6.27318C14.3044 4.68442 10.9663 2.02237 8.46163 3.42814C5.96751 4.82803 6.73664 8.8928 7.3149 11.1357C4.98831 11.7764 1 13.1564 1 15.9759C1 18.7874 4.98416 20.2888 7.29698 20.9289C6.71658 23.1842 5.98596 27.1909 8.48327 28.5877C10.9973 29.9932 14.325 27.3945 16.0554 25.7722C17.7809 27.3864 20.9966 30.0021 23.4922 28.6014C25.9956 27.1963 25.3436 23.1184 24.7653 20.8625C27.0073 20.221 31 18.7523 31 15.9759C31 13.1835 26.9903 11.7923 24.7004 11.1537ZM24.4162 19.667C24.0365 18.5016 23.524 17.2623 22.8971 15.9821C23.4955 14.7321 23.9881 13.5088 24.3572 12.3509C26.0359 12.8228 29.7185 13.9013 29.7185 15.9759C29.7185 18.07 26.1846 19.1587 24.4162 19.667ZM22.85 27.526C20.988 28.571 18.2221 26.0696 16.9478 24.8809C17.7932 23.9844 18.638 22.9422 19.4625 21.7849C20.9129 21.6602 22.283 21.4562 23.5256 21.1777C23.9326 22.7734 24.7202 26.4763 22.85 27.526ZM9.12362 27.5111C7.26143 26.47 8.11258 22.8946 8.53957 21.2333C9.76834 21.4969 11.1286 21.6865 12.5824 21.8008C13.4123 22.9332 14.2816 23.9741 15.1576 24.8857C14.0753 25.9008 10.9945 28.557 9.12362 27.5111ZM2.28149 15.9759C2.28149 13.874 5.94207 12.8033 7.65904 12.3326C8.03451 13.5165 8.52695 14.7544 9.12123 16.0062C8.51925 17.2766 8.01977 18.5341 7.64085 19.732C6.00369 19.2776 2.28149 18.0791 2.28149 15.9759ZM9.1037 4.50354C10.9735 3.45416 13.8747 6.00983 15.1159 7.16013C14.2444 8.06754 13.3831 9.1006 12.5603 10.2265C11.1494 10.3533 9.79875 10.5569 8.55709 10.8297C8.09125 9.02071 7.23592 5.55179 9.1037 4.50354ZM20.3793 11.5771C21.3365 11.6942 22.2536 11.85 23.1147 12.0406C22.8562 12.844 22.534 13.6841 22.1545 14.5453C21.6044 13.5333 21.0139 12.5416 20.3793 11.5771ZM16.0143 8.0481C16.6054 8.66897 17.1974 9.3623 17.7798 10.1145C16.5985 10.0603 15.4153 10.0601 14.234 10.1137C14.8169 9.36848 15.414 8.67618 16.0143 8.0481ZM9.8565 14.5444C9.48329 13.6862 9.16398 12.8424 8.90322 12.0275C9.75918 11.8418 10.672 11.69 11.623 11.5748C10.9866 12.5372 10.3971 13.5285 9.8565 14.5444ZM11.6503 20.4657C10.6679 20.3594 9.74126 20.2153 8.88556 20.0347C9.15044 19.2055 9.47678 18.3435 9.85796 17.4668C10.406 18.4933 11.0045 19.4942 11.6503 20.4657ZM16.0498 23.9915C15.4424 23.356 14.8365 22.6531 14.2448 21.8971C15.4328 21.9423 16.6231 21.9424 17.811 21.891C17.2268 22.6608 16.6369 23.3647 16.0498 23.9915ZM22.1667 17.4222C22.5677 18.3084 22.9057 19.1657 23.1742 19.9809C22.3043 20.1734 21.3652 20.3284 20.3757 20.4435C21.015 19.4607 21.6149 18.4536 22.1667 17.4222ZM18.7473 20.5941C16.9301 20.72 15.1016 20.7186 13.2838 20.6044C12.2509 19.1415 11.3314 17.603 10.5377 16.0058C11.3276 14.4119 12.2404 12.8764 13.2684 11.4158C15.0875 11.2825 16.9178 11.2821 18.7369 11.4166C19.7561 12.8771 20.6675 14.4086 21.4757 15.9881C20.6771 17.5812 19.7595 19.1198 18.7473 20.5941ZM22.8303 4.4666C24.7006 5.51254 23.8681 9.22726 23.4595 10.8426C22.2149 10.5641 20.8633 10.3569 19.4483 10.2281C18.6239 9.09004 17.7698 8.05518 16.9124 7.15949C18.1695 5.98441 20.9781 3.43089 22.8303 4.4666Z" fill="#53C1DE"></path> </g></svg>',n.style.color="#3b82f6";break;case"file-js":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_js</title><path d="M18.774,19.7a3.727,3.727,0,0,0,3.376,2.078c1.418,0,2.324-.709,2.324-1.688,0-1.173-.931-1.589-2.491-2.272l-.856-.367c-2.469-1.052-4.11-2.37-4.11-5.156,0-2.567,1.956-4.52,5.012-4.52A5.058,5.058,0,0,1,26.9,10.52l-2.665,1.711a2.327,2.327,0,0,0-2.2-1.467,1.489,1.489,0,0,0-1.638,1.467c0,1.027.636,1.442,2.1,2.078l.856.366c2.908,1.247,4.549,2.518,4.549,5.376,0,3.081-2.42,4.769-5.671,4.769a6.575,6.575,0,0,1-6.236-3.5ZM6.686,20c.538.954,1.027,1.76,2.2,1.76,1.124,0,1.834-.44,1.834-2.15V7.975h3.422V19.658c0,3.543-2.078,5.156-5.11,5.156A5.312,5.312,0,0,1,3.9,21.688Z" style="fill:#f5de19"></path></g></svg>',n.style.color="#f59e0b";break;case"file-ts":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_typescript</title><path d="M23.827,8.243A4.424,4.424,0,0,1,26.05,9.524a5.853,5.853,0,0,1,.852,1.143c.011.045-1.534,1.083-2.471,1.662-.034.023-.169-.124-.322-.35a2.014,2.014,0,0,0-1.67-1c-1.077-.074-1.771.49-1.766,1.433a1.3,1.3,0,0,0,.153.666c.237.49.677.784,2.059,1.383,2.544,1.095,3.636,1.817,4.31,2.843a5.158,5.158,0,0,1,.416,4.333,4.764,4.764,0,0,1-3.932,2.815,10.9,10.9,0,0,1-2.708-.028,6.531,6.531,0,0,1-3.616-1.884,6.278,6.278,0,0,1-.926-1.371,2.655,2.655,0,0,1,.327-.208c.158-.09.756-.434,1.32-.761L19.1,19.6l.214.312a4.771,4.771,0,0,0,1.35,1.292,3.3,3.3,0,0,0,3.458-.175,1.545,1.545,0,0,0,.2-1.974c-.276-.395-.84-.727-2.443-1.422a8.8,8.8,0,0,1-3.349-2.055,4.687,4.687,0,0,1-.976-1.777,7.116,7.116,0,0,1-.062-2.268,4.332,4.332,0,0,1,3.644-3.374A9,9,0,0,1,23.827,8.243ZM15.484,9.726l.011,1.454h-4.63V24.328H7.6V11.183H2.97V9.755A13.986,13.986,0,0,1,3.01,8.289c.017-.023,2.832-.034,6.245-.028l6.211.017Z" style="fill:#007acc"></path></g></svg>';break;case"file-css":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 28L4 3H28L26 28L16 31L6 28Z" fill="#1172B8"></path> <path d="M26 5H16V29.5L24 27L26 5Z" fill="#33AADD"></path> <path d="M19.5 17.5H9.5L9 14L17 11.5H9L8.5 8.5H24L23.5 12L17 14.5H23L22 24L16 26L10 24L9.5 19H12.5L13 21.5L16 22.5L19 21.5L19.5 17.5Z" fill="white"></path> </g></svg>',n.style.color="#1172B8";break;case"file-html":n.innerHTML='<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 28L4 3H28L26 28L16 31L6 28Z" fill="#E44D26"></path> <path d="M26 5H16V29.5L24 27L26 5Z" fill="#F16529"></path> <path d="M9.5 17.5L8.5 8H24L23.5 11H11.5L12 14.5H23L22 24L16 26L10 24L9.5 19H12.5L13 21.5L16 22.5L19 21.5L19.5 17.5H9.5Z" fill="white"></path> </g></svg>',n.style.color="#F16529";break;case"file-md":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_markdown</title><rect x="2.5" y="7.955" width="27" height="16.091" style="fill:none;stroke:#755838"></rect><polygon points="5.909 20.636 5.909 11.364 8.636 11.364 11.364 14.773 14.091 11.364 16.818 11.364 16.818 20.636 14.091 20.636 14.091 15.318 11.364 18.727 8.636 15.318 8.636 20.636 5.909 20.636" style="fill:#755838"></polygon><polygon points="22.955 20.636 18.864 16.136 21.591 16.136 21.591 11.364 24.318 11.364 24.318 16.136 27.045 16.136 22.955 20.636" style="fill:#755838"></polygon></g></svg>',n.style.color="#3b82f6";break;case"file-json":n.innerHTML='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>file_type_json</title><path d="M4.014,14.976a2.51,2.51,0,0,0,1.567-.518A2.377,2.377,0,0,0,6.386,13.1,15.261,15.261,0,0,0,6.6,10.156q.012-2.085.075-2.747a5.236,5.236,0,0,1,.418-1.686,3.025,3.025,0,0,1,.755-1.018A3.046,3.046,0,0,1,9,4.125,6.762,6.762,0,0,1,10.544,4h.7V5.96h-.387a2.338,2.338,0,0,0-1.723.468A3.4,3.4,0,0,0,8.709,8.52a36.054,36.054,0,0,1-.137,4.133,4.734,4.734,0,0,1-.768,2.06A4.567,4.567,0,0,1,6.1,16a3.809,3.809,0,0,1,1.992,1.754,8.861,8.861,0,0,1,.618,3.865q0,2.435.05,2.9A1.755,1.755,0,0,0,9.264,25.7a2.639,2.639,0,0,0,1.592.337h.387V28h-.7a5.655,5.655,0,0,1-1.773-.2,2.97,2.97,0,0,1-1.324-.93,3.353,3.353,0,0,1-.681-1.63A24.175,24.175,0,0,1,6.6,22.006,16.469,16.469,0,0,0,6.386,18.9a2.408,2.408,0,0,0-.805-1.361,2.489,2.489,0,0,0-1.567-.524Z" style="fill:#f5de19"></path><path d="M27.986,17.011a2.489,2.489,0,0,0-1.567.524,2.408,2.408,0,0,0-.805,1.361,16.469,16.469,0,0,0-.212,3.109,24.175,24.175,0,0,1-.169,3.234,3.353,3.353,0,0,1-.681,1.63,2.97,2.97,0,0,1-1.324.93,5.655,5.655,0,0,1-1.773.2h-.7V26.04h.387a2.639,2.639,0,0,0,1.592-.337,1.755,1.755,0,0,0,.506-1.186q.05-.462.05-2.9a8.861,8.861,0,0,1,.618-3.865A3.809,3.809,0,0,1,25.9,16a4.567,4.567,0,0,1-1.7-1.286,4.734,4.734,0,0,1-.768-2.06,36.054,36.054,0,0,1-.137-4.133,3.4,3.4,0,0,0-.425-2.092,2.338,2.338,0,0,0-1.723-.468h-.387V4h.7A6.762,6.762,0,0,1,23,4.125a3.046,3.046,0,0,1,1.149.581,3.025,3.025,0,0,1,.755,1.018,5.236,5.236,0,0,1,.418,1.686q.062.662.075,2.747a15.261,15.261,0,0,0,.212,2.947,2.377,2.377,0,0,0,.805,1.355,2.51,2.51,0,0,0,1.567.518Z" style="fill:#f5de19"></path></g></svg>',n.style.color="#3b82f6";break;case"function":n.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.576"></g><g id="SVGRepo_iconCarrier"> <path d="M13.5 4.50012C10.5 3.50012 9.5 7.00012 9.5 7.00012L7 16.0001C7 16.0001 5.5 20.0001 2.5 19.0001M5.5 9.00007H14L16 15.0001C16 15.0001 17 17.0001 18.5 15.5001M11 15.5C13.5 16.5 16.5 8.50001 19 9.00001" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',n.style.color="#10b981";break;case"component":n.innerHTML='<svg viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>function-block</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Combined-Shape" fill="#8b5cf6"> <path d="M362.666667,85.3333333 L362.666333,234.666333 L426.666667,234.666667 L426.666667,277.333333 L362.666333,277.333333 L362.666667,426.666667 L149.333333,426.666667 L149.333333,341.333333 L85.3333333,341.333333 L85.3333333,298.666667 L149.333333,298.666333 L149.333333,213.333333 L85.3333333,213.333333 L85.3333333,170.666667 L149.333333,170.666333 L149.333333,85.3333333 L362.666667,85.3333333 Z M320,128 L192,128 L192,384 L320,384 L320,128 Z"> </path> </g> </g> </g></svg>',n.style.color="#8b5cf6";break;case"reference":n.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M13.0607 8.11097L14.4749 9.52518C17.2086 12.2589 17.2086 16.691 14.4749 19.4247L14.1214 19.7782C11.3877 22.5119 6.95555 22.5119 4.22188 19.7782C1.48821 17.0446 1.48821 12.6124 4.22188 9.87874L5.6361 11.293C3.68348 13.2456 3.68348 16.4114 5.6361 18.364C7.58872 20.3166 10.7545 20.3166 12.7071 18.364L13.0607 18.0104C15.0133 16.0578 15.0133 12.892 13.0607 10.9394L11.6465 9.52518L13.0607 8.11097Z" fill="#f59e0b"></path> <path d="M10.9393 15.8891L9.52513 14.4749C6.79146 11.7412 6.79146 7.309 9.52513 4.57534L9.87868 4.22179C12.6124 1.48812 17.0445 1.48812 19.7782 4.22179C22.5119 6.95546 22.5119 11.3876 19.7782 14.1213L18.364 12.7071C20.3166 10.7544 20.3166 7.58861 18.364 5.63599C16.4114 3.68337 13.2456 3.68337 11.293 5.63599L10.9393 5.98954C8.98670 7.94216 8.98670 11.1080 10.9393 13.0606L12.3535 14.4749L10.9393 15.8891Z" fill="#f59e0b"></path> </g></svg>',n.style.color="#f59e0b";break;case"user_note":n.innerHTML='<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" fill="#000000" transform="matrix(-1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>comment-3</title> <desc>Created with Sketch Beta.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="Icon-Set" sketch:type="MSLayerGroup" transform="translate(-204.000000, -255.000000)" fill="#000000"> <path d="M228,267 C226.896,267 226,267.896 226,269 C226,270.104 226.896,271 228,271 C229.104,271 230,270.104 230,269 C230,267.896 229.104,267 228,267 L228,267 Z M220,281 C218.832,281 217.704,280.864 216.62,280.633 L211.912,283.463 L211.975,278.824 C208.366,276.654 206,273.066 206,269 C206,262.373 212.268,257 220,257 C227.732,257 234,262.373 234,269 C234,275.628 227.732,281 220,281 L220,281 Z M220,255 C211.164,255 204,261.269 204,269 C204,273.419 206.345,277.354 210,279.919 L210,287 L217.009,282.747 C217.979,282.907 218.977,283 220,283 C228.836,283 236,276.732 236,269 C236,261.269 228.836,255 220,255 L220,255 Z M212,267 C210.896,267 210,267.896 210,269 C210,270.104 210.896,271 212,271 C213.104,271 214,270.104 214,269 C214,267.896 213.104,267 212,267 L212,267 Z M220,267 C218.896,267 218,267.896 218,269 C218,270.104 218.896,271 220,271 C221.104,271 222,270.104 222,269 C222,267.896 221.104,267 220,267 L220,267 Z" id="comment-3" sketch:type="MSShapeGroup"> </path> </g> </g> </g></svg>',n.style.color="#6b7280";break;default:n.innerHTML="",n.style.color="#6b7280"}return n}};function XU(t){let e=t.match(/^(\s*)/);return e?Math.floor(e[1].length/2):0}function ZU(t){let e=t.toLowerCase();return e.includes(".ts")||e.includes(".tsx")?"file-ts":e.includes(".js")||e.includes(".jsx")?"file-js":e.includes(".css")||e.includes(".scss")?"file-css":e.includes(".html")?"file-html":e.includes(".md")?"file-md":e.includes(".json")?"file-json":e.includes(".txt")?"file-txt":e.includes(".yml")?"file-yml":e.includes(".yaml")?"file-yaml":"file"}function QU(t,e){let n=[],r=t.trim(),i=XU(t);if(!r)return n;let o="",s=!1;if(r.startsWith("/")&&!r.includes("."))o="directory",s=!0;else if(r.match(/^[a-zA-Z][a-zA-Z0-9_]*\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)){let l=r.match(/\.(tsx?|jsx?|ts|js|json|css|scss|html|md)$/)?.[0]||"";o=ZU(l),s=!0}else r.match(/^\$[a-zA-Z][a-zA-Z0-9_]*\(\)$/)?(o="function",s=!0):r.match(/^%[a-zA-Z][a-zA-Z0-9_]*$/)?(o="component",s=!0):r.startsWith("#")?(o="user_note",s=!0):r.match(/^@[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_]*)*$/)&&(o="reference",s=!0);if(s){let l=O.widget({widget:new fx(o,i),side:-1}),a=t.match(/^(\s*)/),u=a?a[1].length:0;n.push(l)}return n}var JU=X.fromClass(class{constructor(t){this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){let e=new Fe,n=t.state.doc;for(let r=1;r<=n.lines;r++){let i=n.line(r),o=QU(i.text,r);for(let s of o){let l=i.text.match(/^(\s*)/),a=l?l[1].length:0,u=i.from+a;e.add(u,u,s)}}return e.finish()}},{decorations:t=>t.decorations});function mI(){return JU}var dx=V.define(),px=V.define(),mx=V.define(),yI=re.define({create(){return[]},update(t,e){for(let n of e.effects){if(n.is(dx))return n.value.map((r,i)=>({...r,id:r.id||`change-${Date.now()}-${i}`}));if(n.is(px))return[];if(n.is(mx))return console.log("rejecting change",t.find(r=>r.id===n.value.changeId)),t.filter(r=>r.id!==n.value.changeId)}return t}}),eV=O.line({class:"cm-feedbackAddedLine",attributes:{"data-feedback-type":"added"}}),tV=O.line({class:"cm-feedbackModifiedLine",attributes:{"data-feedback-type":"modified"}}),nV=O.line({class:"cm-feedbackRenamedLine",attributes:{"data-feedback-type":"renamed"}}),rV=O.line({class:"cm-feedbackMovedLine",attributes:{"data-feedback-type":"moved"}}),iV=O.line({class:"cm-feedbackRefactoredLine",attributes:{"data-feedback-type":"refactored"}}),oV=new class extends Qe{constructor(){super(...arguments);this.elementClass="cm-feedbackAddedGutter"}},sV=new class extends Qe{constructor(){super(...arguments);this.elementClass="cm-feedbackModifiedGutter"}},lV=new class extends Qe{constructor(){super(...arguments);this.elementClass="cm-feedbackRemovedGutter"}},aV=new class extends Qe{constructor(){super(...arguments);this.elementClass="cm-feedbackRenamedGutter"}},uV=new class extends Qe{constructor(){super(...arguments);this.elementClass="cm-feedbackMovedGutter"}},cV=new class extends Qe{constructor(){super(...arguments);this.elementClass="cm-feedbackRefactoredGutter"}},hx=class extends He{constructor(n,r,i,o){super();this.content=n;this.elementName=r;this.changeId=i;this.view=o}toDOM(n){let r=document.createElement("div");r.className="cm-feedbackDeletedChunk";let i=r.appendChild(document.createElement("div"));i.className="cm-feedbackButtonContainer";let o=i.appendChild(document.createElement("button"));if(o.className="cm-feedbackRejectButton",o.textContent="\u2715",o.title="Restore this content",o.onclick=s=>{s.preventDefault(),s.stopPropagation(),console.log("rejecting change",this.changeId),this.view.dispatch({effects:mx.of({changeId:this.changeId})}),window.dispatchEvent(new CustomEvent("feedbackChangeRejected",{detail:{changeId:this.changeId,type:"remove",content:this.content,elementName:this.elementName}}))},this.content.trim()){let s=r.appendChild(document.createElement("div"));s.className="cm-feedbackDeletedContent",this.content.split(`
`).forEach((a,u)=>{u>0&&s.appendChild(document.createElement("br"));let c=s.appendChild(document.createElement("del"));c.className="cm-feedbackDeletedText",c.textContent=a})}return r}get estimatedHeight(){let n=this.content.split(`
`).length;return Math.max(40,n*20+30)}},as=class extends He{constructor(n,r,i,o){super();this.changeType=n;this.changeId=r;this.view=i;this.originalContent=o}toDOM(n){let r=document.createElement("div");r.className="cm-feedbackHoverButton";let i=r.appendChild(document.createElement("button"));switch(i.className="cm-feedbackRejectButton",this.changeType){case"add":i.textContent="\u2715",i.title="Remove this addition";break;case"modify":i.textContent="\u21B6",i.title="Revert this change";break;case"rename":i.textContent="\u21B6",i.title=`Revert rename (was: ${this.originalContent||"unknown"})`;break;case"move":i.textContent="\u21B6",i.title=`Revert move (from: ${this.originalContent||"unknown"})`;break;case"refactor":i.textContent="\u21B6",i.title=`Revert refactor (${this.originalContent||"refactor"})`;break}return i.onclick=o=>{o.preventDefault(),o.stopPropagation(),this.view.dispatch({effects:mx.of({changeId:this.changeId})}),window.dispatchEvent(new CustomEvent("feedbackChangeRejected",{detail:{changeId:this.changeId,type:this.changeType,originalContent:this.originalContent}}))},r}get estimatedHeight(){return 0}};function fV(t,e){let n=t.toString().split(`
`);if(e.lineNumber&&e.lineNumber>0&&e.lineNumber<=n.length)return e.lineNumber;let r=e.element,i=[];switch(r.type){case"component":i.push(`%${r.name}`);break;case"function":i.push(`$${r.name}()`);break;case"file":if(i.push(r.name),r.path){let o=r.path.split("/"),s=o[o.length-1];s!==r.name&&i.push(s)}break;case"directory":if(i.push(`/${r.name}`),r.path){let o=r.path.split("/").pop();o&&o!==r.name&&i.push(`/${o}`)}break;case"reference":i.push(`@${r.name}`),r.path&&i.push(`@${r.path}`);break;default:i.push(r.name)}if(e.indentLevel!==void 0){for(let o=0;o<n.length;o++){let s=n[o],l=s.match(/^(\s*)/)?.[1]||"",a=s.trim();if(Math.floor(l.length/2)===e.indentLevel){for(let c of i)if(a===c)return o+1}}for(let o=0;o<n.length;o++){let s=n[o],l=s.match(/^(\s*)/)?.[1]||"",a=s.trim();if(Math.floor(l.length/2)===e.indentLevel){for(let c of i)if(a.includes(c))return o+1}}}for(let o=0;o<n.length;o++){let s=n[o].trim();for(let l of i)if(s===l)return o+1}for(let o=0;o<n.length;o++){let s=n[o].trim();for(let l of i)if(s.includes(l))return o+1}return-1}function gI(t){let e=t.state.field(yI),n=t.state.doc,r=new Fe,i=new Fe,o=new Map;for(let u of e){let c=fV(n,u);c>0&&(o.has(c)||o.set(c,[]),o.get(c).push(u))}let s=Array.from(o.keys()).sort((u,c)=>u-c);for(let u of s){let c=o.get(u),f;u<=n.lines?f=n.line(u):f=n.line(n.lines);let d=c.sort((g,x)=>{let v={remove:6,refactor:5,move:4,rename:3,modify:2,add:1};return(v[x.type]||0)-(v[g.type]||0)})[0];switch(d.type){case"add":r.add(f.from,f.from,eV),i.add(f.from,f.from,oV);let g=O.widget({widget:new as("add",d.id||"unknown",t),side:1});r.add(f.to,f.to,g);break;case"modify":r.add(f.from,f.from,tV),i.add(f.from,f.from,sV);let x=O.widget({widget:new as("modify",d.id||"unknown",t,d.originalContent),side:1});r.add(f.to,f.to,x);break;case"rename":r.add(f.from,f.from,nV),i.add(f.from,f.from,aV);let v=O.widget({widget:new as("rename",d.id||"unknown",t,d.fromName),side:1});r.add(f.to,f.to,v);break;case"move":r.add(f.from,f.from,rV),i.add(f.from,f.from,uV);let p=O.widget({widget:new as("move",d.id||"unknown",t,d.fromPath),side:1});r.add(f.to,f.to,p);break;case"refactor":r.add(f.from,f.from,iV),i.add(f.from,f.from,cV);let m=O.widget({widget:new as("refactor",d.id||"unknown",t,d.refactorType),side:1});r.add(f.to,f.to,m);break;case"remove":let y=O.widget({widget:new hx(d.content||"",d.element.name,d.id||"unknown",t),side:1});r.add(f.from,f.from,y),i.add(f.from,f.from,lV);break}}let l=r.finish(),a=i.finish();return{deco:l,gutter:a}}var xI=X.fromClass(class{constructor(t){let e=gI(t);this.deco=e.deco,this.gutter=e.gutter}update(t){if(t.transactions.some(n=>n.effects.some(r=>r.is(dx)||r.is(px)))){let n=gI(t.view);this.deco=n.deco,this.gutter=n.gutter}else t.docChanged&&(this.deco=this.deco.map(t.changes),this.gutter=this.gutter.map(t.changes))}},{decorations:t=>t.deco}),hV=Cn.low(pu({class:"cm-feedbackGutter",markers:t=>t.plugin(xI)?.gutter||te.empty})),dV=R.baseTheme({".cm-feedbackAddedLine":{backgroundColor:"rgba(34, 187, 34, 0.15)",paddingLeft:"4px",position:"relative"},".cm-feedbackModifiedLine":{backgroundColor:"rgba(255, 165, 0, 0.15)",borderLeft:"3px solid rgba(255, 165, 0, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackRenamedLine":{backgroundColor:"rgba(58, 150, 221, 0.15)",borderLeft:"3px solid rgba(58, 150, 221, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackMovedLine":{backgroundColor:"rgba(147, 112, 219, 0.15)",borderLeft:"3px solid rgba(147, 112, 219, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackRefactoredLine":{backgroundColor:"rgba(0, 150, 136, 0.15)",borderLeft:"3px solid rgba(0, 150, 136, 0.6)",paddingLeft:"4px",position:"relative"},".cm-feedbackRemovedLine":{backgroundColor:"rgba(238, 68, 51, 0.1)"},".cm-feedbackDeletedChunk":{backgroundColor:"rgba(238, 68, 51, 0.05)",border:"1px solid rgba(238, 68, 51, 0.2)",borderRadius:"4px",position:"relative"},".cm-feedbackDeletedContent":{fontFamily:"monospace",fontSize:"0.9em",lineHeight:"1.4"},".cm-feedbackDeletedText":{textDecoration:"line-through",color:"#666",opacity:.8},".cm-feedbackGutter":{width:"4px",paddingLeft:"1px"},".cm-feedbackAddedGutter":{background:"#22bb22",borderRadius:"2px"},".cm-feedbackModifiedGutter":{background:"#ffa500",borderRadius:"2px"},".cm-feedbackRenamedGutter":{background:"#3a96dd",borderRadius:"2px"},".cm-feedbackMovedGutter":{background:"#9370db",borderRadius:"2px"},".cm-feedbackRefactoredGutter":{background:"#009688",borderRadius:"2px"},".cm-feedbackRemovedGutter":{background:"#ee4433",borderRadius:"2px"},".cm-feedbackHoverButton":{display:"inline-block",marginLeft:"8px",opacity:"0",transition:"opacity 0.2s ease",pointerEvents:"none",position:"relative",zIndex:"10"},".cm-line:hover .cm-feedbackHoverButton":{opacity:"1",pointerEvents:"auto"},".cm-feedbackAddedLine:hover .cm-feedbackHoverButton, .cm-feedbackModifiedLine:hover .cm-feedbackHoverButton, .cm-feedbackRenamedLine:hover .cm-feedbackHoverButton, .cm-feedbackMovedLine:hover .cm-feedbackHoverButton, .cm-feedbackRefactoredLine:hover .cm-feedbackHoverButton":{opacity:"1",pointerEvents:"auto"},".cm-feedbackRejectButton":{background:"rgba(238, 68, 51, 0.8)",color:"white",border:"none",borderRadius:"3px",padding:"2px 6px",fontSize:"12px",cursor:"pointer",fontWeight:"bold",transition:"background-color 0.2s ease"},".cm-feedbackRejectButton:hover":{background:"rgba(238, 68, 51, 1)"},".cm-feedbackButtonContainer":{position:"absolute",right:"8px",top:"4px",zIndex:"10"},"&dark .cm-feedbackAddedLine":{backgroundColor:"rgba(34, 187, 34, 0.2)"},"&dark .cm-feedbackModifiedLine":{backgroundColor:"rgba(255, 165, 0, 0.2)",borderLeft:"3px solid rgba(255, 165, 0, 0.8)"},"&dark .cm-feedbackRenamedLine":{backgroundColor:"rgba(58, 150, 221, 0.2)",borderLeft:"3px solid rgba(58, 150, 221, 0.8)"},"&dark .cm-feedbackMovedLine":{backgroundColor:"rgba(147, 112, 219, 0.2)",borderLeft:"3px solid rgba(147, 112, 219, 0.8)"},"&dark .cm-feedbackRefactoredLine":{backgroundColor:"rgba(0, 150, 136, 0.2)",borderLeft:"3px solid rgba(0, 150, 136, 0.8)"},"&dark .cm-feedbackRemovedLine":{backgroundColor:"rgba(238, 68, 51, 0.15)"},"&dark .cm-feedbackDeletedChunk":{backgroundColor:"rgba(238, 68, 51, 0.08)",border:"1px solid rgba(238, 68, 51, 0.3)"},"&dark .cm-feedbackDeletedHeader":{color:"#ff6655"},"&dark .cm-feedbackDeletedText":{color:"#999"},"&dark .cm-feedbackAddedGutter":{background:"#44dd44"},"&dark .cm-feedbackModifiedGutter":{background:"#ffbb33"},"&dark .cm-feedbackRenamedGutter":{background:"#5ab4f5"},"&dark .cm-feedbackMovedGutter":{background:"#b399e3"},"&dark .cm-feedbackRefactoredGutter":{background:"#00bfa5"},"&dark .cm-feedbackRemovedGutter":{background:"#ff6655"},"&dark .cm-feedbackRejectButton":{background:"rgba(255, 102, 85, 0.8)"},"&dark .cm-feedbackRejectButton:hover":{background:"rgba(255, 102, 85, 1)"}});function vI(){return[yI,xI,hV,dV]}function gx(t,e){t.dispatch({effects:dx.of(e)})}function Gl(t){t.dispatch({effects:px.of()})}var SI=gt.define(),vx=V.define(),sc=V.define(),yx=V.define(),oc=V.define(),bp=V.define(),$l=re.define({create:()=>({suggestions:[],acceptedSuggestions:new Set,highlightedSuggestion:null,isNavigating:!1,rejectedPatterns:new Set}),update(t,e){let n={...t};for(let r of e.effects)r.is(vx)?(console.log("[FRONTEND] Adding new feedforward suggestions:",r.value.suggestions),n.suggestions=r.value.suggestions,n.acceptedSuggestions=new Set,n.highlightedSuggestion=null,n.isNavigating=!1):r.is(sc)?(n.suggestions=[],n.acceptedSuggestions=new Set,n.highlightedSuggestion=null,n.isNavigating=!1):r.is(yx)?(n.acceptedSuggestions=new Set(n.acceptedSuggestions),n.acceptedSuggestions.add(r.value)):r.is(oc)?n.highlightedSuggestion=r.value:r.is(bp)&&(n.isNavigating=r.value);return e.annotation(SI),n}}),xx=class extends He{constructor(n,r,i,o){super();this.suggestion=n;this.isHighlighted=r;this.isAccepted=i;this.isVisible=o}toDOM(){let n=document.createElement("div");n.className="cm-feedforwardSuggestion",this.isVisible||(n.style.display="none"),this.isAccepted?(n.style.backgroundColor="rgba(34, 197, 94, 0.2)",n.style.borderLeft="3px solid rgba(34, 197, 94, 0.6)",n.style.opacity="0.7"):this.isHighlighted?(n.style.backgroundColor="rgba(14, 165, 233, 0.25)",n.style.borderLeft="3px solid rgba(14, 165, 233, 0.8)"):(n.style.backgroundColor="rgba(156, 163, 175, 0.15)",n.style.borderLeft="3px solid rgba(156, 163, 175, 0.4)");let r="  ".repeat(Math.max(0,this.suggestion.indentLevel)),i=document.createElement("pre");return i.className="cm-feedforwardSuggestionCode",i.textContent=r+this.suggestion.text.trim(),n.appendChild(i),n}eq(n){return this.suggestion.id===n.suggestion.id&&this.isHighlighted===n.isHighlighted&&this.isAccepted===n.isAccepted&&this.isVisible===n.isVisible}get estimatedHeight(){return 24}};function pV(t,e){let n=t.doc,r=Math.min(Math.max(e,1),n.lines);return r<=n.lines?n.line(r).to:n.length}function mV(t){let e="  ".repeat(Math.max(0,t.indentLevel));return t.groupItems&&t.groupItems.length>1?`
`+t.groupItems.map(n=>{let r=n.trim();return e+r}).join(`
`):`
`+e+t.text.trim()}var gV=X.fromClass(class{constructor(t){this.ctrlShiftPressed=!1;this.decorations=O.none,this.setupEventListeners(t),this.buildDecorations(t)}setupEventListeners(t){let e=r=>{if(this.ctrlShiftPressed&&r.preventDefault(),r.altKey&&!this.ctrlShiftPressed)r.preventDefault(),this.ctrlShiftPressed=!0,t.dispatch({effects:bp.of(!0)}),this.buildDecorations(t),this.updateHighlight(t);else if(this.ctrlShiftPressed&&r.key==="Tab"){r.preventDefault();let i=t.state.field($l);if(!i.highlightedSuggestion)return!1;let o=i.suggestions.find(s=>s.id===i.highlightedSuggestion);return o?(t.dispatch({effects:[yx.of(o.id)]}),this.updateHighlight(t),!0):!1}else if(this.ctrlShiftPressed&&r.key==="ArrowRight"){r.preventDefault();let i=t.state.field($l);if(!i.isNavigating||i.suggestions.length===0)return!1;let o=i.suggestions.filter(u=>!i.acceptedSuggestions.has(u.id));if(o.length===0)return!1;let l=((i.highlightedSuggestion?o.findIndex(u=>u.id===i.highlightedSuggestion):-1)+1)%o.length,a=o[l];return a&&(t.dispatch({effects:oc.of(null)}),setTimeout(()=>{t.dispatch({effects:oc.of(a.id)})},10)),!0}},n=r=>{if(!r.altKey&&this.ctrlShiftPressed){r.preventDefault(),this.ctrlShiftPressed=!1;let i=t.state.field($l);i.acceptedSuggestions.size>0?(console.log("Alt key released - inserting all accepted suggestions"),this.insertAllAcceptedSuggestions(t,i)):t.dispatch({effects:bp.of(!1)}),this.buildDecorations(t)}};this.handleKeyDown=e,this.handleKeyUp=n,window.addEventListener("keydown",e),window.addEventListener("keyup",n)}findClosestSuggestion(t,e,n){let r=t.filter(s=>!e.has(s.id));if(r.length===0)return null;let i=r[0],o=Math.abs(i.insertLine-n);for(let s of r){let l=Math.abs(s.insertLine-n);l<o&&(o=l,i=s)}return i}insertAllAcceptedSuggestions(t,e){let n=Array.from(e.acceptedSuggestions).map(o=>e.suggestions.find(s=>s.id===o)).filter(Boolean);if(n.length===0)return;let r=[...n].sort((o,s)=>s.insertLine!==o.insertLine?s.insertLine-o.insertLine:s.sequence!==void 0&&o.sequence!==void 0?o.sequence-s.sequence:s.indentLevel-o.indentLevel),i=null;for(let o of r){let s=pV(t.state,o.insertLine),l=mV(o);t.dispatch({changes:{from:s,to:s,insert:l},annotations:[SI.of(!0)]});let a=s+l.length;i=i===null?a:Math.max(i,a)}i!==null?t.dispatch({selection:E.cursor(i),effects:[sc.of()]}):t.dispatch({effects:[sc.of()]}),console.log("All accepted suggestions inserted successfully")}updateHighlight(t){let e=t.state.field($l);if(e.suggestions.length===0)return;let n=t.state.doc.lineAt(t.state.selection.main.head).number-1,r=this.findClosestSuggestion(e.suggestions,e.acceptedSuggestions,n);r&&t.dispatch({effects:oc.of(r.id)})}update(t){let e=!1;for(let n of t.transactions){for(let r of n.effects)if(r.is(vx)||r.is(sc)||r.is(yx)||r.is(oc)||r.is(bp)){e=!0;break}if(e)break}(e||t.docChanged)&&this.buildDecorations(t.view)}buildDecorations(t,e){if(!e)try{e=t.state.field($l)}catch{this.decorations=O.none;return}if(e.suggestions.length===0){this.decorations=O.none;return}console.log("[FEEDFORWARD] Building decorations for",e.suggestions.length,"suggestions");let n=[];for(let r of e.suggestions){let i=e.acceptedSuggestions.has(r.id),o=e.highlightedSuggestion===r.id,s=!e.isNavigating||o||this.ctrlShiftPressed||i,l=t.state.doc,a=r.insertLine;a=Math.min(Math.max(a,1),l.lines);let u=l.line(a),c=new xx(r,o,i,s),f=O.widget({widget:c,side:1});n.push({decoration:f.range(u.to),position:u.to})}n.sort((r,i)=>r.position-i.position),this.decorations=O.set(n.map(r=>r.decoration)),console.log("[FEEDFORWARD] Built",n.length,"decorations")}destroy(){this.handleKeyDown&&window.removeEventListener("keydown",this.handleKeyDown),this.handleKeyUp&&window.removeEventListener("keyup",this.handleKeyUp)}},{decorations:t=>t.decorations}),yV=R.baseTheme({".cm-feedforwardSuggestion":{margin:"2px 0",padding:"4px 8px",borderRadius:"3px",fontFamily:"inherit",fontSize:"0.95em",lineHeight:"1.3",color:"inherit",position:"relative",transition:"all 0.2s ease"},".cm-feedforwardSuggestionCode":{margin:"0",whiteSpace:"pre",fontFamily:"inherit"},"&dark .cm-feedforwardSuggestion":{color:"rgba(209, 213, 219, 0.9)"}});function kI(){return[$l,gV,yV]}function xV(t,e){t.dispatch({effects:vx.of({suggestions:e,doc:t.state.doc})})}function wI(t){t.dispatch({effects:sc.of()})}function CI(t,e){console.log("[FRONTEND] Applying feedforward suggestions:",e);let n=e.filter(r=>r.id&&r.text&&typeof r.insertLine=="number"&&typeof r.indentLevel=="number");n.length!==e.length&&console.warn("[FRONTEND] Some suggestions were invalid and filtered out"),xV(t,n)}var Sx=V.define(),AI=re.define({create(){return{nodes:{},edges:[]}},update(t,e){for(let n of e.effects)if(n.is(Sx))return n.value;return t}});function bI(t,e){if(e<1||e>t.lines)return{type:null,name:null};let r=t.line(e).text.trim();return r.startsWith("%")?{type:"component",name:r.substring(1)}:r.startsWith("$")&&r.includes("()")?{type:"function",name:r.substring(1,r.indexOf("()"))}:r.match(/^\w+\.\w+$/)?{type:"file",name:r}:r.startsWith("/")?{type:"directory",name:r.substring(1)}:{type:null,name:null}}function EI(t,e,n){for(let r=e;r>=1;r--){let o=t.line(r).text.trim();if(o.match(/^\w+\.\w+$/)){for(let s of Object.keys(n.nodes))if(n.nodes[s].type==="file"&&s.endsWith(o))return s;return o}}return null}function vV(t,e,n,r){let i=new Set,o=n?`${n}:${t}`:t;i.add(o);let s=r.nodes[o];if(!s){for(let[a,u]of Object.entries(r.nodes))if(u.name===t&&u.type===e){i.add(a),u.upstream.forEach(c=>i.add(c)),u.downstream.forEach(c=>i.add(c));break}return i}s.upstream.forEach(a=>i.add(a)),s.downstream.forEach(a=>i.add(a));let l=(a,u)=>{if(u>2)return;let c=r.nodes[a];c&&(c.upstream.forEach(f=>{i.has(f)||(i.add(f),l(f,u+1))}),c.downstream.forEach(f=>{i.has(f)||(i.add(f),l(f,u+1))}))};if(l(o,1),n&&(e==="function"||e==="component")){i.add(n);let a=n.split("/");for(let u=1;u<a.length;u++)i.add(a.slice(0,u).join("/"))}return i}function TI(t){let e=t.state.doc,n=t.state.field(AI),r=t.state.selection.main.head,i=e.lineAt(r).number,o=bI(e,i);if(!o.type||!o.name)return O.none;if(Object.keys(n.nodes).length===0)return O.none;let s=EI(e,i,n),l=vV(o.name,o.type,s,n),a=new Fe,u=0,c=0;for(let f=1;f<=e.lines;f++){let h=e.line(f),d=bI(e,f);if(!d.type||!d.name)continue;let g=!1,x=EI(e,f,n),v=[x?`${x}:${d.name}`:d.name,x||"",d.name];for(let p of v)if(p&&l.has(p)){g=!0,c++;break}!g&&f!==i&&(a.add(h.from,h.from,O.line({class:"cm-dimmedLine",attributes:{"data-dependency-dimmed":"true"}})),u++)}return a.finish()}var SV=X.fromClass(class{constructor(t){this.decorations=TI(t)}update(t){(t.selectionSet||t.transactions.some(e=>e.effects.some(n=>n.is(Sx))))&&(this.decorations=TI(t.view))}},{decorations:t=>t.decorations}),kV=R.baseTheme({".cm-dimmedLine":{opacity:"0.6",transition:"opacity 0.2s ease"}});function RI(){return[AI,SV,kV]}function kx(t,e){t.dispatch({effects:Sx.of(e)})}var fi=hr(cl()),us=acquireVsCodeApi();var OI=()=>{let[t,e]=(0,rt.useState)(""),[n,r]=(0,rt.useState)([]),[i,o]=(0,rt.useState)([]),[s,l]=(0,rt.useState)(null),a=(0,rt.useRef)(null),u=(0,rt.useRef)(null),c=()=>a.current?.view??null,f=(0,rt.useCallback)(m=>{u.current&&clearTimeout(u.current),us.postMessage({type:"cancelFeedforward"}),u.current=setTimeout(()=>{let y=c();if(!y)return;let S=y.state.selection.main.head,k=y.state.doc.lineAt(S).number-1,w=S-y.state.doc.line(k+1).from;us.postMessage({type:"requestFeedforward",content:m,cursorLine:k,cursorColumn:w,parsedSchema:n})},800)},[n]);(0,rt.useEffect)(()=>{let m=y=>{let S=y.data,k=c();switch(S.type){case"contentUpdate":e(S.content);break;case"codebaseScanned":if(r(S.parsedSchema||[]),o(S.snapshot?.files||[]),S.snapshot?.dependencyGraph){l(S.snapshot.dependencyGraph);let w=c();w&&kx(w,S.snapshot.dependencyGraph)}break;case"feedbackChanges":if(k&&S.changes){let w=S.changes;gx(k,w)}break;case"showFeedbackDecorations":if(k&&S.changes){let w=S.changes;gx(k,w)}break;case"clearFeedbackDecorations":k&&Gl(k);break;case"clearFeedback":k&&Gl(k);break;case"feedforwardSuggestions":if(k&&S.suggestions){let w=S.suggestions;CI(k,w)}break;case"clearSuggestions":k&&wI(k);break}};return window.addEventListener("message",m),()=>{window.removeEventListener("message",m),u.current&&clearTimeout(u.current)}},[n,i]),(0,rt.useEffect)(()=>{if(s){let m=c();m&&kx(m,s)}},[s]);let h=(0,rt.useCallback)(()=>{us.postMessage({type:"syncCodebase"})},[]),d=(0,rt.useCallback)(()=>{let m=c();m&&Gl(m),us.postMessage({type:"generateCode"})},[]),g=(0,rt.useCallback)(()=>{let m=c();m&&Gl(m),us.postMessage({type:"mockGenerateCode"})},[]),x=(0,rt.useCallback)(()=>{let m=c();m&&Gl(m),us.postMessage({type:"clearAllFeedback"})},[]),v=(0,rt.useCallback)(m=>{e(m),us.postMessage({type:"contentChanged",content:m})},[f]),p=rt.default.useMemo(()=>[mI(),cI(),...pI(),...vI(),...kI(),...RI()],[]);return(0,fi.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-editor-background)"},children:[(0,fi.jsxs)("div",{style:{padding:"4px 8px",borderBottom:"1px solid var(--vscode-panel-border)",display:"flex",gap:"8px",alignItems:"center"},children:[(0,fi.jsx)("button",{onClick:h,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Sync"}),(0,fi.jsx)("button",{onClick:d,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Generate"}),(0,fi.jsx)("button",{onClick:g,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",borderRadius:"2px",cursor:"pointer"},title:"Mock generation for testing (no OpenCode)",children:"Mock Gen"}),(0,fi.jsx)("button",{onClick:x,style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"1px solid var(--vscode-button-border)",borderRadius:"2px",cursor:"pointer"},title:"Clear all feedback decorations",children:"Clear Feedback"})]}),(0,fi.jsx)(lA,{ref:a,value:t,onChange:v,extensions:p,style:{flex:1,fontSize:"14px",lineHeight:"1.6",height:"100%"},basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!1,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,searchKeymap:!0,foldKeymap:!0,completionKeymap:!1,lintKeymap:!0}})]})};var wx=hr(cl()),wV=MI.default.createRoot(document.getElementById("root"));wV.render((0,wx.jsx)(II.default.StrictMode,{children:(0,wx.jsx)(OI,{})}));})();
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
